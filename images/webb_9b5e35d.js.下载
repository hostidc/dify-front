!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("@baidu/webb/webb2.min",["require"],e):"object"==typeof exports?exports.webb2=e():t.webb2=e()}("undefined"!=typeof self?self:this,function(){return o={},n.m=i=[function(t,e,i){"use strict";function o(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}function n(t,e){var i=["webkit",
"moz","ms","o"];if(e in t)return e;for(var n=0;n<i.length;n++){var o=""+i[n]+e;if(o in t)return o}return""}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.sendLog=function(t,e){var i=new Image,n=o();(window[n]=i).onload=function(){e&&e(),delete window[n]},i.onerror=function(t){e&&e(t),
delete window[n]},i.src=t},e.guid=o,e.extend=function(t,e){if(!e||"object"!==(void 0===e?"undefined":r(e)))return t;for(var i=Object.keys(e),n=i.length;n--;)t[i[n]]=e[i[n]];return t},e.stringify=function(i){return Object.keys(i).map(function(t){var e=i[t];return void 0===e?e="":"string"!=typeof e&&(e=JSON.stringify(e)),encodeURIComponent(t)+"="+encodeURIComponent(e)}).join("&")},e.getProp=n,e.getScrollInfo=function(){return{x:document.body.scrollLeft||document.documentElement.scrollLeft,
y:document.body.scrollTop||document.documentElement.scrollTop}},e.bindVisibilityChangeEvent=function(t){s&&(document.addEventListener(a,t),document.addEventListener(u,t))},e.disposeVisibilityChangeEvent=function(t){document.removeEventListener(a,t),document.removeEventListener(u,t)},e.getPageHiddenValue=function(t){return t&&"hidden"in t?t.hidden:document[s]},e.assign=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},
i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(i).forEach(function(t){e[t]=i[t]}),e},e.matchesPolyfill=function(){if(Element&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}},e.getUrlFromStyle=function(t){var e=window.getComputedStyle(t)["background-image"];return e&&"none"!==e&&/^url\(/i.test(e)?e.replace(/^url\(['"]?([^'"]+)['"]?\)/i,"$1"):""}
,e.isUrl=function(t){return t&&"string"==typeof t&&/^\s?(http:|https:)?\/\//.test(t)},e.afterReady=function(t,e){/complete|loaded|interactive/.test(document.readyState)&&document.body?t():document.addEventListener("DOMContentLoaded",function(){e?t():setTimeout(function(){t()},0)})};var s=n(document,"hidden"),a=s.replace(/hidden/i,"visibilitychange"),u="baiduboxappvisibilitychange"},function(t,e,i){"use strict";function o(t,e){var i=t.colno||window.event&&window.event.errorCharacter||0,
n=t.error||{};return(0,r.assign)({msg:t.message,ln:t.lineno,file:t.filename,col:i,stack:n.stack},e)}Object.defineProperty(e,"__esModule",{value:!0});var r=i(0);e.default={initException:function(){this.exceptionDim=null,this.exceptionInfo={},this.onerrorCb=function(t){var e=this,i=o(t,this.exceptionInfo);setTimeout(function(){e.send("et_js",i,e.exceptionDim)},0)}.bind(this)},startJsExceptionLog:function(t,e){this.exceptionInfo=(0,r.assign)({},t),this.exceptionDim=(0,r.assign)({},e),
window.removeEventListener("error",this.onerrorCb),window.addEventListener("error",this.onerrorCb)},startResExceptionLog:function(t,e){},stopJsExceptionLog:function(){window.removeEventListener("error",this.onerrorCb)},stopResExceptionLog:function(){},sendExceptionLog:function(t,e){this.send("et_comm",t,e)},sendJSError:function(t,e,i,n){e=o(t,e||{}),this.send("et_js",e,i,null,n)},destroyJsException:function(){this.stopJsExceptionLog(),this.exceptionDim=null,this.exceptionInfo=null,
this.onerrorCb=null}},t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0);e.default={sendBaseDispLog:function(t,e,i){var n=document.documentElement,o={size:{doc:{w:n.scrollWidth,h:n.scrollHeight},wind:{w:n.clientWidth,h:n.clientHeight},scr:{w:screen.width,h:screen.height}},dpr:window.devicePixelRatio||1};t&&(o=(0,r.assign)(o,t)),this.send("disp_comm",o,e,null,i)},sendDispLog:function(t,e,i){var n;n=t instanceof Array?t:(0,r.assign)({},t),
this.send("disp_content",n,e,null,i)}},t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d=i(0);e.default={sendBasePfLog:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],i=arguments[2],n=window.performance&&performance.timing||{},o=n.navigationStart,r=n.responseStart,s={dns:n.domainLookupEnd-n.domainLookupStart,tcp:n.connectEnd-n.connectStart,req:r-n.requestStart,res:n.responseEnd-r,
dct:n.domComplete-n.domLoading,ld:n.loadEventEnd-n.loadEventStart},a=window.__webbbrige__||{},u=a.whiteScreenTime,c=a.firstScreenTime;u&&(s=(0,d.assign)(s,{wst:u-o})),c&&(s=(0,d.assign)(s,{fst:c-o})),s=(0,d.assign)(s,t),this.send("pf_comm",s,e,null,i)},sendPfLog:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],i=arguments[2],n=(0,d.assign)({},t);this.send("pf_comm",n,e,null,i)}},t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,
"__esModule",{value:!0}),e.default={sendCountLog:function(t,e){this.send("count_comm",t,e)}},t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={sendDistributeLog:function(t,e){this.send("dist_comm",t,e)}},t.exports=e.default},function(t,e,i){"use strict";function o(t){return-1<["et","pf","dist","count"].indexOf(t.split("_")[0])}Object.defineProperty(e,"__esModule",{value:!0});var n,
r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(t,e,i){return e&&w(t.prototype,e),i&&w(t,i),t},d=i(0),a=i(7),u=(n=a)&&n.__esModule?n:{default:n},c="https://sp1.baidu.com/5b1ZeDe5KgQFm2e88IuM_a/mwb2.gif",h=navigator.userAgent.toLowerCase().match(/cpu iphone os (.*?)_/),l=h&&h[2]&&+h[2]<14,p="",f={pf:"perf",dist:"dist",count:"count",
et:"except"},m={ignoreSample:!1,saveLocal:!1},v=!1,g=new u.default({storage:"localstorage",maxRecordLen:300,compress:"no",onSave:function(t){try{var e=new b({pf_comm:{sample:-1!==(document.cookie||"").indexOf("webbtest=1")?1:.001},et_comm:{sample:-1!==(document.cookie||"").indexOf("webbtest=1")?1:.01},lid:p,pid:"19_103"});if(t.error&&e.send("et_comm",{msg:t.error.message,stack:t.error.stack},{path:location.pathname},{group:"common"}),v)return;v=!0,e.send("pf_comm",{lsCost:t.cost,lsLen:t.length},
{path:location.pathname},{group:"common"})}catch(t){console.error(t)}},onFlush:function(t){t.length&&function(t){var e=c+"?"+(0,d.stringify)({pid:"1_1",type:"except",group:"localcache"}),i=JSON.stringify({pid:"1_1",type:"except",group:"localcache",ts:Date.now(),lid:p,info:{msg:"webb sdk localcache",pageUrl:location.href,log:JSON.stringify(t)}});if(l||!navigator.sendBeacon||!navigator.sendBeacon(e,i)){if(!window.fetch)return;fetch(e,{method:"POST",credentials:"include",headers:{
"Content-Type":"application/json"},body:i})}}(t)}}),b=(s(y,null,[{key:"setGlobalOption",value:function(t){m=(0,d.extend)(m,t)}}]),s(y,[{key:"updateCurSample",value:function(){var i=this;Object.keys(this.options).forEach(function(t){var e=i.options[t];e&&e.sample&&void 0===e.curSample&&(i.options[t].curSample=Math.random()<e.sample?1:0)})}},{key:"validateOptions",value:function(e){var t=["pid","lid"];if("object"!==(void 0===e?"undefined":r(e)))throw new Error("Options must be an object!");if(
!t.every(function(t){return t in e}))throw new Error("Options "+t.join(", ")+" required")}},{key:"updateOption",value:function(t){this.options=(0,d.extend)(this.options,t),this.updateCurSample()}},{key:"wrapCommonParam",value:function(t,e,i){var n={pid:this.options.pid,lid:this.options.lid,ts:Date.now(),type:t,info:e,ext:this.options.ext?this.options.ext:{}};return o(t)&&(n.type=t.split("_")[0],n.type=f[n.type]?f[n.type]:n.type,n.group=t.split("_")[1]||"common",
n.group="comm"===n.group?"common":n.group),i&&(n.dim=i),n}},{key:"hitSample",value:function(t){if(m.ignoreSample)return 1;var e=this.options[t];return e?"sample"in e?"eachreq"===e.sampleType?e.sample&&Math.random()<=e.sample?1:0:e.curSample:"eachreq"===this.options.sampleType?this.options.sample&&Math.random()<=this.options.sample?1:0:this.options.curSample:0}},{key:"getLogHost",value:function(t){var e=this.options;return e[t]&&e[t].logHost||e.logHost?e[t]&&e[t].logHost?e[t].logHost:e.logHost:o(
t)?c:"https://sp1.baidu.com/5b1ZeDe5KgQFm2e88IuM_a/webb.gif"}},{key:"saveLocal",value:function(t){0!==t.type.indexOf("et_")&&0!==t.type.indexOf("except")&&0!==t.type.indexOf("pf_")&&0!==t.type.indexOf("perf")||g&&g.addLog(t)}},{key:"flushLog",value:function(){g&&g.flushLog()}},{key:"send",value:function(t,e,i,n,o){"function"==typeof i&&(o=n,n=i,i=null);var r=this.wrapCommonParam(t,e,i);(0,d.extend)(r,o),r&&r.ext?r.ext.path=location.pathname:r&&!r.ext&&(r.ext={path:location.pathname})
;var s=this.extendOptions&&this.extendOptions.onlySaveLocal,a=this.extendOptions&&this.extendOptions.saveLocal;if((!(this.options.saveLocal||a||s)||(this.saveLocal(r),!s))&&this.hitSample(t)){var u=(0,d.guid)(),c=window[u]=new Image;c.onload=function(t){n&&("function"==typeof n?n(t):n.successCb&&"function"==typeof n.successCb&&n.successCb(t)),delete window[u]},c.onerror=function(t){n&&n.errorCb&&"function"==typeof n.errorCb&&n.errorCb(t),delete window[u]},c.src=this.getLogHost(t)+"?"+(0,
d.stringify)(r)}}},{key:"sendBeacon",value:function(t,e,i,n){var o=this.wrapCommonParam(t,e,i);(0,d.extend)(o,n),o&&o.ext?o.ext.path=location.pathname:o&&!o.ext&&(o.ext={path:location.pathname});var r=this.extendOptions&&this.extendOptions.onlySaveLocal,s=this.extendOptions&&this.extendOptions.saveLocal;(this.options.saveLocal||s||r)&&(this.saveLocal(o),r)||!this.hitSample(t)||navigator.sendBeacon&&navigator.sendBeacon(this.getLogHost(t)+"?"+(0,d.stringify)(o))||this.send(t,e,i)}},{
key:"destroy",value:function(){this.destroyJsException(),this.destroyIaMonitor(),this.destroyMediaTime()}}]),y);function y(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y);var e={sample:0,saveLocal:m.saveLocal};this.validateOptions(t),p=t.lid||m.lid,this.options=(0,d.extend)(e,t),this.random=Math.random(),this.options.sample&&(this.options.curSample=Math.random()<this.options.sample?1:0),this.updateCurSample(),this.initException(),
this.options.ia&&this.initIa&&this.initIa()}function w(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}e.default=b,t.exports=e.default},function(t,e,i){t.exports=function(){"use strict";function n(t,e){function i(){this.constructor=t}b(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function o(t){for(var e=[],i={},n=0,o=t;n<o.length;n++){var r=o[n]
;null==i[r]?i[r]=1:i[r]++}for(var s=0,a=Object.entries(i);s<a.length;s++){var u=a[s],c=u[0],d=u[1];e.push(new y(c,d))}return e}function r(t){for(var e=function(t,e){return t.weight-e.weight};t.length>1;){t.sort(e);var i=t.shift(),n=t.shift();if(i&&n){var o=new y(null,i.weight+n.weight);o.left=i,o.right=n,t.unshift(o)}}return t.shift()}function s(t){function o(t,e,i){var n=[].concat(i);n.push(e),null!=t&&(null==t.data?(o(t.left,"0",n),o(t.right,"1",n)):r[t.data]=n.join(""))}if(null==t)return null
;var r={};return o(t,"",[]),r}function a(t,e){for(var i=[],n=0,o=t;n<o.length;n++){var r=o[n];i.push(e[r])}return i}function u(t){for(var e=t.join(""),i=Math.ceil(e.length/8),n=new Array(i+1),o=0,r="",s=0;s<e.length;s+=8)r=e.substring(s,s+8),n[o]=parseInt(r,2),o++;return n[o]=r.length,n}function c(t){var e=o(t),i=r(e),n=s(i);return{result:u(a(t,n)),codes:n}}function v(t,e){t&&(e|=256);var i=Number(e).toString(2);return t?i.substring(i.length-8):i}function i(t,e){for(var i=[],n=0;n<e.length-1;n++
){var o=n!==e.length-2;i.push(v(o,e[n]))}var r=i[i.length-1];r="00000000".substring(8-(e[e.length-1]-r.length))+r,i[i.length-1]=r;for(var s={},a=0,u=Object.entries(t);a<u.length;a++){var c=u[a],d=c[0];s[c[1]]=d}for(var h=i.join(""),l=[],p=h.length,n=0;n<p;){for(var f=1,o=!0,m=null;o&&n+f<=p;){var d=h.substring(n,n+f);if(""===d)break;m=s[d],m?o=!1:f++}l.push(parseInt(m)),n+=f}return l}function d(t){for(var e=[],i=0;i<t.length;i++)e.push(t.charCodeAt(i));return e}function h(t){for(var e="",i=0,
n=t;i<n.length;i++){var o=n[i];e+=String.fromCharCode(o)}return e}function e(t){var e=d(t),i=c(e),n=i.result;return{codes:i.codes,result:h(n)}}function l(t,e){return h(i(t,d(e)))}function p(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(Object.assign||function(t){for(var e=void 0,i=1,n=arguments.length;i<n;i++){e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t}).apply(this,t)}function f(t){for(var e="",i=0;i<t.length;i++){
var n=t.charCodeAt(i);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e}function m(t){for(var e="",i=0,n=0,o=0,r=0;i<t.length;)n=t.charCodeAt(i),n<128?(e+=String.fromCharCode(n),i++):n>191&&n<224?(o=t.charCodeAt(i+1),e+=String.fromCharCode((31&n)<<6|63&o),i+=2):(o=t.charCodeAt(i+1),r=t.charCodeAt(i+2),
e+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&r),i+=3);return e}function g(t,e){if(void 0===e&&(e=!1),!t)return"";e||(t=f(t));var i,n,o,r={},s=[],a=t.charAt(0),u=a,c=u,d=256,h=function(){s.push(a.length>1?String.fromCharCode(r[a]):a)};for(e&&s.push(a),i=1,o;i<t.length;i++)n=t.charAt(i),e?(o=t.charCodeAt(i),a=o<256?n:r[o]||a+u,s.push(a),u=a.charAt(0),r[d++]=c+u,c=a):r.hasOwnProperty(a+n)?a+=n:(h(),r[a+n]=d++,a=n);e||h();var l=s.join("");return e&&(l=m(l)),l}var b=function(t,e){return(
b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},y=function(){function t(t,e){this.data=t,this.weight=e}return t.prototype.preOrder=function(t){t.push(this),this.left&&this.left.preOrder(t),this.right&&this.right.preOrder(t)},t}(),w=function(){function t(){}return t.prototype.set=function(t,e){},t.prototype.get=function(t,e){},t.prototype.rm=function(t){},t}(),S=function(t){function e(){
return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.isSupport=function(){return!!window.localStorage},e.prototype.set=function(t,e){try{localStorage.setItem(t,e)}catch(t){console.error(t)}},e.prototype.get=function(t,e){var i=null;try{i=localStorage.getItem(t)}catch(t){console.error(t)}e&&e(i)},e.prototype.rm=function(t){try{localStorage.removeItem(t)}catch(t){console.error(t)}},e}(w),_=function(i){function t(){var e=i.call(this)||this;e.databaseName="spyLC",e.db=null,e.setQueue=[],
e.getQueue=[];var t=window.indexedDB.open(e.databaseName);return t.onupgradeneeded=function(t){e.db=t.target&&t.target.result,e.db&&!e.db.objectStoreNames.contains(e.databaseName)&&e.db.createObjectStore(e.databaseName,{keyPath:"key"}),e.runQueueTask()},t.onsuccess=function(){e.db=t.result,e.runQueueTask()},e}return n(t,i),t.isSupport=function(){return!!window.indexedDB},t.prototype.set=function(t,e){if(!this.db)return void this.setQueue.push({key:t,value:e});this.db.transaction([
this.databaseName],"readwrite").objectStore(this.databaseName).add({key:t,value:e})},t.prototype.get=function(t,e){if(!this.db)return void this.getQueue.push({key:t,cb:e});var i=this.db.transaction([this.databaseName]),n=i.objectStore(this.databaseName),o=n.get(t);o.onsuccess=function(){var t=o.result?o.result:{value:""};e(t.value)}},t.prototype.runQueueTask=function(){var e=this;this.setQueue.forEach(function(t){e.set(t.key,t.value)}),this.getQueue.forEach(function(t){e.get(t.key,t.cb)})},t}(w)
;return function(){function t(t){void 0===t&&(t={}),this.tmpList=[],this.option=p({defaultTrigger:!0,compress:"lzw",key:"SpyLocalCache",interval:500,maxRecordLen:30,onFlush:function(){},onSave:function(){},storage:_.isSupport()?"indexedDB":S.isSupport()?"localstorage":"empty"},t),this.load=this.load.bind(this),this.init()}return t.prototype.init=function(){"indexedDB"===this.option.storage?this.storage=new _:"localstorage"===this.option.storage?this.storage=new S:this.storage=new w,
"complete"===document.readyState?this.load():window.addEventListener("load",this.load)},t.prototype.load=function(){location.search.indexOf("_FlushLogLocalCache=1")>-1&&this.option.defaultTrigger&&this.flushLog()},t.prototype.addLog=function(t){var e=this;t=JSON.stringify(t),this.tmpList.push(t),this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){e.save()},this.option.interval)},t.prototype.getData=function(n){var o=this;try{this.storage.get(this.option.key,function(i){
i?o.storage.get(o.option.key+"Codes",function(t){var e=[];try{t&&(t=JSON.parse(t));e=o.unzip(i,t).split("\n")}catch(t){console.error(t)}n(e)}):n([])})}catch(o){console.error(o),n([])}},t.prototype.save=function(){var c=this,d=Date.now();this.getData(function(t){var e=c.option.maxRecordLen-1,i=t.length>e?t.slice(t.length-e,t.length):t,n=i.concat(c.tmpList),o=n.join("\n"),r=null,s=0;try{var a=c.zip(o),u="";a.codes?(u=JSON.stringify(a.codes),c.storage.set(c.option.key+"Codes",u)):c.storage.rm(
c.option.key+"Codes"),c.storage.set(c.option.key,a.result),s=a.result.length}catch(t){r=t,console.error(t)}c.tmpList=[],c.option.onSave&&c.option.onSave({cost:Date.now()-d,length:s/1024,list:n,error:r})})},t.prototype.flushLog=function(){var i=this;this.getData(function(t){try{for(var e=0;e<t.length;e++)t[e]=JSON.parse(t[e])}catch(e){t=[],i.storage.rm(i.option.key),console.error(e)}for(var e=0;e<i.tmpList.length;e++)t.push(JSON.parse(i.tmpList[e]));i.option.onFlush&&i.option.onFlush(t)})},
t.prototype.zip=function(t){return"lzw"===this.option.compress?{codes:null,result:g(t)}:"huffman"===this.option.compress?e(t):{codes:null,result:t}},t.prototype.unzip=function(t,e){return"lzw"===this.option.compress?g(t,!0):"huffman"===this.option.compress?l(e,t):t},t}()}()},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(9)),r=n(i(1)),s=n(i(10)),a=n(i(2)),u=n(i(3)),c=n(i(4)),d=n(i(5)),h=n(i(6)),l=i(0);(0,
l.extend)(h.default.prototype,o.default),(0,l.extend)(h.default.prototype,r.default),(0,l.extend)(h.default.prototype,s.default),(0,l.extend)(h.default.prototype,a.default),(0,l.extend)(h.default.prototype,u.default),(0,l.extend)(h.default.prototype,c.default),(0,l.extend)(h.default.prototype,d.default),e.default=h.default,t.exports=e.default},function(t,e,i){"use strict";function n(t,e){return-1!==t.indexOf(e)}Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),r=["bf","scroll","resize"
];e.default={initIa:function(){this.iaTimer=null,this.curSpeed=4e3,this.iaQueue=[],this.lastQueueLen=-1,this.iaDim={},this.iaSendSwitch=!1,this.scrollCb=this.sendScrollLog.bind(this),this.resizeCb=this.sendResizeLog.bind(this),this.iaVisibilityCb=function(t){(0,o.getPageHiddenValue)(t)?this.iaHideCb(t):this.iaShowCb(t)}.bind(this),this.iaHideCb=this.iaHideCb.bind(this),this.iaShowCb=this.iaShowCb.bind(this)},flushIaQueue:function(){var t=[].concat(this.iaQueue);for(this.iaQueue=[];t.length;){
var e=t.splice(0,6);this.sendBeacon("ia",e,this.iaDim)}clearTimeout(this.iaTimer),this.startCycle()},startCycle:function(){var e=this;this.iaTimer=setTimeout(function(){var t=e.iaQueue.length;-1===e.lastQueueLen?e.lastQueueLen=t:e.lastQueueLen&&2<=t/e.lastQueueLen&&2e3<e.curSpeed?e.curSpeed-=1e3:t&&2<=e.lastQueueLen/t&&e.curSpeed<6e3?e.curSpeed+=1e3:!t&&e.curSpeed<6e3?e.curSpeed+=1e3:t&&!e.lastQueueLen&&2e3<e.curSpeed?e.curSpeed-=1e3:!t&&e.curSpeed<6e3&&(e.curSpeed+=1e3),e.lastQueueLen=t,
e.flushIaQueue(),clearTimeout(e.iaTimer),e.startCycle()},this.curSpeed)},startIaMonitor:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(this.options&&this.options.ia){this.iaDim=(0,o.assign)(this.iaDim,t),this.resetIaSwitch(),this.iaShowCb(null,!0),this.removeMonitorEvents(),clearTimeout(this.iaTimer),this.startCycle(),this.monitorItems=r;var e=[]
;this.options&&this.options.ia&&this.options.ia.iaMonitorItems?e=this.options.ia.iaMonitorItems:this.options&&this.options.iaMonitorItems&&(e=this.options.iaMonitorItems),e&&Array.isArray(e)&&e.length&&(this.monitorItems=e.filter(function(t){return n(r,t)}),this.monitorItems.length||(this.monitorItems=r)),this.bindMonitorEvents()}},stopIaMonitor:function(){this.options&&this.options.ia&&(this.iaHideCb(null,!0),this.flushIaQueue(),this.removeMonitorEvents(),clearTimeout(this.iaTimer))},
sendScrollLog:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.scrollLogLock||(this.scrollLogLock=!0,setTimeout(function(){t.scrollLogLock=!1},500),0<=e.x&&0<=e.y||(e=(0,o.getScrollInfo)()),this.iaQueue.push({k:"scroll",x:e.x,y:e.y,t:(new Date).getTime(),ele:e.scrollEle||"window"}))},sendResizeLog:function(){var t=this;this.resizeLogLock||(this.resizeLogLock=!0,setTimeout(function(){t.resizeLogLock=!1},500),setTimeout(function(){t.iaQueue.push({k:"resize",
w:window.innerWidth||document.documentElement.clientWidth,h:window.innerHeight||document.documentElement.clientHeight,t:(new Date).getTime()})},50))},bindMonitorEvents:function(){var t=this.monitorItems;n(t,"bf")&&((0,o.getProp)(document,"hidden")&&(0,o.bindVisibilityChangeEvent)(this.iaVisibilityCb),window.addEventListener("beforeunload",this.iaHideCb,!1),window.addEventListener("unload",this.iaHideCb,!1),window.addEventListener("pagehide",this.iaHideCb,!1),window.addEventListener("pageshow",
this.iaShowCb,!1)),n(t,"scroll")&&window.addEventListener("scroll",this.scrollCb),n(t,"resize")&&window.addEventListener("resize",this.resizeCb)},removeMonitorEvents:function(){window.removeEventListener("scroll",this.scrollCb),window.removeEventListener("resize",this.resizeCb),(0,o.disposeVisibilityChangeEvent)(this.iaVisibilityCb),window.removeEventListener("beforeunload",this.iaHideCb,!1),window.removeEventListener("unload",this.iaHideCb,!1),window.removeEventListener("pagehide",this.iaHideCb
,!1),window.removeEventListener("pageshow",this.iaShowCb,!1)},updateIaDim:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.iaDim=t},resetIaSwitch:function(){this.iaSendSwitch=!1},convertIaSwitch:function(){this.iaSendSwitch=!this.iaSendSwitch},iaHideCb:function(t,e){if(this.iaSendSwitch||e){var i=t?t.type:"";e&&(i="manual"),this.convertIaSwitch(),this.iaQueue.push({k:"blur",trigger:i,t:(new Date).getTime()}),this.flushIaQueue()}},iaShowCb:function(t,e){if(
!this.iaSendSwitch||e){var i=t?t.type:"";e&&(i="manual"),this.convertIaSwitch(),this.iaQueue.push({k:"focus",trigger:i,t:(new Date).getTime()}),this.flushIaQueue()}},destroyIaMonitor:function(){this.removeMonitorEvents(),clearTimeout(this.iaTimer),this.iaTimer=null,this.curSpeed=null,this.iaQueue=null,this.lastQueueLen=null,this.iaDim=null,this.scrollCb=null,this.resizeCb=null,this.pageActiveStatusChangeCb=null}},t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,
"__esModule",{value:!0});var n=i(0);e.default={initMediaTime:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=this.__media__={dim:e,startTime:0,endTime:0,count:1,sendSwitch:!0,continueSwitch:!1};t?i.startTime=t:window.__webbbrige__&&window.__webbbrige__.startTime?(i.startTime=window.__webbbrige__.startTime,window.__webbbrige__.startTime=null):i.startTime=Date.now(),this.hasMediaInit=!0,this.mediaHideCb=function(t,e){var i=this.__media__;if(i.sendSwitch||e){
var n=t?t.type:"";e&&(n="manual"),i.endTime=Date.now(),this.convertMediaSwitch();var o={t1:i.startTime,t2:i.endTime,count:i.count,trigger:n};this.sendBeacon("time",o,i.dim)}}.bind(this),this.mediaShowCb=function(t){var e=this.__media__||{};e.continueSwitch&&(this.convertMediaSwitch(),e.count+=1,e.startTime=Date.now())}.bind(this),this.mediaVisibilityCb=function(t){(0,n.getPageHiddenValue)(t)?this.mediaHideCb(t):this.mediaShowCb(t)}.bind(this),this.resetMediaSwitch=function(){var t=this.__media__
;t.sendSwitch=!0,t.continueSwitch=!1}.bind(this),this.convertMediaSwitch=function(){var t=this.__media__;t.sendSwitch=!t.sendSwitch,t.continueSwitch=!t.continueSwitch}.bind(this),this.destroyMediaEvent(),this.bindMediaEvent()},reStartMediaTime:function(t){if(this.hasMediaInit){var e=this.__media__;e.count=t?1:e.count+1,e.startTime=Date.now(),this.resetMediaSwitch(),this.destroyMediaEvent(),this.bindMediaEvent()}else this.initMediaTime()},stopMediaTime:function(){
!this.__media__||this.__media__&&!this.__media__.startTime||(this.mediaHideCb(null,!0),this.destroyMediaEvent(),this.__media__.startTime=null)},updateMediaDim:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.__media__.dim=t},bindMediaEvent:function(){(0,n.getProp)(document,"hidden")&&(0,n.bindVisibilityChangeEvent)(this.mediaVisibilityCb),window.addEventListener("beforeunload",this.mediaHideCb,!1),window.addEventListener("unload",this.mediaHideCb,!1),
window.addEventListener("pagehide",this.mediaHideCb,!1),window.addEventListener("pageshow",this.mediaShowCb,!1)},destroyMediaEvent:function(){(0,n.disposeVisibilityChangeEvent)(this.mediaVisibilityCb),window.removeEventListener("beforeunload",this.mediaHideCb,!1),window.removeEventListener("unload",this.mediaHideCb,!1),window.removeEventListener("pagehide",this.mediaHideCb,!1),window.removeEventListener("pageshow",this.mediaShowCb,!1)},destroyMediaTime:function(){this.destroyMediaEvent(),
this.__media__=null,this.hasMediaInit=!1,this.mediaHideCb=null,this.mediaShowCb=null,this.mediaVisibilityCb=null,this.resetMediaSwitch=null,this.convertMediaSwitch=null}},t.exports=e.default}],n.c=o,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=8)
;function n(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}var i,o});;
define("@baidu/webb",["require","@baidu/webb/webb2.min"],function(b,e){return e});