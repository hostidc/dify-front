define("js/search-components.pc.DXXW15mB",["require","exports","san","./cosmic.pc.CiKfZjh1"],(function(t,e,n,i){"use strict";var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var o={result:"_result_79xlg_1"},r={result:"_result_1bdt7_1",load:"_load_1bdt7_2",loading:"_loading_1bdt7_17",nested:"_nested_1bdt7_22",nestedLoading:"_nested-loading_1bdt7_25",container:"_container_1bdt7_34"},s={scButton:"sc-button",scButtonNew:"sc-button-new",scIcon:"sc-icon",scInline:"sc-inline",scDisabled:"sc-disabled",scActive:"sc-active",scSm:"sc-sm",scSecondary:"sc-secondary",cDarkmode:"c-darkmode",scButtonContent:"sc-button-content",scButtonNewContent:"sc-button-new-content"},l={link:"_link_ffigq_1 -v-color-primary block"},c="_sc-divider-horizontal_3dk4t_1",d="_sc-divider-vertical_3dk4t_35",u={tabs:"_tabs_y8rcs_1",tabsNavWrapper:"_tabs-nav-wrapper_y8rcs_4",tabsNav:"_tabs-nav_y8rcs_4",tabsNavScroll:"_tabs-nav-scroll_y8rcs_22",tabsNavItem:"_tabs-nav-item_y8rcs_28",tabsNavSelected:"_tabs-nav-selected_y8rcs_49",cDarkmode:"c-darkmode",tabsNavMulti:"_tabs-nav-multi_y8rcs_57",tabsNavSubtext:"_tabs-nav-subtext_y8rcs_65",tabsDivider:"_tabs-divider_y8rcs_74",tabsCursor:"_tabs-cursor_y8rcs_83",leftArrow:"_left-arrow_y8rcs_92",rightArrow:"_right-arrow_y8rcs_93",tabsContent:"_tabs-content_y8rcs_127",tabPane:"_tab-pane_y8rcs_132",tabPaneAnimated:"_tab-pane-animated_y8rcs_135",cosFresh:"cos-fresh",tabNavItem:"_tab_nav_item_y8rcs_139"},h={table:"_table_2ri6f_1",thead:"_thead_2ri6f_7",th:"_th_2ri6f_7",td:"_td_2ri6f_9",tableBox:"_table-box_2ri6f_12",cDarkmode:"c-darkmode",border:"_border_2ri6f_30",linkStd:"_link-std_2ri6f_49",tdLink:"_td-link_2ri6f_52",tdInner:"_td-inner_2ri6f_56",std:"_std_2ri6f_60",label:"_label_2ri6f_72",sth:"_sth_2ri6f_84",abstract:"_abstract_2ri6f_100",info:"_info_2ri6f_109",autoLayout:"_auto-layout_2ri6f_130",tableWrapper:"_table-wrapper_2ri6f_133",borderSvg:"_border-svg_2ri6f_137",tableBorder:"_table-border_2ri6f_140",scrollTable:"_scroll-table_2ri6f_151",fixedColumn:"_fixed-column_2ri6f_158",fixedLeftShadow:"_fixed-left-shadow_2ri6f_164",fixedRightShadow:"_fixed-right-shadow_2ri6f_165",sthBox:"_sth-box_2ri6f_186",stdBox:"_std-box_2ri6f_187",scrollTableMask:"_scroll-table-mask_2ri6f_228",scrollToEnd:"_scroll-to-end_2ri6f_239",cosAndroid:"cos-android",cosBaiduapp:"cos-baiduapp"},p={moreWrapper:"_more-wrapper_14lcv_1 cu-color-text",cDarkmode:"c-darkmode",box:"_box_14lcv_14",more:"_more_14lcv_1",text:"_text_14lcv_29",icon:"_icon_14lcv_35",horizontal:"_horizontal_14lcv_58",iconDarkAndroid:"_icon-dark-android_14lcv_63",cosFresh:"cos-fresh"},f={scFoldContent:"sc-fold-content",scFoldSwitch:"sc-fold-switch",scActive:"sc-active",scMasked:"sc-masked",scFoldSwitchMask:"sc-fold-switch-mask",scFoldSwitchText:"sc-fold-switch-text",scFoldSwitchIcon:"sc-fold-switch-icon"},g={loadingIconContainer:"_loading-icon-container_1xiec_1",loadingIcon:"_loading-icon_1xiec_1",loadingIconBorder:"_loading-icon-border_1xiec_17",loadingRotation:"_loading-rotation_1xiec_1",loadingText:"_loading-text_1xiec_54",cDarkmode:"c-darkmode",cosAndroid:"cos-android",cosBaiduapp:"cos-baiduapp"},m={audioWrapper:"_audio-wrapper_1e8tl_1",audio:"_audio_1e8tl_1 cu-text-lg",playIcon:"_play-icon_1e8tl_14",scAudioPlay:"sc-audio-play",yinbo1:"_yinbo1_1e8tl_65",scAudioWave1:"sc-audio-wave1",animationYinbo1:"_animationYinbo1_1e8tl_1",yinbo2:"_yinbo2_1e8tl_73",scAudioWave2:"sc-audio-wave2",animationYinbo2:"_animationYinbo2_1e8tl_1",laba:"_laba_1e8tl_81",scAudioHorn:"sc-audio-horn",animationLaba:"_animationLaba_1e8tl_1",pauseIcon:"_pause-icon_1e8tl_88",scAudioPause:"sc-audio-pause",cDarkmode:"c-darkmode",repeatPlayIcon:"_repeat-play-icon_1e8tl_97",animationRepeat:"_animationRepeat_1e8tl_1",cosFresh:"cos-fresh"},v={aiMarkdownTooltips:"ai-markdown-tooltips",aiMarkdownTriangleIcon:"ai-markdown-triangle-icon",aiMarkdownTooltipsContent:"ai-markdown-tooltips-content",aiMarkdownTooltipsContentTitle:"ai-markdown-tooltips-content-title",aiMarkdownTooltipsContentNoWrap:"ai-markdown-tooltips-content-no-wrap",aiMarkdownTooltipsTop:"ai-markdown-tooltips-top"},b={aiAskBack:"_ai-ask-back_13gss_1",aiAskBackCategory:"_ai-ask-back-category_13gss_16",category:"_category_13gss_16",active:"_active_13gss_16",categoryItem:"_category-item_13gss_23",aiAskBackEnd:"_ai-ask-back-end_13gss_26",categoryItemIcon:"_category-item-icon_13gss_42",aiAskBackGuide:"_ai-ask-back-guide_13gss_45",categoryTitle:"_category-title_13gss_85",categoryItemText:"_category-item-text_13gss_118",icon:"_icon_13gss_217",aiAskBackInputContainer:"_ai-ask-back-input-container_13gss_227",iconBtnContainer:"_icon-btn-container_13gss_402",btnText:"_btn-text_13gss_425"},y={tabsNavWrapper:"tabs-nav-wrapper",tabsNav:"tabs-nav",tabsNavItem:"tabs-nav-item"};function w(t,e){return w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},w(t,e)}var x=function(t){function e(){return t.apply(this,Array.from(arguments))}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}(e,t);var n=e.prototype;return n.unSelectTag=function(t){this.data.set("categoryItem.value["+(Number(t)-1)+"].active",!1)},n.unSelectAll=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=-1);for(var n=0;n<this.data.get("categoryItem.value").length;n++)t&&e===n||this.data.set("categoryItem.value["+n+"].active",!1)},e}(n.Component);function C(t,e){return C=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},C(t,e)}var S={abbreviation:297,ai:290,"ai-exchange":276,alert:270,arrowhead:268,about:133,"air-conditioner":140,appointment:152,bell:321,brush:304,"bot-earpiece":285,"bot-dialogue":286,"bot-classify":287,baozhangicon:255,bi:252,bless3:246,bless2:247,"big-ttspause":197,"big-ttsplay":198,bofang:305,biaoqing1:21,biaoqing2:22,"balcony-copy":145,broadcast:34,baocuo:99,baidu:384,bed:147,baodunpai:161,"camera-test":329,"caret-down-circle-fill":319,card:74,"calendar-selected":291,correcting:294,continuation:295,"checkbox-half":280,checkbox:281,"checkbox-checked":282,consulting:272,"cry-solid":266,chuanghu:238,"c-icon-play-face":229,"c-icon-play-line":230,customer:225,che:222,comments:218,character:213,copy:194,cai:189,"cai-filled":190,clock:181,chaojidianhua:388,chiping:354,chengxi:17,chuzuche:78,"comment-thin-copy":62,chakangengduo:5,chart:119,chart1:120,candle:131,comment:45,cooker:138,computer:170,"collect-solid":200,"candle-hollow":177,"candle-solid":178,doubleheart:328,downloaded:323,delta:284,discussion:283,danmuguan:259,danmukai:260,dianhua1:237,dateselect:209,"d20-im-consulting-outlined-54":104,"d20-activity-outlined-54":182,"d20-discount-outlined-54":183,dianhua:307,dingwei:391,daozhequ:0,dakai:44,dianping:45,daohang:77,ditie:79,diamond:163,expand:296,edit:274,ertong:243,evaluation:220,enlarge:135,expert:156,express:165,"feedback-new":325,fenxiangicon:58,fullview:91,"fabulous-normal":96,fabulous:97,frequency:113,feedback:114,forum:162,Forward:203,gerenzhongxin:263,guangchang:262,gengduoliebiao:258,gendu:254,gif:205,guanbi:1,gou:8,guanbixianxingxi:18,guanbixianxing:26,guahao:363,gouwuche:35,gonglve:36,gengduo:60,gongjiaoche0:3,gototop:47,gesture:130,huisou:234,huifang:185,huidingbu:382,huidiyiye:9,home:95,headset:129,heating:141,heater:142,hide:153,hotel:40,heat:159,"heat-line":164,huidingbu1:174,imagegroup:327,"intelligent-answer":303,illustration:298,interpretation:299,invite:271,iphone:6,icon:15,"icon-1":32,"icon-2":33,"icon-3":68,jump:275,jinyan:242,jiage1:240,"jiuyefuwu1-0":201,"jiahao-copy":19,jiage:37,jingdian:38,jiahao:71,kuaijierukouicon:251,liebiaoshouqi:257,location:312,louceng:239,lightning:219,lunkuohua:214,logo:384,lajixiang:23,liulan:59,loading:93,liebiao:90,live:105,"left-top":107,"line-up":115,love:127,love1:128,"live-video":202,living:176,magic:289,message:269,mianji:241,miaobianduigou:231,mix:224,mobanbeifen16:193,mobanbeifen9:192,Mute:191,mv:184,mail:20,more:60,more1:63,map:73,menu:104,mip:126,microfinance:151,music:158,major:173,man:195,more2:63,note:48,notes:117,no:172,order:87,"official-thin":57,prompt:317,pan:217,props:212,paizhao:13,paixu:87,person:64,"paizhao-1":72,preview:100,prohibit:103,panorama:124,playback:179,qa:320,"qa-fill":293,qr:278,qita:248,q:236,quxiaozhiding:221,quanping:2,rewrite:292,renzheng:206,rili:52,refrigerator:137,"red-envelopes":157,send1:302,summarize:300,strategy:36,send:273,setup:277,"smile-solid":180,shop:267,sousuo1:264,stop:253,"shangsheng-icon":245,shanzhu:244,shixinduigou:232,shouqi:227,"security-solid":215,"shangwufuwu1-0":211,suolvetu:208,shaixuan:207,"shoushi-icon":204,shipinbofang:84,shuru:390,shuaxin:29,sousuo:311,shangsheng:355,star:94,shezhi:24,shizhong:31,saoyisao:61,shuaqia:74,"search-big":65,star1:94,selected:111,select:112,seat:116,"stay-voice":118,similar:122,security:125,"step-on":132,"step-on-normal":134,"shop-hot":160,suo:167,"toggle-landscape":322,translate:301,ttsplay:199,tijiao:337,tupian:338,tianjia:10,tishi:30,tishixi:56,tingche:75,tuji:41,trend:123,TV:139,toilet:143,train:155,"up-circle-fill":324,uninterested:288,vs:326,voice:14,vr:223,v:186,vbiao:339,wendang:235,wenzhang:210,weizhi:312,wangyelianjie:11,weibostar:12,waimai1:70,wifi:76,walk:110,washer:144,wardrobe:146,weibo:168,whereabouts:171,woman:196,wubiaoqing:175,xiangyou1:228,xiala:226,xiangshang:310,xiangxia:316,xiangyou:308,xiangzuo:148,xiajiang:362,xiangxiaquan:25,xinxi:42,xiangguantuijian:51,xingcheng:55,xueliicon:101,yuanwen:256,yibao:233,yinlebofang:50,yinlexiazai:80,yinlezanting:315,yuyin:14,yonghu:27,yinshi:39,yinfu:48,yudingxian:53,yishoucang:85,"yuyin-1":69,yuyinicon:98,zixuan:249,z:188,"zengbuicon-zhuanqu":187,zhuanhuan:370,zanting123:7,zhidahao:16,zan:28,zhibo:34,zhusu:40,zhengpian:43,zanting:49,play:305,pause:7,music_play:306,music_play_line:367,video_play:309,video_play2:84,music_pause:315,download:313,imgs:41,goto:0,right_arrow:5,kg_right_arrow:46,right:308,top:310,down:316,left:387,down_circle:25,back_to_first:9,rise:355,fall:362,fair:354,plus:19,multiply:17,empty_star:92,weibo_star:12,hint:30,hint_thin:56,fullscreen:2,open:44,setting:24,user:27,praise:28,refresh:392,change:29,dustbin:23,msg:42,close:1,close_thin:18,close_line:26,exchange:370,back_to_top:382,check:8,input:390,glance:59,commit:337,add:10,bus:3,phone:307,super_phone:388,search:311,history:31,link:11,trip:55,position:391,image:338,photograph:13,straight:16,register:363,trolley:35,smile:21,cry:22,food:39,view_spot:38,price:37,feature:43,calendar:52,play_thin:50,pause_thin:49,recommend:51,subscribe:53,sweep:61,more_circle:67,takeaway:70,plus2:71,park:75,navigation:77,subway:79,taxi:78,share:81,share2:82,save:80,group_more:83,collect:85,collect_thin:86,broadcast2:88,consult:62,share3:58,official:57,public_praise:54,back:336,user2:64,search_thick:65,share_thick:66,v1:68,v2:15,v3:32,vp:33,photograph2:72,voice2:69,overall:91,video_play3:106,video_preview:100,live_broadcast:105,forbid:103,new_praise:96,praised:97,original_text:102,education:101,error:99,voice_broadcast:98,list:90,top_left:107,volume:113,checkbox_uncheck:112,checkbox_checked:111,car:109,subway2:108,queue:115,voice_playback:118,bar_chart:119,pie_chart:120,baidu_text:121,annotation:117,trend_chart:123,heart_hollow:127,heart:128,oppose:132,oppose_hollow:134,comment1:136,air_conditioner:140,balcony:145,back_special:148,close_special:149,more_special:150,hotel2:154,red_envelopes:157,shop_hot:160,heat_line:164,calendar2:166},k=function(t){function e(){return t.apply(this,Array.from(arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&C(t,e)}(e,t),e.prototype.initData=function(){return{name:"",dataModuleName:"lgin"}},e}(n.Component);function _(t,e){return _=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},_(t,e)}k.trimWhitespace="all",k.template='\n        \x3c!--bca-disable--\x3e\n        <i\n            class="sc-icon cu-icon"\n            data-module="{{dataModuleName}}">\n            {{icon | raw}}\n        </i>\n        \x3c!--bca-enable--\x3e\n    ',k.computed={icon:function(){var t=this.data.get("name");return null!=S[t]?"&#xe"+(1536+S[t]).toString(16):"&#xe780"}};var T=function(t){function e(){return t.apply(this,Array.from(arguments))}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(e,t);var n=e.prototype;return n.initData=function(){return{categoryItem:{}}},n.updateSelect=function(t,e){e.preventDefault(),e.stopPropagation();var n=this.data.get("categoryItem");"single"===((null==n?void 0:n.choiceType)&&"single"!==(null==n?void 0:n.choiceType)?"multi":"single")&&this.unSelectAll(this.data.get("categoryItem.value["+t+"].active"),t),this.data.set("categoryItem.value["+t+"].active",!this.data.get("categoryItem.value["+t+"].active")),this.dispatch("ai-ask-back:quest-change",{key:this.data.get("categoryItem.replaceKey")||this.data.get("categoryItem.key"),tagName:this.data.get("categoryItem.value["+t+"].text"),choiceType:this.data.get("categoryItem.choiceType")||"single",categoryId:this.data.get("categoryItem.categoryId"),tagId:this.data.get("categoryItem.value["+t+"].tagId"),selectionStatus:this.data.get("categoryItem.value["+t+"].active")?"select":"cancel"})},e}(x);function O(t,e){return O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},O(t,e)}T.template='\n        <div class="'+b.category+'">\n            <span\n                s-if="categoryItem.key"\n                class="'+b.categoryTitle+' category-key"\n            >\n                {{categoryItem.key}}\n            </span>\n            <template s-for="item, index in categoryItem.value">\n                <span\n                    id="tagItemId"\n                    rl-type="stop"\n                    class="'+b.categoryItem+'"\n                    on-click="updateSelect(index, $event)"\n                >\n                    <span class="{{item.active ? \''+b.active+"' : ''}} "+b.categoryItemText+'"\n                    >{{item.text}}</span>\n                    <svg\n                        disable-tts\n                        class="'+b.categoryItemIcon+'"\n                        width="13px"\n                        height="13px"\n                        viewBox="0 0 39 39"\n                        version="1.1"\n                        xmlns="http://www.w3.org/2000/svg"\n                        xmlns:xlink="http://www.w3.org/1999/xlink"\n                    >\n                        <g\n                            id="{{item.active ? \'selected\' : \'unselect\'}}"\n                            stroke="none"\n                            stroke-width="1"\n                            fill="none"\n                            fill-rule="evenodd"\n                        >\n                            <path\n                                d="{{\n                                    item.active\n                                    ? \'M19.5,0 C30.2695526,0 39,8.73044738 39,19.5 C39,30.2695526 30.2695526,39 19.5,39 C8.73044738,39 0,30.2695526 0,19.5 C0,8.73044738 8.73044738,0 19.5,0 Z M28.1819941,12.5850085 L17.619359,22.8512751 L11.8607462,17.3892899 L9.03539606,20.3676042 L16.2251681,27.1881145 C17.024192,27.9461012 18.2790202,27.9384079 19.0686901,27.1706812 L31.0436615,15.5284683 L28.1819941,12.5850085 Z\'\n                                    : \'M19.5,0 C30.2695526,0 39,8.73044738 39,19.5 C39,30.2695526 30.2695526,39 19.5,39 C8.73044738,39 0,30.2695526 0,19.5 C0,8.73044738 8.73044738,0 19.5,0 Z M19.5,3.07894737 C10.4309031,3.07894737 3.07894737,10.4309031 3.07894737,19.5 C3.07894737,28.5690969 10.4309031,35.9210526 19.5,35.9210526 C28.5690969,35.9210526 35.9210526,28.5690969 35.9210526,19.5 C35.9210526,10.4309031 28.5690969,3.07894737 19.5,3.07894737 Z M17.619359,22.8512751 L28.1819941,12.5850085 L31.0436615,15.5284683 L19.0686901,27.1706812 C18.2790202,27.9384079 17.024192,27.9461012 16.2251681,27.1881145 L9.03539606,20.3676042 L11.8607462,17.3892899 L17.619359,22.8512751 Z\'\n                                }}"\n                                id="shape"\n                                fill="#5240ff"\n                                fill-rule="nonzero"\n                            ></path>\n                        </g>\n                    </svg>\n                </span>\n            </template>\n        </div>\n    ',T.components={"sc-icon":k};var L=function(t){function e(){return t.apply(this,Array.from(arguments))}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}(e,t);var n=e.prototype;return n.attached=function(){var t=this,e=this.data.get("category"),n={};e.forEach((function(t,e){var i="fanwen_option"+(e+1),a=t.value.map((function(t){return t.text}))||[];n[i]=t.key+"_"+a.join("_")})),this.nextTick((function(){t.fire("show-log-event",{component:t.data.get("component"),componentType:t.data.get("componentType"),ext:Object.assign({},n)})}))},n.unSelectTag=function(t,e){var n,i,a,o=this.data.get("category");t>o.length||e>(null===(i=null===(n=o[t-1])||void 0===n?void 0:n.value)||void 0===i?void 0:i.length)||null===(a=this.ref("category-"+t))||void 0===a||a.unSelectTag(e)},n.unSelectAll=function(){for(var t,e=0;e<this.data.get("category").length;e++)null===(t=this.ref("category-"+(e+1)))||void 0===t||t.unSelectAll()},n.handleScroll=function(t){var e=t.category;this.fire("action-log-event",{component:this.data.get("component"),componentType:this.data.get("componentType"),actionType:"scroll",ext:{action:"slidslip",fanwen_option:e}})},e}(n.Component);function I(t,e){return I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},I(t,e)}var E=function(t){function e(){return t.apply(this,Array.from(arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&I(t,e)}(e,t),e.prototype.initData=function(){return{guideWord:"",category:[],endWord:"",component:"askBack",componentType:""}},e}(L);function M(t,e){return M=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},M(t,e)}E.template='\n        <div>\n            <div s-if="guideWord" class="'+b.aiAskBackGuide+'">\n                {{ guideWord }}\n            </div>\n            <ul\n                s-if="category.length"\n                class="\n                    '+b.aiAskBackCategory+"\n                    {{category.length === 1 ? '"+b.single+'\' : \'\'}}\n                "\n            >\n                <li s-for="item, index in category" class="category-item">\n                    <ask-back-quest-category\n                        s-ref="{{\'category-\' + (index + 1)}}"\n                        category-item="{{item}}"\n                    />\n                </li>\n            </ul>\n            <div s-if="endWord" class="'+b.aiAskBackEnd+'">\n                {{ endWord }}\n            </div>\n        </div>\n    ',E.components={"ask-back-quest-category":T};var A=" ",D=function(t){function e(){var e;return(e=t.call.apply(t,[].concat([this],Array.from(arguments)))||this).richEditor=null,e.isEdited=!1,e.lastEditRange=null,e.cardId="",e.observer=null,e}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&M(t,e)}(e,t);var n=e.prototype;return n.attached=function(){var t=this;this.nextTick((function(){t.richEditor=t.ref("inputField"),t.observer=new MutationObserver(t.handleInputLength.bind(t)),t.observer.observe(t.richEditor,{childList:!0,subtree:!0,characterData:!0})})),this.watch("inputValue",(function(e){var n,i=null===(n=t.richEditor)||void 0===n?void 0:n.innerText;if(t.fire("change",e||""),!i||!i.trim())return t.data.set("showPlaceholder",!0),t.richEditor.innerHTML="",void(t.lastEditRange=null)}))},n.detached=function(){this.observer&&this.observer.disconnect()},n.preventDefault=function(t){var e;(null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.closest('[id="tagItemId"]'))&&t.preventDefault()},n.addTag=function(t){var e,n,i,a,o=t.categoryName,r=t.tagName,s=t.tagId,l=t.choiceType,c=t.categoryId,d="semantic"===this.data.get("formatType"),u=d?r:"["+r+"]",h=this.richEditor,p=this.data.get("selectedTags"),f=p[o];!!this.data.get("hasTagInit")&&(!Object.keys(p).length&&this.setInputPresetText(),this.data.set("hasTagInit",!1));var g=h.querySelector("#key_post");if(g&&this.setRange(g,"before"),d&&this.updateTagsSeparator(!0),f&&"single"===l){var m=f.value[0].tagId,v=null===(e=this.el)||void 0===e?void 0:e.querySelector("#tag_"+c+"_"+m);v&&(v.innerText=u),null==v||v.setAttribute("id","tag_"+c+"_"+s)}else{if("single"===l||!f){var b=document.querySelector("#key_"+c);b&&b.setAttribute("id","");var y=document.createElement("span");y.setAttribute("id","key_"+c),y.innerText=o,this.insertTagInCusor(h,y,!1),null===(n=this.richEditor)||void 0===n||n.focus()}var w='&nbsp;<span class="wd-tag" id="tag_'+c+"_"+s+'" contenteditable='+!1+">"+u+"</span>&nbsp;",x=document.createElement("span");if(x.setAttribute("class","tag-wrapper"),x.innerHTML=w,f&&"multi"===l){var C=f.value[f.value.length-1].tagId,S=null===(i=this.el)||void 0===i?void 0:i.querySelector("#tag_"+c+"_"+C);null===(a=this.richEditor)||void 0===a||a.focus();var k=getSelection(),_=k.getRangeAt(0);_.setStart(S.nextSibling,1),_.setEnd(S.nextSibling,1),_.insertNode(x),k.removeAllRanges(),k.addRange(_),this.lastEditRange=k.getRangeAt(0),this.data.get("isBlur")||this.moveCursorAfterNode(x,!0)}else this.insertTagInCusor(h,x,!0)}this.updateSelectedTags(t),d&&this.updateTagsSeparator()},n.deleteTag=function(t){var e,n,i,a,o,r,s,l,c,d,u,h,p=t.categoryName,f=t.tagId,g=t.choiceType,m=t.categoryId,v=this.data.get("selectedTags")[p],b=null===(e=this.el)||void 0===e?void 0:e.querySelector("#tag_"+m+"_"+f);if(b){var y="semantic"===this.data.get("formatType");y&&this.updateTagsSeparator(!0);var w=b.parentNode,x=(null===(i=null===(n=b.previousSibling)||void 0===n?void 0:n.textContent)||void 0===i?void 0:i.trim())||"",C=(null===(o=null===(a=b.nextSibling)||void 0===a?void 0:a.textContent)||void 0===o?void 0:o.trim())||"";x||null===(r=b.previousSibling)||void 0===r||r.remove(),C&&"，"!==C&&"、"!==C||null===(s=b.nextSibling)||void 0===s||s.remove(),b.remove();for(var S=w;S&&!S.innerHTML;){var k=S.parentNode.closest(".tag-wrapper");S.remove(),S=k}if("single"===g||1===v.value.length){var _=null===(l=this.el)||void 0===l?void 0:l.querySelector("#key_"+m),T=null===(c=this.el)||void 0===c?void 0:c.querySelector("#key_pre"),O=null===(d=this.el)||void 0===d?void 0:d.querySelector("#key_post"),L=(null==_?void 0:_.innerText)||"",I=(null==T?void 0:T.innerText)||"",E=(null==O?void 0:O.innerText)||"";if(L===p&&_.remove(),I===this.data.get("preText")&&E===this.data.get("postText"))T&&T.remove(),O&&O.remove(),this.data.set("hasTagInit",!0);else{var M=Array.from(_.childNodes).find((function(t){return t.nodeType===Node.TEXT_NODE}));L.endsWith(p)?(L=L.slice(0,-p.length),_.innerText=L):(null===(u=null==M?void 0:M.textContent)||void 0===u?void 0:u.endsWith(p))&&(M.textContent=M.textContent.slice(0,-p.length)),null==_||_.setAttribute("id","")}}this.updateSelectedTags(t),y&&this.updateTagsSeparator(),this.data.get("isBlur")||(this.lastEditRange=null===(h=getSelection())||void 0===h?void 0:h.getRangeAt(0))}},n.addHtml=function(t){var e=this.richEditor;e&&(e.innerHTML+=t)},n.setHtml=function(t){var e=this.richEditor;e&&(e.innerHTML=t),this.editorDelete()},n.updateSelectedTags=function(t){var e=t.categoryName,n=t.tagName,i=t.tagId,a=t.choiceType,o=t.categoryId,r=t.selectionStatus,s=this.data.get("selectedTags");if(1===r)s[e]?(s[e].categoryId=o,"single"===a?s[e].value=[{text:n,tagId:i}]:s[e].value.push({text:n,tagId:i})):s[e]={categoryId:o,value:[{text:n,tagId:i}]};else if("single"===a||1===s[e].value.length)delete s[e];else{var l=s[e].value.filter((function(t){return t.tagId!==i}));s[e].value=l}this.data.set("selectedTags",s)},n.handleClick=function(t){t&&t.stopPropagation();var e=getSelection(),n=e.getRangeAt(0);this.checkClickRange(n.startContainer),this.lastEditRange=e.getRangeAt(0),this.fire("click",t)},n.checkClickRange=function(t){var e,n,i;if(t){var a=t.parentNode,o=null===(e=a.classList)||void 0===e?void 0:e.value,r=getSelection(),s=r.getRangeAt(0),l=s.startOffset,c=s.collapsed;if(o&&-1!==o.indexOf("tag-wrapper")&&c){if(t.nextSibling&&-1!==(null===(n=t.nextSibling.id)||void 0===n?void 0:n.indexOf("tag_"))){if(l!==t.length)return;s.setStart(t,l-1),s.setEnd(t,l-1),r.removeAllRanges(),r.addRange(s)}else if(t.previousSibling&&-1!==(null===(i=t.previousSibling.id)||void 0===i?void 0:i.indexOf("tag_"))){if(0!==l)return;s.setStart(t,l+1),s.setEnd(t,l+1),r.removeAllRanges(),r.addRange(s)}}else-1!==o.indexOf("wd-tag")&&(s.setStartBefore(a),s.setEndAfter(a),r.removeAllRanges(),r.addRange(s))}},n.handleFocused=function(t){this.fire("focus",t),this.data.set("isBlur",!1)},n.handleBlur=function(t){this.fire("blur",t),this.data.set("isBlur",!0),this.lastEditRange=null},n.handleKeyDown=function(t){var e,n,i;if("Enter"===t.key)return t.stopPropagation(),t.preventDefault(),this.fire("keydown",t),this.dispatch("key-enter",t);var a=getSelection(),o=a.getRangeAt(0),r=o.startContainer,s=null===(e=r.previousSibling)||void 0===e?void 0:e.previousSibling;"ArrowLeft"===t.key?r.previousSibling&&-1!==(null===(n=r.previousSibling.id)||void 0===n?void 0:n.indexOf("tag_"))&&1===o.startOffset&&(o.setStart(s,null==s?void 0:s.length),o.setEnd(s,null==s?void 0:s.length),a.removeAllRanges(),a.addRange(o)):"Backspace"===t.key&&(null===(i=null==r?void 0:r.previousSibling)||void 0===i?void 0:i.classList)&&-1!==r.previousSibling.classList.value.indexOf("wd-tag")&&1===o.startOffset&&r.previousSibling.remove()},n.handleKeyup=function(t){var e,n=getSelection(),i=n.getRangeAt(0),a=i.startContainer;"ArrowRight"===t.key&&a.nextSibling&&-1!==(null===(e=a.nextSibling.id)||void 0===e?void 0:e.indexOf("tag_"))&&i.startOffset===a.length&&(i.setStart(a.nextSibling.nextSibling,1),i.setEnd(a.nextSibling.nextSibling,1),n.removeAllRanges(),n.addRange(i))},n.handlePaste=function(t){var e=t.clipboardData.getData("text"),n=this.richEditor,i=this.data.get("maxLength");if(i=i>0?i:200,n&&!(i<0)&&e){t.preventDefault(),n.innerText.length+e.length>i&&(e=e.slice(0,i-n.innerText.length));var a=window.getSelection(),o=null==a?void 0:a.getRangeAt(0);null==o||o.deleteContents(),null==o||o.insertNode(document.createTextNode(e)),this.data.set("hasEdited",!0)}},n.handleInput=function(t){if(this.isEdited=!0,this.data.set("isBlur",!1),this.richEditor){this.richEditor.innerText.trim()||(this.data.set("showPlaceholder",!0),this.data.set("hasEdited",!0),this.richEditor.innerHTML="",this.lastEditRange=null),"insertCompositionText"===t.inputType||"insertText"===t.inputType||"insertFromComposition"===t.inputType||"insertFromPaste"===t.inputType?this.data.set("showPlaceholder",!1):this.editorDelete(),this.richEditor.focus();var e=getSelection();this.lastEditRange=e.getRangeAt(0),this.fire("input",t),this.data.set("hasEdited",!0)}},n.editorDelete=function(){var t,e=this,n="semantic"===this.data.get("formatType"),i=this.data.get("selectedTags"),a=[];null===(t=this.richEditor)||void 0===t||t.querySelectorAll("span.wd-tag[contenteditable=false]").forEach((function(t){a.push(t.innerText||"")})),Object.keys(i).forEach((function(t){JSON.parse(JSON.stringify(i[t])).value.forEach((function(t){var i=n?t.text:"["+t.text+"]";-1===a.indexOf(i)&&e.deleteSelectTags(t.text)}))}))},n.deleteSelectTags=function(t){var e=this,n=this.data.get("selectedTags");Object.keys(n).forEach((function(i){n[i].value.forEach((function(a,o){t===a.text&&(n[i].value.splice(o,1),e.dispatch("deleteTagByInput",{cardId:e.data.get("cardId"),needDeleteAll:!1,tagIdList:[a.tagId]}),0===n[i].value.length&&delete n[i])}))})),this.data.set("selectedTags",n)},n.insertTagInCusor=function(t,e,n){if(!this.lastEditRange||this.data.get("isBlur"))return t.appendChild(e),void(this.data.get("isBlur")||this.moveCursorAfterNode(e,n));var i=this.lastEditRange;t.focus();var a=getSelection(),o=a.getRangeAt(0);if(i.endOffset!==i.startOffset?t.appendChild(e):(a.removeAllRanges(),a.addRange(i),o.deleteContents(),o.insertNode(e)),n){var r=e.childNodes[2];o.setStart(r,1),o.setEnd(r,1)}else o.setStartAfter(e),o.setEndAfter(e);a.removeAllRanges(),a.addRange(o),t.focus(),this.lastEditRange=a.getRangeAt(0)},n.moveCursorAfterNode=function(t,e){var n;null===(n=this.richEditor)||void 0===n||n.focus(),e?this.setRange(t.childNodes[2],1):this.setRange(t,"after")},n.handleCompositionStart=function(){this.data.set("lock",!0)},n.handleCompositionEnd=function(){this.data.set("lock",!1),this.handleInputLength()},n.handleInputLength=function(){var t=this.richEditor;if(!this.data.get("lock")&&t){var e=t.innerText||"",n=this.data.get("maxLength");n>0&&0===e.length&&this.data.set("showPlaceholder",!0),n>0&&e.length>n?this.deleteTextInCusor():(this.data.set("inputValue",e),this.dispatch("ai-ask-back:input-change",e))}},n.handleTouchMove=function(t){t.stopPropagation()},n.deleteTextInCusor=function(){var t=window.getSelection();if(t){var e=t.getRangeAt(0);if(e.startContainer.nodeType===Node.TEXT_NODE){var n=e.startContainer.textContent;if(!n)return;var i=e.startOffset,a=n.slice(0,i-1)+n.slice(i);e.startContainer.textContent=a,e.setStart(e.startContainer,i-1),e.setEnd(e.startContainer,i-1),t.removeAllRanges(),t.addRange(e),this.lastEditRange=t.getRangeAt(0)}}},n.focus=function(){var t;null===(t=this.richEditor)||void 0===t||t.focus();var e=getSelection();this.lastEditRange=e.getRangeAt(0)},n.blur=function(){var t;null===(t=this.richEditor)||void 0===t||t.blur()},n.stop=function(t){t&&t.stopPropagation()},n.getSelectedTags=function(){return this.data.get("selectedTags")||{}},n.getInputState=function(){return{inputValue:this.data.get("inputValue"),hasEdited:!!this.data.get("hasEdited")}},n.updateTagsSeparator=function(t){var e=this;void 0===t&&(t=!1);var n=this.richEditor;if(n){var i=n.querySelectorAll(".wd-tag"),a=[],o={};i.forEach((function(t){var e=t.id.split("_")[1];!(o[e]>-1)&&(o[e]=a.length),!a[o[e]]&&(a[o[e]]=[]),a[o[e]].push(t)})),a.forEach((function(n,i){var o=i===a.length-1;n.forEach((function(i,a){var r=a===n.length-1,s=r?" ，":" 、";s=t||o&&r?A:s,e.setSeparator(i,s)}))}))}},n.setSeparator=function(t,e){var n,i=(null===(n=t.nextSibling)||void 0===n?void 0:n.textContent)||"";t&&i!==e&&(i.trim()&&i!==A&&" ，"!==i&&" 、"!==i||(t.nextSibling.textContent=e))},n.setRange=function(t,e){var n,i=this.richEditor;null===(n=this.richEditor)||void 0===n||n.focus();var a=getSelection(),o=document.createRange();t?"before"===e?(o.setStartBefore(t),o.setEndBefore(t)):"after"===e?(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,e),o.setEnd(t,e)):(o.selectNodeContents(i),o.collapse(!1)),a.removeAllRanges(),a.addRange(o),this.lastEditRange=a.getRangeAt(0)},n.setInputPresetText=function(){var t,e,n=this.richEditor,i=this.data.get("preText")||"",a=this.data.get("postText")||"";if(n&&(i||a)){var o=document.createElement("span"),r=document.createElement("span");o.setAttribute("id","key_pre"),r.setAttribute("id","key_post"),o.innerText=i,r.innerText=a,!(null===(t=this.el)||void 0===t?void 0:t.querySelector("#key_pre"))&&i.length>0&&this.insertTagInCusor(n,o,!1),!(null===(e=this.el)||void 0===e?void 0:e.querySelector("#key_post"))&&a.length>0&&this.insertTagInCusor(n,r,!1)}},n.setRangeToLastChild=function(t){var e,n,i;return(null===(e=null==t?void 0:t.childNodes)||void 0===e?void 0:e.length)?this.setRangeToLastChild(t.childNodes[t.childNodes.length-1]):(null==t?void 0:t.nodeType)===Node.TEXT_NODE?(null===(n=t.textContent)||void 0===n?void 0:n.length)?this.setRange(t,null===(i=t.textContent)||void 0===i?void 0:i.length):this.setRangeToLastChild(t.previousSibling):this.setRange(t,"after")},e}(n.Component);function j(t,e){return j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},j(t,e)}D.trimWhitespace="all",D.computed={isEmpty:function(){return!this.data.get("inputValue")},myPlaceholder:function(){var t=this.data.get("placeholder");return this.data.get("showPlaceholder")?t:""}};var B=function(t){function e(){return t.apply(this,Array.from(arguments))}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j(t,e)}(e,t);var n=e.prototype;return n.initData=function(){return{placeholder:"",maxLength:200,componentType:"",selectedTags:{},inputFieldText:"",isBlur:!0,maxRow:2,showPlaceholder:!0,preText:"",postText:"",formatType:"",hasTagInit:!0}},n.attached=function(){var t=this;this.nextTick((function(){t.richEditor=t.ref("inputField"),document.addEventListener("mousedown",t.preventDefault,!1),t.observer=new MutationObserver(t.handleInputLength.bind(t)),t.observer.observe(t.richEditor,{childList:!0,subtree:!0,characterData:!0})})),this.watch("inputValue",(function(e){var n,i=null===(n=t.richEditor)||void 0===n?void 0:n.innerText;if(t.fire("change",e||""),!i||!i.trim())return t.data.set("showPlaceholder",!0),t.richEditor.innerHTML="",void(t.lastEditRange=null)}))},n.detached=function(){document.removeEventListener("mousedown",this.preventDefault),this.observer&&this.observer.disconnect()},n.handleClick=function(t){t&&t.stopPropagation();var e=getSelection(),n=e.getRangeAt(0);this.checkClickRange(n.startContainer),this.lastEditRange=e.getRangeAt(0),this.fire("action-log-event",{component:"askBack",componentType:this.data.get("componentType"),actionType:"b",ext:{area:"richEditor",target:null==t?void 0:t.target,fanwen_option:this.data.get("inputValue")}})},n.handleInputLength=function(){var t=this.richEditor;if(!this.data.get("lock")&&t){var e=t.innerText||"",n=this.data.get("maxLength");n>0&&e.length>n?this.deleteTextInCusor():(this.data.set("inputValue",e),this.dispatch("ai-ask-back:input-change",e))}},e}(D);function P(t,e){return P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},P(t,e)}B.template='\n        <div on-click="stop">\n            <div\n                s-ref="inputField"\n                data-module="input"\n                contenteditable="true"\n                placeholder="{{myPlaceholder}}"\n                rl-type="stop"\n                enterkeyhint="send"\n                on-click="handleClick($event)"\n                on-focus="handleFocused($event)"\n                on-input="handleInput($event)"\n                on-blur="handleBlur($event)"\n                on-keydown="handleKeyDown($event)"\n                on-keyup="handleKeyup($event)"\n                class="'+b.inputEditor+'"\n            >\n            </div>\n        </div>\n    ',B.computed=Object.assign({},D.computed);var F=function(t){function e(){var e;return(e=t.call.apply(t,[].concat([this],Array.from(arguments)))||this).inputField=null,e}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}(e,t);var n=e.prototype;return n.initData=function(){return{askBackId:"",guideWord:"",category:[],placeholder:"可以继续描述你的需求",btnText:"",answerGuidancePre:"",answerGuidancePost:"",isSemant:"0",formatType:"",hasInput:!0,maxLength:200,endWord:"",inputValue:"",selectedTags:[],oneRowMore:!1,mouseover:!1,inputRestSpace:482}},n.attached=function(){var t,e=this;this.data.set("formatType","1"===this.data.get("isSemant")?"semantic":""),this.nextTick((function(){e.fire("show-log-event",{component:"askBack",componentType:e.data.get("componentType"),ext:{area:"component"}})})),this.fire("render-finished"),this.data.get("hasInput")&&this.nextTick((function(){e.inputField=e.ref("inputContainer");var t=e.ref("buttomContainer").getBoundingClientRect().width,n=e.ref("btnContainer").getBoundingClientRect().width;e.data.set("inputRestSpace",t-n-13)})),null===(t=this.el)||void 0===t||t.addEventListener("mousedown",this.preventDefault,!1)},n.detached=function(){var t;null===(t=this.el)||void 0===t||t.removeEventListener("mousedown",this.preventDefault)},n.preventDefault=function(t){var e;(null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.closest('[id="tagItemId"]'))&&(t.preventDefault(),t.stopPropagation())},n.deleteTags=function(t){var e,n=this,i=t.tagIdList,a=t.needDeleteAll;void 0!==a&&a?null===(e=this.ref("askBackQuest"))||void 0===e||e.unSelectAll():Array.isArray(i)&&i.forEach((function(t){var e,i=null==t?void 0:t.split("_"),a=i[0],o=i[1];null===(e=n.ref("askBackQuest"))||void 0===e||e.unSelectTag(+a,+o)}))},n.handleChange=function(t){var e,n;this.data.set("inputValue",t);var i=null===(n=null===(e=this.inputField)||void 0===e?void 0:e.el)||void 0===n?void 0:n.getBoundingClientRect().width;i&&i>this.data.get("inputRestSpace")?this.data.set("oneRowMore",!0):this.data.set("oneRowMore",!1)},n.handleIconClick=function(t){t.stopPropagation(),t.preventDefault(),this.dispatch("ai-ask-back:input-send",{targetStr:this.data.get("inputValue"),event:t,t:"option"===this.data.get("componentType")?1:4}),this.fire("action-log-event",{component:"askBack",componentType:this.data.get("componentType"),actionType:"l",ext:{fanwen_content:this.data.get("inputValue")}})},n.handleMouseover=function(){this.data.set("mouseover",!0)},n.handleMouseleave=function(){this.data.set("mouseover",!1)},n.handleActionLogEvent=function(t){this.fire("action-log-event",t)},n.handleShowLogEvent=function(t){this.fire("show-log-event",t)},e}(n.Component);F.template='\n        <div\n            class="'+b.aiAskBack+'"\n            data-module="ai_askBack_{{componentType}}"\n        >\n            <ask-back-quest\n                s-ref="askBackQuest"\n                guide-word="{{guideWord}}"\n                category="{{categoryList}}"\n                end-word="{{endWord}}"\n                component-type="{{componentType}}"\n                on-show-log-event="handleShowLogEvent"\n            />\n            <div\n                s-if="hasInput"\n                s-ref="buttomContainer"\n                rl-type="stop"\n                class="'+b.aiAskBackInputContainer+" {{oneRowMore ? '"+b.aiAskBackInputContainerRow+'\' : \'\'}}"\n            >\n                <rich-editor\n                    s-ref="inputContainer"\n                    max-length="{{maxLength}}"\n                    component-type="{{componentType}}"\n                    style="min-width: {{inputRestSpace + \'px\'}};"\n                    class="'+b.aiAskBackInputField+" {{isEmpty ? '"+b.aiAskBackInputFieldEmpty+'\' : \'\'}}"\n                    placeholder="{{placeholder}}"\n                    pre-text="{{answerGuidancePre}}"\n                    post-text="{{answerGuidancePost}}"\n                    format-type="{{formatType}}"\n                    on-change="handleChange"\n                    on-action-log-event="handleActionLogEvent"\n                />\n                <div\n                    rl-type="stop"\n                    s-ref="btnContainer"\n                    class="'+b.iconBtnContainer+'"\n                    on-click="handleIconClick($event)"\n                    on-mouseover="handleMouseover"\n                    on-mouseleave="handleMouseleave"\n                >\n                    <img\n                        class="'+b.icon+"\"\n                        src=\"{{mouseover ? 'https://gips3.baidu.com/it/u=831515515,1103058970&fm=3028&app=3028&f=PNG&fmt=auto&q=75&size=f48_48'\n                        : 'https://gips3.baidu.com/it/u=1532173051,3841165920&fm=3028&app=3028&f=PNG&fmt=auto&q=75&size=f48_48'}}\"\n                    >\n                    <div class=\""+b.btnText+'">{{btnText}}</div>\n                </div>\n            </div>\n        </div>\n    ',F.components={"ask-back-quest":E,"rich-editor":B},F.computed={isEmpty:function(){return!this.data.get("inputValue")},categoryList:function(){var t=this.data.get("category");if(!t)return[];var e=t.map((function(t,e){var n;return(null===(n=null==t?void 0:t.value)||void 0===n?void 0:n.length)&&t.value.forEach((function(t,n){t.tagId=e+1+"_"+(n+1)})),Object.assign(Object.assign({},t),{categoryId:(e+1).toString()})}));return e},componentType:function(){var t;return(null===(t=this.data.get("category"))||void 0===t?void 0:t.length)?"option":"no-option"}},F.messages={"ai-ask-back:quest-change":function(t){var e,n,i,a,o,r,s,l=t.value,c=l.selectionStatus,d=l.key,u=l.tagName,h=l.choiceType,p=void 0===h?"single":h,f=l.categoryId,g=l.tagId,m=new Event("ai-ask-back:select-card-change");m.data={id:this.data.get("askBackId")},window.dispatchEvent(m),this.dispatch("ai-ask-back:change",{categoryId:f,categoryName:d,tagName:u,selectionStatus:c,cardId:this.data.get("askBackId")});var v=!1,b=this.data.get("maxLength"),y=this.inputField;if("select"===c&&b>0&&y){var w=null===(n=null===(e=y.el)||void 0===e?void 0:e.innerText)||void 0===n?void 0:n.length,x="semantic"===this.data.get("formatType")?u:"["+u+"]",C=(null==g?void 0:g.split("_")[1])||-1;if(null===(i=this.el)||void 0===i?void 0:i.querySelector('[id^="tag_'+f+'_"]')){if("multi"===p)w+x.length>b&&(null===(a=this.ref("askBackQuest"))||void 0===a||a.unSelectTag(+f,+C),v=!0)}else w+x.length+d.length+2>b&&(null===(o=this.ref("askBackQuest"))||void 0===o||o.unSelectTag(+f,+C),v=!0)}var S=d+"_"+u+"_"+(v?"超限":"select"===c?"选中":"取消");if(this.fire("action-log-event",{component:"askBack",componentType:this.data.get("componentType"),actionType:"b",ext:{area:"category",fanwen_option:S}}),!v&&this.data.get("hasInput")&&y){var k={categoryName:d,tagName:u,tagId:g,choiceType:p,categoryId:f,selectionStatus:"select"===c?1:0};"select"===c?null===(r=this.inputField)||void 0===r||r.addTag(k):null===(s=this.inputField)||void 0===s||s.deleteTag(k)}},deleteTagByInput:function(t){this.deleteTags(Object.assign({},t.value))},"key-enter":function(t){this.handleIconClick(t.value)}};var V={bar:"ai-bar-chart",rank:"ai-rank-chart",line:"ai-line-chart",pie:"ai-pie-chart",vs:"ai-vs-chart",map:"ai-map-chart"},R="rgba(255, 255, 255, .95)",N="rgba(0, 0, 0, 0.2)",z="rgba(245, 246, 249, 0)",H="rgba(245, 246, 249, 1)",W="rgba(245, 246, 249, 0.41)",U=["#3366FF","#00B5F2","#00D9D9","#00E5AC","#85F218","#B5F200","#FFBF00","#FF8C1A","#FF6633","#FF4D4D","#FF3366","#FF1A8C","#D900D9","#8C1AFF","#6633FF"],q=["#5C8AFF","#31CAF5","#2DE0DA","#2FEBB5","#A3F545","#CAF531","#FFD333","#FFA947","#FF8A5C","#FF7570","#FF5C8A","#FF479D","#E02DDA","#A947FF","#8A5CFF"],Q=["rgba(51, 102, 255, .25)","rgba(0, 181, 242, .25)","rgba(0, 217, 217, .25)","rgba(0, 229, 172, .25)","rgba(133, 242, 24, .25)","rgba(181, 242, 0, .25)","rgba(255, 191, 0, .25)","rgba(255, 140, 26, .25)","rgba(255, 102, 51, .25)","rgba(255, 77, 77, .25)","rgba(255, 51, 102, .25)","rgba(255, 26, 140, .25)","rgba(217, 0, 217, .25)","rgba(140, 26, 255, .25)","rgba(102, 51, 255, .25)"],$=[["rgba(51, 102, 255, .1)","rgba(51, 102, 255, 0)"],["rgba(0, 181, 242, .1)","rgba(0, 181, 242, 0)"],["rgba(0, 217, 217, .1)","rgba(0, 217, 217, 0)"]];function Z(t,e){return Z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Z(t,e)}var J=function(t){function e(){return t.apply(this,Array.from(arguments))}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Z(t,e)}(e,t);var n=e.prototype;return n.initData=function(){return{nativeAttributes:{},styles:{},defaultStyles:{},styleMode:e.styleMode}},n.dispatch=function(e,n){t.prototype.dispatch.call(this,e,n)},n.storeDispatch=function(t,e){var n;null===(n=this.store)||void 0===n||n.dispatch(t,e)},n.eventDispatch=function(t,n){"message"===e.dispatchMode?this.dispatch(t,n):"store"===e.dispatchMode&&this.storeDispatch(t,n)},e}(n.Component);function G(t,e){return G=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},G(t,e)}J.trimWhitespace="all",J.dispatchMode="message",J.styleMode="merge",J.computed={newStyles:function(){if("overwrite"===this.data.get("styleMode"))return this.data.get("styles")||{};var t=this.data.get("defaultStyles")||{},e=this.data.get("styles")||{},n=Object.keys(t);return n.length?n.reduce((function(n,i){return n[i]=t[i],e[i]&&(n[i]+=" "+e[i]),n}),{}):e}};var K=function(t){function e(){var e;return(e=t.call.apply(t,[].concat([this],Array.from(arguments)))||this).timer=null,e}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&G(t,e)}(e,t);var n=e.prototype;return n.initData=function(){return Object.assign(Object.assign({},t.prototype.initData.call(this)),{defaultStyles:u,index:0,animated:!1,scroll:!1,paneList:[],labelList:[],cursorWidth:0,cursorLeft:0,contentHeight:"auto",targetCenter:!1,pageControl:!1,leftArrowShow:!1,rightArrowShow:!1})},n.inited=function(){var t;this.tabPanes=[];var e=this.data.get("labelList");if(!(e&&Array.isArray(e)&&e.length>0)){var n=[],i=(null===(t=null==this?void 0:this.sourceSlots)||void 0===t?void 0:t.noname)||[];i.length>0&&i.forEach((function(t){t&&t.tagName&&-1!==t.tagName.indexOf("tab-pane")&&n.push(t)})),e=[],n.forEach((function(t){((null==t?void 0:t.props)||[]).forEach((function(t){"label"===t.name&&e.push({text:t.expr.value})}))})),this.data.set("labelList",e)}},n.attached=function(){var t=this;this.data.get("scroll")&&this.updateController(),this.watch&&this.watch("index",(function(e){t.scrollToTarget(e)})),this.data.set("paneList",this.tabPanes);var e=this.data.get("index"),n=this.data.get("labelList"),i=this,a=0;n.forEach((function(t,n){var o,r=null===(o=i.ref("label"+n))||void 0===o?void 0:o.offsetWidth;t.width=r,e===n&&(a=r)})),this.data.set("labelList",n),this.data.set("cursorWidth",a),e&&e>1&&this.data.get("scroll")&&this.nextTick((function(){t.scrollToTarget(e)}))},n.turnPage=function(t){var e=this.ref("scroll");if(this.data.get("pageControl")&&this.data.get("scroll")){var n=("left"===t?-1:1)*e.offsetWidth;e.scrollBy(n,0)}},n.getScrollLeft=function(){var t=this.ref("scroll");return null==t?void 0:t.scrollLeft},n.handleScroll=function(){var t=this,e=this.timer;null!==e&&(clearTimeout(e),this.timer=null),e=setTimeout((function(){t.fire("tab-scroll",{type:"end",scrollLeft:t.getScrollLeft()})}),150),this.timer=e,this.fire("tab-scroll",{type:"scroll",scrollLeft:this.getScrollLeft()}),this.updateController()},n.updateController=function(){if(this.ref("scroll")){var t=this.ref("scroll"),e=t.scrollLeft;this.data.set("leftArrowShow",e>5),this.data.set("rightArrowShow",t.scrollWidth-t.clientWidth-e>5)}},n.scrollToTarget=function(t){var e,n=this.ref("scroll"),i=null===(e=null==n?void 0:n.children)||void 0===e?void 0:e[t];if(n&&"function"==typeof n.scroll&&this.data.get("targetCenter")&&i){var a=i.offsetLeft-(n.offsetWidth-i.offsetWidth)/2;n.scroll(a,0)}},n.handleLabelClick=function(t,e,n){var i=this;if(this.fire("tab-click",{index:e,label:t.text}),this.data.get("index")!==e){var a=this.data.get("index"),o=this.data.get("labelList");this.data.set("index",e),this.data.get("paneList").forEach((function(t,n){if(t.setPaneShow(n===e,n-e,o[a].text),i.data.get("animated")&&n===e){var r=t.getHeight();i.data.set("contentHeight",r+"px")}}));var r=0,s=0;o.forEach((function(t,n){n<e?r+=(null==t?void 0:t.width)||0:n===e&&(s=(null==t?void 0:t.width)||0)})),this.data.set("cursorLeft",r),this.data.set("cursorWidth",s),this.fire("change",{index:e,label:t.text})}},e}(J);function X(t,e){return X=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},X(t,e)}K.template='\n        <div class="{{newStyles.tabs}}">\n            <div\n                s-if="labelList && labelList.length > 1"\n                class="{{ newStyles.tabsNavWrapper }}"\n            >\n                <div\n                    s-if="scroll && pageControl"\n                    style="{{leftArrowShow ? \'\' : \'display: none\'}}"\n                    class="{{ newStyles.leftArrow }}"\n                    on-click="turnPage(\'left\')">\n                    <slot name="prefix">\n                        <svg width="6px" height="11px" viewBox="0 0 6 11" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                            <g transform="translate(3, 5) scale(-1, 1) translate(-3, -5) translate(-4, -2)" fill="#858585">\n                                <path d="M9.18017788,2.01351121 L9.93093323,2.76426656 L5.71622196,6.97897783 C5.62053795,7.07466184 5.61317764,7.22522317 5.69414104,7.32934985 L5.71622196,7.3543555 L9.93093323,11.5690668 L9.18017788,12.3198221 L4.96546661,8.10511085 C4.46288391,7.60252815 4.44765413,6.79714316 4.91977728,6.2762088 L4.96546661,6.22822248 L9.18017788,2.01351121 Z" transform="translate(7.253842, 7.166667) scale(-1, 1) translate(-7.253842, -7.166667) "></path>\n                            </g>\n                        </svg>\n                    </slot>\n                </div>\n                <div\n                    rl-type="stop"\n                    s-ref="scroll"\n                    class="{{ newStyles.tabsNav }} {{ scroll ? newStyles.tabsNavScroll : \'\' }}"\n                    on-scroll="handleScroll()"\n                >\n                    <div\n                        s-for="label, labelIndex in labelList"\n                        s-ref="{{\'label\' + labelIndex}}"\n                        class="{{newStyles.tabsNavItem}} {{labelIndex === index ? newStyles.tabsNavSelected : \'\'}} {{label.subtext ? newStyles.tabsNavMulti : \'\'}}"\n                        on-click="handleLabelClick(label, labelIndex, $event)"\n                    >\n                        {{label.text}}\n                        <div s-if="label.subtext" class="{{newStyles.tabsNavSubtext}}">{{label.subtext}}</div>\n                    </div>\n                </div>\n                <div\n                    s-if="scroll"\n                    style="{{rightArrowShow ? \'\' : \'display: none\'}}"\n                    class="{{newStyles.rightArrow}} sc-tabs-right-arrow"\n                    rl-type="stop"\n                    on-click="turnPage(\'right\')">\n                    <slot name="suffix">\n                        <svg s-if="pageControl" width="14px" height="14px" viewBox="0 0 14 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                            <g fill="#858585">\n                                <path d="M9.18017788,2.01351121 L9.93093323,2.76426656 L5.71622196,6.97897783 C5.62053795,7.07466184 5.61317764,7.22522317 5.69414104,7.32934985 L5.71622196,7.3543555 L9.93093323,11.5690668 L9.18017788,12.3198221 L4.96546661,8.10511085 C4.46288391,7.60252815 4.44765413,6.79714316 4.91977728,6.2762088 L4.96546661,6.22822248 L9.18017788,2.01351121 Z" transform="translate(7.253842, 7.166667) scale(-1, 1) translate(-7.253842, -7.166667) "></path>\n                            </g>\n                        </svg>\n                    </slot>\n                </div>\n                <div\n                    class="{{newStyles.tabsDivider}}"\n                />\n                <div\n                    style="{{cursorStyle}}"\n                    class="{{newStyles.tabsCursor}}"\n                />\n            </div>\n            <div\n                s-ref="tabsContent"\n                style="{{\n                    {\n                        height: contentHeight\n                    }\n                }}"\n                class="{{newStyles.tabsContent}} {{ animated ? newStyles.tabContentAnimated : \'\' }}"\n            >\n                <slot></slot>\n            </div>\n        </div>\n    ',K.computed=Object.assign(Object.assign({},J.computed),{cursorStyle:function(){return"left: "+this.data.get("cursorLeft")+"px; width: "+this.data.get("cursorWidth")+"px"}}),K.messages={"UI:tab-pane-inited":function(t){var e;null===(e=this.tabPanes)||void 0===e||e.push(t.value)},"UI:tab-pane-detached":function(t){var e;if(t.value&&this.tabPanes){for(var n,i=0;i<this.tabPanes.length;i++)if(this.tabPanes[i].data.get("label")===t.value){n=i;break}n&&(null===(e=this.tabPanes)||void 0===e||e.splice(n,1),this.data.set("paneList",this.tabPanes))}}};var Y=function(t){function e(){return t.apply(this,Array.from(arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&X(t,e)}(e,t),e.prototype.initData=function(){return Object.assign({},t.prototype.initData.call(this),{pageControl:!0,targetCenter:!0})},e}(K);function tt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&et(t,e)}function et(t,e){return et=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},et(t,e)}function nt(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":i._typeof(t)}Y.computed=Object.assign({},K.computed);var it=function(t){function e(){return t.apply(this,Array.from(arguments))}tt(e,t);var n=e.prototype;return n.initData=function(){return{nativeAttributes:{},styles:{},defaultStyles:{},styleMode:e.styleMode}},n.dispatch=function(e,n){t.prototype.dispatch.call(this,e,n)},n.storeDispatch=function(t,e){var n;null===(n=this.store)||void 0===n||n.dispatch(t,e)},n.eventDispatch=function(t,n){"message"===e.dispatchMode?this.dispatch(t,n):"store"===e.dispatchMode&&this.storeDispatch(t,n)},e}(n.Component);it.trimWhitespace="all",it.dispatchMode="message",it.styleMode="merge",it.computed={newStyles:function(){if("overwrite"===this.data.get("styleMode"))return this.data.get("styles");var t=this.data.get("defaultStyles")||{},e=this.data.get("styles");return Object.keys(t).reduce((function(n,i){return n[i]=t[i],e[i]&&(n[i]+=" "+e[i]),n}),{})}};Object.assign(Object.assign({},it.computed),{type:function(){var t=this.data.get("nativeAttributes");return(null==t?void 0:t.type)||"button"}}),it.computed;var at=["xs","sm","md","lg","xl","xxl"];Object.assign(Object.assign({},it.computed),{responsive:function(){var t,e,n,i=this,a=this.data.get("size"),o=this.data.get("columns"),r=this.data.get("gutter"),s=this.data.get("align"),l=this.data.get("justify"),c=this.data.get("wrap"),d=at.reduce((function(t,e){return t[e]=i.data.get(e)||{},t}),{});return["columns","gutter","align","justify","wrap"].forEach((e=d,n=(t={size:a,columns:o,gutter:r,align:s,justify:l,wrap:c}).size,function(i){var a=t[i];if("object"===(void 0===a?"undefined":nt(a)))for(var o in a)a.hasOwnProperty(o)&&(e[o][i]=a[o]);else e[n][i]=a})),d},current:function(){return this.data.get("responsive")[this.data.get("size")]},rowStyle:function(){var t=this.data.get("current"),e={};if(t.gutter){var n=t.gutter/-2;Object.assign(e,{"margin-left":n+"px","margin-right":n+"px"})}return t.wrap&&Object.assign(e,{"flex-wrap":"wrap"}),t.justify&&Object.assign(e,{"justify-content":t.justify}),t.align&&Object.assign(e,{"align-items":t.align}),e}}),Object.assign(Object.assign({},it.computed),{responsive:function(){var t,e,n,i=this,a=this.data.get("size"),o=this.data.get("span"),r=at.reduce((function(t,e){return t[e]=i.data.get(e)||{},t}),{});return["span"].forEach((e=r,n=(t={size:a,span:o}).size,function(i){var a=t[i];if("object"===(void 0===a?"undefined":nt(a)))for(var o in a)a.hasOwnProperty(o)&&(e[o][i]=a[o]);else e[n][i]=a})),r},colStyle:function(){var t=this.data.get("span"),e=this.data.get("rowCurrent"),n={"box-sizing":"border-box"};if(e&&e.gutter){var i=e.gutter/2;Object.assign(n,{"padding-left":i+"px","padding-right":i+"px"})}if(e&&e.columns&&t){var a=+t/+e.columns*100;Object.assign(n,{flex:"0 0 auto",width:a+"%"})}return n}}),it.computed,it.computed,Object.assign(Object.assign({},it.computed),{objectFitValue:function(){var t=this.data.get("objectFit");return t&&-1!==["fill","contain","cover","none","scale-down"].indexOf(t)?"object-fit:"+t+";":""}}),it.computed,it.computed,Object.assign(Object.assign({},it.computed),{cursorStyle:function(){return"left: "+this.data.get("cursorLeft")+"px; width: "+this.data.get("cursorWidth")+"px"}}),it.computed,it.computed,Object.assign(Object.assign({},it.computed),{intPartList:function(){for(var t=this.data.get("value"),e=this.data.get("max"),n=this.data.get("total"),i=Math.floor(t/e*n),a=[],o=0;o<i;o++)a.push(o+1);return a},decPart:function(){var t=(this.data.get("value")/this.data.get("max")*this.data.get("total")+"").split(".");return t.length>1?"0."+t[1]:0},totalList:function(){for(var t=this.data.get("total"),e=[],n=0;n<t;n++)e.push(n+1);return e}}),it.computed;var ot=function(t){function e(){return t.apply(this,Array.from(arguments))}tt(e,t);var n=e.prototype;return n.initData=function(){return Object.assign(Object.assign({},t.prototype.initData.call(this)),{defaultStyles:h,selectable:""})},n.attached=function(){this.data.get("selectable")&&this.thead&&this.thead.updateSelectAllState(this.isAllSelected())},n.isAllSelected=function(){var t,e=(null===(t=null==this?void 0:this.tbody)||void 0===t?void 0:t.findChildTRs())||[],n=!0;if((null==e?void 0:e.length)>0)for(var i=0,a=null==e?void 0:e.length;i<a;i++){if(!e[i].data.get("selected")){n=!1;break}}else n=!1;return n},e}(it);ot.template='\n        <table class="{{newStyles.table}}">\n            <slot name="header"></slot>\n            <slot></slot>\n            <slot name="footer"></slot>\n        </table>\n    ',ot.computed=it.computed,ot.messages={"UI:tbody-inited":function(t){var e;this.tbody=t.target,null===(e=null==t?void 0:t.target)||void 0===e||e.data.set("tableSelectable",this.data.get("selectable"))},"UI:thead-inited":function(t){var e,n;this.thead=t.target,null===(n=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.data)||void 0===n||n.set("tableSelectable",this.data.get("selectable"))},"select:table-select-head":function(t){var e,n=[],i=t.value;null===(e=null==this?void 0:this.tbody)||void 0===e||e.eachItem((function(t,e){t.data.get("disabled")?t.data.get("selected")&&n.push(e):(t.data.set("selected",i),i&&n.push(e))})),this.fire("select",n)},"select:table-select-body":function(t){this.thead&&this.thead.updateSelectAllState(this.isAllSelected()),this.fire("select",t.value)},"click:table-tbody-tr":function(t){this.fire("click",t.value)}};var rt=function(t){function e(){return t.apply(this,Array.from(arguments))}tt(e,t);var n=e.prototype;return n.inited=function(){this.eventDispatch("UI:thead-inited")},n.updateSelectAllState=function(t){this.tr&&this.tr.data.set("selected",t)},n.initData=function(){return Object.assign(Object.assign({},t.prototype.initData.call(this)),{defaultStyles:h})},e}(it);rt.template='\n        <thead class="{{newStyles.thead}}"><slot></slot></thead>\n    ',rt.computed=it.computed,rt.messages={"UI:tr-inited":function(t){var e,n;null===(e=t.target)||void 0===e||e.data.set("pos","thead"),null===(n=t.target)||void 0===n||n.data.set("tableSelectable",this.data.get("tableSelectable")),this.tr=t.target}};var st=function(t){function e(){return t.apply(this,Array.from(arguments))}return tt(e,t),e.prototype.initData=function(){return Object.assign(Object.assign({},t.prototype.initData.call(this)),{defaultStyles:h,colspan:1})},e}(it);st.template='\n        <td san-if="colspan !== 1" colspan="{{colspan}}" class="{{newStyles.td}}">\n            <slot></slot>\n        </td>\n        <td san-else class="{{newStyles.td}}">\n            <slot></slot>\n        </td>\n    ',st.computed=it.computed;var lt=function(t){function e(){return t.apply(this,Array.from(arguments))}return tt(e,t),e.prototype.initData=function(){return Object.assign(Object.assign({},t.prototype.initData.call(this)),{defaultStyles:h,width:""})},e}(it);lt.template='\n        <th width="{{width}}" class="{{newStyles.th}}"><slot></slot></th>\n    ',lt.computed=it.computed;var ct=function(t){function e(){var e;return(e=t.call.apply(t,[].concat([this],Array.from(arguments)))||this).tag=Number(Math.random()+Date.now()),e}tt(e,t);var n=e.prototype;return n.initData=function(){return Object.assign(Object.assign({},t.prototype.initData.call(this)),{defaultStyles:h,selected:!1,pos:"tbody",tableSelectable:"single"})},n.inited=function(){this.eventDispatch("UI:tr-inited")},n.select=function(){var t=this.data.get("selected"),e=this.data.get("pos");this.data.set("selected",!t),this.dispatch("select:table-select-"+("tbody"===e?"item":"head"),!t)},n.handleClick=function(){var t,e,n,i=this;if("thead"!==(null===(t=null==this?void 0:this.parentComponent)||void 0===t?void 0:t.tagName))if("tfoot"!==(null===(e=null==this?void 0:this.parentComponent)||void 0===e?void 0:e.tagName)){var a=(null===(n=null==this?void 0:this.parent)||void 0===n?void 0:n.children)||[],o=0;a.forEach((function(t,e){i.tag===t.tag&&(o=e)})),this.eventDispatch("click:table-tbody-item",o)}else this.eventDispatch("click:table-tfoot-item","tfoot")},e}(it);ct.template='\n        <tr class="{{newStyles.tr}}" on-click="handleClick($event)">\n            <cc-th\n                s-if="tableSelectable === \'multi\'">\n                <input\n                    s-if="disabled"\n                    checked="{{checked}}"\n                    disabled\n                    type="checkbox">\n                <input\n                    s-else\n                    checked="{{checked}}"\n                    on-change="select($event)"\n                    value="ON"\n                    type="checkbox">\n            </cc-th>\n            <cc-th\n                s-if="tableSelectable === \'single\'">\n                <input\n                    s-if="tableSelectable && pos === \'tbody\'"\n                    checked="{{checked}}"\n                    name="single"\n                    value="ON"\n                    on-change="select($event)"\n                    type="radio">\n            </cc-th>\n            <slot></slot>\n        </tr>\n    ',ct.components={"cc-td":st,"cc-th":lt},ct.computed=Object.assign(Object.assign({},it.computed),{checked:function(){var t=this.data.get("selected");switch(this.data.get("tableSelectable")){case"single":return t?"ON":"";case"multi":return t?["ON"]:[""]}}}),ct.dataTypes={selected:n.DataTypes.bool,pos:n.DataTypes.oneOf(["tbody","thead","tfoot"])};var dt=function(t){function e(){return t.apply(this,Array.from(arguments))}tt(e,t);var n=e.prototype;return n.initData=function(){return Object.assign(Object.assign({},t.prototype.initData.call(this)),{defaultStyles:h})},n.inited=function(){this.eventDispatch("UI:tbody-inited")},n.eachItem=function(t){var e=this;this.findChildTRs().forEach((function(n,i){t.call(e,n,i),i++}))},n.findChildTRs=function(){var t=[];return function e(n){var i,a;i=n,(null!=(a=ct)&&"undefined"!=typeof Symbol&&a[Symbol.hasInstance]?a[Symbol.hasInstance](i):i instanceof a)?t.push(n):n.children&&n.children.forEach((function(t){e(t)}))}(this),t},e}(it);dt.template="\n        <tbody>\n            <slot></slot>\n        </tbody>\n    ",dt.computed=it.computed,dt.messages={"UI:tr-inited":function(t){var e,n,i=(null==t?void 0:t.target)||null;null===(e=null==i?void 0:i.data)||void 0===e||e.set("pos","tbody"),null===(n=null==i?void 0:i.data)||void 0===n||n.set("tableSelectable",this.data.get("tableSelectable"))},"select:table-select-item":function(t){var e=this.data.get("tableSelectable"),n=1;switch(e){case"single":this.eachItem((function(e,i){var a=e===t.target;e.data.set("selected",a),a&&(n=i)}));break;case"multi":n=[],this.eachItem((function(t,e){t.data.get("selected")&&n.push(e)}))}this.eventDispatch("select:table-select-body",n)},"click:table-tbody-item":function(t){this.eventDispatch("click:table-tbody-tr",t.value)}},it.computed,Object.assign({},it.computed);var ut=function(t){function e(){return t.apply(this,Array.from(arguments))}tt(e,t);var n=e.prototype;return n.initData=function(){return Object.assign(Object.assign({},t.prototype.initData.call(this)),{defaultStyles:l,url:"",preventDefault:!1,params:{}})},n.onClick=function(t){this.fire("click",t);var e={event:t};this.eventDispatch("click:link",e)},e}(it);ut.computed=it.computed;var ht=function(t){function e(){return t.apply(this,Array.from(arguments))}return tt(e,t),e.prototype.click=function(t){this.onClick(t),this.data.get("preventDefault")&&t.preventDefault()},e}(ut);ht.template='\n        <component\n            s-is="{{url ? \'a\' : \'div\'}}"\n            class="{{newStyles.link}}"\n            href="{{url || \'\'}}"\n            s-bind="nativeAttributes"\n            on-click="click"\n        >\n            <slot></slot>\n        </component>\n    ',ht.computed=ut.computed,it.computed;var pt=function(t){function e(){return t.apply(this,Array.from(arguments))}return tt(e,t),e.prototype.initData=function(){return Object.assign(Object.assign({},t.prototype.initData.call(this)),{defaultStyles:o,desc:"",image:"",size:"md",hasDesc:!!this.sourceSlots.named.desc,hasImage:!!this.sourceSlots.named.image,hasExtra:!!this.sourceSlots.named.extra})},e}(it);pt.template='\n        <div class="{{newStyles.result}} {{size}}">\n            <img s-if="{{!!image}}" src="{{image}}"/>\n            <slot s-if="{{hasImage}}" name="image"></slot>\n\n            <span s-if="{{!!desc}}">{{desc}}</span>\n            <slot s-if="{{hasDesc}}" name="desc"></slot>\n\n            <slot s-if="{{hasExtra}}" name="extra"></slot>\n        </div>\n    ',pt.computed=it.computed;var ft=function(t){function e(){return t.apply(this,Array.from(arguments))}return tt(e,t),e.prototype.initData=function(){return Object.assign(Object.assign({},t.prototype.initData.call(this)),{defaultStyles:r,size:"md",switch:!0,image:"",desc:"",hasImage:!!this.sourceSlots.named.image,hasDesc:!!this.sourceSlots.named.desc,hasContent:!!this.sourceSlots.named.content})},e}(it);function gt(t,e){return gt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},gt(t,e)}ft.template='\n        <div s-if="switch" class="{{hasContent ? newStyles.nested : \'\'}}">\n            <div s-bind="nativeAttributes">\n                <div class="\n                    {{newStyles.load}}\n                    {{newStyles.loading}}\n                    {{hasContent ? newStyles.nestedLoading : \'\'}}">\n                    <cc-result\n                        size="{{size}}"\n                        image="{{image}}"\n                        desc="{{desc}}"\n                        class="{{newStyles.result}}"\n                        styles="{{newStyles}}"\n                    >\n                        <span slot="image" s-if="hasImage">\n                            <slot name="image"></slot>\n                        </span>\n                        <div slot="desc" s-if="hasDesc">\n                            <slot name="desc"></slot>\n                        </div>\n                    </cc-result>\n                </div>\n            </div>\n\n            <div s-if="hasContent" class="{{newStyles.container}}">\n                <slot name="content" />\n            </div>\n\n        </div>\n    ',ft.components={"cc-result":pt},ft.computed=it.computed;var mt=function(t){function e(){return t.apply(this,Array.from(arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gt(t,e)}(e,t),e.prototype.initData=function(){return Object.assign(Object.assign({},t.prototype.initData.call(this)),{defaultStyles:g,text:"加载中...",name:"spin",switch:!0})},e}(J);function vt(t,e){return vt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},vt(t,e)}mt.template='\n        <cc-loading\n            switch="{{switch}}"\n            styles="{{newStyles}}"\n            style-mode="overwrite"\n        >\n            <div slot="image">\n                <div class="{{newStyles.loadingIcon}}"/>\n            </div>\n            <div slot="desc">\n                <div class="{{newStyles.loadingText}}">{{text}}</div>\n            </div>\n        </cc-loading>\n    ',mt.components={"cc-loading":ft},mt.computed=J.computed;var bt=function(t){function e(){return t.apply(this,Array.from(arguments))}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vt(t,e)}(e,t);var n=e.prototype;return n.initData=function(){return{color:U,legend:[],align:"center"}},n.handleClickItem=function(t,e){this.data.get("legend").length<=1||this.fire("legend-click",{item:t,index:e})},e}(n.Component);bt.template='\n        <div class="ai-echart-flex-justify-{{align}} ai-echart-legend">\n            <div\n                s-for="item, index in legend"\n                class="ai-echart-legend-item ai-echart-flex-align-center{{\n                    item.disable ? \' ai-echart-legend-disabled\' : \'\'}}"\n                on-click="handleClickItem(item, index)"\n            >\n                <span\n                    style="background-color: {{color[index]}}"\n                    class="ai-echart-legend-icon"\n                ></span>\n                <span class="ai-echart-legend-text">{{item.name}}</span>\n            </div>\n        </div>\n    ',bt.trimWhitespace="all";var yt,wt,xt;yt={exports:{}},wt="undefined"!=typeof self?self:a,xt=function(){return function t(e){var n=[[[8,0,1,0],[13,38,5,0]]],i={isAndroid:function(){return/android/i.test(e)},isIOS:function(){return/(iPhone|iPod|iPad)/.test(e)},isWinPhone:function(){return/Windows Phone ([\d.]+)/.test(e)},iOSVersion:function(){var t=/OS (\d+)_(\d+)/.exec(e);return t?[Number(t[1]),Number(t[2])]:[]},appleWebkitVersion:function(){var t=e.match(/ applewebkit\/([0-9.]+)/i);return t?t[1].split(".").map(parseFloat):[]},baiduBoxVersion:function(){if(!this.isBaiduBox()||i.isArkWeb())return 0;var t,a=/([\d+.]+)_(?:diordna|enohpi)_/i,o=/baiduboxapp\/([\d+.]+)/,r=/bdhonorbrowser\/([\d+.]+)/;if(a.test(e))t=e.match(a)[1].split(".").reverse();else if(o.test(e))t=e.match(o)[1].split(".");else if(r.test(e)){t=e.match(r)[1].split(".");for(var s=0;s<n.length;s++){var l=n[s];1e7*t[0]+1e5*t[1]+1e3*t[1]+t[1]>=1e7*l[0][0]+1e5*l[0][1]+1e3*l[0][2]+l[0][3]&&(t=l[1])}}return t?t.map(parseFloat):[]},honorVersion:function(){var t,n=/bdhonorbrowser\/([\d+.]+)/;return n.test(e)&&(t=e.match(n)[1].split(".")),t?t.map(parseFloat):[]},baiduBoxOrBdappVersion:function(){return this.isBaiduBox()?this.baiduBoxVersion()&&this.baiduBoxVersion().length>0?this.baiduBoxVersion():null:this.isBdapp()?this.bdappVersion():null},bdappVersion:function(){if(!this.isBdapp())return null;var t=e.match(/bdapp\/[\d+.]+\s\(\w+;\s\w+\)\s\w+\/([\d+.]+)/i),n=t?t[1].split("."):null;return n?n.map(parseFloat):null},secrVersion:function(){if(!this.isSearchCraft())return 0;var t=e.match(/ SearchCraft\/([0-9]+_)?([0-9.]+)/i),n=(/(iPhone|iPod|iPad)/.test(e),t[2].split("."));return n?n.map(parseFloat):[]},getChromeVersion:function(){if(!this.isChromeDesktop()&&!this.isChromeMobile())return 0;var t=e.match(/ Chrome\/([0-9]+_)?([0-9.]+)/i);return t&&t[2]?t[2].split(".").map(parseFloat):[]},androidVersion:function(){var t=e.match(/Android ([0-9.]+);/);return t?t[1].split(".").map(parseFloat):[]},vivoBrowserVersion:function(){var t=e.match(/VivoBrowser\/([0-9.]+)/);return t&&t[1]?t[1].split(".").map(parseFloat):[]},isBaiduboxOrBdapp:function(){return this.isBaiduBox()||this.isBdapp()},isBdapp:function(){return/bdapp/.test(e)},isTomas:function(){return/tomas/.test(e)},isKnews:function(){return/knews/.test(e)},isBaiduboxsenior:function(){return/baiduboxsenior/.test(e)},isBDBoxEngine:function(){return/BDBoxEngine/.test(e)},isBaiduBox:function(){return!i.isArkWeb()&&(/baiduboxapp/.test(e)||/bdhonorbrowser/.test(e))},isBaiduHonorBrowser:function(){return/bdhonorbrowser/.test(e)},isBaiduBoxLite:function(){return!i.isArkWeb()&&/(lite|info) baiduboxapp/.test(e)},isBaiduBoxJisu:function(){return i.isBaiduBoxLite()},isBaiduBoxVision:function(){return/baiduboxvision/.test(e)},isQQ:function(){return/QQBrowser/.test(e)},isQQApp:function(){return/QQ\/[0-9]+/.test(e)},isWeixinApp:function(){return/MicroMessenger/.test(e)},isQQBrowser:function(){return/QQBrowser/.test(e)&&!(/QQ\//.test(e)||/MicroMessenger/.test(e))},isBaiduBrowser:function(){return/baidubrowser/.test(e)},isSearchCraft:function(){return/SearchCraft/i.test(e)},isUC:function(){return/UCBrowser/.test(e)},isChromeDesktop:function(){return/Chrome\//.test(e)},isChromeMobile:function(){return/Chrome\/(\S*) Mobile/.test(e)},isCriOS:function(){return/CriOS/.test(e)},isSogouMobile:function(){return/SogouMobileBrowser/.test(e)},isMiuiBrowser:function(){return/MiuiBrowser\/(\S*)/.test(e)},isHUAWEIBrowser:function(){return/HUAWEI/i.test(e)&&!(/baiduboxapp/.test(e)||/QQBrowser/.test(e)||/UCBrowser/.test(e)||/MicroMessenger/.test(e)||/SearchCraft/.test(e))},isMZBrowser:function(){return/MZBrowser/i.test(e)},isOppoBrowser:function(){return/HeyTapBrowser/.test(e)},isSafariBrowser:function(){var t=e.toLowerCase();return t.indexOf("applewebkit")>-1&&t.indexOf("mobile")>-1&&t.indexOf("safari")>-1&&-1===t.indexOf("linux")&&-1===t.indexOf("android")&&-1===t.indexOf("chrome")&&-1===t.indexOf("ios")&&-1===t.indexOf("browser")},isGoogleChrome:function(){var t=/^Mozilla\/(\d*?(\.\d*?)*?) \(Linux; Android (\d*?(\.\d*?)*?); .*?\) AppleWebKit\/(\d*?(\.\d*?)*?) \(KHTML, like Gecko\) Chrome\/(\d*?(\.\d*?)*?) Mobile Safari\/(\d*?(\.\d*?)*?)$/.test(e),n=/^Mozilla\/(\d*?(\.\d*?)*?) \(iPhone; CPU iPhone OS (\d*?(_\d*?)*?) like Mac OS X\) AppleWebKit\/(\d*?(\.\d*?)*?) \(KHTML, like Gecko\) CriOS\/(\d*?(\.\d*?)*?) Mobile\/(.*?) Safari\/(\d*?(\.\d*?)*?)$/.test(e);return t||n},isWKWebview:function(){var t=i.appleWebkitVersion();return i.isIOS()&&t[0]&&t[0]>600},isUIWebview:function(){var t=i.appleWebkitVersion();return i.isIOS()&&t[0]&&t[0]<=600},isXcxApp:function(){var t=window.atob("c3dhbg==");return new RegExp("("+t+"-baiduboxapp|baiduboxapp-"+t+")").test(e)},isVivoBrowser:function(){return/VivoBrowser/.test(e)},isArkWeb:function(){return e.indexOf("ArkWeb")>-1},isArkBrowser:function(){return i.isArkWeb()&&!i.isBaiduBoxOnArk()},isBaiduBoxOnArk:function(){return i.isArkWeb()&&(e.indexOf("baiduboxapp")>-1||e.indexOf("baiduarkwebapp")>-1)},baiduBoxVersionOnArk:function(){if(i.isArkWeb()){var t=e.replace(/baiduarkwebapp/g,"baiduboxapp").match(/baiduboxapp\/([\d.]+)/);if(t&&t[1])return t[1].split(".").map(parseFloat)}return 0},use:t};return i[window.atob("aXNTd2FuQXBw")]=function(){var t=window.atob("c3dhbg==");return new RegExp("("+t+"-baiduboxapp|baiduboxapp-"+t+")").test(e)},i}(navigator.userAgent)},yt.exports?yt.exports=xt():wt.myModule=xt();function Ct(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}function St(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":i._typeof(t)}function kt(t,e){return t.getPropertyValue(e)}!function(t){"undefined"!=typeof self&&self,t.exports=function(t){function e(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=8)}([function(t,e,n){function i(t,e){var n=new Image,i=a();window[i]=n,n.onload=function(){e&&e(),delete window[i]},n.onerror=function(t){e&&e(t),delete window[i]},n.src=t}function a(){var t=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}function o(t,e){if(!e||"object"!==(void 0===e?"undefined":v(e)))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t}function r(t){return Object.keys(t).map((function(e){var n=t[e];return void 0===n?n="":"string"!=typeof n&&(n=JSON.stringify(n)),encodeURIComponent(e)+"="+encodeURIComponent(n)})).join("&")}function s(t,e){var n=["webkit","moz","ms","o"];if(e in t)return e;for(var i=0;i<n.length;i++){var a=""+n[i]+e;if(a in t)return a}return""}function l(){return{x:document.body.scrollLeft||document.documentElement.scrollLeft,y:document.body.scrollTop||document.documentElement.scrollTop}}function c(t){b&&(document.addEventListener(y,t),document.addEventListener(w,t))}function d(t){document.removeEventListener(y,t),document.removeEventListener(w,t)}function u(t){return t&&"hidden"in t?t.hidden:document[b]}function h(){var t=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:{},e=Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1]?Array.from(arguments)[1]:{};return Object.keys(e).forEach((function(n){t[n]=e[n]})),t}function p(){if(Element&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}}function f(t){var e=window.getComputedStyle(t)["background-image"];return e&&"none"!==e&&/^url\(/i.test(e)?e.replace(/^url\(['"]?([^'"]+)['"]?\)/i,"$1"):""}function g(t){return t&&"string"==typeof t&&/^\s?(http:|https:)?\/\//.test(t)}function m(t,e){/complete|loaded|interactive/.test(document.readyState)&&document.body?t():document.addEventListener("DOMContentLoaded",(function(){e?t():setTimeout((function(){t()}),0)}))}Object.defineProperty(e,"__esModule",{value:!0});var v="function"==typeof Symbol&&"symbol"==St(Symbol.iterator)?function(t){return void 0===t?"undefined":St(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":St(t)};e.sendLog=i,e.guid=a,e.extend=o,e.stringify=r,e.getProp=s,e.getScrollInfo=l,e.bindVisibilityChangeEvent=c,e.disposeVisibilityChangeEvent=d,e.getPageHiddenValue=u,e.assign=h,e.matchesPolyfill=p,e.getUrlFromStyle=f,e.isUrl=g,e.afterReady=m;var b=s(document,"hidden"),y=b.replace(/hidden/i,"visibilitychange"),w="baiduboxappvisibilitychange"},function(t,e,n){function i(t,e){var n=t.colno||window.event&&window.event.errorCharacter||0,i=t.error||{};return(0,o.assign)({msg:t.message,ln:t.lineno,file:t.filename,col:n,stack:i.stack},e)}function a(t){var e=this,n=i(t,this.exceptionInfo);setTimeout((function(){e.send("et_js",n,e.exceptionDim)}),0)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0);e.default={initException:function(){this.exceptionDim=null,this.exceptionInfo={},this.onerrorCb=a.bind(this)},startJsExceptionLog:function(t,e){this.exceptionInfo=(0,o.assign)({},t),this.exceptionDim=(0,o.assign)({},e),window.removeEventListener("error",this.onerrorCb),window.addEventListener("error",this.onerrorCb)},startResExceptionLog:function(t,e){},stopJsExceptionLog:function(){window.removeEventListener("error",this.onerrorCb)},stopResExceptionLog:function(){},sendExceptionLog:function(t,e){this.send("et_comm",t,e)},sendJSError:function(t,e,n,a){e=i(t,e||{}),this.send("et_js",e,n,null,a)},destroyJsException:function(){this.stopJsExceptionLog(),this.exceptionDim=null,this.exceptionInfo=null,this.onerrorCb=null}},t.exports=e.default},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.default={sendBaseDispLog:function(t,e,n){var a=document.documentElement,o={size:{doc:{w:a.scrollWidth,h:a.scrollHeight},wind:{w:a.clientWidth,h:a.clientHeight},scr:{w:screen.width,h:screen.height}},dpr:window.devicePixelRatio||1};t&&(o=(0,i.assign)(o,t)),this.send("disp_comm",o,e,null,n)},sendDispLog:function(t,e,n){var a=void 0;a=Ct(t,Array)?t:(0,i.assign)({},t),this.send("disp_content",a,e,null,n)}},t.exports=e.default},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.default={sendBasePfLog:function(){var t=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:{},e=Array.from(arguments)[1],n=Array.from(arguments)[2],a=window.performance&&performance.timing||{},o=a.navigationStart,r=a.requestStart,s=a.responseStart,l=a.responseEnd,c=a.domComplete,d=a.domLoading,u=a.domainLookupStart,h=a.domainLookupEnd,p=a.connectStart,f=a.connectEnd,g=a.loadEventStart,m={dns:h-u,tcp:f-p,req:s-r,res:l-s,dct:c-d,ld:a.loadEventEnd-g},v=window.__webbbrige__||{},b=v.whiteScreenTime,y=v.firstScreenTime;b&&(m=(0,i.assign)(m,{wst:b-o})),y&&(m=(0,i.assign)(m,{fst:y-o})),m=(0,i.assign)(m,t),this.send("pf_comm",m,e,null,n)},sendPfLog:function(){var t=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:{},e=Array.from(arguments)[1],n=Array.from(arguments)[2],a=(0,i.assign)({},t);this.send("pf_comm",a,e,null,n)}},t.exports=e.default},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default={sendCountLog:function(t,e){this.send("count_comm",t,e)}},t.exports=e.default},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default={sendDistributeLog:function(t,e){this.send("dist_comm",t,e)}},t.exports=e.default},function(t,e,n){function i(t,e){if(!Ct(t,e))throw new TypeError("Cannot call a class as a function")}function a(t){var e={pid:"1_1",type:"except",group:"localcache"},n=d+"?"+(0,l.stringify)(e),i=JSON.stringify({pid:"1_1",type:"except",group:"localcache",ts:Date.now(),lid:p,info:{msg:"webb sdk localcache",pageUrl:location.href,log:JSON.stringify(t)}});if(h||!navigator.sendBeacon||!navigator.sendBeacon(n,i)){if(!window.fetch)return;fetch(n,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:i})}}function o(t){return["et","pf","dist","count"].indexOf(t.split("_")[0])>-1}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==St(Symbol.iterator)?function(t){return void 0===t?"undefined":St(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":St(t)},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(0),c=function(t){return t&&t.__esModule?t:{default:t}}(n(7)),d="https://sp1.baidu.com/5b1ZeDe5KgQFm2e88IuM_a/mwb2.gif",u=navigator.userAgent.toLowerCase().match(/cpu iphone os (.*?)_/),h=u&&u[2]&&+u[2]<14,p="",f={pf:"perf",dist:"dist",count:"count",et:"except"},g={ignoreSample:!1,saveLocal:!1},m=!1,v=new c.default({storage:"localstorage",maxRecordLen:300,compress:"no",onSave:function(t){try{var e=new b({pf_comm:{sample:-1!==(document.cookie||"").indexOf("webbtest=1")?1:.001},et_comm:{sample:-1!==(document.cookie||"").indexOf("webbtest=1")?1:.01},lid:p,pid:"19_103"});if(t.error&&e.send("et_comm",{msg:t.error.message,stack:t.error.stack},{path:location.pathname},{group:"common"}),m)return;m=!0,e.send("pf_comm",{lsCost:t.cost,lsLen:t.length},{path:location.pathname},{group:"common"})}catch(t){console.error(t)}},onFlush:function(t){t.length&&a(t)}}),b=function(){function t(e){i(this,t);var n={sample:0,saveLocal:g.saveLocal};this.validateOptions(e),p=e.lid||g.lid,this.options=(0,l.extend)(n,e),this.random=Math.random(),this.options.sample&&(this.options.curSample=Math.random()<this.options.sample?1:0),this.updateCurSample(),this.initException(),this.options.ia&&this.initIa&&this.initIa()}return s(t,null,[{key:"setGlobalOption",value:function(t){g=(0,l.extend)(g,t)}}]),s(t,[{key:"updateCurSample",value:function(){var t=this;Object.keys(this.options).forEach((function(e){var n=t.options[e];n&&n.sample&&void 0===n.curSample&&(t.options[e].curSample=Math.random()<n.sample?1:0)}))}},{key:"validateOptions",value:function(t){var e=["pid","lid"];if("object"!==(void 0===t?"undefined":r(t)))throw new Error("Options must be an object!");if(!e.every((function(e){return e in t})))throw new Error("Options "+e.join(", ")+" required")}},{key:"updateOption",value:function(t){this.options=(0,l.extend)(this.options,t),this.updateCurSample()}},{key:"wrapCommonParam",value:function(t,e,n){var i={pid:this.options.pid,lid:this.options.lid,ts:Date.now(),type:t,info:e,ext:this.options.ext?this.options.ext:{}};return o(t)&&(i.type=t.split("_")[0],i.type=f[i.type]?f[i.type]:i.type,i.group=t.split("_")[1]||"common",i.group="comm"===i.group?"common":i.group),n&&(i.dim=n),i}},{key:"hitSample",value:function(t){if(g.ignoreSample)return 1;var e=this.options[t];return e?"sample"in e?"eachreq"===e.sampleType?e.sample&&Math.random()<=e.sample?1:0:e.curSample:"eachreq"===this.options.sampleType?this.options.sample&&Math.random()<=this.options.sample?1:0:this.options.curSample:0}},{key:"getLogHost",value:function(t){var e=this.options;return e[t]&&e[t].logHost||e.logHost?e[t]&&e[t].logHost?e[t].logHost:e.logHost:o(t)?d:"https://sp1.baidu.com/5b1ZeDe5KgQFm2e88IuM_a/webb.gif"}},{key:"saveLocal",value:function(t){0!==t.type.indexOf("et_")&&0!==t.type.indexOf("except")&&0!==t.type.indexOf("pf_")&&0!==t.type.indexOf("perf")||v&&v.addLog(t)}},{key:"flushLog",value:function(){v&&v.flushLog()}},{key:"send",value:function(t,e,n,i,a){"function"==typeof n&&(a=i,i=n,n=null);var o=this.wrapCommonParam(t,e,n);(0,l.extend)(o,a),o&&o.ext?o.ext.path=location.pathname:o&&!o.ext&&(o.ext={path:location.pathname});var r=this.extendOptions&&this.extendOptions.onlySaveLocal,s=this.extendOptions&&this.extendOptions.saveLocal;if((!(this.options.saveLocal||s||r)||(this.saveLocal(o),!r))&&this.hitSample(t)){var c=(0,l.guid)(),d=window[c]=new Image;d.onload=function(t){i&&("function"==typeof i?i(t):i.successCb&&"function"==typeof i.successCb&&i.successCb(t)),delete window[c]},d.onerror=function(t){i&&i.errorCb&&"function"==typeof i.errorCb&&i.errorCb(t),delete window[c]},d.src=this.getLogHost(t)+"?"+(0,l.stringify)(o)}}},{key:"sendBeacon",value:function(t,e,n,i){var a=this.wrapCommonParam(t,e,n);(0,l.extend)(a,i),a&&a.ext?a.ext.path=location.pathname:a&&!a.ext&&(a.ext={path:location.pathname});var o=this.extendOptions&&this.extendOptions.onlySaveLocal,r=this.extendOptions&&this.extendOptions.saveLocal;(this.options.saveLocal||r||o)&&(this.saveLocal(a),o)||!this.hitSample(t)||navigator.sendBeacon&&navigator.sendBeacon(this.getLogHost(t)+"?"+(0,l.stringify)(a))||this.send(t,e,n)}},{key:"destroy",value:function(){this.destroyJsException(),this.destroyIaMonitor(),this.destroyMediaTime()}}]),t}();e.default=b,t.exports=e.default},function(t,e,n){!function(e,n){t.exports=n()}(0,(function(){function t(t,e){function n(){this.constructor=t}v(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function e(t){for(var e=[],n={},i=0,a=t;i<a.length;i++){var o=a[i];null==n[o]?n[o]=1:n[o]++}for(var r=0,s=Object.entries(n);r<s.length;r++){var l=s[r],c=l[0],d=l[1];e.push(new b(c,d))}return e}function n(t){for(var e=function(t,e){return t.weight-e.weight};t.length>1;){t.sort(e);var n=t.shift(),i=t.shift();if(n&&i){var a=new b(null,n.weight+i.weight);a.left=n,a.right=i,t.unshift(a)}}return t.shift()}function i(t){function e(t,i,a){var o=[].concat(a);o.push(i),null!=t&&(null==t.data?(e(t.left,"0",o),e(t.right,"1",o)):n[t.data]=o.join(""))}if(null==t)return null;var n={};return e(t,"",[]),n}function a(t,e){for(var n=[],i=0,a=t;i<a.length;i++){var o=a[i];n.push(e[o])}return n}function o(t){for(var e=t.join(""),n=Math.ceil(e.length/8),i=new Array(n+1),a=0,o="",r=0;r<e.length;r+=8)o=e.substring(r,r+8),i[a]=parseInt(o,2),a++;return i[a]=o.length,i}function r(t){var r=i(n(e(t)));return{result:o(a(t,r)),codes:r}}function s(t,e){t&&(e|=256);var n=Number(e).toString(2);return t?n.substring(n.length-8):n}function l(t,e){for(var n=[],i=0;i<e.length-1;i++){var a=i!==e.length-2;n.push(s(a,e[i]))}var o=n[n.length-1];o="00000000".substring(8-(e[e.length-1]-o.length))+o,n[n.length-1]=o;for(var r={},l=0,c=Object.entries(t);l<c.length;l++){var d=c[l],u=d[0];r[d[1]]=u}var h=n.join(""),p=[],f=h.length;for(i=0;i<f;){for(var g=1,m=(a=!0,null);a&&i+g<=f&&""!==(u=h.substring(i,i+g));)(m=r[u])?a=!1:g++;p.push(parseInt(m)),i+=g}return p}function c(t){for(var e=[],n=0;n<t.length;n++)e.push(t.charCodeAt(n));return e}function d(t){for(var e="",n=0,i=t;n<i.length;n++){var a=i[n];e+=String.fromCharCode(a)}return e}function u(t){var e=r(c(t)),n=e.result;return{codes:e.codes,result:d(n)}}function h(t,e){return d(l(t,c(e)))}function p(){for(var t=[],e=0;e<Array.from(arguments).length;e++)t[e]=Array.from(arguments)[e];return(Object.assign||function(t){for(var e=void 0,n=1,i=Array.from(arguments).length;n<i;n++)for(var a in e=Array.from(arguments)[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,t)}function f(t){for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e+=String.fromCharCode(i):i>127&&i<2048?(e+=String.fromCharCode(i>>6|192),e+=String.fromCharCode(63&i|128)):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128),e+=String.fromCharCode(63&i|128))}return e}function g(t){for(var e="",n=0,i=0,a=0,o=0;n<t.length;)(i=t.charCodeAt(n))<128?(e+=String.fromCharCode(i),n++):i>191&&i<224?(a=t.charCodeAt(n+1),e+=String.fromCharCode((31&i)<<6|63&a),n+=2):(a=t.charCodeAt(n+1),o=t.charCodeAt(n+2),e+=String.fromCharCode((15&i)<<12|(63&a)<<6|63&o),n+=3);return e}function m(t,e){if(void 0===e&&(e=!1),!t)return"";e||(t=f(t));var n,i,a,o={},r=[],s=t.charAt(0),l=s,c=l,d=256,u=function(){r.push(s.length>1?String.fromCharCode(o[s]):s)};for(e&&r.push(s),n=1;n<t.length;n++)i=t.charAt(n),e?(a=t.charCodeAt(n),s=a<256?i:o[a]||s+l,r.push(s),l=s.charAt(0),o[d++]=c+l,c=s):o.hasOwnProperty(s+i)?s+=i:(u(),o[s+i]=d++,s=i);e||u();var h=r.join("");return e&&(h=g(h)),h}var v=function(t,e){return(v=Object.setPrototypeOf||Ct({__proto__:[]},Array)&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},b=function(){function t(t,e){this.data=t,this.weight=e}return t.prototype.preOrder=function(t){t.push(this),this.left&&this.left.preOrder(t),this.right&&this.right.preOrder(t)},t}(),y=function(){function t(){}return t.prototype.set=function(t,e){},t.prototype.get=function(t,e){},t.prototype.rm=function(t){},t}(),w=function(e){function n(){return null!==e&&e.apply(this,Array.from(arguments))||this}return t(n,e),n.isSupport=function(){return!!window.localStorage},n.prototype.set=function(t,e){try{localStorage.setItem(t,e)}catch(t){console.error(t)}},n.prototype.get=function(t,e){var n=null;try{n=localStorage.getItem(t)}catch(t){console.error(t)}e&&e(n)},n.prototype.rm=function(t){try{localStorage.removeItem(t)}catch(t){console.error(t)}},n}(y),x=function(e){function n(){var t=e.call(this)||this;t.databaseName="spyLC",t.db=null,t.setQueue=[],t.getQueue=[];var n=window.indexedDB.open(t.databaseName);return n.onupgradeneeded=function(e){t.db=e.target&&e.target.result,t.db&&!t.db.objectStoreNames.contains(t.databaseName)&&t.db.createObjectStore(t.databaseName,{keyPath:"key"}),t.runQueueTask()},n.onsuccess=function(){t.db=n.result,t.runQueueTask()},t}return t(n,e),n.isSupport=function(){return!!window.indexedDB},n.prototype.set=function(t,e){this.db?this.db.transaction([this.databaseName],"readwrite").objectStore(this.databaseName).add({key:t,value:e}):this.setQueue.push({key:t,value:e})},n.prototype.get=function(t,e){if(this.db){var n=this.db.transaction([this.databaseName]).objectStore(this.databaseName).get(t);n.onsuccess=function(){var t=n.result?n.result:{value:""};e(t.value)}}else this.getQueue.push({key:t,cb:e})},n.prototype.runQueueTask=function(){var t=this;this.setQueue.forEach((function(e){t.set(e.key,e.value)})),this.getQueue.forEach((function(e){t.get(e.key,e.cb)}))},n}(y);return function(){function t(t){void 0===t&&(t={}),this.tmpList=[],this.option=p({defaultTrigger:!0,compress:"lzw",key:"SpyLocalCache",interval:500,maxRecordLen:30,onFlush:function(){},onSave:function(){},storage:x.isSupport()?"indexedDB":w.isSupport()?"localstorage":"empty"},t),this.load=this.load.bind(this),this.init()}return t.prototype.init=function(){"indexedDB"===this.option.storage?this.storage=new x:"localstorage"===this.option.storage?this.storage=new w:this.storage=new y,"complete"===document.readyState?this.load():window.addEventListener("load",this.load)},t.prototype.load=function(){location.search.indexOf("_FlushLogLocalCache=1")>-1&&this.option.defaultTrigger&&this.flushLog()},t.prototype.addLog=function(t){var e=this;t=JSON.stringify(t),this.tmpList.push(t),this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){e.save()}),this.option.interval)},t.prototype.getData=function(t){var e=this;try{this.storage.get(this.option.key,(function(n){n?e.storage.get(e.option.key+"Codes",(function(i){var a=[];try{i&&(i=JSON.parse(i)),a=e.unzip(n,i).split("\n")}catch(t){console.error(t)}t(a)})):t([])}))}catch(e){console.error(e),t([])}},t.prototype.save=function(){var t=this,e=Date.now();this.getData((function(n){var i=t.option.maxRecordLen-1,a=(n.length>i?n.slice(n.length-i,n.length):n).concat(t.tmpList),o=a.join("\n"),r=null,s=0;try{var l=t.zip(o),c="";l.codes?(c=JSON.stringify(l.codes),t.storage.set(t.option.key+"Codes",c)):t.storage.rm(t.option.key+"Codes"),t.storage.set(t.option.key,l.result),s=l.result.length}catch(t){r=t,console.error(t)}t.tmpList=[],t.option.onSave&&t.option.onSave({cost:Date.now()-e,length:s/1024,list:a,error:r})}))},t.prototype.flushLog=function(){var t=this;this.getData((function(e){try{for(var n=0;n<e.length;n++)e[n]=JSON.parse(e[n])}catch(n){e=[],t.storage.rm(t.option.key),console.error(n)}for(var i=0;i<t.tmpList.length;i++)e.push(JSON.parse(t.tmpList[i]));t.option.onFlush&&t.option.onFlush(e)}))},t.prototype.zip=function(t){return"lzw"===this.option.compress?{codes:null,result:m(t)}:"huffman"===this.option.compress?u(t):{codes:null,result:t}},t.prototype.unzip=function(t,e){return"lzw"===this.option.compress?m(t,!0):"huffman"===this.option.compress?h(e,t):t},t}()}))},function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(9)),o=i(n(1)),r=i(n(10)),s=i(n(2)),l=i(n(3)),c=i(n(4)),d=i(n(5)),u=i(n(6)),h=n(0);(0,h.extend)(u.default.prototype,a.default),(0,h.extend)(u.default.prototype,o.default),(0,h.extend)(u.default.prototype,r.default),(0,h.extend)(u.default.prototype,s.default),(0,h.extend)(u.default.prototype,l.default),(0,h.extend)(u.default.prototype,c.default),(0,h.extend)(u.default.prototype,d.default),e.default=u.default,t.exports=e.default},function(t,e,n){function i(t,e){return-1!==t.indexOf(e)}function a(t){(0,o.getPageHiddenValue)(t)?this.iaHideCb(t):this.iaShowCb(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=["bf","scroll","resize"];e.default={initIa:function(){this.iaTimer=null,this.curSpeed=4e3,this.iaQueue=[],this.lastQueueLen=-1,this.iaDim={},this.iaSendSwitch=!1,this.scrollCb=this.sendScrollLog.bind(this),this.resizeCb=this.sendResizeLog.bind(this),this.iaVisibilityCb=a.bind(this),this.iaHideCb=this.iaHideCb.bind(this),this.iaShowCb=this.iaShowCb.bind(this)},flushIaQueue:function(){var t=[].concat(this.iaQueue);for(this.iaQueue=[];t.length;){var e=t.splice(0,6);this.sendBeacon("ia",e,this.iaDim)}clearTimeout(this.iaTimer),this.startCycle()},startCycle:function(){var t=this;this.iaTimer=setTimeout((function(){var e=t.iaQueue.length;-1===t.lastQueueLen?t.lastQueueLen=e:t.lastQueueLen&&e/t.lastQueueLen>=2&&t.curSpeed>2e3?t.curSpeed-=1e3:e&&t.lastQueueLen/e>=2&&t.curSpeed<6e3||!e&&t.curSpeed<6e3?t.curSpeed+=1e3:e&&!t.lastQueueLen&&t.curSpeed>2e3?t.curSpeed-=1e3:!e&&t.curSpeed<6e3&&(t.curSpeed+=1e3),t.lastQueueLen=e,t.flushIaQueue(),clearTimeout(t.iaTimer),t.startCycle()}),this.curSpeed)},startIaMonitor:function(){var t=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:{};if(this.options&&this.options.ia){this.iaDim=(0,o.assign)(this.iaDim,t),this.resetIaSwitch(),this.iaShowCb(null,!0),this.removeMonitorEvents(),clearTimeout(this.iaTimer),this.startCycle(),this.monitorItems=r;var e=[];this.options&&this.options.ia&&this.options.ia.iaMonitorItems?e=this.options.ia.iaMonitorItems:this.options&&this.options.iaMonitorItems&&(e=this.options.iaMonitorItems),e&&Array.isArray(e)&&e.length&&(this.monitorItems=e.filter((function(t){return i(r,t)})),this.monitorItems.length||(this.monitorItems=r)),this.bindMonitorEvents()}},stopIaMonitor:function(){this.options&&this.options.ia&&(this.iaHideCb(null,!0),this.flushIaQueue(),this.removeMonitorEvents(),clearTimeout(this.iaTimer))},sendScrollLog:function(){var t=this,e=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:{};this.scrollLogLock||(this.scrollLogLock=!0,setTimeout((function(){t.scrollLogLock=!1}),500),e.x>=0&&e.y>=0||(e=(0,o.getScrollInfo)()),this.iaQueue.push({k:"scroll",x:e.x,y:e.y,t:(new Date).getTime(),ele:e.scrollEle||"window"}))},sendResizeLog:function(){var t=this;this.resizeLogLock||(this.resizeLogLock=!0,setTimeout((function(){t.resizeLogLock=!1}),500),setTimeout((function(){t.iaQueue.push({k:"resize",w:window.innerWidth||document.documentElement.clientWidth,h:window.innerHeight||document.documentElement.clientHeight,t:(new Date).getTime()})}),50))},bindMonitorEvents:function(){var t=this.monitorItems;i(t,"bf")&&((0,o.getProp)(document,"hidden")&&(0,o.bindVisibilityChangeEvent)(this.iaVisibilityCb),window.addEventListener("beforeunload",this.iaHideCb,!1),window.addEventListener("unload",this.iaHideCb,!1),window.addEventListener("pagehide",this.iaHideCb,!1),window.addEventListener("pageshow",this.iaShowCb,!1)),i(t,"scroll")&&window.addEventListener("scroll",this.scrollCb),i(t,"resize")&&window.addEventListener("resize",this.resizeCb)},removeMonitorEvents:function(){window.removeEventListener("scroll",this.scrollCb),window.removeEventListener("resize",this.resizeCb),(0,o.disposeVisibilityChangeEvent)(this.iaVisibilityCb),window.removeEventListener("beforeunload",this.iaHideCb,!1),window.removeEventListener("unload",this.iaHideCb,!1),window.removeEventListener("pagehide",this.iaHideCb,!1),window.removeEventListener("pageshow",this.iaShowCb,!1)},updateIaDim:function(){var t=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:{};this.iaDim=t},resetIaSwitch:function(){this.iaSendSwitch=!1},convertIaSwitch:function(){this.iaSendSwitch=!this.iaSendSwitch},iaHideCb:function(t,e){if(this.iaSendSwitch||e){var n=t?t.type:"";e&&(n="manual"),this.convertIaSwitch(),this.iaQueue.push({k:"blur",trigger:n,t:(new Date).getTime()}),this.flushIaQueue()}},iaShowCb:function(t,e){if(!this.iaSendSwitch||e){var n=t?t.type:"";e&&(n="manual"),this.convertIaSwitch(),this.iaQueue.push({k:"focus",trigger:n,t:(new Date).getTime()}),this.flushIaQueue()}},destroyIaMonitor:function(){this.removeMonitorEvents(),clearTimeout(this.iaTimer),this.iaTimer=null,this.curSpeed=null,this.iaQueue=null,this.lastQueueLen=null,this.iaDim=null,this.scrollCb=null,this.resizeCb=null,this.pageActiveStatusChangeCb=null}},t.exports=e.default},function(t,e,n){function i(){var t=this.__media__;t.sendSwitch=!0,t.continueSwitch=!1}function a(){var t=this.__media__;t.sendSwitch=!t.sendSwitch,t.continueSwitch=!t.continueSwitch}function o(t){(0,l.getPageHiddenValue)(t)?this.mediaHideCb(t):this.mediaShowCb(t)}function r(t){var e=this.__media__||{};e.continueSwitch&&(this.convertMediaSwitch(),e.count+=1,e.startTime=Date.now())}function s(t,e){var n=this.__media__;if(n.sendSwitch||e){var i=t?t.type:"";e&&(i="manual"),n.endTime=Date.now(),this.convertMediaSwitch();var a={t1:n.startTime,t2:n.endTime,count:n.count,trigger:i};this.sendBeacon(c,a,n.dim)}}Object.defineProperty(e,"__esModule",{value:!0});var l=n(0),c="time";e.default={initMediaTime:function(t){var e=Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1]?Array.from(arguments)[1]:{},n=this.__media__={dim:e,startTime:0,endTime:0,count:1,sendSwitch:!0,continueSwitch:!1};t?n.startTime=t:window.__webbbrige__&&window.__webbbrige__.startTime?(n.startTime=window.__webbbrige__.startTime,window.__webbbrige__.startTime=null):n.startTime=Date.now(),this.hasMediaInit=!0,this.mediaHideCb=s.bind(this),this.mediaShowCb=r.bind(this),this.mediaVisibilityCb=o.bind(this),this.resetMediaSwitch=i.bind(this),this.convertMediaSwitch=a.bind(this),this.destroyMediaEvent(),this.bindMediaEvent()},reStartMediaTime:function(t){if(this.hasMediaInit){var e=this.__media__;e.count=t?1:e.count+1,e.startTime=Date.now(),this.resetMediaSwitch(),this.destroyMediaEvent(),this.bindMediaEvent()}else this.initMediaTime()},stopMediaTime:function(){!this.__media__||this.__media__&&!this.__media__.startTime||(this.mediaHideCb(null,!0),this.destroyMediaEvent(),this.__media__.startTime=null)},updateMediaDim:function(){var t=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:{};this.__media__.dim=t},bindMediaEvent:function(){(0,l.getProp)(document,"hidden")&&(0,l.bindVisibilityChangeEvent)(this.mediaVisibilityCb),window.addEventListener("beforeunload",this.mediaHideCb,!1),window.addEventListener("unload",this.mediaHideCb,!1),window.addEventListener("pagehide",this.mediaHideCb,!1),window.addEventListener("pageshow",this.mediaShowCb,!1)},destroyMediaEvent:function(){(0,l.disposeVisibilityChangeEvent)(this.mediaVisibilityCb),window.removeEventListener("beforeunload",this.mediaHideCb,!1),window.removeEventListener("unload",this.mediaHideCb,!1),window.removeEventListener("pagehide",this.mediaHideCb,!1),window.removeEventListener("pageshow",this.mediaShowCb,!1)},destroyMediaTime:function(){this.destroyMediaEvent(),this.__media__=null,this.hasMediaInit=!1,this.mediaHideCb=null,this.mediaShowCb=null,this.mediaVisibilityCb=null,this.resetMediaSwitch=null,this.convertMediaSwitch=null}},t.exports=e.default}])}({exports:{}});var _t=function(t,e,n){var i=0,a=0,o=Math.floor(n/2);return t<o?(i=0,a=Math.min(n-1,e-1)):t+o>e?(a=Math.min(t+o,e-1),i=Math.max(a-n+1,0)):a=(i=t-o)+n-1,{startValue:i,endValue:a}};var Tt=function(t){if(!t||!Array.isArray(t.source)||!t.dimensions)return null;var e=[],n=[];return t.source.forEach((function(i){for(var a=1;a<i.length;a++){var o=i[a];1==+(t.dimensions[a].yAxisIndex||0)?n.push(+o):e.push(+o)}})),[e,n].filter((function(t){return t.length>0})).map((function(t){return e=t,{min:(n=Math).min.apply(n,[].concat(e)),max:(i=Math).max.apply(i,[].concat(e))};var e,n,i}))};function Ot(t){return Math.round(100*t)/100}var Lt=function(t){var e=String(t);if(!e)return 0;var n=e.match(/[^\x00-\xff]/gim)||[];return e.length-(e.length-n.length)/2},It=function(t){var e=Math.max.apply(Math,t.source.map((function(t){return Lt(t[0])})));return{interval:0,rotate:36,align:"right",formatter:function(t){return e>6?""+(Lt(t)>6?t.slice(0,5)+"...":t):t}}};function Et(t,e){return Et=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Et(t,e)}var Mt=function(e){function n(){var t;return(t=e.call.apply(e,[].concat([this],Array.from(arguments)))||this).mainChart=null,t.styleDeclaration={},t.globalClickHandler=function(){},t}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Et(t,e)}(n,e);var i=n.prototype;return i.initData=function(){return{componentType:"bar",dataSet:{source:[],dimensions:[]},color:U,emphasisColor:q,chartOption:{barDirection:"horizontal",stackName:""},chartUnit:[],changeBtn:[],useCommonChartDom:!1,defaultIndex:-1,aiTabStyle:y,finished:!1,startValue:0,endValue:0,splitNumber:3,showLegend:!0}},i.attached=function(){var e=this;this.data.get("useCommonChartDom")||new Promise((function(e,n){t(["./echarts.pc.KGe0vDLl"],e,n)})).then((function(t){var n=t.init(e.ref("mainChart"));e.initChart(n)})),this.globalClickHandler=this.globalClick.bind(this),window.addEventListener("click",this.globalClickHandler)},i.globalClick=function(t){t.composedPath().includes(this.ref("mainChart"))||this.mainChart.dispatchAction({type:"hideTip"})},i.initChart=function(t){this.data.set("finished",!1),this.drawChart(t),this.data.set("isLoading",!1)},i.updateChart=function(t,e){var n,i,a,o;if(this.mainChart){var r=this.mainChart.getOption();r.dataset=this.data.get("dataSet");var s=this.data.get("xColumn"),l=(null===(i=null===(n=null==r?void 0:r.dataZoom)||void 0===n?void 0:n[0])||void 0===i?void 0:i.startValue)||0,c=(null===(o=null===(a=null==r?void 0:r.dataZoom)||void 0===a?void 0:a[0])||void 0===o?void 0:o.endValue)||l+s-1;if(t){var d=this.data.get("startValue");c=(l="scroll"===e?l+t:d+t)+this.data.get("xColumn")-1,this.data.set("startValue",l),this.data.set("endValue",c)}r.dataZoom={type:"inside",disabled:!1,maxValueSpan:s,startValue:l,endValue:c,zoomLock:!0},this.mainChart.setOption(r)}},i.getDefaultOption=function(){var t,e=this,n=this.data.get(),i=n.dataSet,a=n.chartUnit,o=n.color,r=n.emphasisColor,s=n.defaultIndex,l=n.xColumn;if(!i||!i.dimensions||!(null===(t=i.source)||void 0===t?void 0:t.length))return{};var c=this.data.get("chartOption")||{},d=c.barDirection,u=void 0===d?"horizontal":d,h=c.forceSplitAxis,p=void 0===h||h,f=c.stackName,g=void 0===f?"":f,m="vertical"===u,v=m?{x:1,y:0,x2:0,y2:0}:{x:0,y:0,x2:0,y2:1},b=_t(+s,this.data.get("dataSet.source").length,l),y=b.startValue,w=b.endValue;this.data.set("startValue",y),this.data.set("endValue",w);var x={grid:{top:m?0:20,bottom:0,left:0,right:m?20:0,containLabel:!0},color:o,dataZoom:{type:"inside",disabled:!1,maxValueSpan:l,zoomLock:!0,startValue:y,endValue:w,orient:u,moveOnMouseMove:!1,moveOnMouseWheel:!1},legend:{show:!1},tooltip:{trigger:"axis",confine:!0,extraCssText:"z-index: 99;",padding:[4.5,12],backgroundColor:R,textStyle:{color:kt(this.styleDeclaration,"--cos-color-text")},shadowColor:N,shadowBlur:4,shadowOffsetX:0,shadowOffsetY:0,borderColor:R,borderRadius:6,axisPointer:{type:"shadow",z:0,shadowStyle:{color:Object.assign(Object.assign({type:"linear"},v),{colorStops:[{offset:0,color:z},{offset:1,color:H}]})}},formatter:function(t){var e,n,o,r,s=t[0].axisValue,l=(null===(e=null==i?void 0:i.dimensions)||void 0===e?void 0:e.findIndex((function(t){return"tip_title"===t.feature})))||0;(null===(o=null===(n=null==t?void 0:t[0])||void 0===n?void 0:n.value)||void 0===o?void 0:o[l])&&(s=t[0].value[l]+"");var c=t[0].value,d="<div><strong>"+s+"</strong></div>",u=null===(r=null==i?void 0:i.dimensions)||void 0===r?void 0:r.map((function(t,e){if("need_show_tooltip"===t.feature)return'\n                                <div style="display:flex;align-items:center;">\n                                    <span>'+t.name+": "+((null==c?void 0:c[e])||"--")+"</span>\n                                </div>\n                            "})).filter((function(t){return!!t})).join(""),h=t.map((function(t){var e,n=null==c?void 0:c[t.seriesIndex+1];if(null==n)return"";var o=(null===(e=i.dimensions[t.seriesIndex+1])||void 0===e?void 0:e.yAxisIndex)||0,r=a&&a[o]||"";return'\n                            <div style="display:flex;align-items:center;">\n                                <span style="\n                                    display:inline-block;margin-right:4px;border-radius:50%;\n                                    width:5px;height:5px;background-color:'+t.color+'">\n                                </span>\n                                <span>'+t.seriesName+"："+n+(n+""=="--"?"":r)+"</span>\n                            </div>\n                        "})).filter((function(t){return!!t}));return d+u+(g?h.reverse().join(""):h.join(""))}}},C={type:"category",axisLine:{show:!1},axisTick:{show:!1},axisLabel:Object.assign(Object.assign({},It(i)),{color:kt(this.styleDeclaration,"--cos-color-text-minor")})},S=this.data.get("splitNumber"),k={splitNumber:S,splitLine:{lineStyle:{color:kt(this.styleDeclaration,"--cos-color-border-minor"),type:"dashed"}},axisLabel:{color:kt(this.styleDeclaration,"--cos-color-text-slim")}},_=[];if(p){var T=Tt(i);_=Array.isArray(T)&&T.length>=2?T.map((function(t){var e=function(t,e,n){if(t<0){var i=Math.pow(10,Math.floor(Math.log10(-t)));t=Math.floor(t/i)*i}else t=0;var a=(e-t)/n,o=Math.floor(Math.log10(a)),r=Math.pow(10,o),s=Ot(Math.ceil(a/r)*r);return e=Ot(s*n+t),{min:t=Ot(t),max:e,interval:s}}(t.min,t.max,S),n=e.min,i=e.max,a=e.interval;return Object.assign(Object.assign({},k),{min:n,max:i,interval:a})})):[k]}else _=a&&a.length?a.map((function(){return k})):[k];var O={symbol:"circle",symbolSize:8,showSymbol:!1,itemStyle:{borderColor:kt(this.styleDeclaration,"--cos-color-bg"),borderWidth:2},lineStyle:{cap:"round"}};return Object.assign({xAxis:m?_:C,yAxis:m?Object.assign(Object.assign({},C),{inverse:!0}):_,dataset:i,series:i.dimensions.slice(1).filter((function(t){return!t.feature})).map((function(t,n){var i,a=t.chartType||"bar",o="bar"===a?(i=n,{stack:g,barMaxWidth:g?18:16,barMinHeight:6,emphasis:{label:{show:!0,animation:!1,backgroundColor:r&&r[i],width:6,height:6,color:"transparent",borderColor:kt(e.styleDeclaration,"--cos-color-bg"),borderWidth:2,borderRadius:6,offset:m?[-3,0]:[0,3],verticalAlign:m?"middle":"top",align:"center",position:m?"right":"top"},itemStyle:{color:r&&r[i],borderColor:r&&r[i]}},itemStyle:{borderRadius:3,borderWidth:g?1:0,borderColor:"#fff"},universalTransition:!0,animationDurationUpdate:1e3}):O;return Object.assign({type:a,yAxisIndex:t.yAxisIndex},o)}))},x)},i.drawChart=function(t){this.mainChart=this.mainChart||t,this.styleDeclaration=getComputedStyle(this.el);var e=this.mainChart;if(e){var n=this.getDefaultOption();this.addBarEventListener(),e.setOption(n,!0)}},i.handleLegendClk=function(t){var e=t||{},n=e.item,i=void 0===n?{}:n,a=e.index,o=this.mainChart;o&&(this.data.set("legend["+a+"].disable",!i.disable),o.dispatchAction({type:"legendToggleSelect",name:i.name}))},i.handleChange=function(t){var e,n=null===(e=this.data.get("changeBtn"))||void 0===e?void 0:e[t.index];this.fire("chart-change-tab",n)},i.handleEvent=function(t,e){var n=this.data.get(),i=n.componentType,a=n.subCategory;this.fire(e,{e:t,type:i+"_"+a})},i.clickChart=function(t){this.handleEvent(t,"click")},i.addBarEventListener=function(){var t=this,e=this.mainChart;e&&(e.getZr().on("click",(function(n){var i=e.convertFromPixel({seriesIndex:0},[n.offsetX,n.offsetY])[0],a=t.data.get("dataSet");if(a.source[i]){var o,r=a.dimensions[0].key||a.dimensions[0].name,s=a.source[i][0];t.fire("chart-click",{dataIndex:i,data:(o={},o[r]=s,o)})}})),e.on("datazoom",(function(e){var n,i=(null===(n=null==e?void 0:e.batch)||void 0===n?void 0:n[0])||{},a=i.start,o=i.end,r=e||{},s=r.startValue,l=r.endValue,c={};(s||l)&&(c={startValue:s,endValue:l}),(a||o)&&(c={start:a,end:o}),t.mainChart.dispatchAction({type:"downplay"}),t.mainChart.dispatchAction({type:"hideTip"}),t.data.set("canScrollLeft",a>0),t.data.set("canScrollRight",o<100),t.fire("chart-scroll",Object.assign({type:"scroll"},c))})),this.mainChart.on("finished",(function(){t.data.get("finished")||(t.data.set("finished",!0),t.setHighLight(t.data.get("defaultIndex")))})))},i.setHighLight=function(t){var e,n,i,a=this.mainChart;if(a){var o=null===(i=null===(n=null===(e=this.data.get("dataSet"))||void 0===e?void 0:e.source[t])||void 0===n?void 0:n.slice(1))||void 0===i?void 0:i.findIndex((function(t){return!isNaN(+t)}));o=o>0?o:0,a.dispatchAction({type:"highlight",seriesIndex:o,dataIndex:t}),a.dispatchAction({type:"showTip",seriesIndex:o,dataIndex:t})}},i.handleScrollLeft=function(){var t=this.data.get(),e=t.startValue,n=t.xColumn,i=this.data.get("dataSet").source.length,a=Math.max(e-n,0),o=a+n-1;this.data.set("startValue",a),this.data.set("endValue",o);var r=this.mainChart.getOption();r.dataZoom={type:"inside",disabled:!1,maxValueSpan:n,startValue:a,endValue:o,zoomLock:!0,preventDefaultMouseMove:!1},this.mainChart.setOption(r),this.fire("chart-scroll",{type:"back",start:a/i*100,end:o/(i-1)*100})},i.handleScrollRight=function(){var t=this.data.get(),e=t.endValue,n=t.xColumn,i=this.data.get("dataSet").source.length,a=Math.min(e+n,i-1),o=a-n+1;this.data.set("startValue",o),this.data.set("endValue",a);var r=this.mainChart.getOption();r.dataZoom={type:"inside",disabled:!1,maxValueSpan:n,startValue:o,endValue:a,zoomLock:!0,preventDefaultMouseMove:!1},this.mainChart.setOption(r),this.fire("chart-scroll",{type:"more",start:o/i*100,end:a/(i-1)*100})},i.detached=function(){window.removeEventListener("click",this.globalClickHandler)},n}(n.Component);function At(t,e){return At=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},At(t,e)}Mt.template='\n        <div\n            class="ai-chart-bar"\n            data-module="{{componentType}}_{{subCategory}}"\n            on-click="clickChart"\n        >\n            \x3c!-- 双y轴 --\x3e\n            <template s-if="chartUnit && chartUnit.length > 1">\n                \x3c!-- 图例 + 切换btn --\x3e\n                <template s-if="changeBtn && changeBtn.length > 1">\n                    <div style="width: 100%;" class="ai-echart-flex-align-start {{\n                        showLegend ? \'ai-echart-flex-justify-between\' : \'ai-echart-flex-justify-right\'\n                    }}">\n                        <sc-legend\n                            s-if="legend && legend.length && showLegend"\n                            color="{{legendColors}}"\n                            legend="{{legend}}"\n                            align="left"\n                            on-legend-click="handleLegendClk"\n                        />\n                        \x3c!-- 切换btn --\x3e\n                        <sc-tabs\n                            label-list="{{changeBtn}}"\n                            index="{{changeBtnSelectIndex}}"\n                            styles="{{aiTabStyle}}"\n                            on-tab-click="handleTabClick"\n                            on-change="handleChange"\n                        />\n                    </div>\n                    <div class="ai-echart-flex-justify-between">\n                        <span\n                            s-for="unit, index in chartUnit"\n                            class="{{index === 0 ? \'ai-echart-unit\' : \'ai-echart-unit-nomargin\'}}"\n                        >{{unit ? \'单位：\' + unit : \'\'}}</span>\n                    </div>\n                </template>\n                <div s-else class="ai-echart-flex-justify-between ai-echart-flex-align-start">\n                    <span class="ai-echart-unit">\n                        {{chartUnit && chartUnit[0] ? \'单位：\' + chartUnit[0] : \'\'}}\n                    </span>\n                    <sc-legend\n                        s-if="legend && legend.length && showLegend"\n                        color="{{legendColors}}"\n                        legend="{{legend}}"\n                        on-legend-click="handleLegendClk"\n                    />\n                    <span class="ai-echart-unit">\n                        {{chartUnit && chartUnit[1] ? \'单位：\' + chartUnit[1] : \'\'}}\n                    </span>\n                </div>        \n            </template>\n            \x3c!-- 单y轴 --\x3e\n            <div\n                s-else\n                class="\n                    {{showLegend ? \'ai-echart-flex-align-start\' : \'ai-echart-flex-align-center\'}}\n                    ai-echart-flex-justify-between\n                    ai-echart\n                "\n            >\n                <div class="{{\n                    changeBtn && changeBtn.length > 1 ? \'\' : \'ai-echart-flex-justify-between\'\n                }} ai-echart-flex-align-start">\n                    <span class="ai-echart-unit">\n                        {{chartUnit && chartUnit[0] ? \'单位：\' + chartUnit[0] : \'\'}}\n                    </span>\n                    <sc-legend\n                        s-if="legend && legend.length && showLegend"\n                        color="{{legendColors}}"\n                        legend="{{legend}}"\n                        align="{{changeBtn && changeBtn.length > 1 ? \'\' : \'right\'}}"\n                        on-legend-click="handleLegendClk"\n                    />\n                </div>\n                \x3c!-- 切换btn --\x3e\n                <sc-tabs\n                    s-if="changeBtn && changeBtn.length > 1"\n                    label-list="{{changeBtn}}"\n                    index="{{changeBtnSelectIndex}}"\n                    styles="{{aiTabStyle}}"\n                    on-tab-click="handleTabClick"\n                    on-change="handleChange"\n                />\n            </div>\n            <div style="position: relative">\n                <div\n                    s-ref="mainChart"\n                    class="ai-chart-bar-box"\n                >\n                    <sc-loading s-if="isLoading"/>\n                </div>\n                <div\n                    s-if="canScrollLeft"\n                    class="ai-echart-scroll-icon ai-echart-scroll-icon-left"\n                    on-click="handleScrollLeft"\n                >\n                    <sc-icon name="left" class="icon"/>\n                </div>\n                <div\n                    s-if="canScrollRight"\n                    class="ai-echart-scroll-icon ai-echart-scroll-icon-right"\n                    on-click="handleScrollRight"\n                >\n                    <sc-icon name="right" class="icon"/>\n                </div>\n            </div>\n        </div>\n    ',Mt.trimWhitespace="all",Mt.components={"sc-tabs":Y,"sc-icon":k,"sc-loading":mt,"sc-legend":bt},Mt.computed={legend:function(){var t=this.data.get("chartOption")||{},e=t.barDirection,n=void 0===e?"horizontal":e,i=t.stackName,a=void 0===i?"":i;if("vertical"===n)return[];var o=this.data.get("dataSet");if(!o.dimensions||o.dimensions.length<=1)return[];var r=o.dimensions.slice(1).filter((function(t){return!t.feature}));return a?[].concat(r).reverse():r},legendColors:function(){var t,e=(null===(t=this.data.get("chartOption"))||void 0===t?void 0:t.stackName)||"",n=this.data.get("color");return(null==n?void 0:n.length)?e?[].concat(n).reverse():n:[]},isLoading:function(){return!this.data.get("useCommonChartDom")},changeBtnSelectIndex:function(){var t=this.data.get("changeBtn"),e=(null==t?void 0:t.length)&&t.findIndex((function(t){return t.selected}));return-1!==e?e:0},xColumn:function(){var t;return(null===(t=this.data.get("chartOption"))||void 0===t?void 0:t.xColumn)||7},canScrollLeft:function(){return this.data.get("startValue")>0},canScrollRight:function(){var t,e;return this.data.get("endValue")<((null===(e=null===(t=this.data.get("dataSet"))||void 0===t?void 0:t.source)||void 0===e?void 0:e.length)||0)-1}};var Dt=function(e){function n(){var t;return(t=e.call.apply(e,[].concat([this],Array.from(arguments)))||this).mainChart=null,t.styleDeclaration={},t}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&At(t,e)}(n,e);var i=n.prototype;return i.initData=function(){return{componentType:"rank",dataSet:{source:[],dimensions:[]},color:U,emphasisColor:q,chartOption:{},chartUnit:[],changeBtn:[],useCommonChartDom:!0,defaultIndex:-1,startValue:0,endValue:0,finished:!1,callbackName:"",aiTabStyle:y}},i.attached=function(){var e=this;this.data.get("useCommonChartDom")||new Promise((function(e,n){t(["./echarts.pc.KGe0vDLl"],e,n)})).then((function(t){var n=t.init(e.ref("mainChart"));e.data.set("isLoading",!1),e.initChart(n)}));var n="aiRankChart_"+Date.now();this.data.set("callbackName",n),window[n]=function(t){e.fire("more-btn-click",t)}},i.initChart=function(t){var e,n;null===(e=this.mainChart)||void 0===e||e.clear(),null===(n=this.mainChart)||void 0===n||n.off(),this.data.set("finished",!1),this.drawChart(t)},i.updateChart=function(t,e){var n=this.data.get("startValue"),i=this.data.get("endValue");t&&(i=(n="scroll"===e?t:n+t)+this.data.get("xColumn")-1);var a=this.getDefaultOption();a.dataset=this.data.get("dataSet"),a.dataZoom={type:"inside",disabled:!1,maxValueSpan:this.data.get("xColumn"),startValue:n,endValue:i,zoomLock:!0},this.data.set("startValue",n),this.data.set("endValue",i),this.mainChart.setOption(a)},i.getDefaultOption=function(){var t,e=this,n=this.data.get(),i=n.dataSet,a=n.chartUnit,o=n.color,r=n.rankColumn,s=n.clickTextColumn,l=n.defaultIndex,c=n.xColumn,d=n.callbackName,u=n.chartOption,h=void 0===u?{}:u;if(!i||!i.dimensions||!(null===(t=i.source)||void 0===t?void 0:t.length))return{};var p=_t(+l,this.data.get("dataSet.source").length,c),f=p.startValue,g=p.endValue;this.data.set("startValue",f),this.data.set("endValue",g);var m={grid:{top:6,bottom:6,left:0,right:68,containLabel:!0},color:o,colorBy:"data",dataZoom:{type:"inside",disabled:!1,maxValueSpan:4,startValue:f,endValue:g,zoomLock:!0,orient:"vertical",moveOnMouseMove:!1,moveOnMouseWheel:!1},tooltip:{trigger:"axis",triggerOn:"click",extraCssText:"z-index: 99;",confine:!0,enterable:!0,padding:[4.5,12],backgroundColor:R,textStyle:{color:kt(this.styleDeclaration,"--cos-color-text")},shadowColor:N,shadowBlur:4,shadowOffsetX:0,shadowOffsetY:0,borderColor:R,borderRadius:6,axisPointer:{type:"shadow",z:0,shadowStyle:{color:{type:"linear",x:1,y:0,x2:0,y2:0,colorStops:[{offset:0,color:z},{offset:1,color:H}]}}},formatter:function(t){var e,n,o,r,s,l,c,u=t[0].seriesName,h=(null===(e=null==i?void 0:i.dimensions)||void 0===e?void 0:e.findIndex((function(t){return"tip_title"===t.feature})))||0;(null===(r=null===(o=null===(n=null==t?void 0:t[0])||void 0===n?void 0:n.data)||void 0===o?void 0:o.values)||void 0===r?void 0:r[h])&&(u=null===(c=null===(l=null===(s=null==t?void 0:t[0])||void 0===s?void 0:s.data)||void 0===l?void 0:l.values)||void 0===c?void 0:c[h]);var p="<div><strong>"+u+"</strong></div>";return t.forEach((function(e){var n,o=null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.value;if(null!=o){var r=i.dimensions[e.seriesIndex+1].yAxisIndex||0,s=+e.dataIndex>2?U[0]:e.color,l=a&&a[r]||"";p+='<div style="display:flex;align-items:center;">',p+='<span style="\n                            display:inline-block;margin-right:4px;border-radius:50%;\n                            width:5px;height:5px;background-color:'+s+'">\n                        </span>',p+=e.axisValue+"："+o+l+"</div>";var c,u=e.data.clickText,h={index:t[0].dataIndex,data:(c={},c[i.dimensions[0].key||i.dimensions[0].name]=e.axisValue,c)};u&&(p+='\n                            <div class="cos-color-text-primary" onclick="\n                                '+d+"("+JSON.stringify(h).replace(/"/g,"'")+')\n                            ">\n                                '+u+"\n                            </div>\n                        ")}})),p}}},v={type:"category",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:kt(this.styleDeclaration,"--cos-color-text-minor"),formatter:function(t){return"{order|"+((i.source.find((function(e){return e[0]===t}))||[])[r]||"")+"}"+" "+((null==t?void 0:t.length)>4?t.substring(0,4)+"...":t)},rich:{order:{height:18,width:18,backgroundColor:kt(this.styleDeclaration,"--cos-color-bg-dent"),align:"center",borderRadius:3}}},data:i.source.map((function(t){return t[0]}))},b=h||{},y={min:b.valueAxisMin,max:b.valueAxisMax,interval:b.interval,splitNumber:3,splitLine:{lineStyle:{color:kt(this.styleDeclaration,"--cos-color-border-minor"),type:"dashed"}},axisLabel:{color:kt(this.styleDeclaration,"--cos-color-text-minor")}},w={name:i.dimensions[1].name,barMaxWidth:16,universalTransition:!0,animationDurationUpdate:1e3};return Object.assign({xAxis:y,yAxis:Object.assign(Object.assign({},v),{inverse:!0}),dataset:i,series:i.dimensions.slice(1).filter((function(t){return!t.feature})).map((function(){return Object.assign({type:"bar",data:i.source.map((function(t){return i=+(n=t)[e.data.get("rankColumn")],a=i>3?q[0]:q[i-1],{value:n[1],values:n,clickText:n[s],itemStyle:{color:i>3?"rgba(51, 102, 255, .1)":o&&o[i-1],borderRadius:3},label:{show:!0,offset:[-8,0],position:"right",formatter:function(t){var e=""+(null==t?void 0:t.value);return"{circle|} "+((null==e?void 0:e.length)>8?e.substring(0,5)+"...":e)},rich:{circle:{backgroundColor:"transparent",width:6,height:6,borderColor:"transparent",borderRadius:6,borderWidth:2}}},emphasis:{label:{show:!0,offset:[-8,0],position:"right",formatter:function(t){var e=""+(null==t?void 0:t.value);return"{circle|} "+((null==e?void 0:e.length)>8?e.substring(0,5)+"...":e)},rich:{circle:{backgroundColor:a,width:6,height:6,borderColor:kt(e.styleDeclaration,"--cos-color-bg"),borderRadius:6,borderWidth:2}}},itemStyle:{color:a}}};var n,i,a}))},w)}))},m)},i.drawChart=function(t){this.mainChart=this.mainChart||t,this.styleDeclaration=getComputedStyle(this.el);var e=this.mainChart;if(e){var n=this.getDefaultOption();this.addBarEventListener(),e.setOption(n)}},i.setHighLight=function(t){this.mainChart&&this.mainChart.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:t})},i.addBarEventListener=function(){var t=this,e=this.mainChart;e&&(e.on("finished",(function(){if(!t.data.get("finished")){t.data.set("finished",!0);var e=+t.data.get("defaultIndex");t.setHighLight(e),t.mainChart.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:e}),t.mainChart.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:e})}})),e.getZr().on("click",(function(n){var i=e.convertFromPixel({seriesIndex:0},[n.offsetX,n.offsetY])[1],a=t.data.get("dataSet");if(a.source[i]){var o,r=a.dimensions[0].key||a.dimensions[0].name,s=a.source[i][0];t.fire("chart-click",{dataIndex:i,data:(o={},o[r]=s,o)})}})),e.on("datazoom",(function(e){var n,i=(null===(n=null==e?void 0:e.batch)||void 0===n?void 0:n[0])||{},a=i.start,o=i.end,r=e||{},s=r.startValue,l=r.endValue,c={};(s||l)&&(c={startValue:s,endValue:l}),(a||o)&&(c={start:a,end:o}),t.mainChart.dispatchAction({type:"downplay"}),t.mainChart.dispatchAction({type:"hideTip"}),t.data.set("canScrollUp",a>0),t.data.set("canScrollDown",o<100),t.fire("chart-scroll",Object.assign({type:"scroll"},c))})))},i.handleScrollUp=function(){var t=this.data.get(),e=t.startValue,n=t.xColumn,i=this.data.get("dataSet").source.length,a=Math.max(e-n,0),o=a+n-1;this.data.set("startValue",a),this.data.set("endValue",o);var r=this.mainChart.getOption();r.dataZoom={type:"inside",disabled:!1,maxValueSpan:n,startValue:a,endValue:o,zoomLock:!0,preventDefaultMouseMove:!1},this.mainChart.setOption(r),this.fire("chart-scroll",{type:"back",start:a/i*100,end:o/(i-1)*100})},i.handleScrollDown=function(){var t=this.data.get(),e=t.endValue,n=t.xColumn,i=this.data.get("dataSet").source.length,a=Math.min(e+n,i-1),o=a-n+1;this.data.set("startValue",o),this.data.set("endValue",a);var r=this.mainChart.getOption();r.dataZoom={type:"inside",disabled:!1,maxValueSpan:n,startValue:o,endValue:a,zoomLock:!0,preventDefaultMouseMove:!1},this.mainChart.setOption(r),this.fire("chart-scroll",{type:"more",start:o/i*100,end:a/(i-1)*100})},i.detached=function(){var t=this.data.get("callbackName");delete window[t]},i.handleEvent=function(t,e){var n=this.data.get(),i=n.componentType,a=n.subCategory;this.fire(e,{e:t,type:i+"_"+a})},i.clickChart=function(t){this.handleEvent(t,"click")},i.handleChange=function(t){var e,n=null===(e=this.data.get("changeBtn"))||void 0===e?void 0:e[t.index];this.fire("chart-change-tab",n)},n}(n.Component);function jt(t,e){return jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},jt(t,e)}Dt.template='\n        <div\n            class="ai-chart-rank"\n            data-module="{{componentType}}_{{subCategory}}"\n            on-click="clickChart"\n        >\n            <div class="ai-echart-flex-justify-between ai-echart-flex-align-center">\n                <div\n                    class="ai-echart-unit cos-text-caption cos-color-text-minor"\n                >{{chartUnit && chartUnit[0] ? \'单位：\' + chartUnit[0] : \'\'}}</div>\n                <sc-tabs\n                    s-if="changeBtn && changeBtn.length > 1"\n                    label-list="{{changeBtn}}"\n                    index="{{changeBtnSelectIndex}}"\n                    styles="{{aiTabStyle}}"\n                    on-change="handleChange"\n                />\n            </div>\n            \n            <div style="position: relative;">\n                <div\n                    s-ref="mainChart"\n                    class="ai-chart-rank-box"\n                >\n                    <sc-loading s-if="isLoading"/>\n                </div>\n                <div\n                    s-if="canScrollUp"\n                    class="ai-echart-scroll-icon ai-echart-scroll-icon-up"\n                    on-click="handleScrollUp"\n                >\n                    <sc-icon name="xiangshang" class="icon"/>\n                </div>\n                <div\n                    s-if="canScrollDown"\n                    class="ai-echart-scroll-icon ai-echart-scroll-icon-down"\n                    on-click="handleScrollDown"\n                >\n                    <sc-icon name="xiangxia" class="icon"/>\n                </div>\n            </div>\n        </div>\n    ',Dt.trimWhitespace="all",Dt.components={"sc-loading":mt,"sc-icon":k,"sc-legend":bt,"sc-tabs":Y},Dt.computed={isLoading:function(){return!this.data.get("useCommonChartDom")},canScrollUp:function(){return this.data.get("startValue")>0},canScrollDown:function(){return this.data.get("endValue")<this.data.get("dataSet").source.length-1},rankColumn:function(){return this.data.get("dataSet").dimensions.findIndex((function(t){return t.feature&&"sc_rank"===t.feature}))},clickTextColumn:function(){return this.data.get("dataSet").dimensions.findIndex((function(t){return t.feature&&"sc_clickText"===t.feature}))},xColumn:function(){var t;return(null===(t=this.data.get("chartOption"))||void 0===t?void 0:t.xColumn)||5},changeBtnSelectIndex:function(){var t=this.data.get("changeBtn"),e=(null==t?void 0:t.length)&&t.findIndex((function(t){return t.selected}));return-1!==e?e:0}};var Bt=function(e){function n(){var t;return(t=e.call.apply(e,[].concat([this],Array.from(arguments)))||this).mainChart=null,t.styleDeclaration={},t}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jt(t,e)}(n,e);var i=n.prototype;return i.initData=function(){return{componentType:"line",dataSet:{source:[],dimensions:[]},yAxisData:[],chartUnit:[],color:U,chartOption:{smooth:!0,showArea:!0},seriesAreaColors:$,showTooltip:!0,showLegend:!0,subCategory:"0",defaultIndex:-1,finished:!1,isDark:!1,useCommonChartDom:!0,changeBtn:[],aiTabStyle:y}},i.attached=function(){var e=this;this.data.get("useCommonChartDom")||new Promise((function(e,n){t(["./echarts.pc.KGe0vDLl"],e,n)})).then((function(t){var n=t.init(e.ref("mainChart"));e.data.set("isLoading",!1),e.initChart(n)}))},i.initChart=function(t){var e,n;null===(e=this.mainChart)||void 0===e||e.clear(),null===(n=this.mainChart)||void 0===n||n.off(),this.data.set("finished",!1),this.drawChart(t)},i.drawChart=function(t){var e=t||this.mainChart;if(this.mainChart=e,this.styleDeclaration=getComputedStyle(this.el),this.mainChart){var n=this.getDefaultChartOption();this.data.set("isLoading",!1),this.addBarEventListener(),e.setOption(n,!0)}},i.getDefaultChartOption=function(){var t,e=this,n=this.data.get(),i=n.dataSet,a=n.chartOption,o=n.color,r=n.chartUnit,s=void 0===r?[]:r,l=n.showTooltip,c=n.yAxisData,d=void 0===c?[]:c,u=a||{},h=u.smooth,p=void 0===h||h,f=u.showArea,g=!!((void 0===f||f)&&(null==i?void 0:i.source)&&i.source[0].length-1<=3),m=null===(t=null==i?void 0:i.dimensions)||void 0===t?void 0:t.slice(1).filter((function(t){return!t.feature})).map((function(t,n){return e.getSeries(p,n,g)}));!((null==i?void 0:i.source)&&i.source.length>2)||i.source.length;var v=null==i?void 0:i.source.length,b={grid:{bottom:5,top:"10.5px",right:3,left:0,containLabel:!0},dataZoom:{type:"inside",minValueSpan:2,start:0,end:100},color:o,dataset:i,xAxis:{type:"category",axisLine:{lineStyle:{type:"dashed",color:kt(this.styleDeclaration,"--cos-color-border-minor")}},axisLabel:{showMinLabel:!0,showMaxLabel:!0,alignMinLabel:"left",alignMaxLabel:"right",color:kt(this.styleDeclaration,"--cos-color-text-minor"),margin:14,formatter:function(t,e){return 0===e?"{first|"+t+"}":e+1===v?"{last|"+t+"}":"{middle|"+t+"}"},rich:{first:{padding:[0,8,0,0]},middle:{padding:[0,8]},last:{padding:[0,0,0,8]}}},axisTick:{show:!1}},yAxis:[{splitNumber:3,boundaryGap:!1,type:(null==d?void 0:d.length)?"category":"value",data:(null==d?void 0:d.length)?d:null,axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{type:"dashed",color:kt(this.styleDeclaration,"--cos-color-border-minor")}},axisLabel:{color:kt(this.styleDeclaration,"--cos-color-text-slim")}}],tooltip:{show:l,confine:!0,extraCssText:"z-index: 99;",trigger:"axis",backgroundColor:R,textStyle:{color:kt(this.styleDeclaration,"--cos-color-text")},shadowColor:N,shadowBlur:4,shadowOffsetX:0,shadowOffsetY:0,borderRadius:6,borderColor:R,axisPointer:{type:"line",animationDurationUpdate:0,lineStyle:{color:kt(this.styleDeclaration,"--cos-color-border"),type:"dashed"},z:1},padding:[4.5,12],formatter:function(t){var e,n,a,o=t[0].axisValue,r=(null===(e=null==i?void 0:i.dimensions)||void 0===e?void 0:e.findIndex((function(t){return"tip_title"===t.feature})))||0;(null===(a=null===(n=null==t?void 0:t[0])||void 0===n?void 0:n.value)||void 0===a?void 0:a[r])&&(o=t[0].value[r]+"");var l="<div><strong>"+o+"</strong></div>";return t.forEach((function(t){var e,n,a=t.seriesIndex+1;null===(e=null==i?void 0:i.dimensions)||void 0===e||e.forEach((function(e){var n;if(e.name===t.seriesName){var o=null===(n=null==i?void 0:i.dimensions)||void 0===n?void 0:n.findIndex((function(t){return"mapping"===t.feature&&t.mappingKey===e.key}));a=o>-1?o:a}}));var o=null===(n=null==i?void 0:i.dimensions)||void 0===n?void 0:n[a].disableShowUnit,r=t.value[a];if(r){var c='<div style="margin-right:6px;border-radius:50%;width:6px;height:6px;background-color:'+t.color+'"></div>';l+='<div style="display:flex;align-items:center;">';var d=o?"":null==s?void 0:s[0];l+=""+c+t.seriesName+"："+r+(r+""=="--"?"":d)+"</div>"}})),l}},legend:{show:!1},series:m};return b},i.getSeries=function(t,e,n){var i=this.data.get().seriesAreaColors;return{type:"line",smooth:t,areaStyle:n?{origin:"start",color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:i&&i[e][0]},{offset:1,color:i&&i[e][1]}],global:!1}}:null,symbol:"circle",symbolSize:8,showSymbol:!1,lineStyle:{cap:"round",width:2},z:10,emphasis:{lineStyle:{width:2}},itemStyle:{borderColor:kt(this.styleDeclaration,"--cos-color-bg"),borderWidth:2,shadowBlur:15,shadowColor:Q[e],shadowOffsetX:0,shadowOffsetY:1},universalTransition:!0,animationDurationUpdate:1e3}},i.handleLegendClk=function(t){var e=t||{},n=e.item,i=void 0===n?{}:n,a=e.index,o=this.mainChart;o&&(this.data.set("legend["+a+"].disable",!i.disable),o.dispatchAction({type:"legendToggleSelect",name:i.name}))},i.handleEvent=function(t,e){var n=this.data.get(),i=n.componentType,a=n.subCategory;this.fire(e,{e:t,type:i+"_"+a})},i.clickChart=function(t){this.handleEvent(t,"click")},i.addBarEventListener=function(){var t=this,e=this.mainChart;e&&(e.getZr().on("click",(function(n){var i=e.convertFromPixel({seriesIndex:0},[n.offsetX,n.offsetY])[0],a=t.data.get("dataSet");if(a.source[i]){var o,r=a.dimensions[0].key||a.dimensions[0].name,s=a.source[i][0];t.fire("chart-click",{dataIndex:i,data:(o={},o[r]=s,o)})}})),e.on("finished",(function(){var n=+t.data.get("defaultIndex");!t.data.get("finished")&&+n>=0&&(t.data.set("finished",!0),e.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:n}),e.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:n}))})))},i.handleChange=function(t){var e,n=null===(e=this.data.get("changeBtn"))||void 0===e?void 0:e[t.index];this.fire("chart-change-tab",n)},n}(n.Component);function Pt(t,e){return Pt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Pt(t,e)}Bt.template='\n        <div\n            class="ai-chart-line"\n            data-module="{{componentType}}_{{subCategory}}"\n            on-click="clickChart"\n        >\n            <div\n                s-if="!isLoading"\n                class="\n                    ai-echart-flex-justify-between\n                    {{showLegend ? \'ai-echart-flex-align-start\' : \'ai-echart-flex-align-center\'}}\n                "\n            >\n                <div class="ai-echart-unit">{{chartUnit && chartUnit[0] ? \'单位：\' + chartUnit[0] : \'\'}}</div>\n                <sc-legend\n                    s-if="legend && legend.length && showLegend"\n                    color="{{color}}"\n                    legend="{{legend}}"\n                    align="right"\n                    on-legend-click="handleLegendClk"\n                />\n                <sc-tabs\n                    s-if="changeBtn && changeBtn.length > 1"\n                    label-list="{{changeBtn}}"\n                    index="{{changeBtnSelectIndex}}"\n                    styles="{{aiTabStyle}}"\n                    on-change="handleChange"\n                />\n            </div>\n            <div\n                s-ref="mainChart"\n                class="ai-chart-line-box"\n            >\n                <sc-loading s-if="isLoading"/>\n            </div>\n        </div>\n    ',Bt.trimWhitespace="all",Bt.components={"sc-loading":mt,"sc-legend":bt,"sc-tabs":Y},Bt.computed={legend:function(){var t=this.data.get("dataSet");if(!t.dimensions||t.dimensions.length<=1)return[];var e=t.dimensions.slice(1).filter((function(t){return!t.feature}));return e},isLoading:function(){return!this.data.get("useCommonChartDom")},changeBtnSelectIndex:function(){var t=this.data.get("changeBtn"),e=(null==t?void 0:t.length)&&t.findIndex((function(t){return t.selected}));return-1!==e?e:0}};var Ft=function(e){function n(){var t;return(t=e.call.apply(e,[].concat([this],Array.from(arguments)))||this).mainChart=null,t.styleDeclaration={},t}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pt(t,e)}(n,e);var i=n.prototype;return i.initData=function(){return{componentType:"pie",subCategory:"0",dataSet:{source:[],dimensions:[]},color:U,name:"",maxItems:15,showTooltip:!0,showLegend:!0,defaultIndex:-1,isLoading:!0,finished:!1,chartOption:{},chartUnit:[],changeBtn:[],useCommonChartDom:!0,aiTabStyle:y}},i.attached=function(){var e=this;this.limitChartData(),this.data.get("useCommonChartDom")||new Promise((function(e,n){t(["./echarts.pc.KGe0vDLl"],e,n)})).then((function(t){var n=t.init(e.ref("mainChart"));e.initChart(n)}))},i.initChart=function(t){var e,n;null===(e=this.mainChart)||void 0===e||e.clear(),null===(n=this.mainChart)||void 0===n||n.off(),this.data.set("finished",!1),this.drawChart(t)},i.limitChartData=function(){var t=this.data.get("maxItems"),e=this.data.get("dataSet.source");e&&e.length>t&&(e=e.slice(0,t),this.data.set("dataSet.source",e))},i.drawChart=function(t){var e=t||this.mainChart;if(this.mainChart=e,this.styleDeclaration=getComputedStyle(this.el),this.mainChart){var n=this.getDefaultChartOption();this.data.set("isLoading",!1),this.addBarEventListener(),e.setOption(n)}},i.getDefaultChartOption=function(){var t=this.data.get(),e=t.chartUnit,n=void 0===e?[]:e,i=t.chartOption,a=void 0===i?{}:i,o=t.dataSet,r=(a||{}).showPercent,s=void 0===r||r,l={color:this.data.get("color"),title:{text:this.data.get("chartTitle")},tooltip:{trigger:"item",extraCssText:"z-index: 99;",confine:!0,formatter:function(t){var e,i,a,r=t.name,l=t.percent,c=t.value,d='<div style="margin-right:6px;border-radius:50%;width:6px;height:6px;background-color:'+t.color+'"></div>',u=null===(e=null==o?void 0:o.dimensions)||void 0===e?void 0:e.map((function(t,e){return"need_show_tooltip"===t.feature?'<div style="display:flex;align-items:center; padding-left: 12px;">'+t.name+": "+(c[e]||"--")+"</div>":""})).filter((function(t){return!!t})).join("");return"\n                        <div><strong>"+r+'</strong></div>\n                        <div style="display:flex;align-items:center;">'+d+((null===(a=null===(i=null==o?void 0:o.dimensions)||void 0===i?void 0:i.find((function(t,e){return 1===e})))||void 0===a?void 0:a.name)||"占比")+": "+(s?l+"%":c[1]+n[0])+"</div>\n                        "+u+"\n                    "},backgroundColor:R,textStyle:{color:kt(this.styleDeclaration,"--cos-color-text"),fontSize:kt(this.styleDeclaration,"--cos-text-body")},shadowColor:N,shadowBlur:4,shadowOffsetX:0,shadowOffsetY:0,borderColor:R,borderRadius:6,padding:[4.5,12]},legend:{show:!1},dataset:this.data.get("dataSet"),series:[{center:["50%","50%"],startAngle:135,name:this.data.get("name"),type:"pie",radius:["32.25%","65%"],minAngle:4,itemStyle:{borderRadius:6,borderColor:kt(this.styleDeclaration,"--cos-color-bg"),borderWidth:3},label:{show:!0,formatter:"{name|{@[0]}}\n{value|{@[1]} "+n[0]+"}",rich:{name:{color:kt(this.styleDeclaration,"--cos-color-text"),fontSize:kt(this.styleDeclaration,"--cos-text-caption"),padding:[0,0,1,0]},value:{color:kt(this.styleDeclaration,"--cos-color-text-slim"),padding:[1,0,0,0],fontSize:kt(this.styleDeclaration,"--cos-text-caption-sm")}}},labelLine:{show:!0},universalTransition:!0,animationDurationUpdate:1e3}]};return l},i.handleLegendClk=function(t){var e=t||{},n=e.item,i=void 0===n?{}:n,a=e.index,o=this.mainChart;o&&(this.data.set("legendData["+a+"].disable",!i.disable),o.dispatchAction({type:"legendToggleSelect",name:i.name}))},i.handleEvent=function(t,e){var n=this.data.get(),i=n.componentType,a=n.subCategory;this.fire(e,{e:t,type:i+"_"+a})},i.clickChart=function(t){this.handleEvent(t,"click")},i.addBarEventListener=function(){var t=this,e=this.mainChart;if(e){var n=+this.data.get("defaultIndex");this.mainChart.on("click","series",(function(e){var n,i=t.data.get("dataSet").dimensions;t.fire("chart-click",{dataIndex:e.dataIndex,data:(n={},n[i[0].key||i[0].name]=e.data[0],n)})})),e.on("mouseover",(function(t){t.dataIndex!==n&&e.dispatchAction({type:"downplay",dataIndex:n})})),e.on("finished",(function(){!t.data.get("finished")&&+n>=0&&(t.data.set("finished",!0),e.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:n}),e.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:n}))}))}},i.handleChange=function(t){var e,n=null===(e=this.data.get("changeBtn"))||void 0===e?void 0:e[t.index];this.fire("chart-change-tab",n)},n}(n.Component);function Vt(t,e){return Vt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Vt(t,e)}Ft.template='\n        <div\n            class="ai-chart-pie"\n            data-module="{{componentType}}_{{subCategory}}"\n            on-click="clickChart"\n        >\n            <div class="ai-echart-flex-justify-between ai-echart-flex-align-center">\n                <div class="ai-echart-unit">{{chartUnit && chartUnit[0] ? \'单位：\' + chartUnit[0] : \'\'}}</div>\n                <sc-tabs\n                    s-if="changeBtn && changeBtn.length > 1"\n                    label-list="{{changeBtn}}"\n                    index="{{changeBtnSelectIndex}}"\n                    styles="{{aiTabStyle}}"\n                    on-change="handleChange"\n                />\n            </div>\n            <div\n                s-ref="mainChart"\n                class="ai-chart-pie-box"\n                on-touchstart="onTouchStart"\n                on-touchmove="onTouchMove"\n                on-touchend="onTouchEnd"\n            >\n                <sc-loading s-if="isLoading"/>\n            </div>\n            \x3c!-- 自定义图例容器 --\x3e\n            <sc-legend\n                s-if="!isLoading && legendData && legendData.length && showLegend"\n                color="{{color}}"\n                legend="{{legendData}}"\n                on-legend-click="handleLegendClk"\n            />\n        </div>\n    ',Ft.trimWhitespace="all",Ft.components={"sc-legend":bt,"sc-loading":mt,"sc-tabs":Y},Ft.computed={changeBtnSelectIndex:function(){var t=this.data.get("changeBtn"),e=(null==t?void 0:t.length)&&t.findIndex((function(t){return t.selected}));return-1!==e?e:0},legendData:function(){return this.data.get("dataSet.source").map((function(t){return{name:t[0],disable:!1}}))}};var Rt=function(e){function n(){var t;return(t=e.call.apply(e,[].concat([this],Array.from(arguments)))||this).styleDeclaration={},t}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vt(t,e)}(n,e);var i=n.prototype;return i.initData=function(){return{componentType:"vs",dataSet:{source:[],dimensions:[]},color:[],lightColor:[],colors:U,emphasisColor:q,chartOption:{},chartUnit:[],useCommonChartDom:!0,defaultIndex:-1,startValue:0,endValue:0,finished:!1,callbackName:"",isToolTip:!1}},i.attached=function(){var e=this;this.data.get("useCommonChartDom")||new Promise((function(e,n){t(["./echarts.pc.KGe0vDLl"],e,n)})).then((function(t){var n=t.init(e.ref("mainChart"));e.data.set("isLoading",!1),e.initChart(n)}));var n="aiVsChart_"+Date.now();this.data.set("callbackName",n),window[n]=function(t){e.fire("more-btn-click",t)}},i.initChart=function(t){this.data.set("finished",!1),this.drawChart(t)},i.updateChart=function(t,e){var n=this.data.get("startValue"),i=this.data.get("endValue");t&&(i=(n="scroll"===e?t:n+t)+this.data.get("xColumn")-1);var a=this.getDefaultOption();a.dataset=this.data.get("dataSet"),a.dataZoom={type:"inside",disabled:!1,maxValueSpan:this.data.get("xColumn"),startValue:n,endValue:i,zoomLock:!0},this.data.set("startValue",n),this.data.set("endValue",i),this.mainChart.setOption(a)},i.getDefaultOption=function(){var t,e,n=this,i=this.data.get("dataSet");if(!i||!i.dimensions||!(null===(t=i.source)||void 0===t?void 0:t.length))return{};var a=this.data.get("color")||U,o=(null===(e=this.data.get("lightColor"))||void 0===e?void 0:e.length)>=2?this.data.get("lightColor"):q,r=[],s=[],l=[];i.source.forEach((function(t){r.push(t[0]),s.push(-t[1]),l.push(t[2])}));var c=this.data.get(),d=c.defaultIndex,u=c.xColumn,h=c.isToolTip,p=_t(+d,this.data.get("dataSet.source").length,u),f=p.startValue,g=p.endValue;this.data.set("startValue",f),this.data.set("endValue",g);var m=i.dimensions.slice(1).map((function(t,e){var i=0===e?"left":"right";return{name:t.name,type:"bar",stack:"Total",label:{show:!0,position:i,color:kt(n.styleDeclaration,"--cos-color-text"),fontWeight:500,formatter:function(t){var e=t.value;return e<0&&(e=-e),e}},data:0===e?s:l,itemStyle:{color:a[e],borderRadius:3,borderWidth:3,borderColor:"transparent"},barMaxWidth:20,emphasis:{label:{show:!0,backgroundColor:o[e],width:6,height:6,borderWidth:2,borderRadius:6,borderColor:kt(n.styleDeclaration,"--cos-color-bg"),verticalAlign:"middle",align:"middle",position:i,offset:0===e?[6,0]:[-6,0],formatter:function(t){var e=+t.value<0?-t.value:+t.value;return+t.value<0?"{left|"+e+"}":"{right|"+e+"}"},rich:{left:{align:"right",color:kt(n.styleDeclaration,"--cos-color-text"),padding:[0,9,4,9],width:"100%",lineHeight:10,fontWeight:500},right:{align:"left",color:kt(n.styleDeclaration,"--cos-color-text"),padding:[0,9,4,9],width:"100%",lineHeight:10,fontWeight:500}}},itemStyle:{color:o[e]}}}}));return{xAxis:{splitNumber:3,splitLine:{lineStyle:{color:kt(this.styleDeclaration,"--cos-color-border-minor"),type:"dashed"}},axisLabel:{color:kt(this.styleDeclaration,"--cos-color-text-slim"),show:!0,formatter:function(t){return t<0&&(t=-t),t}}},yAxis:{type:"category",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:kt(this.styleDeclaration,"--cos-color-text-minor"),rich:{order:{height:18,width:18,backgroundColor:kt(this.styleDeclaration,"--cos-color-bg-dent"),align:"center",borderRadius:3}}},data:r,inverse:!0,axisPointer:{show:!0,type:"shadow",z:0,shadowStyle:{color:{type:"linear",x:1,y:0,x2:0,y2:0,colorStops:[{offset:0,color:W},{offset:.5,color:H},{offset:1,color:W}]}},label:{show:!1}},offset:40},series:m,grid:{top:6,bottom:6,left:40,right:40,containLabel:!0},color:U,colorBy:"data",dataZoom:{type:"inside",disabled:!1,maxValueSpan:u,startValue:f,endValue:g,zoomLock:!0,orient:"vertical",moveOnMouseMove:!1,moveOnMouseWheel:!1},tooltip:{show:h,trigger:"axis",extraCssText:"z-index: 99;",confine:!0,enterable:!0,padding:[4.5,12],backgroundColor:R,textStyle:{color:kt(this.styleDeclaration,"--cos-color-text")},shadowColor:N,shadowBlur:4,shadowOffsetX:0,shadowOffsetY:0,borderColor:R,borderRadius:6,axisPointer:{type:"shadow",z:0,shadowStyle:{color:{type:"linear",x:1,y:0,x2:0,y2:0,colorStops:[{offset:0,color:W},{offset:.5,color:H},{offset:1,color:W}]}}},formatter:function(t){var e="<div><strong>"+t[0].axisValue+"</strong></div>";return t.forEach((function(t){var n=+t.value<0?-t.value:t.value;e+='<div style="display:flex;align-items:center;">',e+='<span style="\n                            display:inline-block;margin-right:4px;border-radius:50%;\n                            width:5px;height:5px;background-color:'+t.color+'">\n                        </span>',e+=t.seriesName+"："+n+"</div>"})),e}}}},i.drawChart=function(t){this.mainChart=this.mainChart||t,this.styleDeclaration=getComputedStyle(this.el);var e=this.mainChart;if(e){var n=this.getDefaultOption();this.addBarEventListener(),e.setOption(n)}},i.setHighLight=function(t){this.mainChart&&this.mainChart.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:t})},i.addBarEventListener=function(){var t=this,e=this.mainChart;e&&(e.on("finished",(function(){if(!t.data.get("finished")){t.data.set("finished",!0);var e=+t.data.get("defaultIndex");t.setHighLight(e),t.mainChart.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:e}),t.mainChart.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:e})}})),e.getZr().on("click",(function(n){var i=e.convertFromPixel({seriesIndex:0},[n.offsetX,n.offsetY])[1],a=t.data.get("dataSet");if(a.source[i]){var o,r=a.dimensions[0].key||a.dimensions[0].name,s=a.source[i][0];t.fire("chart-click",{dataIndex:i,data:(o={},o[r]=s,o)})}})),e.on("datazoom",(function(e){var n,i=(null===(n=null==e?void 0:e.batch)||void 0===n?void 0:n[0])||{},a=i.start,o=i.end,r=e||{},s=r.startValue,l=r.endValue,c={};(s||l)&&(c={startValue:s,endValue:l}),(a||o)&&(c={start:a,end:o}),t.mainChart.dispatchAction({type:"downplay"}),t.mainChart.dispatchAction({type:"hideTip"}),t.data.set("canScrollUp",a>0),t.data.set("canScrollDown",o<100),t.fire("chart-scroll",Object.assign({type:"scroll"},c))})))},i.handleScrollUp=function(){var t=this.data.get(),e=t.startValue,n=t.xColumn,i=this.data.get("dataSet").source.length,a=Math.max(e-n,0),o=a+n-1;this.data.set("startValue",a),this.data.set("endValue",o);var r=this.mainChart.getOption();r.dataZoom={type:"inside",disabled:!1,maxValueSpan:n,startValue:a,endValue:o,zoomLock:!0,preventDefaultMouseMove:!1},this.mainChart.setOption(r),this.fire("chart-scroll",{type:"back",start:a/i*100,end:o/(i-1)*100})},i.handleScrollDown=function(){var t=this.data.get(),e=t.endValue,n=t.xColumn,i=this.data.get("dataSet").source.length,a=Math.min(e+n,i-1),o=a-n+1;this.data.set("startValue",o),this.data.set("endValue",a);var r=this.mainChart.getOption();r.dataZoom={type:"inside",disabled:!1,maxValueSpan:n,startValue:o,endValue:a,zoomLock:!0,preventDefaultMouseMove:!1},this.mainChart.setOption(r),this.fire("chart-scroll",{type:"more",start:o/i*100,end:a/(i-1)*100})},i.detached=function(){var t=this.data.get("callbackName");delete window[t]},i.handleEvent=function(t,e){var n=this.data.get(),i=n.componentType,a=n.subCategory;this.fire(e,{e:t,type:i+"_"+a})},i.clickChart=function(t){this.handleEvent(t,"click")},n}(n.Component);function Nt(t,e){return Nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Nt(t,e)}Rt.template='\n        <div\n            class="ai-chart-vs"\n            data-module="{{componentType}}_{{subCategory}}"\n            on-click="clickChart"\n        >\n            <div class="ai-chart-vs-legend-box">\n                <span class="ai-echart-legend-text">{{dataSet.dimensions[0].name}}</span>\n                <sc-legend\n                    s-if="legend && legend.length"\n                    color="{{color}}"\n                    legend="{{legend}}"\n                    class="ai-chart-vs-legend-drop"\n                />\n                <span class="ai-echart-legend-text">单位：{{chartUnit}}</span>\n            </div>\n            \n            <div style="position: relative;">\n                <div\n                    s-ref="mainChart"\n                    class="ai-chart-vs-box"\n                >\n                    <sc-loading s-if="isLoading"/>\n                </div>\n                <div\n                    s-if="canScrollUp"\n                    class="ai-echart-scroll-icon ai-echart-scroll-icon-up"\n                    on-click="handleScrollUp"\n                >\n                    <sc-icon name="xiangshang" class="icon"/>\n                </div>\n                <div\n                    s-if="canScrollDown"\n                    class="ai-echart-scroll-icon ai-echart-scroll-icon-down"\n                    on-click="handleScrollDown"\n                >\n                    <sc-icon name="xiangxia" class="icon"/>\n                </div>\n            </div>\n        </div>\n    ',Rt.trimWhitespace="all",Rt.components={"sc-loading":mt,"sc-icon":k,"sc-legend":bt},Rt.computed={isLoading:function(){return!this.data.get("useCommonChartDom")},canScrollUp:function(){return this.data.get("startValue")>0},canScrollDown:function(){return this.data.get("endValue")<this.data.get("dataSet").source.length-1},xColumn:function(){var t;return(null===(t=this.data.get("chartOption"))||void 0===t?void 0:t.xColumn)||5},legend:function(){var t;return(null===(t=this.data.get("dataSet").dimensions)||void 0===t?void 0:t.slice(1))||[]}};var zt={trigger:"item",triggerOn:"click",extraCssText:"z-index: 99;",confine:!0,enterable:!0,padding:[4.5,12],backgroundColor:R,shadowColor:N,shadowBlur:4,shadowOffsetX:0,shadowOffsetY:0,borderColor:R,borderRadius:6,axisPointer:{type:"shadow",z:0,shadowStyle:{color:{type:"linear",x:1,y:0,x2:0,y2:0,colorStops:[{offset:0,color:W},{offset:.5,color:H},{offset:1,color:W}]}}}},Ht={show:!1,inRange:{color:["#D6E6FF","#3366FF"]},calculable:!0,precision:2,left:10,bottom:8,textGap:10,hoverLink:!0,itemWidth:"16%",itemHeight:"54%",indicatorIcon:'path://M 79.5,20.5 C 80.1667,20.5 80.8333,20.5 81.5,20.5C 81.8333,20.5 82.1667,20.5 82.5,20.5C 85.1667,20.5 87.8333,20.5 90.5,20.5C 90.8333,20.5 91.1667,20.5 91.5,20.5C 94.5,20.5 97.5,20.5 100.5,20.5C 100.833,20.5 101.167,20.5 101.5,20.5C 104.5,20.5 107.5,20.5 110.5,20.5C 110.833,20.5 111.167,20.5 111.5,20.5C 114.5,20.5 117.5,20.5 120.5,20.5C 120.833,20.5 121.167,20.5 121.5,20.5C 124.167,20.5 126.833,20.5 129.5,20.5C 129.833,20.5 130.167,20.5 130.5,20.5C 133.5,20.5 136.5,20.5 139.5,20.5C 139.833,20.5 140.167,20.5 140.5,20.5C 143.5,20.5 146.5,20.5 149.5,20.5C 149.833,20.5 150.167,20.5 150.5,20.5C 153.5,20.5 156.5,20.5 159.5,20.5C 159.833,20.5 160.167,20.5 160.5,20.5C 163.5,20.5 166.5,20.5 169.5,20.5C 169.833,20.5 170.167,20.5 170.5,20.5C 173.167,20.5 175.833,20.5 178.5,20.5C 178.833,20.5 179.167,20.5 179.5,20.5C 182.5,20.5 185.5,20.5 188.5,20.5C 188.833,20.5 189.167,20.5 189.5,20.5C 192.5,20.5 195.5,20.5 198.5,20.5C 198.833,20.5 199.167,20.5 199.5,20.5C 202.5,20.5 205.5,20.5 208.5,20.5C 208.833,20.5 209.167,20.5 209.5,20.5C 212.167,20.5 214.833,20.5 217.5,20.5C 217.833,20.5 218.167,20.5 218.5,20.5C 221.831,21.6154 225.164,22.9487 228.5,24.5C 231.503,25.6662 234.17,27.3328 236.5,29.5C 237.167,30.8333 238.167,31.8333 239.5,32.5C 241.167,35.1667 242.833,37.8333 244.5,40.5C 248.757,50.6673 248.423,60.6673 243.5,70.5C 241.833,73.1667 240.167,75.8333 238.5,78.5C 237.5,78.8333 236.833,79.5 236.5,80.5C 233.833,82.1667 231.167,83.8333 228.5,85.5C 225.284,86.9382 221.951,88.1048 218.5,89C 172.833,89.6667 127.167,89.6667 81.5,89C 78.0662,88.4424 74.7328,87.609 71.5,86.5C 68.5229,84.5333 65.5229,82.5333 62.5,80.5C 62.5,79.8333 62.1667,79.5 61.5,79.5C 59.5,76.5 57.5,73.5 55.5,70.5C 54.1581,67.0921 52.8248,63.7588 51.5,60.5C 51.5,60.1667 51.5,59.8333 51.5,59.5C 51.5,56.5 51.5,53.5 51.5,50.5C 51.5,50.1667 51.5,49.8333 51.5,49.5C 51.5,49.1667 51.5,48.8333 51.5,48.5C 52.871,46.064 53.871,43.3973 54.5,40.5C 56.1667,37.8333 57.8333,35.1667 59.5,32.5C 60.5,32.1667 61.1667,31.5 61.5,30.5C 62.5,30.1667 63.1667,29.5 63.5,28.5C 66.1667,26.8333 68.8333,25.1667 71.5,23.5C 74.4855,23.0972 77.1522,22.0972 79.5,20.5 Z"',indicatorSize:"150%",indicatorStyle:{borderColor:"#fff",borderWidth:3}},Wt=[{geoIndex:0,name:"基础热力地图",type:"map"}],Ut={zoom:1,roam:!0,scaleLimit:{min:.8,max:5},type:"map",label:{show:!0,color:"#1e1f24",fontSize:10,textBorderWidth:1,textBorderColor:"#fff",fontWeight:600},nameProperty:"adcode",emphasis:{itemStyle:{color:"#FFBF00",borderColor:"#FFBF00"},label:{color:"#1e1f24"}},select:{itemStyle:{color:"#FFBF00",borderColor:"#FFBF00"},label:{show:!0,color:"#1e1f24"}},projection:{project:function(t){return[t[0]/180*Math.PI,-Math.log(Math.tan((Math.PI/2+t[1]/180*Math.PI)/2))]},unproject:function(t){return[180*t[0]/Math.PI,360/Math.PI*Math.atan(Math.exp(t[1]))-90]}},layoutCenter:["50%","50%"],aspectScale:1,regions:[{name:"境界线",label:{show:!1},itemStyle:{borderJoin:"round",borderColorToken:"--cos-color-bg"},emphasis:{disabled:!0,label:{show:!1}},select:{disabled:!0,itemStyle:{borderColorToken:"--cos-color-bg"},label:{show:!1}}},{name:"境界线高亮",label:{show:!1},itemStyle:{borderJoin:"round",borderColorToken:"--cos-color-text-slim",borderType:"dashed",borderWidth:1},emphasis:{disabled:!0,label:{show:!1}},select:{disabled:!0,itemStyle:{borderColorToken:"--cos-color-text-slim"},label:{show:!1}}},{name:"境界线实线",label:{show:!1},itemStyle:{borderColorToken:"--cos-color-text-slim",borderJoin:"round"},emphasis:{disabled:!0,label:{show:!1}},select:{disabled:!0,itemStyle:{borderColorToken:"--cos-color-text-slim"},label:{show:!1}}},{name:"陆地边界线",label:{show:!1},itemStyle:{borderColor:"#908CFF",borderJoin:"round"},emphasis:{disabled:!0,label:{show:!1}},select:{disabled:!0,itemStyle:{borderColor:"#908CFF"},label:{show:!1}}},{name:"新疆边界线",label:{show:!1},itemStyle:{borderColor:"#908CFF",borderJoin:"round"},emphasis:{disabled:!0,label:{show:!1}},select:{disabled:!0,itemStyle:{borderColor:"#908CFF"},label:{show:!1}}},{name:"海南海上边界线",label:{show:!1},itemStyle:{borderColorToken:"--cos-color-text-slim",borderJoin:"round"},emphasis:{disabled:!0,label:{show:!1}},select:{disabled:!0,itemStyle:{borderColorToken:"--cos-color-text-slim"},label:{show:!1}}},{name:"上海海上边界线",label:{show:!1},itemStyle:{borderColorToken:"--cos-color-text-slim",borderJoin:"round"},emphasis:{disabled:!0,label:{show:!1}},select:{disabled:!0,itemStyle:{borderColorToken:"--cos-color-text-slim"},label:{show:!1}}},{name:"广东海上边界线",label:{show:!1},itemStyle:{borderColorToken:"--cos-color-text-slim",borderJoin:"round"},emphasis:{disabled:!0,label:{show:!1}},select:{disabled:!0,itemStyle:{borderColorToken:"--cos-color-text-slim"},label:{show:!1}}},{name:"香港特别行政区界",label:{show:!1},itemStyle:{borderColorToken:"--cos-color-text-slim",borderJoin:"round"},emphasis:{disabled:!0,label:{show:!1}},select:{disabled:!0,itemStyle:{borderColorToken:"--cos-color-text-slim"},label:{show:!1}}}]},qt={mapName:"main_map",tooltip:Object.assign({show:!0},zt),visualMap:Ht,series:[Object.assign(Object.assign({},Wt[0]),{map:"main_map"})],geo:Object.assign(Object.assign({},Ut),{map:"main_map"})},Qt={tooltip:{show:!1},mapName:"attached_map",geo:Object.assign(Object.assign({},Ut),{map:"attached_map",roam:!1,zoom:1.08,emphasis:{itemStyle:{color:"#FFBF00",borderColor:"#FFBF00"},label:{color:"#1e1f24"}},select:{itemStyle:{color:"#FFBF00",borderColor:"#FFBF00"},label:{show:!1}},label:{show:!1,color:"#1e1f24",fontSize:6,textBorderWidth:1,textBorderColor:"#fff"},regions:[].concat(qt.geo.regions,[{name:"广西",label:{show:!0},select:{label:{show:!0}}},{name:"广东",label:{show:!0},select:{label:{show:!0}}},{name:"台湾",label:{show:!0},select:{label:{show:!0}}},{name:"澳门",label:{show:!0},select:{label:{show:!0}}},{name:"香港",label:{show:!0},select:{label:{show:!0}}},{name:"海南",label:{show:!0},select:{label:{show:!0}}}])}),series:[Object.assign(Object.assign({},Wt[0]),{map:"attached_map"})],visualMap:Object.assign(Object.assign({},Ht),{show:!1})},$t={"000000":Object.assign(Object.assign({},Qt),{geo:Object.assign(Object.assign({},Qt.geo),{layoutCenter:["45%","38%"]}),chartName:"南海诸岛"}),46e4:Object.assign(Object.assign({},Qt),{geo:Object.assign(Object.assign({rotate:[30,30]},Qt.geo),{layoutCenter:["45%","38%"],regions:[].concat(Qt.geo.regions,[{name:"三沙市",label:{show:!0},select:{label:{show:!0}}},{name:"海口市",label:{show:!0},select:{label:{show:!0}}},{name:"儋州市",label:{show:!0},select:{label:{show:!0}}},{name:"三亚市",label:{show:!0},select:{label:{show:!0}}}])}),chartName:"海南省全图"})},Zt=["境界线","境界线高亮","境界线实线","陆地边界线","新疆边界线","海南海上边界线","上海海上边界线","广东海上边界线","香港特别行政区界"],Jt={71e4:[120.5,23.2],81e4:[116,22],82e4:[112.4,22]},Gt={320312:[117.150727,34.16939],131003:[116.746124,39.548076],469026:[108.891759,19.341688],469028:[110.003113,18.496477],411003:[113.806538,34.126087],500237:[109.905265,31.262567],654200:[85.362204,46.398357],652300:[89.611701,44.87817],650500:[93.085592,44.111866],652700:[82.029781,45.109009],231202:[127.118436,46.705533],650402:[89.232721,43.213228],15e4:[109,40.8183],45e4:[108.82,23.824],44e4:[113.8,23.6252],46e4:[109.746222,18.614691]},Kt={460300:[113.627794,13.849001],460100:[113,20.028773],460400:[108.178575,20.034792],460200:[111.166856,17.70022],45e4:[109,23],44e4:[113.8,23.5252]},Xt="https://faster.pae.baidu.com/macro/async/heat_map",Yt=function(e){function n(){var t;return(t=e.call.apply(e,[].concat([this],Array.from(arguments)))||this).attachedChartInstance=null,t.styleDeclaration={},t.toasTimer=0,t.globalClickHandler=function(){},t}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nt(t,e)}(n,e);var i=n.prototype;return i.initData=function(){return{componentType:"map",subCategory:"AIMapChart",dataSet:{source:[],dimensions:[],codeToNameMap:{}},isLoading:!0,showToast:!1,chartOption:{},callbackName:"",selectedName:"",prevTooltipSelectedName:"",attachedChartTitle:"",attachedChartWidth:0,attachedChartHeight:0,showAttachedDom:!1,zoomUpdate:0,curZoomInfo:{}}},i.attached=function(){var e=this;this.init(),new Promise((function(e,n){t(["./echarts.pc.KGe0vDLl"],e,n)})).then((function(t){e.echarts=t,e.initChart()}))},i.init=function(){var t=this;this.globalClickHandler=this.globalClick.bind(this),window.addEventListener("click",this.globalClickHandler);var e="aiMapChart_"+Math.random().toString().slice(2);this.data.set("callbackName",e),window[e]=function(e){t.fire("more-btn-click",e)}},i.initAttachedDom=function(){var t=this;if(this.isNeedShowAttached()){var e=this.getCurMapCode();this.data.set("showAttachedDom",!0);var n=this.ref("aiChartMapBox"),i=(null==n?void 0:n.offsetHeight)*("000000"===e?.3:.4),a=.75*i;this.data.set("attachedChartWidth",a),this.data.set("attachedChartHeight",i)}this.nextTick((function(){t.drawChart()}))},i.initChart=function(){var t=this;this.data.set("prevTooltipSelectedName",""),this.data.set("isLoading",!0),this.data.set("showAttachedDom",!1),this.nextTick((function(){t.initAttachedDom()}))},i.drawChart=function(){var t=this;this.removeChartInstanceEvent(),this.initChartInstance(),this.getMapData().then((function(e){var n,i=e||{},a=i.mainMapData,o=i.attachedMapData,r=t.getOption({orientation:a.orientation})||{},s=r.mainOption,l=r.attachedOption;a&&(t.echarts.registerMap(null==s?void 0:s.mapName,a.map_data),t.mainChartInstance.setOption(s),t.setHighLight()),t.isNeedShowAttached()&&o&&(null==l?void 0:l.mapName)&&(t.echarts.registerMap(null==l?void 0:l.mapName,o.map_data),null===(n=t.attachedChartInstance)||void 0===n||n.setOption(l)),t.data.set("isLoading",!1)})).catch((function(){t.data.get("showToast")||(t.data.set("showToast",!0),t.toasTimer&&(clearTimeout(t.toasTimer),t.toasTimer=0),t.toasTimer=window.setTimeout((function(){t.toasTimer=0,t.data.set("showToast",!1)}),2e3))}))},i.initChartInstance=function(){this.isNeedShowAttached()&&(this.attachedChartInstance=this.echarts.init(this.ref("attachedChart"))),this.mainChartInstance||(this.mainChartInstance=this.echarts.init(this.ref("mainChart"))),this.addMapEventListener(),this.enableConnectTooltip(),this.enableConnectHighlights()},i.removeChartInstanceEvent=function(){var t,e,n,i;null===(t=this.mainChartInstance)||void 0===t||t.clear(),null===(e=this.mainChartInstance)||void 0===e||e.off(),null===(n=this.attachedChartInstance)||void 0===n||n.clear(),null===(i=this.attachedChartInstance)||void 0===i||i.off()},i.getCurMapCode=function(){var t,e;return(null===(e=null===(t=this.data.get("chartOption"))||void 0===t?void 0:t.mapConfig)||void 0===e?void 0:e.currentDistrict)||"000000"},i.isNeedShowAttached=function(){return!!$t[this.getCurMapCode()]},i.getMapData=function(){var t=this.data.get().dataSet,e=this.getCurMapCode(),n=this.isNeedShowAttached(),i=[fetch(Xt+"?code="+e).then((function(t){return t.json()}))];if(n){var a=Xt+"?code="+e+"_futu";i.push(fetch(a).then((function(t){return t.json()})))}return new Promise((function(e,a){Promise.all(i).then((function(i){var a,o,r,s,l=i[0],c=i[1],d=null==l?void 0:l.data,u=null==c?void 0:c.data;(null===(o=null===(a=null==d?void 0:d.map_data)||void 0===a?void 0:a.features)||void 0===o?void 0:o.length)&&(null==t?void 0:t.codeToNameMap)&&d.map_data.features.forEach((function(e){if(Jt[e.properties.adcode]&&(e.properties.cp=Jt[e.properties.adcode]),Gt[e.properties.adcode]&&(e.properties.cp=Gt[e.properties.adcode]),e.properties.adcode){if(!Object.keys(t.codeToNameMap).includes(e.properties.adcode)){var n;Object.assign(t.codeToNameMap,((n={})[e.properties.adcode]=e.properties.name,n))}}else e.properties.adcode=e.properties.name})),n&&(null===(s=null===(r=null==u?void 0:u.map_data)||void 0===r?void 0:r.features)||void 0===s?void 0:s.length)&&(null==t?void 0:t.codeToNameMap)&&u.map_data.features.forEach((function(e){if(Jt[e.properties.adcode]&&(e.properties.cp=Jt[e.properties.adcode]),Kt[e.properties.adcode]&&(e.properties.cp=Kt[e.properties.adcode]),e.properties.adcode){if(!Object.keys(t.codeToNameMap).includes(e.properties.adcode)){var n;Object.assign(t.codeToNameMap,((n={})[e.properties.adcode]=e.properties.name,n))}}else e.properties.adcode=e.properties.name})),e({mainMapData:d,attachedMapData:u})})).catch((function(t){return a()}))}))},i.getOption=function(t){var e,n,i,a,o;void 0===t&&(t={orientation:1});var r=this.isNeedShowAttached();this.styleDeclaration=getComputedStyle(this.el);var s,l=this.data.get().dataSet,c=((null===(e=this.data.get("chartOption"))||void 0===e?void 0:e.mapConfig)||{}).showVisualMap,d=void 0!==c&&c,u=null===(n=null==l?void 0:l.source)||void 0===n?void 0:n.map((function(t,e){return{name:t[0],value:t[1],key:t.length>2?t[2]:""}})),h=this.addTokenToGeoRegions((null===(i=null==qt?void 0:qt.geo)||void 0===i?void 0:i.regions)||[]),p={borderColor:kt(this.styleDeclaration,"--cos-color-text-slim"),borderWidth:1,color:kt(this.styleDeclaration,"--cos-color-bg-page")},f=Object.assign(Object.assign({},qt),{geo:Object.assign(Object.assign({},qt.geo),{layoutSize:this.byMapScaleGetLayoutSize(t.orientation),nameMap:null==l?void 0:l.codeToNameMap,roam:!this.isNeedShowAttached(),itemStyle:p,regions:h}),tooltip:Object.assign(Object.assign({},qt.tooltip),this.tooltipFormat()),visualMap:Object.assign(Object.assign(Object.assign({},qt.visualMap),this.visualMapFormat()),{show:d}),series:[Object.assign(Object.assign({},qt.series[0]),{data:u})]});if(r&&this.attachedChartInstance){var g=$t[this.getCurMapCode()],m=(null===(a=this.attachedChartInstance)||void 0===a?void 0:a.getHeight())-12,v=this.addTokenToGeoRegions((null===(o=null==g?void 0:g.geo)||void 0===o?void 0:o.regions)||[]);s=Object.assign(Object.assign({},g),{geo:Object.assign(Object.assign({},g.geo),{layoutSize:m,nameMap:null==l?void 0:l.codeToNameMap,itemStyle:p,regions:v}),visualMap:Object.assign(Object.assign({},g.visualMap),this.visualMapFormat()),series:[Object.assign(Object.assign({},g.series[0]),{data:u})]}),this.data.set("attachedChartTitle",g.chartName)}return{mainOption:f,attachedOption:s}},i.addTokenToGeoRegions=function(t){var e,n,i=this,a=null===(n=null===(e=this.data.get("chartOption"))||void 0===e?void 0:e.mapConfig)||void 0===n?void 0:n.colorTheme;return t.map((function(t){var e,n,o,r,s,l,c,d,u;return(null===(e=t.itemStyle)||void 0===e?void 0:e.borderColorToken)&&(t.itemStyle=Object.assign(Object.assign({},t.itemStyle),{borderColor:kt(i.styleDeclaration,(null===(n=t.itemStyle)||void 0===n?void 0:n.borderColorToken)||"")})),(null===(r=null===(o=t.select)||void 0===o?void 0:o.itemStyle)||void 0===r?void 0:r.borderColorToken)&&(t.select=Object.assign(Object.assign({},t.select),{itemStyle:{borderColor:kt(i.styleDeclaration,(null===(l=null===(s=t.select)||void 0===s?void 0:s.itemStyle)||void 0===l?void 0:l.borderColorToken)||"")}})),["陆地边界线","新疆边界线"].includes(t.name)&&(null==a?void 0:a.chinaBorder)&&((null===(c=t.itemStyle)||void 0===c?void 0:c.borderColor)&&(t.itemStyle.borderColor=null==a?void 0:a.chinaBorder),(null===(u=null===(d=t.select)||void 0===d?void 0:d.itemStyle)||void 0===u?void 0:u.borderColor)&&(t.select.itemStyle.borderColor=null==a?void 0:a.chinaBorder)),t}))},i.byMapScaleGetLayoutSize=function(t){var e=this.mainChartInstance.getWidth()-30,n=this.mainChartInstance.getHeight()-30;return t<=1?n:t>1&&t<e/n?n*t:e},i.tooltipFormat=function(){var t=this;return{formatter:function(e){if(e){var n=t.data.get(),i=n.dataSet,a=n.chartUnit,o=n.callbackName,r=n.prevTooltipSelectedName,s=(null==e?void 0:e.data)?e.data:{},l=s.name,c=void 0===l?"":l,d=s.value,u=void 0===d?"":d,h=s.key,p=void 0===h?"":h,f=c||e.name;if(Zt.includes(f))return"";if(r===f)return t.data.set("prevTooltipSelectedName",""),"";t.data.set("prevTooltipSelectedName",f);var g="<div><strong>"+f+"</strong></div>";if(!u||!i)return g+='<div style="display:flex;align-items:center;">暂无数据</div>';g+='<div style="display:flex;align-items:center;">',g+=""+u+a+"</div>";var m,v=Object.values(i.codeToNameMap).findIndex((function(t){return t===c})),b=Object.keys(i.codeToNameMap)[v],y=p,w={index:0,data:(m={},m[i.dimensions[0].name]=c,m.adcode=b,m),adcode:b};return y&&(g+='\n                    <div style="cursor: pointer;" class="cos-color-text-primary" onclick="\n                        '+o+"("+JSON.stringify(w).replace(/"/g,"'")+')\n                    ">\n                        '+y+"\n                    </div>\n                "),g}},textStyle:{color:kt(this.styleDeclaration,"--cos-color-text")}}},i.visualMapFormat=function(){var t,e,n,i,a,o=(null===(e=null===(t=this.data.get("chartOption"))||void 0===t?void 0:t.mapConfig)||void 0===e?void 0:e.visualMap)||{},r=o.min,s=void 0===r?800:r,l=o.max,c=void 0===l?3e4:l,d=o.text,u=void 0===d?["高","低"]:d,h=null===(i=null===(n=this.data.get("chartOption"))||void 0===n?void 0:n.mapConfig)||void 0===i?void 0:i.colorTheme,p={min:s,max:c,text:u,inRange:{color:["#D6E6FF","#3366FF"]},textStyle:{color:kt(this.styleDeclaration,"--cos-color-text")}};return(null===(a=null==h?void 0:h.bg)||void 0===a?void 0:a.length)&&(p.inRange={color:h.bg}),p},i.setHighLight=function(){var t=this.mainChartInstance,e=(this.data.get("chartOption")||{}).mapConfig,n=null==e?void 0:e.selectedMapCode;if(n){var i=this.data.get("dataSet"),a=Object.keys(i.codeToNameMap).findIndex((function(t){return+t==+n})),o=Object.values(i.codeToNameMap)[a];this.data.set("selectedName",o),t&&(t.dispatchAction({type:"select",seriesIndex:0,name:o}),t.dispatchAction({type:"showTip",seriesIndex:0,name:o}))}},i.globalClick=function(t){t.composedPath().includes(this.ref("aiChartMapBox"))||(this.removeChartInstanceAction(this.mainChartInstance),this.removeChartInstanceAction(this.attachedChartInstance))},i.removeChartInstanceAction=function(t){null==t||t.dispatchAction({type:"hideTip"}),this.data.set("prevTooltipSelectedName",""),null==t||t.dispatchAction({type:"downplay"}),null==t||t.dispatchAction({type:"select"})},i.addMapEventListener=function(){var t,e=this;[this.mainChartInstance,this.attachedChartInstance].forEach((function(t){t&&t.getZr().on("click",(function(t){t.target||(e.removeChartInstanceAction(e.mainChartInstance),e.removeChartInstanceAction(e.attachedChartInstance))})),t&&t.on("selectchanged",(function(e){"unselect"===(null==e?void 0:e.fromAction)&&t.dispatchAction({type:"downplay"})}))})),null===(t=this.mainChartInstance)||void 0===t||t.on("georoam",(function(t){var n,i,a,o,r=t,s=null===(n=e.mainChartInstance)||void 0===n?void 0:n.getOption();(null===(o=null===(a=null===(i=null==s?void 0:s.geo)||void 0===i?void 0:i[0])||void 0===a?void 0:a.label)||void 0===o?void 0:o.fontSize)&&(null==r?void 0:r.totalZoom)&&(r.totalZoom<=2?s.geo[0].label.fontSize=10:r.totalZoom>2&&r.totalZoom<3?s.geo[0].label.fontSize=13:s.geo[0].label.fontSize=16,e.mainChartInstance.setOption(s))}))},i.enableConnectTooltip=function(){var t=this;[this.mainChartInstance,this.attachedChartInstance].forEach((function(e){null==e||e.on("click",(function(n){[t.mainChartInstance,t.attachedChartInstance].forEach((function(t){e!==t&&void 0!==n.name&&(null==t||t.dispatchAction({type:"showTip",name:n.name,seriesIndex:n.seriesIndex}),null==t||t.dispatchAction({type:"select",name:n.name,seriesIndex:n.seriesIndex}))}))}))}))},i.enableConnectHighlights=function(){var t=this;[this.mainChartInstance,this.attachedChartInstance].forEach((function(e){null==e||e.on("mouseover",(function(n){[t.mainChartInstance,t.attachedChartInstance].forEach((function(t){t!==e&&void 0!==n.name&&(null==t||t.dispatchAction({type:"highlight",seriesIndex:0,name:n.name}))}))})).on("mouseout",(function(n){[t.mainChartInstance,t.attachedChartInstance].forEach((function(t){t!==e&&void 0!==n.dataIndex&&(null==t||t.dispatchAction({type:"downplay",seriesIndex:0,name:n.name}))}))}))}))},i.mapBoxMainMouseleave=function(){this.removeChartInstanceAction(this.mainChartInstance)},i.mapAttachedBoxMouseleave=function(){this.removeChartInstanceAction(this.attachedChartInstance)},i.clickChart=function(t){this.handleEvent(t,"click")},i.handleEvent=function(t,e){var n=this.data.get(),i=n.componentType,a=n.subCategory;this.fire(e,{e:t,type:i+"_"+a})},i.onTouchStart=function(t){this.handleEvent(t,"touchstart")},i.onTouchMove=function(t){this.handleEvent(t,"touchmove")},i.onTouchEnd=function(t){this.handleEvent(t,"touchend")},i.detached=function(){window.removeEventListener("click",this.globalClickHandler);var t=this.data.get("callbackName");delete window[t]},n}(n.Component);function te(t,e){return te=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},te(t,e)}Yt.trimWhitespace="all",Yt.template='\n        <div\n            data-module="{{componentType}}_{{subCategory}}"\n            on-click="clickChart"\n        >\n            <div\n                s-ref="aiChartMapBox"\n                class="ai-chart-map-box"\n            >\n                <div\n                    s-if="isLoading"\n                    class="ai-chart-map-box-loading"\n                >\n                    <sc-loading />\n                </div>\n                <div\n                    s-ref="mainChart"\n                    class="ai-chart-map-box-main"\n                    on-mouseleave="mapBoxMainMouseleave"\n                    on-mousedown="onTouchStart"\n                    on-mousemove="onTouchMove"\n                    on-mouseup="onTouchEnd"\n                ></div>\n\n                <div\n                    s-if="{{showAttachedDom}}"\n                    s-ref="attachedChartWrap"\n                    class="ai-chart-map-box-attached-wrap"\n                    style="\n                        width: {{attachedChartWidth}}px;\n                        height: {{attachedChartHeight}}px;\n                    "\n                >\n                    <div\n                        s-ref="attachedChart"\n                        class="ai-chart-map-box-attached"\n                        on-mouseleave="mapAttachedBoxMouseleave"\n                    ></div>\n                    <div class="ai-chart-map-box-attached-name">{{attachedChartTitle}}</div>\n                </div>\n\n                <div s-if="{{showToast}}" class="ai-chart-map-box-toast">地图数据加载失败</div>\n            </div>\n        </div>\n    ',Yt.components={"sc-loading":mt,"sc-icon":k};var ee=function(e){function n(){var t;return(t=e.call.apply(e,[].concat([this],Array.from(arguments)))||this).mainChart=null,t}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&te(t,e)}(n,e);var i=n.prototype;return i.initData=function(){return{componentType:"bar",dataSet:{source:[],dimensions:[]},yAxisData:[],universalTransition:!1,color:[],emphasisColor:[],chartUnit:[],changeBtn:[],showTooltip:!0,showLegend:!0,defaultIndex:-1,subCategory:"0",chartOption:{},isToolTip:!0,lightColor:[]}},i.attached=function(){var e=this;this.data.get("universalTransition")&&new Promise((function(e,n){t(["./echarts.pc.KGe0vDLl"],e,n)})).then((function(t){e.mainChart=t.init(e.ref("mainChart")),e.drawChart()})),this.fire("render-finished"),this.nextTick((function(){var t=e.data.get(),n=t.componentType,i=t.subCategory;e.fire("show-log-event",{component:"echart",componentType:n+"_"+i})}))},i.drawChart=function(){var t=this,e=this.ref("chart");if(this.data.get("universalTransition")){if(this.mainChart){var n=this.ref("mainChart");this.nextTick((function(){var i,a=null===(i=t.ref("chart"))||void 0===i?void 0:i.ref("mainChart");null==a||a.appendChild(n),t.mainChart.resize(),null==e||e.drawChart(t.mainChart)}))}}else null==e||e.drawChart()},i.handleChartChangeTab=function(t){this.fire("chart-change-tab",t)},i.clickChart=function(t){this.fire("action-log-event",{component:"echart",componentType:t.type,actionType:"o"})},i.handleChartScroll=function(t){this.fire("chart-scroll",t)},i.handleChartClick=function(t){this.fire("chart-click",t)},i.handleMoreBtnClick=function(t){this.fire("more-btn-click",t)},n}(n.Component);function ne(t,e){return ne=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ne(t,e)}ee.template='\n        <div\n            data-module="ai_echart"\n            disable-tts\n            data-show="component"\n            data-show-ext="{{realShowExt}}"\n            rl-node\n            rl-type="stop"\n        >\n            <component\n                s-ref="chart"\n                s-is="{{componentChart}}"\n                data-set="{{dataSet}}"\n                y-axis-data="{{yAxisData}}"\n                color="{{colors}}"\n                emphasis-color="{{emphasisColors}}"\n                chart-unit="{{chartUnit}}"\n                change-btn="{{changeBtns}}"\n                show-tooltip="{{showTooltip}}"\n                show-legend="{{showLegend}}"\n                chart-option="{{chartOption}}"\n                default-index="{{defaultIndex}}"\n                sub-category="{{subCategory}}"\n                use-common-chart-dom="{{universalTransition}}"\n                light-color="{{lightColor}}"\n                is-tool-tip="{{isToolTip}}"\n                on-chart-change-tab="handleChartChangeTab"\n                on-click="clickChart"\n                on-chart-click="handleChartClick"\n                on-chart-scroll="handleChartScroll"\n                on-more-btn-click="handleMoreBtnClick"\n            />\n            \x3c!-- 全局动画开启共用图表容器dom，插入各自图表组件的\'ai-chart-{comopnentType}-box\'容器中 --\x3e\n            <div\n                s-if="universalTransition"\n                s-ref="mainChart"\n                style="height: 100%; width: 100%"\n            />\n        </div>\n    ',ee.trimWhitespace="all",ee.components={"ai-bar-chart":Mt,"ai-rank-chart":Dt,"ai-line-chart":Bt,"ai-pie-chart":Ft,"ai-vs-chart":Rt,"ai-map-chart":Yt},ee.computed={componentChart:function(){var t=this.data.get("componentType");return V[t]},componentList:function(){return Object.values(V)},realShowExt:function(){return JSON.stringify({component_content:{component_name:"echart",component_type:this.data.get("componentType")+"_"+this.data.get("subCategory")}})},colors:function(){var t;return(null===(t=this.data.get("color"))||void 0===t?void 0:t.length)?this.data.get("color"):U},emphasisColors:function(){var t;return(null===(t=this.data.get("emphasisColor"))||void 0===t?void 0:t.length)?this.data.get("emphasisColor"):q},changeBtns:function(){var t,e;return(null===(t=this.data.get("changeBtn"))||void 0===t?void 0:t.length)?null===(e=this.data.get("changeBtn"))||void 0===e?void 0:e.slice(0,3):[]}};var ie=function(t,e){var i;return(i=function(t){function e(){return t.call(this)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ne(t,e)}(e,t),e}(n.Component)).template="\n            <div>Component "+t+" is not supported on "+e+".</div>\n        ",i}("AIImageWithThumbnail","pc");function ae(t,e){return ae=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ae(t,e)}var oe=function(t){function e(){return t.apply(this,Array.from(arguments))}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ae(t,e)}(e,t);var n=e.prototype;return n.initData=function(){return{disabled:!1,inline:!1,size:"md",touchActive:!1}},n.onRlShow=function(t){this.data.set("touchActive",!0),t.preventDefault()},n.onRlHide=function(){this.data.set("touchActive",!1)},e}(n.Component);function re(t,e){return re=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},re(t,e)}oe.template='\n        <button\n            class="\n                sc-button sc-button-new\n                {{styleSizeSc}}\n                {{disabled ? \'sc-disabled\' : \'\'}}\n                {{inline ? \'sc-inline\' : \'\'}}\n                {{touchActive ? \'sc-active\' : \'\'}}\n                cos-font-medium-important"\n            disabled="{{disabled}}"\n            rl-node\n            rl-type="button"\n            on-rlShow="onRlShow"\n            on-rlHide="onRlHide"\n        >\n            <slot name="prefix"></slot>\n            <slot></slot>\n            <slot name="suffix"></slot>\n        </button>\n    ',oe.computed={styleSizeSc:function(){var t=this.data.get("size");return t?s["sc"+t.slice(0,1).toUpperCase()+t.slice(1)]:""}};var se=function(t){function e(){var e;return(e=t.call.apply(t,[].concat([this],Array.from(arguments)))||this).limited=!1,e.scrollBlurTimer=null,e.inComposition=!1,e.maxWidth=-1,e.subjectBlur=function(){e.data.get("shouldBlurWhenScrollStart")&&e.blur()},e}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&re(t,e)}(e,t);var n=e.prototype;return n.initData=function(){return{value:"",compositionValue:"",placeholder:"请输入内容",maxLength:-1,textAlign:"left",prefix:"",suffix:"",fontSize:16,autoWidth:!1,inputBlur:!1,showMarkdown:!0,disabled:!0,dataModule:"",shouldBlurWhenScrollStart:!0}},n.attached=function(){var t=this;this.watch("inputBlur",(function(e){e&&t.subjectBlur()})),this.watch("value",(function(e){t.data.set("compositionValue",e)}))},n.detached=function(){var t;null===(t=this.observer)||void 0===t||t.disconnect()},n.handleCompositionStart=function(){this.inComposition=!0,this.fire("compositionstart")},n.handleCompositionEnd=function(){this.inComposition=!1,this.fire("compositionend")},n.handleInput=function(t){var e=(null==t?void 0:t.target).value||"",n=this.data.get("maxLength");if(-1!==n){var i=e.substring(0,n);this.data.set("compositionValue",e),this.fire("input",i),e.length>=n?(this.limited=!0,this.fire("limited",e)):(this.limited=!1,this.fire("unlimited"))}},n.handleFocus=function(t){var e=this;this.data.get("disabled")||this.data.get("showMarkdown")||(this.fire("focus",t),this.scrollBlurTimer&&clearTimeout(this.scrollBlurTimer),this.scrollBlurTimer=setTimeout((function(){window.addEventListener("scroll",e.subjectBlur)}),1200))},n.handleBlur=function(t){this.data.get("disabled")||this.data.get("showMarkdown")||(this.fire("blur",t),this.scrollBlurTimer&&clearTimeout(this.scrollBlurTimer),window.removeEventListener("scroll",this.subjectBlur))},n.handleClick=function(t){this.data.get("disabled")||this.fire("click",t)},n.handleKeyDown=function(t){this.inComposition||13===t.keyCode&&this.fire("confirm")},n.focus=function(){var t;null===(t=this.ref("input"))||void 0===t||t.focus()},n.blur=function(){var t;null===(t=this.ref("input"))||void 0===t||t.blur()},n.removeReadonly=function(){var t;null===(t=this.ref("input"))||void 0===t||t.removeAttribute("readonly")},n.setReadonly=function(){var t;null===(t=this.ref("input"))||void 0===t||t.setAttribute("readonly","true")},e}(n.Component);function le(t,e){return le=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},le(t,e)}function ce(t){for(var e=0;t&&(e+=t.offsetTop,null==t?void 0:t.offsetParent);)t=t.offsetParent;return e}se.template='\n        <div>\n            <div\n                class="ai-markdown-editor-input cos-inline-flex"\n                text-align="{{textAlign}}"\n                on-click="handleClick"\n                data-module="{{dataModule}}">\n                <span\n                    s-if="prefix"\n                    s-ref="prefix"\n                    class="prefix">{{prefix}}</span>\n                <div class="value-container cos-inline-flex cos-flex-1">\n                    <input\n                        type="text"\n                        s-ref="input"\n                        value="{=value=}"\n                        placeholder="{{placeholder}}"\n                        readonly\n                        enterkeyhint="done"\n                        maxlength="{{maxLength}}"\n                        on-compositionstart="handleCompositionStart($event)"\n                        on-compositionend="handleCompositionEnd($event)"\n                        on-input="handleInput($event)"\n                        on-focus="handleFocus($event)"\n                        on-blur="handleBlur($event)"\n                        on-keydown="handleKeyDown($event)"/>\n                    <span\n                        s-ref="composition-value"\n                        class="composition-value">{{compositionValue || placeholder}}</span>\n                </div>\n                <span\n                    s-if="suffix"\n                    s-ref="suffix"\n                    class="suffix">{{suffix}}</span>\n            </div>\n        </div>\n    ',se.components={},se.computed={computedValue:function(){return this.data.get("compositionValue").replace(/\s/g,"&nbsp;")}};var de=function(t){function e(){var e;return(e=t.call.apply(t,[].concat([this],Array.from(arguments)))||this).observer=null,e.originAuthor="",e.originReceiver="",e.originHighlights=[],e.focusedTargetsMap=new Map,e.contentEditor=null,e}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&le(t,e)}(e,t);var n=e.prototype;return n.initData=function(){return{value:"",rawValue:"",textStyle:"",cid:"",theme:null,typingSwitch:!1,functionButtons:{},showMarkdown:!0,maxLength:100,hasUnderline:!0,context:{},id:0,urlParams:null,type:"",textAlign:"",disabled:!1,inputBlur:!1,showButtons:!1,renderFinished:!1,originInnerText:"",editorText:"",saving:!1,editId:"edit"+(new Date).getTime()+Math.floor(10*Math.random()),editorInputMaxLength:13,suffixText:"：",author:"",authorPlaceholder:"收件人（选填）",prefixText:"-",receiver:"",receiverPlaceholder:"署名（选填）",editorStyle:{},shouldBlurWhenScrollStart:!0,needVersionUpdateCheck:!1,noChangeNeedCheckRisk:!1,hasBorderLayer:!1,templateSrc:"",isAnimation:!1,logExtData:{}}},n.attached=function(){var t=this;this.originAuthor=this.data.get("author"),this.originReceiver=this.data.get("receiver"),this.editorTouchHandle=this.touchStartHandler.bind(this),window.addEventListener("click",this.editorTouchHandle,!0),this.nextTick((function(){t.contentEditor=t.ref("editor"),t.observer=new MutationObserver((function(){return t.handleInputLength()})),t.observer.observe(t.contentEditor,{childList:!0,subtree:!0,characterData:!0})})),this.data.get("typingSwitch")&&"0"!==this.data.get("typing")||(this.data.set("renderFinished",!0),this.fire("render-finished")),this.watch("functionButtons.copy",(function(){t.data.get("renderFinished")&&(t.data.set("showButtons",!0),t.fire("render-finished"))})),this.watch("rawValue",(function(e){!e||"0"===t.data.get("typing")&&t.data.get("typingSwitch")||(t.data.set("renderFinished",!1),t.data.set("showButtons",!1)),t.data.get("typingSwitch")||(t.data.set("renderFinished",!0),t.fire("render-finished"))})),this.watch("editorText",(function(e){t.dispatch("ai-markdown-editor:input",{}),e.trim()||(t.contentEditor.value="",t.data.set("editorText",""))})),this.watch("inputBlur",(function(){var e,n,i;null===(e=t.ref("receiver"))||void 0===e||e.blur(),null===(n=t.ref("author"))||void 0===n||n.blur(),null===(i=t.contentEditor)||void 0===i||i.blur()})),this.watch("showMarkdown",(function(e){e&&t.contentEditor&&(t.contentEditor.style.height="0.5px")}))},n.handleInput=function(){this.contentEditor&&this.ref("textareaSibling")&&(this.ref("textareaSibling").value=this.data.get("editorText"),this.contentEditor.clientHeight!==this.contentEditor.scrollHeight&&(this.contentEditor.style.height=this.contentEditor.scrollHeight+"px"),this.dispatch("ai-markdown-editor:input",{}))},n.hanldeKeyUp=function(t){this.ref("textareaSibling").value=this.data.get("editorText"),"Backspace"===t.key&&this.contentEditor&&(this.contentEditor.style.height=this.ref("textareaSibling").scrollHeight+"px")},n.editorTouchHandle=function(t){},n.touchStartHandler=function(t){var e,n=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.closest('[data-module^="edit"]'),i=null==n?void 0:n.getAttribute("data-module"),a=this.data.get("showMarkdown"),o=this.data.get("editId");i&&i!==o&&!a&&this.handleCancle()},n.handleReceiverFocused=function(t){var e=this,n=0===this.focusedTargetsMap.size;this.data.set("shouldBlurWhenScrollStart",n),this.focusedTargetsMap.set(t.target,1);var i,a,o,r;(i=0,a=document.documentElement.scrollTop,o=a,r=0,new Promise((function(t,e){var n=function(){o===document.documentElement.scrollTop&&r++,r>=10?(cancelAnimationFrame(i),o===a?e():t()):(o=document.documentElement.scrollTop,i=requestAnimationFrame(n))};i=requestAnimationFrame(n)}))).then((function(){e.scrollIntoView(e.el,-14)})).catch((function(){e.scrollIntoView(e.el,-14)}))},n.handleAuthorFocused=function(t){this.data.set("shouldBlurWhenScrollStart",0===this.focusedTargetsMap.size),this.focusedTargetsMap.set(t.target,1)},n.handleReceiverConfirm=function(){this.ref("receiver").blur()},n.handleAuthorConfirm=function(){this.ref("author").blur()},n.scrollIntoView=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0),t&&setTimeout((function(){!function(t){var e=t.target,n=void 0===e?document.documentElement:e,i=t.top,a=void 0===i?0:i,o=t.duration,r=void 0===o?200:o,s=n.scrollTop,l=performance.now(),c=0;c=requestAnimationFrame((function t(e){var i=e-l,o=function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}(i,s,a-s,r);n.scrollTop=o,n.scrollTop!==o&&n===document.documentElement&&(document.body.scrollTop=o),i<r?c=requestAnimationFrame(t):cancelAnimationFrame(c)}))}({top:ce(t)+e})}),n)},n.handleBlur=function(t){var e=this;setTimeout((function(){e.focusedTargetsMap.delete(t.target),e.data.set("shouldBlurWhenScrollStart",0===e.focusedTargetsMap.size)}),500)},n.handleFocused=function(t){this.handleReceiverFocused(t)},n.handlePaste=function(t){var e=this,n=t.clipboardData,i=this.data.get("maxLength");if(i=i>0?i:100,this.contentEditor&&!(i<0)&&n){t.preventDefault();var a=n.getData("text");a&&(a=a.trim().replace(/\n+/g,"").replace(/ +/g," "),this.contentEditor.value.length+a.length>i&&(a=a.slice(0,i-this.contentEditor.value.length)),this.contentEditor.value+=a,this.data.set("editorText",this.contentEditor.value||""),this.nextTick((function(){e.contentEditor&&e.contentEditor.value.length>=100&&e.showToast("字数控制在100字内哦～"),e.handleInput()})))}},n.handleInputLength=function(){var t,e=(null===(t=this.contentEditor)||void 0===t?void 0:t.value)||"",n=this.data.get("maxLength");n>0&&0===e.length&&this.data.set("placeholderShow",this.data.get("placeholder"));var i=this.data.get("editorText").length;n>0&&i&&i>=n&&this.showToast("字数控制在100字内哦～")},n.handleReady=function(){this.fire("render-ready")},n.handleMarkdownRenderFinished=function(){this.fire("render-finished"),this.data.set("renderFinished",!0);var t=this.data.get("functionButtons")||{},e=t.copy,n=t.image;(e||n)&&this.data.set("showButtons",!0)},n.handleReceiverClick=function(t){this.data.get("showMarkdown")||this.data.get("disabled")||this.dispatch("ai-markdown-editor:btn-click",{actionType:"recipient",id:this.data.get("id"),event:t})},n.handleAuthorClick=function(t){this.dispatch("ai-markdown-editor:btn-click",{actionType:"from",id:this.data.get("id"),event:t})},n.generateAcrosticData=function(t,n){var i=this;void 0===n&&(n=!0);var a=[];if(this.data.get("textStyle")===e.textStyle.acrostic){var o=n?t.split(/(\n)/):t.split(/\n/),r=n?/\S/:/^./g;o.forEach((function(t,e){a.push(t.replace(r,(function(t){return(/.*[\u4e00-\u9fa5]+.*$/.test(t)||/^[A-Za-z]+$/.test(t))&&(n||i.originHighlights[e]===t)?"<em>"+t+"</em>":t})))}))}return{acrosticData:a}},n.isEqualText=function(t,e){return t.replace(/\n/g,"").replace(/\s/g,"")===e.replace(/\n/g,"").replace(/\s/g,"")},n.handleContentClick=function(t){this.data.get("showMarkdown")&&this.data.get("isPrimary")&&this.handleEdit(t,"content")},n.handleButtonsClick=function(t){var e=t.event;this[{edit:"handleEdit",image:"handleImage",copy:"handleCopy",more:"handleMore",cancle:"handleCancle",polish:"handlePolish"}[t.actionType]](e)},n.handleEdit=function(t,e){var n,i,a,o,r=this,s=this.ref("markdown"),l=null==s?void 0:s.ref("markdownRef");this.data.set("isAnimation",!0);var c=null===(n=null==l?void 0:l.innerText)||void 0===n?void 0:n.replace(/^\n+/g,"").replace(/\n+$/g,"");if(this.dispatch("ai-markdown-editor:btn-click",{actionType:"edit",text:c,event:t,author:this.originAuthor,receiver:this.originReceiver,id:this.data.get("id"),area:e}),!this.data.get("disabled")){c=c.replace(/\n+/g,"\n");var d=l.querySelectorAll(".md-highlight");this.originHighlights=Array.prototype.map.call(d,(function(t){return t.innerText}));var u=this.data.get("maxLength");c.length>u&&(c=c.substring(0,u),this.showToast("字数控制在100字内哦～")),this.data.set("originInnerText",c),this.data.set("showMarkdown",!1),this.contentEditor.value=c,this.data.set("editorText",c),this.nextTick((function(){r.ref("textareaSibling").value=c,r.contentEditor.style.height=r.contentEditor.scrollHeight+"px"})),null===(i=this.contentEditor)||void 0===i||i.removeAttribute("readonly"),null===(a=this.contentEditor)||void 0===a||a.focus(),null===(o=this.ref("receiver"))||void 0===o||o.removeReadonly(),this.nextTick((function(){var t;null===(t=r.ref("author"))||void 0===t||t.removeReadonly()}))}},n.handleImage=function(t){var n,i,a,o=null===(n=this.ref("markdown"))||void 0===n?void 0:n.ref("markdownRef"),r=null===(i=null==o?void 0:o.innerText)||void 0===i?void 0:i.replace(/^\n+/g,"").replace(/\n+$/g,""),s=this.data.get("showMarkdown")?r:this.data.get("editorText");if(this.data.get("textStyle")===e.textStyle.acrostic&&(s=s.replace(/\n+/g,"\n")),s.trim()){var l=this.data.get("functionButtons").image||{},c=null===(a=l.search)||void 0===a?void 0:a.query,d=this.data.get("suffixText"),u=this.data.get("prefixText"),h=this.data.get("theme.templateId"),p=this.data.get("author").trim(),f=l.diyUrl,g=p?""+u+p:"",m=this.data.get("receiver").trim(),v=m?""+m+d:"",b=this.data.get("originInnerText")!==s,y=!this.isEqualText(this.data.get("originInnerText"),s),w=this.generateAcrosticData(s,b).acrosticData;this.dispatch("ai-markdown-editor:btn-click",{actionType:"image",text:s,originText:this.data.get("originInnerText"),query:c,id:this.data.get("id"),event:t,author:g,receiver:v,acrosticText:b?w.join(""):w.join("\n"),hasTextContentChanged:y,template:h,req_type:"1",diyUrl:f}),this.data.get("disabled")||this.data.set("saving",!0)}else this.showToast("请填写内容~")},n.handleCopy=function(t){var n,i,a,o=null===(n=this.ref("markdown"))||void 0===n?void 0:n.ref("markdownRef"),r=null===(i=null==o?void 0:o.innerText)||void 0===i?void 0:i.replace(/^\n+/g,"").replace(/\n+$/g,"");this.data.get("textStyle")===e.textStyle.acrostic&&(r=r.replace(/\n+/g,"\n")),this.data.get("showMarkdown")||(r=(null===(a=this.contentEditor)||void 0===a?void 0:a.value)||""),this.dispatch("ai-markdown-editor:btn-click",{actionType:"copy",text:r,event:t,id:this.data.get("id")})},n.handleCancle=function(t){this.data.set("isAnimation",!1),this.reset(),this.dispatch("ai-markdown-editor:btn-click",{actionType:"cancle",event:t,id:this.data.get("id")})},n.handleMore=function(t){var n,i,a,o,r=null===(n=this.ref("markdown"))||void 0===n?void 0:n.ref("markdownRef"),s=null===(i=null==r?void 0:r.innerText)||void 0===i?void 0:i.replace(/^\n+/g,"").replace(/\n+$/g,"");this.data.get("textStyle")===e.textStyle.acrostic&&(s=s.replace(/\n+/g,"\n")),this.dispatch("ai-markdown-editor:btn-click",{actionType:"more",text:s,event:t,query:(null===(o=null===(a=this.data.get("functionButtons").more)||void 0===a?void 0:a.search)||void 0===o?void 0:o.query)||"",id:this.data.get("id")})},n.handlePolish=function(t){var n,i,a,o,r=null===(n=this.ref("markdown"))||void 0===n?void 0:n.ref("markdownRef"),s=null===(i=null==r?void 0:r.innerText)||void 0===i?void 0:i.replace(/^\n+/g,"").replace(/\n+$/g,"");this.data.get("textStyle")===e.textStyle.acrostic&&(s=s.replace(/\n+/g,"\n")),this.dispatch("ai-markdown-editor:btn-click",{actionType:"polish",text:s,event:t,query:(null===(o=null===(a=this.data.get("functionButtons").polish)||void 0===a?void 0:a.search)||void 0===o?void 0:o.query)||"",id:this.data.get("id"),template:this.data.get("theme.templateId"),req_type:"2"})},n.reset=function(){var t,e;this.data.set("showMarkdown",!0),null===(t=this.ref("receiver"))||void 0===t||t.setReadonly(),null===(e=this.ref("author"))||void 0===e||e.setReadonly(),this.data.set("editorText",""),this.data.set("originInnerText",""),this.data.set("author",this.originAuthor),this.data.set("receiver",this.originReceiver)},n.showToast=function(t){},n.cancelTyping=function(){var t=this.ref("markdown");null==t||t.cancelTyping()},n.updateRawValue=function(t){var e;null===(e=this.ref("markdown"))||void 0===e||e.updateRawValue(t)},n.changeEditStatus=function(t){this.data.get("id")===(null==t?void 0:t.id)&&(this.data.set("saving",!1),(null==t?void 0:t.isDanger)?this.showToast("请重新编辑内容试试～"):this.reset())},e}(n.Component);function ue(t,e){return ue=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ue(t,e)}de.template='\n        <div\n            s-ref="editor-container"\n            class="ai-markdown-editor\n                cos-dqa\n                {{showMarkdown ? \'\' : \'ai-markdown-editor-edit\'}}\n                {{isPrimary ? \'ai-markdown-editor-primary\' : \'\'}}\n                {{isAnimation ? \'editor-area\' : \'\'}}\n                {{hasBorderLayer && showMarkdown ? \'ai-markdown-border-layer\' : \'\'}}\n                {{isShortText ? \'ai-markdown-editor-short\' : \'\'}}"\n            style="{{editorStyleInfo}}"\n            data-show="component"\n            data-show-ext="{{realShowExt}}"\n        >\n            <div s-if="isPrimary && theme.templateSrc" class="ai-markdown-editor-template">\n                <img class="ai-markdown-greet-img" src="{{greetSrc}}" />\n            </div>\n            <div\n                class="ai-markdown-editor-content"\n                on-click="handleContentClick"\n                data-module="{{showMarkdown ? \'content\' : \'\'}}">\n                \x3c!-- 收件人 --\x3e\n                <ai-md-editor-input\n                    s-show="isPrimary || !showMarkdown"\n                    s-ref="receiver"\n                    class="receiver-input cos-space-mb-md"\n                    data-module="{{showMarkdown ? \'\' : \'recipient\'}}"\n                    value="{=receiver=}"\n                    max-length="{{editorInputMaxLength}}"\n                    placeholder="{{authorPlaceholder}}"\n                    auto-width\n                    disabled="{{disabled}}"\n                    show-markdown="{{showMarkdown}}"\n                    suffix="{{suffixText}}"\n                    input-blur="{{inputBlur}}"\n                    should-blur-when-scroll-start="{{shouldBlurWhenScrollStart}}"\n                    on-focus="handleReceiverFocused"\n                    on-blur="handleBlur"\n                    on-click="handleReceiverClick"\n                    on-confirm="handleReceiverConfirm"\n                />\n                \x3c!-- markdown --\x3e\n                <div class="text-textarea" data-style="{{textStyle}}">\n                    <sc-markdown\n                        s-show="showMarkdown"\n                        s-ref="markdown"\n                        s-bind="markdownData"\n                        id="{{id}}"\n                        class="markdown-content {{!ssr ? \'markdown-content-csr\' : \'\'}}"\n                        reference-element="{{referenceElement}}"\n                        on-render-ready="handleReady"\n                        on-render-finished="handleMarkdownRenderFinished"\n                        on-show-log-event="handleShowLogEvent"\n                    />\n                    \x3c!--\n                        说明：为了实现 “点击做贺卡后能够自动聚焦到 receiver”，需要将整个编辑区隐藏在高度为 0.5px 的 div 里\n                        如果 editor 在页面中不占位(display: none)，则无法实现自动聚焦到 receiver\n                    --\x3e\n                    \x3c!-- 文本编辑区域 --\x3e\n                    <textarea\n                        s-ref="editor"\n                        data-no-na-dialog="true"\n                        class="cos-color-text markdown-content {{showMarkdown ? \'editor-hidden\' : \'editor\'}}"\n                        maxlength="{{100}}"\n                        value="{=editorText=}"\n                        placeholder="{{placeholderShow}}"\n                        readonly="{{showMarkdown}}"\n                        data-style="{{textStyle}}"\n                        enterkeyhint="enter"\n                        on-focus="handleFocused($event)"\n                        on-blur="handleBlur($event)"\n                        on-paste="handlePaste($event)"\n                        on-input="handleInput"\n                        on-keyup="hanldeKeyUp($event)"\n                    ></textarea>\n                    <textarea\n                        s-ref="textareaSibling"\n                        readonly\n                        class="cos-color-text markdown-content {{showMarkdown ? \'editor-hidden\' : \'editor\'}} textarea-sibling"\n                    >\n                    </textarea>\n                </div>\n                \x3c!-- 署名 --\x3e\n                <ai-md-editor-input\n                    s-if="!showMarkdown"\n                    s-ref="author"\n                    value="{=author=}"\n                    data-module="from"\n                    disabled="{{disabled}}"\n                    max-length="{{editorInputMaxLength}}"\n                    placeholder="{{receiverPlaceholder}}"\n                    auto-width\n                    text-align="right"\n                    inputBlur="{{inputBlur}}"\n                    class="\n                        author-input\n                        cos-flex\n                        {{isAnimation ? \'signal-area\' : \'\'}}\n                    "\n                    prefix="{{prefixText}}"\n                    on-focus="handleAuthorFocused"\n                    on-blur="handleBlur"\n                    on-click="handleAuthorClick"\n                    on-confirm="handleAuthorConfirm"\n                />\n            </div>\n            <ai-md-editor-btn\n                s-if="{{renderFinished || ssr}}"\n                showMarkdown="{{showMarkdown}}"\n                isPrimary="{{isPrimary}}"\n                isAnimation="{{isAnimation}}"\n                isShortText="{{isShortText}}"\n                functionButtons="{{functionButtons}}"\n                urlParams="{{urlParams}}"\n                editorText="{{editorText}}"\n                maxLength="{{maxLength}}"\n                editId="{{editId}}"\n                saving="{{saving}}"\n                loadingSrc="{{context.theme && context.theme.loadingSrc}}"\n                is-cache="{{isCache}}"\n                log-ext-data="{{logExtData}}"\n                on-click="handleButtonsClick"\n            />\n            <div s-if="isShortText && renderFinished" class="ai-markdown-editor-divider"></div>\n            <sc-divider\n                s-if="hasUnderline && !isShortText && !isPrimary && functionButtons && (functionButtons.copy || functionButtons.image)"\n                class="cos-space-mt-md cos-space-mb-md"></sc-divider>\n        </div>\n    ',de.textStyle={acrostic:"1"},de.components={"sc-button":oe,"sc-icon":k,"ai-md-editor-input":se},de.computed={realShowExt:function(){return JSON.stringify(Object.assign({component_content:{component_name:"markdownEditor"}},this.data.get("logExtData")))},getFunctionLogMsg:function(){return JSON.stringify({module_type:"content"})},markdownData:function(){var t=this.data.get("value"),e=this.data.get("rawValue"),n=this.data.get("typingSwitch"),i=this.data.get("typing"),a=this.data.get("typingSpeed");return{ssr:this.data.get("ssr")||!1,value:t,rawValue:e,typingSwitch:i?"0"!==i:n,typingSpeed:a,theme:this.data.get("theme")}},isPrimary:function(){return"primary"===this.data.get("type")},isShortText:function(){return"shortText"===this.data.get("type")},editorStyleInfo:function(){var t=this.data.get("editorStyle"),e=this.data.get("showMarkdown"),n=this.data.get("type"),i=this.data.get("theme")||{};return i.color&&(t["--cos-dqa-color-border"]=i.color,t["--cos-dqa-color-border-light"]=i.color+"33",t["--cosd-color-border"]=i.color,t["--cosd-color-border-light"]=i.color+"33",t["--cos-color-btn-text-primary"]=i.color,t["--cos-color-text-primary"]=i.color,t["--cos-color-bg-primary-light"]=i.color+"0F"),i.colorDark&&(t["--cos-color-text-primary-dark"]=i.colorDark+"CC",t["--cos-dqa-color-border-dark"]=i.colorDark,t["--cos-dqa-color-border-light-dark"]=i.colorDark+"33",t["--cosd-color-border-dark"]=i.colorDark,t["--cosd-color-border-light-dark"]=i.colorDark+"33",t["--cos-color-bg-primary-light-dark"]=i.colorDark+"0F"),!i.templateSrc&&i.inputSrc&&(t["--input-src"]="url("+i.inputSrc+")"),e&&"primary"!==n?"":t},greetSrc:function(){var t=this.data.get("theme")||{},e=t.templateSrc,n=t.inputSrc;return e||n||""}};var he=function(t){function e(){return t.apply(this,Array.from(arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ue(t,e)}(e,t),e.prototype.initData=function(){return Object.assign(Object.assign({},t.prototype.initData.call(this)),{dataModuleName:"lglk",target:"_blank"})},e}(ht);function pe(t,e){return pe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},pe(t,e)}he.template='\n        <component\n            s-is="{{jumpUrl ? \'a\' : \'div\'}}"\n            class="sc-link {{newStyles.link}}"\n            href="{{jumpUrl || \'\'}}"\n            target="{{target}}"\n            data-module="{{dataModuleName}}"\n            s-bind="nativeAttributes"\n            on-click="click"\n        >\n            <slot></slot>\n        </component>\n    ',he.computed=Object.assign(Object.assign({},it.computed),{realParams:function(){var t=this.data.get("params"),e=this.data.get("urlParams");return Object.assign({},t,e)},jumpUrl:function(){var t=this.data.get("url"),e=this.data.get("realParams"),n=t.tcUrl||t;return e.tcUrl||n||""}});var fe=function(t){function e(){return t.apply(this,Array.from(arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pe(t,e)}(e,t),e.prototype.initData=function(){return Object.assign(Object.assign({},t.prototype.initData.call(this)),{defaultStyles:p,url:"",linkProps:{},isGroup:!1})},e}(J);function ge(t,e){return ge=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ge(t,e)}fe.template='\n        <sc-link\n            s-if="isGroup"\n            class="{{newStyles.groupMore}}"\n            url-params="{{linkProps.urlParams}}"\n            native-attributes="{{linkProps.nativeAttributes}}"\n            data-module-name="lgsdm"\n        >\n            <span class="{{newStyles.text}}"><slot name="text">查看更多</slot></span>\n            <span class="cu-font-lg {{newStyles.icon}}">\n                <slot name="icon">\n                    <sc-icon name="right"/>\n                </slot>\n            </span>\n        </sc-link>\n\n        <sc-link\n            s-else\n            class="{{newStyles.more}}"\n            url-params="{{linkProps.urlParams}}"\n            native-attributes="{{linkProps.nativeAttributes}}"\n        >\n            <div class="{{newStyles.text}}">\n                <div>\n                    <slot name="text">查看更多</slot>\n                    <span class="cu-font-lg {{newStyles.icon}}">\n                        <slot name="icon">\n                            <sc-icon name="right"/>\n                        </slot>\n                    </span>\n                </div>\n            </div>\n        </sc-link>\n    ',fe.components={"sc-icon":k,"sc-link":he},fe.computed=J.computed;var me=function(t){function e(){return t.apply(this,Array.from(arguments))}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ge(t,e)}(e,t);var n=e.prototype;return n.handleClick=function(t){t.preventDefault(),t.stopPropagation();var e=this.data.get("isFolded");this.fire("toggle",{type:"toggle",status:e?"folded":"unfolded",event:t})},n.onRlShow=function(t){this.data.set("touchActive",!0)},n.onRlHide=function(t){this.data.set("touchActive",!1)},n.initData=function(){return{unfoldText:"展开",unfoldIcon:"down",foldText:"收起",foldIcon:"top",mask:!1,isFolded:!0,logData:{xpathNode:"sc_fds"},touchActive:!1}},e}(n.Component);function ve(t,e){return ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ve(t,e)}me.template='\n    <div\n        data-module="{{logData.xpathNode}}"\n        class="'+f.scFoldSwitch+" {{(isFolded && mask) ? '"+f.scMasked+"' : ''}} {{touchActive ? '"+f.scActive+'\' : \'\'}}"\n        on-click="handleClick"\n        rl-node\n        rl-type="button"\n        rl-highlight-color="transparent"\n        on-rlShow="onRlShow"\n        on-rlHide="onRlHide"\n        data-nolog="1"\n    >\n        <div class="'+f.scFoldSwitchMask+'" s-if="isFolded && mask"></div>\n        <span\n            class="'+f.scFoldSwitchText+'"\n        >\n            {{isFolded ? unfoldText : foldText}}\n        </span>\n        <sc-icon\n            class="'+f.scFoldSwitchIcon+'"\n            name="{{isFolded ? unfoldIcon : foldIcon}}"\n        >\n        </sc-icon>\n    </div>\n    ',me.components={"sc-icon":k};var be=function(t){function e(){return t.apply(this,Array.from(arguments))}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ve(t,e)}(e,t);var n=e.prototype;return n.inited=function(){this.data.set("currentHeight",this.data.get("foldHeight"))},n.attached=function(){var t=this;this.watch("asyncLoading",(function(e){!e&&t.data.get("isAsync")&&t.asyncLoaded()})),this.watch("foldHeight",(function(){t.data.get("isFolded")&&t.data.set("currentHeight",t.data.get("foldHeight"))}))},n.onToggle=function(t){var e=this.data.get("isFolded");this.data.get("isAsync")&&e?(this.data.set("isFolded",!e),this.fire("toggle",{type:"toggle",status:e?"unfolded":"folded",event:t})):this.handleToggle(t)},n.asyncLoaded=function(){var t=this;this.data.get("isFolded")||this.nextTick((function(){for(var e=t.ref("content").children,n=0,i=0;i<e.length;i++)e[i]&&(n+=e[i].offsetHeight);t.data.set("currentHeight",n)}))},n.handleToggle=function(t){for(var e=this.data.get("isFolded"),n=this.data.get("foldable"),i=this.data.get("moreProps"),a=this.ref("content").children,o=0,r=0;r<a.length;r++)a[r]&&(o+=a[r].offsetHeight);if(e)if(i){var s=this.data.get("unfoldCount")||0;if(s<2){var l=this.data.get("unfoldHeight")||1440,c=Math.min((s+1)*l,o);this.data.set("currentHeight",c),this.data.set("unfoldCount",s+1),(1===s||c>=o)&&(this.data.set("isFolded",!1),this.data.set("showFoldSwitch",!1),this.data.set("showMore",!0),this.data.set("currentHeight",o)),this.fire("toggle",{type:"toggle",status:"unfolded",event:t})}}else this.data.set("currentHeight",e?o:0),this.data.set("isFolded",!1),n||this.data.set("showFoldSwitch",!1),this.fire("toggle",{type:"toggle",status:"unfolded",event:t});else this.data.set("isFolded",!0),this.data.set("unfoldCount",0),this.data.set("currentHeight",this.data.get("foldHeight")),this.fire("toggle",{type:"toggle",status:"folded",event:t})},n.initData=function(){return{unfoldText:"展开",unfoldIcon:"down",foldText:"收起",foldIcon:"top",foldHeight:24,unfoldHeight:1440,foldable:!0,mask:!1,moreProps:void 0,isAsync:!1,asyncLoading:!1,logData:{xpathNode:"sc_fd"},switchLogData:{xpathNode:"sc_fds"},isFolded:!0,unfoldCount:0,currentHeight:void 0,showFoldSwitch:!0,showMore:!1}},e}(n.Component);be.template='\n    <div data-module="{{logData.xpathNode}}" class="sc-fold">\n        <div\n            s-ref="content"\n            class="'+f.scFoldContent+'"\n            style="{{currentHeight ? \'height:\' + currentHeight + \'px;\' : \'\'}}">\n            <slot></slot>\n        </div>\n        <sc-more\n            s-if="showMore"\n            s-bind="{{moreProps}}"\n            class="'+f.scFoldMore+'"\n        >\n        </sc-more>\n        <sc-fold-switch\n            s-if="showFoldSwitch"\n            mask="{{mask}}"\n            unfoldText="{{unfoldText}}"\n            unfoldIcon="{{unfoldIcon}}"\n            foldText="{{foldText}}"\n            foldIcon="{{foldIcon}}"\n            isFolded="{{isFolded}}"\n            logData="{{switchLogData}}"\n            on-toggle="onToggle($event)"\n        />\n    </div>\n    ',be.components={"sc-more":fe,"sc-fold-switch":me};function ye(t,e){return ye=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ye(t,e)}var we=function(t){function e(){return t.apply(this,Array.from(arguments))}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ye(t,e)}(e,t);var n=e.prototype;return n.initData=function(){return{dataModule:"sc_lk",target:"_blank",url:""}},n.click=function(t){this.fire("click",t)},e}(n.Component);function xe(t,e){return xe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},xe(t,e)}we.trimWhitespace="all",we.template="\n        <component\n            s-is=\"{{jumpUrl ? 'a' : 'div'}}\"\n            class=\""+({}.link||"")+'"\n            href="{{jumpUrl}}"\n            target="{{target}}"\n            data-module="{{dataModule}}"\n            on-click="click"\n        >\n            <slot></slot>\n        </component>\n    ',we.computed={jumpUrl:function(){return void 0===(t=this.data.get("url"))&&(t=""),"string"==typeof t?t:t.tcUrl||"";var t}};var Ce=function(t){function e(){return t.apply(this,Array.from(arguments))}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xe(t,e)}(e,t);var n=e.prototype;return n.initData=function(){return{toolTipShow:!1,toolTipOptions:{triangleTop:0,triangleLeft:0,tipsAlignLeft:!0,tipsAlignTop:!1,contentLeft:0,text:"",textSuffix:"",abstract:"",source:"",sourceIcon:"",url:"",urlParams:null},referenceList:[],referenceIndex:0,type:"",keepTipsTimer:null}},n.getPlacement=function(t){var e,n,i;return((null===(e=null===window||void 0===window?void 0:window.visualViewport)||void 0===e?void 0:e.height)||(null===(i=null===(n=null===window||void 0===window?void 0:window.document)||void 0===n?void 0:n.documentElement)||void 0===i?void 0:i.clientHeight))<t.top+t.height+170?"top":"bottom"},n.getStringLength=function(t){if(!t||!t.length)return 0;for(var e=0,n=t.length,i=0;i<n;++i)t.charCodeAt(i)>500&&++e,++e;return Math.ceil(e/2)},n.handleReference=function(t,e,n){var i,a,o=t.event,r=t.type,s=t.referenceList||this.data.get("referenceList");if(e)if(null===(i=null==o?void 0:o.target)||void 0===i?void 0:i.hasAttribute("data-supnum")){var l=o.target,c=+o.target.getAttribute("data-supnum")-1,d=s&&s[c];if(this.data.set("referenceIndex",c),d){var u=e.getBoundingClientRect(),h=l.getBoundingClientRect(),p=d.text||"",f=this.getStringLength(p),g=this.getStringLength(d.abstract),m=this.getStringLength(d.source),v=14*Math.max(f,g,m)+24;(null==p?void 0:p.length)>45&&(p=p.slice(0,42)+"..."),(null===(a=null==d?void 0:d.abstract)||void 0===a?void 0:a.length)>74&&(d.abstract=d.abstract.slice(0,71)+"..."),v>368?v=368:v<89&&(v=89);var b=v/2,y=h.left+h.width/2-u.left,w=!0,x="markdown"===r?0:14,C=x;y>u.width-b-x?w=!1:y>b+x&&(C=y-b);var S="top"===this.getPlacement(h),k=Math.ceil((S?-8:h.height)+h.top-u.top);this.data.set("type",r),n&&(null==e?void 0:e.style)&&(e.style.position="relative"),this.showTip(Object.assign(Object.assign({},d),{text:p.slice(0,-1),textSuffix:p.slice(-1),triangleTop:k,triangleLeft:Math.ceil(y-6),contentTop:k,tipsAlignLeft:w,tipsAlignTop:S,contentLeft:Math.ceil(C)}))}}else this.hideTip()},n.showTip=function(t){t&&(this.keepTipsShow(),this.data.set("toolTipOptions",t),this.data.set("toolTipShow",!0))},n.keepTipsShow=function(){clearTimeout(this.data.get("keepTipsTimer"))},n.sendClickLog=function(t){this.fire("action-log-event",t)},n.clickLink=function(){this.sendClickLog&&this.sendClickLog({component:"markdown",componentType:"referenceTooltip",actionType:"l",ext:{panel_type:1,refer_type:"text",panel_order:this.data.get("referenceIndex")}}),this.hideTip()},n.hideTip=function(){var t=this;this.data.get("toolTipShow")&&(clearTimeout(this.data.get("keepTipsTimer")),this.data.set("keepTipsTimer",setTimeout((function(){t.data.set("toolTipShow",!1)}),100)))},e}(n.Component);function Se(t,e){return Se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Se(t,e)}Ce.trimWhitespace="all",Ce.template='\n        <div\n            s-show="toolTipShow"\n            disable-copy\n            class="\n                '+v.aiMarkdownTooltips+"\n                {{toolTipOptions.tipsAlignTop ? '"+v.aiMarkdownTooltipsTop+'\' : \'\'}}\n            "\n            on-mouseenter="keepTipsShow"\n            on-mouseleave="hideTip"\n        >\n            <i\n                style="{{tooltipTriangleStyle}}"\n                class="'+v.aiMarkdownTriangleIcon+'"\n            ></i>\n            <div\n                style="{{tooltipContentStyle}}"\n                class="cos-text-body-lg '+v.aiMarkdownTooltipsContent+'"\n            >\n                <div class="'+v.aiMarkdownTooltipsContentFlex+'">\n                    <div\n                        class="cos-color-text-slim '+v.aiMarkdownTooltipsContentNoSpacing+'"\n                    >内容摘自：</div>\n                </div>\n                <div class="cos-space-mt-xs '+v.aiMarkdownTooltipsContentFlex+'">\n                    <sc-link\n                        url="{{toolTipOptions.urlParams || toolTipOptions.url}}"\n                        data-module="markdown-reference-tip"\n                        class="cos-color-text cos-font-medium\n                            '+v.aiMarkdownTooltipsContentTitle+"\n                            "+v.aiMarkdownTooltipsContentNoSpacing+'"\n                        on-click="clickLink"\n                    >\n                        {{toolTipOptions.text}}\n                        <span\n                            class="'+v.aiMarkdownTooltipsContentNoWrap+'"\n                        >{{toolTipOptions.textSuffix}}<sc-icon name="right" /></span>\n                    </sc-link>\n                </div>\n                <div\n                    s-if="toolTipOptions.abstract"\n                    class="cos-space-mt-md '+v.aiMarkdownTooltipsContentFlex+'"\n                >\n                    <div\n                        class="cos-color-text '+v.aiMarkdownTooltipsContentNoSpacing+'"\n                    >{{toolTipOptions.abstract}}</div>\n                </div>\n                <div\n                    s-if="toolTipOptions.source"\n                    class="cos-space-mt-sm '+v.aiMarkdownTooltipsContentFlex+'"\n                >\n                    <div\n                        class="cos-color-text-slim '+v.aiMarkdownTooltipsContentNoSpacing+'"\n                    >{{toolTipOptions.source}}</div>\n                </div>\n            </div>\n        </div>\n    ',Ce.components={"sc-icon":k,"sc-link":we},Ce.computed={tooltipTriangleStyle:function(){var t=this.data.get("toolTipOptions"),e=t.triangleLeft;return"top: "+t.triangleTop+"px; left: "+e+"px;"},tooltipContentStyle:function(){var t=this.data.get("toolTipOptions"),e=t.tipsAlignLeft,n=t.contentTop,i=t.contentLeft,a=t.triangleLeft,o=21,r=12;return"markdown"===this.data.get("type")&&(o=0,a<5&&(r=4)),e?"top: "+n+"px; left: "+i+"px; border-top-left-radius: "+r+"px;":"top: "+n+"px; right: "+o+"px;"}};var ke=function(t){function e(){return t.apply(this,Array.from(arguments))}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Se(t,e)}(e,t);var n=e.prototype;return n.initData=function(){return{referenceElement:null,referenceList:null,type:"",toolTipIns:null}},n.handleReference=function(t){var e=this.data.get("referenceList");if(e){var n=this.data.get("toolTipIns");n||(n=new Ce({data:{type:this.data.get("type"),referenceList:e}}),this.data.set("toolTipIns",n),n.attach(this.data.get("referenceElement")||document.body),n.sendClickLog=this.sendClickLog.bind(this)),n.handleReference({event:t},this.data.get("referenceElement")||document.body,!0)}},n.sendClickLog=function(t){t&&this.fire("action-log-event",t)},n.detached=function(){var t;null===(t=this.data.get("toolTipIns"))||void 0===t||t.dispose()},e}(n.Component);ke.trimWhitespace="all",ke.template='\n        <div\n            on-mouseover="handleReference($event)"\n            on-mouseleave="handleReference($event)"\n        >\n            <slot />\n        </div>\n    ';var _e=function(){function t(){this.el={},this.repeat=!1,this.count=1,this.total=1,this.playStatus=!1}var e=t.prototype;return e.play=function(){this.playStatus=!0},e.pause=function(){this.playStatus=!1},e.ended=function(){var t=this.repeat,e=this.total;if(t){var n=++this.count;0===e||n<=e?this.el.play():(this.count=1,this.playStatus=!1)}else this.playStatus=!1},e.toggle=function(){var t=this.el,e=this.playStatus;return e?t.pause():t.play(),this.playStatus=!e,this.playStatus},e.init=function(t,e){if(t!==this.el){var n="number"!=typeof(null==e?void 0:e.total)?1:null==e?void 0:e.total;this.el=t,this.count=1,this.playStatus=!this.el.paused,this.total=n,this.repeat=1!==n}},t.getAudio=function(){return this.audio||(this.audio=new t),this.audio},t}();function Te(t,e){return Te=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Te(t,e)}var Oe=function(t){function e(){var e;return(e=t.call.apply(t,[].concat([this],Array.from(arguments)))||this).audio={},e.manualTrigger=!1,e}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Te(t,e)}(e,t);var n=e.prototype;return n.play=function(t){this.audio.play(),this.fire("playState",{event:t,state:"PLAY",manualTrigger:this.manualTrigger}),this.manualTrigger=!1,this.data.set("playStatus",this.audio.playStatus)},n.pause=function(t){this.audio.pause(),this.fire("playState",{event:t,state:"PAUSED",manualTrigger:this.manualTrigger}),this.manualTrigger=!1,this.data.set("playStatus",this.audio.playStatus)},n.ended=function(t){this.audio.ended();var e=this.data.get("repeat"),n=this.data.get("playTimes"),i=this.audio.count;e?i>n&&this.fire("playState",{event:t,state:"ENDED"}):this.fire("playState",{event:t,state:"ENDED"}),this.data.set("playStatus",this.audio.playStatus)},n.timeUpdate=function(t){this.fire("timeUpdate",t)},n.canPlay=function(t){this.fire("canPlay",t)},n.canPlayThrough=function(t){this.fire("canPlayThrough",t)},n.durationChange=function(t){this.fire("durationChange",t)},n.waiting=function(t){this.fire("waiting",t)},n.handlePlayPause=function(){if(this.data.get("src")){var t=_e.getAudio(),e=this.data.get("audioDom"),n=this.data.get("playTimes");t.init(e,{total:n}),this.audio=t,this.audio.toggle(),this.data.set("playStatus",this.audio.playStatus),this.manualTrigger=!0}},n.handleMouseOver=function(){this.data.set("hovered",!0)},n.handleMouseOut=function(){this.data.set("hovered",!1)},n.getAudioDom=function(){return this.ref("audio")},n.attached=function(){var t=this.getAudioDom();this.data.set("audioDom",t)},n.initData=function(){return Object.assign(Object.assign({},t.prototype.initData.call(this)),{defaultStyles:m,src:"",times:1,playStatus:!1,hovered:!1,preload:"none",color:"#000",hoverColor:""})},e}(J);function Le(t,e){return Le=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Le(t,e)}Oe.template='\n        <span\n            class="{{newStyles.audioWrapper}}"\n            on-mouseover="handleMouseOver"\n            on-mouseout="handleMouseOut"\n            on-click="handlePlayPause">\n            <slot name="prefix"></slot>\n            <span\n                s-if="repeat"\n                class="{{newStyles.audio}}"\n                style="{{\n                    \'color:\' + iconColor\n                }}">\n                <sc-icon s-if="playStatus" class="{{newStyles.repeatPlayIcon}}" style-mode="overwrite" name="stop"></sc-icon>\n                <sc-icon s-else class="{{newStyles.repeatPauseIcon}}" style-mode="overwrite" name="play"></sc-icon>\n            </span>\n            <span\n                s-else\n                class="{{newStyles.audio}} {{playStatus ? \'sc-audio-play\' : \'sc-audio-pause\'}}">\n                <slot name="horn">\n                    <svg\n                        class="sc-audio-svg {{playStatus ? newStyles.playIcon : newStyles.pauseIcon}}"\n                        fill="{{iconColor}}"\n                        width="16"\n                        height="16"\n                        viewBox="0 0 54 54"\n                        version="1.1"\n                        xmlns="http://www.w3.org/2000/svg"\n                        xmlns:xlink="http://www.w3.org/1999/xlink"\n                    >\n                        <g stroke="none" stroke-width="1" fill-rule="evenodd">\n                            <path class="{{newStyles.laba}}" d="M24.1538 5.86289C24.8505 5.23954 25.738 4.95724 26.6005 5.00519C27.463 5.05313 28.3137 5.43204 28.9371 6.12878C29.4928 6.74989 29.8 7.55405 29.8 8.38746V46.28C29.8 47.2149 29.4186 48.0645 28.8078 48.6754C28.197 49.2862 27.3474 49.6675 26.4125 49.6675C25.5843 49.6675 24.7848 49.3641 24.1651 48.8147L13.0526 38.9618C12.5285 38.4971 11.8523 38.2405 11.1518 38.2405H5.3875C4.45261 38.2405 3.603 37.8591 2.99218 37.2483C2.38135 36.6375 2 35.7879 2 34.853V19.7719C2 18.837 2.38135 17.9874 2.99218 17.3766C3.603 16.7658 4.45262 16.3844 5.3875 16.3844H11.2991C12.004 16.3844 12.6841 16.1246 13.2095 15.6546L24.1538 5.86289ZM25.8 9.75731L15.8766 18.6356C14.6178 19.7618 12.9881 20.3844 11.2991 20.3844H6V34.2405H11.1518C12.8302 34.2405 14.4505 34.8553 15.7064 35.9688L25.8 44.9184V9.75731Z"/>\n                            <path class="{{newStyles.yinbo1}}" d="M38.1519 17.8402L36.992 16.2108L33.7333 18.5304L34.8931 20.1598C36.2942 22.1281 37.1487 24.6457 37.1487 27.4131C37.1487 30.1933 36.2862 32.7214 34.8736 34.6937L33.709 36.3197L36.9609 38.6488L38.1255 37.0229C40.0285 34.366 41.1487 31.0221 41.1487 27.4131C41.1487 23.8207 40.0388 20.4911 38.1519 17.8402Z"/>\n                            <path class="{{newStyles.yinbo2}}" d="M43.617 8.17398L44.9714 9.64556C49.0913 14.1219 51.6179 20.3637 51.6179 27.2257C51.6179 34.0838 49.0943 40.3223 44.9787 44.798L43.6249 46.2702L40.6805 43.5627L42.0343 42.0905C45.4542 38.3714 47.6179 33.1061 47.6179 27.2257C47.6179 21.3419 45.4516 16.0739 42.0282 12.3544L40.6738 10.8828L43.617 8.17398Z"/>\n                        </g>\n                    </svg>\n                </slot>\n            </span>\n            <slot name="suffix"></slot>\n            <audio\n                s-ref="audio"\n                src="{{src}}"\n                preload="{{preload}}"\n                on-play="play($event)"\n                on-pause="pause($event)"\n                on-ended="ended($event)"\n                on-timeupdate="timeUpdate($event)"\n                on-canplay="canPlay($event)"\n                on-canplaythrough="canPlayThrough($event)"\n                on-durationchange="durationChange($event)"\n                on-waiting="waiting($event)"></audio>\n        </span>',Oe.computed=Object.assign(Object.assign({},J.computed),{repeat:function(){return 1!==this.data.get("playTimes")},playTimes:function(){return+this.data.get("times")},iconColor:function(){var t=this.data.get("color"),e=this.data.get("hoverColor");return this.data.get("hovered")&&e?e:t}}),Oe.components={"sc-icon":k};var Ie=function(e){function n(){return e.apply(this,Array.from(arguments))}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Le(t,e)}(n,e);var i=n.prototype;return i.initData=function(){return{id:"",value:"",rawValue:"",type:"sfm",typingSwitch:!1,typingSpeed:30,theme:null,table:null,ssr:!1,expand:!1,isFolded:!0,isLoading:!1,foldHeight:0,referenceElement:null,referenceList:null,markdownSdk:null,askBackId:"",removeClamp:!1,removeLink:!1,suffix:""}},i.attached=function(){var e=this;if(this.data.get("expand")&&(this.nextTick((function(){e.updateFoldHeight()})),this.sendShowExpandLog()),this.data.get("ssr"))this.attachAudioComponent();else{var n=this.data.get("theme")||null;new Promise((function(e,n){t(["./client.esm.pc.CbkX8WQ8"],e,n)})).then((function(t){var i=new(0,t.default)({type:e.data.get("type"),typingSwitch:e.data.get("typingSwitch"),typingSpeed:e.data.get("typingSpeed"),el:e.ref("markdownRef"),theme:n,table:e.data.get("table"),removeClamp:!!e.data.get("removeClamp"),removeLink:!!e.data.get("removeLink"),suffix:e.data.get("suffix")||""});i.renderMarkdown(e.data.get("rawValue")),i.on("typing-finished",(function(){e.fire("render-finished")})),e.data.set("markdownSdk",i),e.watch("rawValue",(function(t){i.renderMarkdown(t)})),e.nextTick((function(){e.attachAudioComponent()}))}))}this.bindCodeCopyEvent(),this.showLog(this.data.get("value")||this.data.get("rawValue"))},i.attachAudioComponent=function(){var t=this,e=this.ref("markdownRef").querySelectorAll("bd-tts"),n=[];e.forEach((function(e,i){e.firstChild&&e.removeChild(e.firstChild);var a=e.getAttribute("data-text"),o=e.getAttribute("data-lan"),r=e.getAttribute("data-src")||"";if(a||r){var s=a&&o?"https://sensearch.baidu.com/gettts?lan="+o+"&text="+encodeURIComponent(a)+"&source=dqa&spd=3":"";n[i]=new Oe({data:{src:r||s}}),n[i].attach(e),n[i].on("playState",(function(e){var a=e.state,o=e.manualTrigger;"PLAY"===a&&t.fire("audio-play",{markdownId:t.data.get("id"),playIndex:i,audioList:n}),o&&t.fire("action-log-event",{component:"markdown",componentType:"broadcast",actionType:"b",ext:{action:"PLAY"===a?"wd-tts-play":"wd-tts-pause"}})}))}}))},i.handleMarkdownClick=function(t){var e=this,n=t.target,i=null==n?void 0:n.closest("bd-copy");if(i){t.stopPropagation();var a=i.getAttribute("data-text");a&&this.copyTextToClipboard(a).then((function(){e.fire("copy-success"),e.dispatch("ai-markdown:copy",{message:"复制成功",text:a})})).catch((function(){e.fire("copy-fail"),e.dispatch("ai-markdown:copy",{message:"复制失败",text:a})}))}},i.cancelTyping=function(){this.data.get("markdownSdk").cancelTyping()},i.updateSuffix=function(t){this.data.get("markdownSdk").updateSuffix(t)},i.setTextDisable=function(){this.data.get("markdownSdk").setTextDisable()},i.clickHandler=function(){},i.sendShowExpandLog=function(){var t=this;this.nextTick((function(){t.fire("show-log-event",{component:"markdown",componentType:"markdown_fold"})}))},i.updateFoldHeight=function(){this.data.set("foldHeight",this.ref("markdownRef").offsetHeight)},i.toggleClamp=function(t){var e=this.ref("markdownRef").querySelectorAll("[data-line-clamp]");e&&e.forEach((function(e){"unfolded"===t?e.classList.remove(e.dataset.lineClamp):e.classList.add(e.dataset.lineClamp)}))},i.onToggle=function(t){var e,n,i=this;"folded"===t.status?this.dispatch("ai-markdown:scroll-back-to-top",""):(this.data.set("isLoading",!0),this.nextTick((function(){i.data.set("isLoading",!1)}))),this.toggleClamp(t.status),this.data.set("isFolded",!this.data.get("isFolded")),this.fire("action-log-event",{component:"markdown",actionType:"b",componentType:"markdown_fold",ext:{status:t.status,target:null===(n=null===(e=t.event)||void 0===e?void 0:e.event)||void 0===n?void 0:n.target}})},i.bindCodeCopyEvent=function(){var t,e=this;null===(t=this.ref("markdownRef"))||void 0===t||t.addEventListener("click",(function(t){var n;(null===(n=t.target)||void 0===n?void 0:n.closest(".code-copy"))&&e.copyText(t)}))},i.copyText=function(t){var e,n=this,i=null===(e=t.target)||void 0===e?void 0:e.closest("[md-code-container]"),a=null==i?void 0:i.querySelector("[md-code-content]");if(a){var o="*[disable-copy]",r="";if(a.querySelector(o)){var s=a.cloneNode(!0),l=s.querySelectorAll(o);Array.from(l).forEach((function(t){t.remove()})),r=s.innerText.trim()}else r=a.innerText;this.copyTextToClipboard(r).then((function(){n.fire("copy-success"),n.dispatch("ai-markdown:copy",{message:"复制成功",text:r})})).catch((function(){n.fire("copy-fail"),n.dispatch("ai-markdown:copy",{message:"复制失败",text:r})}))}},i.copyTextToClipboard=function(t){var e=this;return new Promise((function(n,i){var a=document.createElement("textarea");a.style.background="transparent",a.setAttribute("readonly","readonly"),a.value=t,document.body.appendChild(a),a.select(),a.setSelectionRange(0,t.length);try{document.execCommand("copy",!1)?n("复制成功"):i(new Error("复制失败"))}catch(t){i(t)}finally{e.fire("action-log-event",{component:"markdown",componentType:"copy",actionType:"b"}),document.body.removeChild(a)}}))},i.showLog=function(t){var e=this,n="abstract",i=new RegExp("^ *([^\\n ].*\\|.*\\n(?: *[^\\s].*\\n)*?)");(t.includes("</table>")||t.match(i))&&(n="table"),this.nextTick((function(){e.fire("show-log-event",{component:"markdown",componentType:n})}))},i.handleActionLogEvent=function(t){this.fire("action-log-event",t)},n}(n.Component);function Ee(t,e){return Ee=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ee(t,e)}Ie.trimWhitespace="all",Ie.template='\n        <dqa-reference-tooltip-container\n            s-ref="containerRef"\n            type="markdown"\n            reference-list="{{referenceList}}"\n            reference-element="{{referenceElement}}"\n            ask-back-id="{{askBackId}}"\n            on-action-log-event="handleActionLogEvent"\n        >\n            <component\n                s-is="expand ? \'sc-fold\' : \'div\'"\n                fold-height="{{ foldHeight }}"\n                unfold-text="展开更多"\n                is-async\n                mask\n                async-loading="{{ isLoading }}"\n                on-toggle="onToggle"\n            >\n                <div\n                    s-ref="markdownRef"\n                    data-module="{{table && table.vsTable ? \'ai_markdown_1v1table\' : \'ai_markdown\'}}"\n                    class="{{table && table.vsTable ? \'ai-markdown-vs-table\' : \'\'}} ai-markdown-wrap"\n                    on-click="handleMarkdownClick"\n                >\n                    \x3c!--bca-disable-next-line--\x3e\n                    {{value | raw}}\n                </div>\n            </component>\n        </dqa-reference-tooltip-container>\n    ',Ie.components={"sc-fold":be,"dqa-reference-tooltip-container":ke};var Me=function(t){function e(){return t.apply(this,Array.from(arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ee(t,e)}(e,t),e.prototype.initData=function(){var t,e;return{vertical:!1,hasSlot:!!(null===(e=null===(t=this.sourceSlots)||void 0===t?void 0:t.noname)||void 0===e?void 0:e.length)||0}},e}(n.Component);function Ae(t,e){return Ae=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ae(t,e)}Me.trimWhitespace="all",Me.template="\n        <div class=\"\n            {{vertical ? '"+d+"' : '"+c+'\'}}"\n        >\n            <div s-if="hasSlot">\n                <slot></slot>\n            </div>\n        </div>\n    ',Me.computed={};var De,je,Be=function(t){function e(){var e;return(e=t.call.apply(t,[].concat([this],Array.from(arguments)))||this).hotspotStyle={backgroundColor:"transparent"},e}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ae(t,e)}(e,t);var n=e.prototype;return n.initData=function(){return{showMarkdown:!0,isPrimary:!1,isShortText:!1,functionButtons:{},urlParams:null,editorText:0,maxLength:100,editId:"",loadingSrc:"",saving:!1,touchActive:!1,isAnimation:!1,isCache:!1,logExtData:{}}},n.handleButtonClick=function(t,e){var n=this.data.get("showMarkdown"),i="image"===e&&n?"edit":e;this.fire("click",{event:t,actionType:i})},n.hanldeTouchstart=function(){this.data.set("touchActive",!0)},n.hanldeTouchend=function(){this.data.set("touchActive",!1)},e}(n.Component);function Pe(t,e){return Pe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Pe(t,e)}Be.template='\n        \x3c!-- 字数展示 && 取消与生图--\x3e\n        <div class="editor-bottom">\n            <div s-if="{{isShortText && isCache}}" class="cos-color-text-minor editor-buttom-cache-label">\n                刚刚浏览\n            </div>\n            \x3c!-- 字数展示 --\x3e\n            <div\n                s-elif="{{!isPrimary}}"\n                class="\n                    {{editorText.length >= maxLength? \'cos-color-text-primary\' : \'cos-color-text-minor\'}}\n                    {{showMarkdown ? \'hide-text-minor\' : \'\'}}\n                "\n            >\n                {{ editorText.length }}<span>/{{ maxLength }}</span>\n            </div>\n            \x3c!-- 强样式复制&&编辑 --\x3e\n            <div\n                s-if="{{isPrimary}}" \n                class="\n                    editor-bottom-buttons\n                    editor-bottom-buttons-left\n                    {{isAnimation && buttonsShow.showEdit ? \'old-editor-btn\' : \'\'}}\n                    {{isAnimation && !buttonsShow.showEdit ? \'new-editor-btn\' : \'\'}}\n                    {{!buttonsShow.showEdit ? \'editor-bottom-buttons-left-padding\' : \'\'}}"\n            >\n                \x3c!--bca-disable--\x3e\n                <div s-if="{{buttonsShow.showEdit}}" class="cos-space-mr-lg" data-module="{{editId}}">\n                    <component\n                        s-is="urlParams ? \'sc-link\' : \'sc-button\'"\n                        url="{{urlParams}}"\n                        hotspot-style="{{hotspotStyle}}"\n                        enable-hotspot\n                        class="button-item"\n                    >\n                        <i\n                            data-module="edit"\n                            class="cu-icon font-icon"\n                            on-click="handleButtonClick($event, \'edit\')"\n                        >\n                            {{functionButtons.edit.icon | raw}}\n                        </i>\n                    </component>\n                </div>\n                <sc-button s-if="{{buttonsShow.showCopy}}" class="button-item">\n                    <i\n                        slot="prefix"\n                        class="cu-icon font-icon"\n                        data-module="copy"\n                        on-click="handleButtonClick($event, \'copy\')"\n                    >\n                        {{functionButtons.copy.icon | raw}}\n                    </i>\n                </sc-button>\n                \x3c!--bca-enable--\x3e\n            </div>\n            <div class="editor-bottom-buttons">\n                \x3c!-- 强样式写更多 常规样式取消 --\x3e\n                <div s-if="{{buttonsShow.showMore}}" data-module="more">\n                    <sc-button\n                        s-if="!urlParams"\n                        url="{{urlParams}}"\n                        enable-hotspot\n                        class="\n                            button-item\n                            button-item-active\n                            cos-space-ml-xs\n                            cos-font-medium\n                        "\n                        on-click="native:handleButtonClick($event, \'more\')"\n                    >\n                        \x3c!--bca-disable--\x3e\n                        <i\n                            s-if="functionButtons.more.icon"\n                            class="button-item-img cu-icon font-icon">\n                            {{functionButtons.more.icon | raw}}\n                        </i>\n                        \x3c!--bca-enable--\x3e\n                        {{functionButtons.more.text}}\n                    </sc-button>\n                    <sc-link\n                        s-else\n                        url="{{urlParams}}"\n                        enable-hotspot\n                        class="\n                            button-item\n                            button-item-active\n                            cos-space-ml-xs\n                            cos-font-medium\n                        "\n                        on-click="handleButtonClick($event, \'more\')"\n                    >\n                        \x3c!--bca-disable--\x3e\n                        <i\n                            s-if="functionButtons.more.icon"\n                            class="button-item-img cu-icon font-icon">\n                            {{functionButtons.more.icon | raw}}\n                        </i>\n                        \x3c!--bca-enable--\x3e\n                        {{functionButtons.more.text}}\n                    </sc-link>\n                </div>\n                \x3c!-- 强样式润色 常规样式取消 --\x3e\n                <div s-if="{{buttonsShow.showPolish}}" data-module="polish">\n                    <sc-button\n                        s-if="!urlParams"\n                        url="{{urlParams}}"\n                        enable-hotspot\n                        class="\n                            button-item\n                            button-item-active\n                            cos-space-ml-xs\n                            cos-font-medium\n                            {{isAnimation ? \'old-editor-btn\' : \'\'}}\n                        "\n                        on-click="native:handleButtonClick($event, \'polish\')"\n                    >\n                        \x3c!--bca-disable--\x3e\n                        <i\n                            s-if="functionButtons.polish.icon"\n                            class="button-item-img cu-icon font-icon">\n                            {{functionButtons.polish.icon | raw}}\n                        </i>\n                        \x3c!--bca-enable--\x3e\n                        {{functionButtons.polish.text}}\n                    </sc-button>\n                    <sc-link\n                        s-else\n                        url="{{urlParams}}"\n                        enable-hotspot\n                        class="\n                            button-item\n                            button-item-active\n                            cos-space-ml-xs\n                            cos-font-medium\n                            {{isAnimation ? \'old-editor-btn\' : \'\'}}\n                        "\n                        on-click="handleButtonClick($event, \'polish\')"\n                    >\n                        \x3c!--bca-disable--\x3e\n                        <i\n                            s-if="functionButtons.polish.icon"\n                            class="button-item-img cu-icon font-icon">\n                            {{functionButtons.polish.icon | raw}}\n                        </i>\n                        \x3c!--bca-enable--\x3e\n                        {{functionButtons.polish.text}}\n                    </sc-link>\n                </div>\n                <div s-else-if="{{buttonsShow.showCancle}}" data-module="cancel">\n                    <sc-button\n                        class="button-item cos-color-bg-dent new-editor-btn"\n                        on-click="native:handleButtonClick($event, \'cancle\')">取消</sc-button>\n                </div>\n                <div\n                    s-else-if="{{buttonsShow.showCopy && !isPrimary}}"\n                    data-module="copy"\n                    data-show-area\n                    data-show-ext="{{copyRealShowExt}}"\n                >\n                    <sc-button\n                        class="button-item cos-color-bg-dent"\n                        on-click="native:handleButtonClick($event, \'copy\')">{{functionButtons.copy.text}}</sc-button>\n                </div>\n                \x3c!-- 强样式做贺卡 常规样式做贺卡&马上生成 --\x3e\n                <component\n                    s-if="{{buttonsShow.showImage}}"\n                    s-is="!urlParams ? \'div\' : \'sc-link\'"\n                    url="{{urlParams}}"\n                    data-module="{{!isPrimary ? editId : \'\'}}"\n                    enable-hotspot\n                    hotspot-style="{{hotspotStyle}}"\n                    class="button-item button-item-active button-item-image cos-space-ml-xs cos-font-medium{{saving\n                        ? \' button-item-loading\' : \'\'}}{{isAnimation && !showMarkdown\n                        ? \' new-editor-btn\' : \'\'}}{{isAnimation && showMarkdown\n                        ? \' old-editor-btn\' : \'\'}}{{touchActive\n                        ? \' button-item-touch\' : \'\'}}"\n                    style="{{imageButtonStyle}}"\n                    on-click="handleButtonClick($event, \'image\')"\n                    on-touchstart="hanldeTouchstart"\n                    on-touchend="hanldeTouchend"\n                >\n                    <span\n                        class="button-item-content"\n                        data-module="{{!showMarkdown ? \'heka_success\' : \'heka\'}}"\n                    >\n                        <img\n                            s-if="saving && functionButtons.image.loadingSrc"\n                            src="{{functionButtons.image.loadingSrc}}"\n                            class="loading"\n                        />\n                        <template s-else>\n                            \x3c!--bca-disable--\x3e\n                            <i\n                                s-if="functionButtons.image.icon"\n                                class="button-item-img cu-icon font-icon">\n                                {{functionButtons.image.icon | raw}}\n                            </i>\n                            \x3c!--bca-enable--\x3e\n                            {{showMarkdown ? functionButtons.image.text : \'生成贺卡\'}}\n                        </template>\n                    </span>\n                </component>\n            </div>\n        </div>\n    ',Be.components={"sc-button":oe,"sc-icon":k},Be.computed={buttonsShow:function(){var t=this.data.get("functionButtons")||{},e=t.copy,n=t.edit,i=t.more,a=t.image,o=t.polish,r=this.data.get("isPrimary"),s=this.data.get("showMarkdown");return{showEdit:!!n&&r&&s,showCopy:!!e&&(r||s),showMore:!!i&&r&&s,showImage:!!a,showCancle:!s,showPolish:!!o&&r&&s}},imageButtonStyle:function(){var t,e=null===(t=this.data.get("functionButtons"))||void 0===t?void 0:t.image;return(null==e?void 0:e.bgSrc)?{"background-image":"url("+e.bgSrc+")","background-size":"100% 100%"}:{}},copyRealShowExt:function(){return JSON.stringify(Object.assign({type:"show",value:"copy",component_content:{component_name:"markdownEditor"}},this.data.get("logExtData")))}};var Fe,Ve,Re=function(t){function e(){return t.apply(this,Array.from(arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pe(t,e)}(e,t),e}(je=Be);function Ne(t,e){return Ne=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ne(t,e)}De=Re,Re.template=Be.template,Re.components=Object.assign(Object.assign({},Reflect.get(je,"components",De)),{"sc-link":we}),Re.computed=Object.assign({},Reflect.get(je,"computed",De));var ze=function(t){function e(){return t.apply(this,Array.from(arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ne(t,e)}(e,t),e.prototype.showToast=function(t){},e}(Ve=de);Fe=ze,ze.template=de.template,ze.components=Object.assign(Object.assign({},Reflect.get(Ve,"components",Fe)),{"sc-markdown":Ie,"sc-divider":Me,"sc-link":we,"ai-md-editor-btn":Re}),ze.computed=Object.assign({},Reflect.get(Ve,"computed",Fe)),e.AIAskBack=F,e.AIEchart=ee,e.AIImageWithThumbnail=ie,e.AIMarkdownEditor=ze,e.commonjsGlobal=a,e.getDefaultExportFromCjs=function(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}})),require(["js/search-components.pc.DXXW15mB"]);
