define("@baidu/xbox-player/dist/player.amd",["require","exports"],function(e,t){"use strict";function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t){return e(t={exports:{}},t.exports),t.exports}var a=i(n(function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0})),o=i(n(function(e){function n(e,t){for(var i=0;i<t.length;i++){
var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e},e.exports.default=e.exports,e.exports.__esModule=!0})),r=n(function(i){function n(e,t){return i.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i.exports.default=i.exports,i.exports.__esModule=!0,n(e,t)}i.exports=n,i.exports.default=i.exports,i.exports.__esModule=!0});i(r);var s=i(n(
function(e){e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0})),l=n(function(t){function i(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=i=function(e){return typeof e}:t.exports=i=function(e){
return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.default=t.exports,t.exports.__esModule=!0,i(e)}t.exports=i,t.exports.default=t.exports,t.exports.__esModule=!0}),u=i(l),p=n(function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0});i(p);var c=i(n(function(e){var i=l.default;e.exports=function(e,t){
return!t||"object"!==i(t)&&"function"!=typeof t?p(e):t},e.exports.default=e.exports,e.exports.__esModule=!0})),h=i(n(function(t){function i(e){return t.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t.exports.default=t.exports,t.exports.__esModule=!0,i(e)}t.exports=i,t.exports.default=t.exports,t.exports.__esModule=!0})),d=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"_";a(this,t),
this._events={},this._eventsCount=0,this.prefix=e.slice(0,1)}return o(t,[{key:"on",value:function(e,t,i,n){var r=3<arguments.length&&void 0!==n&&n;if("function"!=typeof t)throw new TypeError("The listener must be a function");var a={fn:t,context:i||this,once:r},o=this.prefix?this.prefix+e:e;return this._events[o]||(this._events[o]=[],this._eventsCount++),this._events[o].push(a),this}},{key:"once",value:function(e,t,i){return this.on(e,t,i,!0)}},{key:"emit",value:function(e){
var t=this.prefix?this.prefix+e:e;if(!this._events[t])return!1;for(var i=(this._events[t]||[]).slice(),n=arguments.length,r=new Array(1<n?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var o=0,s=i.length;o<s;o++){i[o].once&&this.off(e,i[o].fn,void 0,!0);try{i[o].fn.apply(i[o].context,r)}catch(e){}}return!0}},{key:"clearEvent",value:function(e){0==--this._eventsCount?this._events={}:delete this._events[e]}},{key:"off",value:function(e,t,i,n){var r=this.prefix?this.prefix+e:e;if(
this._events[r]&&this._events[r].length)if(t){for(var a=this._events[r],o=[],s=0,l=a.length;s<l;s++)(a[s].fn!==t||n&&!a[s].once||i&&a[s].context!==i)&&o.push(a[s]);o.length?this._events[r]=o:this.clearEvent(r)}else this.clearEvent(r);return this}},{key:"removeAllListeners",value:function(){return this._events={},this._eventsCount=0,this}}]),t}(),f=i(n(function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i
)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,t.apply(this,arguments)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0})),y=i(n(function(e){e.exports=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e},e.exports.default=e.exports,e.exports.__esModule=!0}));function v(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function g(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?v(Object(i),!0).forEach(function(e){y(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}
function m(){return/bdhonorbrowser/.test(T)}function P(){return/(iPhone|iPod|iPad)/.test(T)}function O(){return/(Android);?[\s\/]+([\d.]+)?/.test(T)||m()}function k(){return(/ (baiduboxapp|biduboxapp)\//i.test(T)||m())&&!/ (lite|info|pro|mission) (baiduboxapp|biduboxapp)/.test(T)}function b(){return O()&&/lite baiduboxapp/.test(T)||P()&&/info baiduboxapp/.test(T)}function x(e,t){t+="";for(var i=(e+="").split("."),n=t.split("."),r=0,a=Math.max(i.length,n.length);r<a;r++){if(
i[r]&&!n[r]&&0<parseInt(i[r],10)||parseInt(i[r],10)>parseInt(n[r],10))return 1;if(n[r]&&!i[r]&&0<parseInt(n[r],10)||parseInt(i[r],10)<parseInt(n[r],10))return-1}return 0}function I(){return/SearchCraft/i.test(T)}function S(){return I()&&0<=x(I()&&(T.match(/ SearchCraft\/([0-9]+_)?([0-9.]+)/i)||[])[2]||0,"5.3.0")}function w(e){var t=document.createElement("iframe"),i=document.body||document.getElementsByTagName("body")[0];t.style.display="none",t.src=e,i.appendChild(t),setTimeout(function(){
i.removeChild(t),t=null},0)}function _(e){var t=window.Bdbox_android_jsbridge;if(!t||!t.dispatch)return window.prompt("BdboxApp:"+JSON.stringify({obj:"Bdbox_android_jsbridge",func:"dispatch",args:[e]}));t.dispatch(e)}function C(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function E(e){return V++,e+(Date.now().toString(16)+V).slice(-8)}function R(n){if("function"!=typeof n)return n;var e="_xfunc_".concat(E("_xfunc_"));return M[e]=function(){for(var e=arguments.length,
t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n.apply(M,t)},e}var T="object"===("undefined"==typeof window?"undefined":u(window))&&window.self===window?navigator.userAgent:"",V=0,M="object"===("undefined"==typeof window?"undefined":u(window))?window:global;function j(a){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"baiduboxapp";return k()||S()||b()?new Promise(function(i,n){var e=o.params||{};0===Object.keys(e
).length&&e.constructor===Object||"%7B%7D"===e||"{}"===e?delete o.params:"object"===C(e)&&(o.params=function(e){if("string"===C(e))return e;var t={};for(var i in e){var n=e[i];"function"===C(n)&&(n=R(n)),t[i]=n}return encodeURIComponent(JSON.stringify(t))}(e));var t=function(e){var t=[];for(var i in e){var n=e[i];"function"===C(n)&&(n=R(n)),t.push(i+"="+n)}return t.join("&")}(g(g({},o),{},{callback:function(e){var t=e;if("string"===C(e))try{t=JSON.parse(e)}catch(e){}0!=+t.status?n(t):i(t.data)}}
)),r="".concat(s,"://").concat(a,"?").concat(t);P()?w(r):O()&&_(r)}):Promise.reject({status:902,message:"主版APP外无法调用端能力"})}var B=function(){var e,t="0";if("object"===("undefined"==typeof window?"undefined":u(window))&&window.baiduboxapp_version)return window.baiduboxapp_version;(k()||b())&&((e=/baiduboxapp\/([\d.]+)/.exec(T))?t=e[1]:(e=/([\d+.]+)_(?:diordna|enohpi)_/.exec(T))&&(t=(e=e[1].split(".")).reverse().join(".")));return t}(),D=function(){function i(e,t){a(this,i),this._player=t,this.id=e}
return o(i,[{key:"getPlayerInstance",value:function(){return this._player}},{key:"getVideoInstance",value:function(){return this._player.video}},{key:"setVideoInstance",value:function(e){this._player.video=e}},{key:"getRoot",value:function(){return this._player._root}},{key:"getMode",value:function(){return this._player._mode}},{key:"setMode",value:function(e){this._player._mode=e}},{key:"getPlayerOption",value:function(e){return e?this._player.options[e]:this._player.options}},{
key:"setPlayerOption",value:function(e,t){e?this._player.options[e]=t:"object"===C(t)&&f(this._player.options,t)}},{key:"getPlayerController",value:function(e){return e?this._player._controller[e]:this._player._controller}},{key:"setPlayerController",value:function(e,t){this._player._controller[e]=t}},{key:"getBoxTools",value:function(){return{isIOS:P,isAndroid:O,isMainBox:k,isBdhonor:m,iosInvoke:w,androidInvoke:_,getGlobalFunc:R,getRandomName:E,invokeP:j,versionCompare:x,
isHighVersionSearchCraft:S,version:B,isJisuBox:b}}},{key:"on",value:function(e,t){this._player.on(e,t)}},{key:"once",value:function(e,t){this._player.once(e,t)}},{key:"emit",value:function(e,t){this._player.emit(e,t)}},{key:"off",value:function(e,t){this._player.off(e,t)}}]),i}(),A=function(){function i(e,t){a(this,i),this.api=e,this.pluginOptions=t}return o(i,[{key:"get",value:function(){if("na"===this.api.getMode())return!!this.api.getPlayerOption("autoplay");var e=this.api.getVideoInstance()
;return e?e.autoplay:""}},{key:"set",value:function(e){if("na"!==this.api.getMode()){var t=this.api.getVideoInstance();t&&(t.autoplay=e),this.api.setPlayerOption("autoplay",e)}else this.api.getPlayerController("playerKernelInit")||this.api.setPlayerOption("autoplay",e)}}]),i}(),F=function(){function i(e,t){a(this,i),this.api=e,this.pluginOptions=t}return o(i,[{key:"get",value:function(){if("na"===this.api.getMode())return this.api.getPlayerOption("muted");var e=this.api.getVideoInstance()
;return e?e.muted:""}},{key:"set",value:function(e){var t=this.api.getBoxTools(),i=t.isIOS,n=t.isAndroid,r=t.invokeP,a=this.api.getPlayerOption("containerId"),o=this.api.getVideoInstance();"na"!==this.api.getMode()?(o&&(o.muted=e),this.api.setPlayerOption("muted",e)):i()?r("video/slrSetMuted",{params:{containerId:a,muted:+e}}):n()&&(o.zeusVideoExt=JSON.stringify({id:a,name:"h5samelayer",action:"setMute",data:{muted:+e}}))}}]),i}(),H=function(){function i(e,t){a(this,i),this.api=e,
this.pluginOptions=t}return o(i,[{key:"run",value:function(){if("na"===this.api.getMode())return this.naRun();this.h5Run()}},{key:"h5Run",value:function(){var e=this.api.getVideoInstance();return e&&e.play()}},{key:"naRun",value:function(){var e=this,t=this.api.getBoxTools(),i=t.isIOS,n=t.isAndroid,r=t.invokeP;if(i()){var a=this.api.getPlayerOption("containerId"),o=this.api.getPlayerInstance().paused;r("video/slrPlayPlayer",{params:{containerId:a}}).then(function(){o&&e.api.getPlayerController(
"playerKernelInit")&&(e.api.emit("play"),e.api.setPlayerOption("paused",!1),e.api.emit("playing"))})}else n()&&this.h5Run()}}]),i}(),L=function(){function i(e,t){a(this,i),this.api=e,this.pluginOptions=t}return o(i,[{key:"get",value:function(){if("na"===this.api.getMode())return this.api.getPlayerOption("volume");var e=this.api.getVideoInstance();return e?e.volume:""}},{key:"set",value:function(e){var t=this,i=this.api.getBoxTools(),n=i.isIOS,r=i.invokeP,a=this.api.getPlayerOption("containerId")
;if("na"===this.api.getMode()&&n())r("video/slrSetSystemVolume",{params:{containerId:a,volume:e}}).then(function(){return t.api.setPlayerOption("volume",e)});else{var o=this.api.getVideoInstance();o&&(o.volume=e)}}}]),i}(),N=function(){function i(e,t){a(this,i),this.api=e,this.pluginOptions=t}return o(i,[{key:"get",value:function(){var e=this.api.getBoxTools().isIOS;if("na"===this.api.getMode()&&e())return this.api.getPlayerOption("duration");var t=this.api.getVideoInstance()
;return t?t.duration:""}}]),i}(),q=function(){function i(e,t){a(this,i),this.api=e,this.pluginOptions=t}return o(i,[{key:"get",value:function(){var e=this.api.getBoxTools().isIOS;if("na"===this.api.getMode()&&e())return this.api.getPlayerOption("error");var t=this.api.getVideoInstance();return t?t.error:""}}]),i}(),G=function(){function i(e,t){a(this,i),this.api=e,this.pluginOptions=t}return o(i,[{key:"get",value:function(){var e=this.api.getBoxTools().isIOS;if("na"===this.api.getMode()&&e()
)return this.api.getPlayerOption("playbackRate");var t=this.api.getVideoInstance();return t?t.playbackRate:""}},{key:"set",value:function(e){var t=this,i=this.api.getBoxTools(),n=i.isIOS,r=i.invokeP;if("na"===this.api.getMode()&&n()){r("video/slrPlaybackRate",{params:{containerId:this.api.getPlayerOption("containerId"),playbackRate:e}}).then(function(e){return!t.api.getPlayerController("playerKernelInit")&&t.api.setPlayerOption("playbackRate",e.playbackRate)})}else{
var a=this.api.getVideoInstance();a&&(a.playbackRate=e),this.api.setPlayerOption("playbackRate",e)}}}]),i}(),J=function(){function i(e,t){a(this,i),this.api=e,this.pluginOptions=t}return o(i,[{key:"get",value:function(){var e=this.api.getBoxTools().isIOS;if("na"===this.api.getMode()&&e())return this.api.getPlayerOption("src");var t=this.api.getVideoInstance();return t?t.src:""}}]),i}(),U=n(function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,
e.exports.__esModule=!0});i(U);var z=n(function(e){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return i}},e.exports.default=e.exports,e.exports.__esModule=!0});i(z);var K=n(function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length)
;for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n},e.exports.default=e.exports,e.exports.__esModule=!0});i(K);var Q=n(function(e){e.exports=function(e,t){if(e){if("string"==typeof e)return K(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?K(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0});i(Q);var W=n(
function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0});i(W);var X=i(n(function(e){e.exports=function(e,t){return U(e)||z(e,t)||Q(e,t)||W()},e.exports.default=e.exports,e.exports.__esModule=!0}));function Y(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t)
;e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function $(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(i),!0).forEach(function(e){y(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Y(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function Z(e){return{wrap:e,inner:e+1}
}var ee=function(){function n(e,t){var i=this;a(this,n),this.api=e,this.pluginOptions=t||{},this.perf={},this.perflog={},this.isEmitPerf=!1,this.queryTimer=null,this.api.on("reset",function(e){return i.reset(e)}),this.api.on("destroy",function(){return i.destroy()})}return o(n,[{key:"run",value:function(e,t){if(!this.api.getVideoInstance()&&this.api.getRoot()){var i=this.api.getPlayerOption();this.perf.createStart=+new Date,this.perf.clk=i.prepareInvokePlayerTime||this.perf.createStart
;var n=this.api.getBoxTools(),r=n.isMainBox,a=n.version,o=n.versionCompare,s=n.isIOS,l=n.isAndroid,u=n.isBdhonor,p=n.isHighVersionSearchCraft,c=n.isJisuBox;if(this.isIOS=s(),this.isAndroid=l(),!this.attachPrerenderVideo()){var h=this.api.getBoxTools().getRandomName;this.cid=h("h5-samelayer-cid-")||this.cid,this.api.setPlayerOption("containerId",this.cid),i.customizedVideo&&this.api.setPlayerController("slrOnly",!0);var d=r()&&(this.isIOS&&0<=o(a,"12.9")||this.isAndroid&&0<=o(a,"12.10")),f=c(
)&&0<=o(a,"6.31");if(!t&&(d||p()||f)){if(this.isIOS)return this.iosMaxQueryCnt=e||5,this.iosCreateVideo();if(this.isAndroid)return this.androidCreateVideo(i.pageUrl)}if(!t&&u()&&this.isAndroid)return this.androidCreateVideo(i.pageUrl);this.h5Run()}}}},{key:"attachPrerenderVideo",value:function(){var r=this,e=this.api.getRoot().querySelector("[class^=h5-samelayer-cid-]");if(this.api.setPlayerOption("prerender",!!e),!e)return!1;if(this.cid=e.className,this.api.setPlayerOption("containerId",
this.cid),this.api.setVideoInstance(e),this.isIOS){var t=e.getAttribute("event-cb");t&&(window[t]=function(e,t){return r.iosPlayerEventDispatch(e,t)},this.api.setPlayerController("eventCallback",t));var i=this.api.getBoxTools().invokeP;Promise.all([i("video/slrGetPlayerStatus",{params:{containerId:this.cid,gather:["muted","duration","rate","loop"]}}),i("video/slrGetSystemVolume",{params:{containerId:this.cid}})]).then(function(e){var t=X(e,2),i=t[0],n=t[1];r.api.setPlayerOption("",{
muted:!!i.muted,duration:i.duration||0,playbackRate:i.rate,loop:!!i.loop,volume:n.volume}),r.api.emit("volumechange",i.muted?0:n.volume)}),this.api.setMode("na"),this.api.emit("ready",{mode:"na",isIOS:this.isIOS,isAndroid:this.isAndroid}),this.isEmitPerf=!1,this.iosVideoVisible(),this.api.emit("playing")}else if(this.isAndroid){var n=this.api.getPlayerOption();if(this.androidCreateVideo(n.pageUrl,!0),e.hasAttribute("sys-muted")){var a="1"===e.getAttribute("sys-muted");this.api.getPlayerInstance(
).muted=a,this.api.setPlayerOption("muted",a)}}return!0}},{key:"_clearQueryTimer",value:function(){this.queryTimer&&(clearTimeout(this.queryTimer),this.queryTimer=null)}},{key:"destroy",value:function(){var e=this.api.getBoxTools().invokeP,t=this.api.getVideoInstance(),i=this.api.getPlayerController();if("na"===this.api.getMode()){if(window.removeEventListener("pagehide",i.pagehideHandler),window.removeEventListener("pageshow",i.pageshowHandler),this.isIOS){var n=i.eventCallback
;return window[n]=function(){},e("video/slrStopPlayer",{params:{containerId:this.cid}}),document.removeEventListener(i.visibilityChange,i.visibilityHandler),void this.removeDom()}if(this.isAndroid){var r=i.operationjscallback;window[r]=function(){},e("v5/datachannel/unregister",{action:"com.baidu.videoplayer.operationresult",jscallback:r});var a=i.initActionJsCallback;a&&(window[a]=function(){})}}i.videoEventHandler&&Object.keys(i.videoEventHandler).length&&Object.keys(i.videoEventHandler
).forEach(function(e){return t.removeEventListener(e,i.videoEventHandler[e])}),i.docEventHandler&&Object.keys(i.docEventHandler).length&&Object.keys(i.docEventHandler).forEach(function(e){return document.removeEventListener(e,i.docEventHandler[e])}),t.src="",this.removeDom()}},{key:"removeDom",value:function(){var e=this.api.getVideoInstance();e&&e.parentNode&&e.parentNode.removeChild(e),this.api.setVideoInstance(null)}},{key:"iosCreateVideo",value:function(){var e=this.api.getRoot(),
t=this.getContainerBox(e),i=this.api.getPlayerOption();this.width=i.width||t.width,this.height=i.height||t.height;var n=Z(this.height),r=n.wrap,a=n.inner,o=document.createElement("div");o.className=this.cid,o.style="width:"+this.width+"px;height:"+r+"px;overflow: scroll; -webkit-overflow-scrolling: touch; background-color: transparent;";var s=document.createElement("div");s.style="width: 100%; height:"+a+"px",i.precreate&&o.setAttribute("data-precreatevideoinfo",JSON.stringify({videoUrl:i.src,
vid:i.vid,playerControlType:i.playerControlType||0})),o.appendChild(s),e.appendChild(o),this.times=0,this.isScrollViewFound=!1,this.isRenderComplete=!1,this.api.setVideoInstance(o);var l=i.position||this.getContainerBox(o);this.api.setPlayerOption("",{width:this.width,height:this.height,position:l}),this.perf.queryStart=+new Date,this.iosQuery(l)}},{key:"getContainerBox",value:function(e){var t=this.api.getBoxTools(),i=t.version,n=t.versionCompare,r=t.isBdhonor,a=t.isHighVersionSearchCraft,
o=t.isJisuBox,s=e.getBoundingClientRect(),l={width:Math.round(s.width),height:Math.round(s.height)};return 0<=n(i,"13.23")||r()||a()||o()||(l.left=s.left+window.scrollX,l.top=s.top+window.scrollY),l}},{key:"judgeInvokePlayer",value:function(e){return e&&e.isSupportSameLR?(this.perflog.model=e.detailMsg||null,e.isScrollViewFound&&e.isRenderComplete?(this.perflog.count=++this.times,this.perflog.querysuc=new Date-this.perf.queryStart,this.iosInvokePlayer()):this.h5Run()):this.h5Run()}},{
key:"iosQuery",value:function(t){var e,i,n,r=this,a=this.api.getBoxTools(),o=a.invokeP,s=a.getGlobalFunc,l=a.version,u=a.versionCompare,p=(a.isHighVersionSearchCraft,{containerId:this.cid,position:t,scrollHeight:Z(t.height).inner});return 1==+(null===(e=window.B)||void 0===e?void 0:null===(i=e.comm)||void 0===i?void 0:null===(n=i.sampleval)||void 0===n?void 0:n.VIDEO_AUTO_FOUND_CONTAINER_VIEW)&&0<=u(l,"13.17")?(p.eventCallback=s(function(e,t){r.judgeInvokePlayer(t)}),void o(
"video/slrAutoFoundContainerView",{params:p}).catch(function(e){r.perflog.queryfail=new Date-r.perf.queryStart,r.h5Run()})):!(++this.times>this.iosMaxQueryCnt)||this.isScrollViewFound&&this.isRenderComplete?void o("video/slrIsFoundContainerView",{params:p}).then(function(e){return e&&e.isSupportSameLR?(r.perflog.model=e.detailMsg||null,e.isScrollViewFound&&(r.isScrollViewFound=!0,e.isRenderComplete)?(r.isRenderComplete=!0,r.perflog.count=r.times,r.perflog.querysuc=new Date-r.perf.queryStart,
r.times=999,r.iosInvokePlayer()):void(0<=r.pluginOptions.queryTime?r.queryTimer=setTimeout(function(){r.iosQuery(t)},r.pluginOptions.queryTime):r.iosQuery(t))):r.h5Run()}).catch(function(e){r.perflog.queryfail=new Date-r.perf.queryStart,r._clearQueryTimer(),r.h5Run()}):(this.perflog.queryfail=new Date-this.perf.queryStart,this._clearQueryTimer(),this.h5Run())}},{key:"iosInvokePlayer",value:function(e){var n=this,t=0<arguments.length&&void 0!==e?e:"video/slrInvokePlayer",i=this.cid,
r=this.api.getBoxTools(),a=r.invokeP,o=r.getGlobalFunc,s=r.version,l=r.versionCompare,u=r.isHighVersionSearchCraft,p=r.isJisuBox,c=this.api.getPlayerController("eventCallback")||o(function(e,t){return n.iosPlayerEventDispatch(e,t)});this.api.setPlayerController("eventCallback",c);var h=this.api.getPlayerOption(),d=h.fullScreenType||"windowFullScreen",f=!h.hasOwnProperty("isIgnoreDeviceOrientation")||!!h.isIgnoreDeviceOrientation,y={containerId:i,eventCallback:c,videoinfo:$($({},h),{},{vid:h.vid,
videoUrl:h.src,posterImage:h.poster,muted:+h.muted,loop:+h.loop,syncPlayerPosition:1,fullScreenType:d,isIgnoreDeviceOrientation:+f,ext_log:$({prepareInvokePlayerTime:this.perf.clk},h.ext||{})})};(0<=l(s,"13.6")||u()||p())&&(y.videoinfo.ext_log.value=h.value||"");var v=this.api.getPlayerInstance();a(t,{params:y}).then(function(){n.api.setMode("na"),n.perflog.create=new Date-n.perf.createStart,n.api.emit("ready",{mode:"na",isIOS:n.isIOS,isAndroid:n.isAndroid});var e=n.api.getPlayerController(),
t=e.fromCache,i=e.hidePlaying;(t&&i||!t&&h.autoplay)&&(n.isEmitPerf=!0,v.play(),n.api.setPlayerController("fromCache",!1),n.api.setPlayerController("hidePlaying",!1))}).catch(function(e){n.h5Run()}),this.iosUpdatePlayerStatus(),h.hasOwnProperty("volume")&&0<=h.volume?v.volume=h.volume:a("video/slrGetSystemVolume",{params:{containerId:this.cid}}).then(function(e){return n.api.setPlayerOption("volume",e.volume)}),this.api.setPlayerOption("",{ended:!1,paused:!1,fullscreen:!1,currentTime:0,
playingDuration:0,duration:0,readyState:0,networkState:0,fullScreenType:d,isIgnoreDeviceOrientation:f,timeInterval:h.timeInterval||1,accurate:h.accurate||!1});var g=this.api.getPlayerController("fullscreenEvt")||function(e){e.stopPropagation(),e.preventDefault()};this.api.setPlayerController("fullscreenEvt",g),this.iosVideoVisible()}},{key:"iosVideoVisible",value:function(){var t=this;if(!this.api.getPlayerController("visibilityHandler")){var i="",e="";if(void 0!==document.visibilityState?(
i="visibilityState",e="visibilitychange"):void 0!==document.webkitVisibilityState&&(i="webkitVisibilityState",e="webkitvisibilitychange"),e){var n=function(){var e=t.api.getPlayerInstance();e&&("visible"===document[i]?t.api.getPlayerController("hideNeedResume")&&(e.reset({src:e.src}),e.play(),t.api.setPlayerController("hideNeedResume",!1)):!t.api.getPlayerController("playerKernelInit")||e.ended||e.paused||(e.pause(),t.api.setPlayerController("hideNeedResume",!0)))};this.api.setPlayerController(
"visibilityChange",e),this.api.setPlayerController("visibilityHandler",n),this.pluginOptions.pageHideWithOutPause||document.addEventListener(e,n,!1),this.naBackRecovery()}}}},{key:"naBackRecovery",value:function(){var i=this;if(!this.api.getPlayerController("pagehideHandler")){var e=function(e){if(e.persisted){var t=i.api.getPlayerInstance();i.isIOS?setTimeout(function(){i.api.setPlayerController("fromCache",!0),i.perf.clk=+new Date,i.perf.createStart=i.perf.clk,i.iosCreateVideo()},10
):i.api.getPlayerController("hidePlaying")&&(t.play(),i.api.getPlayerController("hidePlaying",!1))}};window.addEventListener("pageshow",e),this.api.setPlayerController("pageshowHandler",e);var t=function(){i.isIOS&&(i.removeDom(),i.perf={});var e=i.api.getPlayerInstance(),t=i.api.getPlayerController("playerKernelInit")&&!e.ended&&!e.paused;i.api.setPlayerController("hidePlaying",t)};window.addEventListener("pagehide",t),this.api.setPlayerController("pagehideHandler",t)}}},{
key:"iosUpdatePlayerStatus",value:function(){var t=this;(0,this.api.getBoxTools().invokeP)("video/slrGetPlayerStatus",{params:{containerId:this.cid,gather:["muted","duration","rate","loop"]}}).then(function(e){return t.api.setPlayerOption("",{muted:!!e.muted,duration:e.duration||0,playbackRate:e.rate,loop:!!e.loop})})}},{key:"iosPlayerEventDispatch",value:function(e,t){var i=1<arguments.length&&void 0!==t?t:{};if(e&&i.containerId===this.cid)switch(delete i.containerId,e){
case"slrPlayerStateChanged":this.iosPlayerStatusDispatch(i);break;case"slrPlayerPlaceHolerViewDealloc":this.api.emit("playerPlaceHolerViewDealloc",i);break;case"slrPlayerReuse":this.api.emit("playerReuse",i);break;case"slrPlayerDidReused":this.api.emit("playerDidReused",i);break;case"slrLoadingViewStatusChanged":this.api.setPlayerOption("networkState",2),this.api.emit("loadingchange",i.loadingShow);break;case"slrMuteChanged":this.api.setPlayerOption("",{muted:!!i.muted,volume:i.volume}),
this.api.emit("mutedchange",!!i.muted);break;case"slrSystemVolumeChanged":this.api.setPlayerOption("volume",i.volume),this.api.emit("volumechange",i.volume);break;case"slrPlayerProgressChanged":this.api.setPlayerOption("",{currentTime:i.currentTime,duration:i.duration,playingDuration:i.playingDuration||0}),this.api.emit("timeupdate",i.currentTime);break;case"slrRateChanged":this.api.setPlayerOption("playbackRate",i.newRate),this.api.emit("ratechange",i.newRate);break;case"slrEnterFullScreen":
this.api.setPlayerOption("fullscreen",!0),i.needResetPlayerFrame&&this.iosResetFrame(!0,+i.direction,i.statusbarHeight),this.api.emit("enterfullscreen",i);break;case"slrExitFullScreen":this.api.setPlayerOption("fullscreen",!1),i.needResetPlayerFrame&&this.iosResetFrame(!1),this.api.emit("exitfullscreen",i);break;case"slrCacheLoadedTimeChanged":this.api.emit("cachetimechange",i);break;case"slrCacheLoadFinished":this.api.emit("cacheloadfinished",i);break;case"slrDidStartNextLoop":this.api.emit(
"startnextloop",i.hasPlayTimes);break;case"slrNetChanged":this.api.emit("netchange",i);break;case"slrHideControlEventCallback":this.api.emit("controlhiddenchange",i);break;case"slrPlayerMiniWindowEventChanged":this.suspenseEventDispatch(i.event)}}},{key:"iosPlayerStatusDispatch",value:function(e){var t="";switch(e.event){case"onStartPrepare":t="prepare",this.api.setPlayerOption("",{ended:!1,readyState:1});break;case"onPrepared":t="canplay",this.api.setPlayerOption("readyState",4);break
;case"onPlaySuccess":this.api.setPlayerController("playerKernelInit",!0),this.perflog.clk2play=new Date-this.perf.clk,this.iosUpdatePlayerStatus(),this.isEmitPerf&&this.emitPerfEvent();case"onReplay":this.api.setPlayerOption("ended",!1);case"onResumePlay":this.api.emit("play"),this.api.setPlayerOption("paused",!1),t="playing";break;case"onPaused":t="pause",this.api.setPlayerOption("paused",!0);break;case"onFinished":t="ended",this.api.setPlayerOption("ended",!0);break;case"onClosed":t="closed"
;break;case"onError":t="error",this.api.setPlayerOption("error",e)}t&&this.api.emit(t)}},{key:"iosResetFrame",value:function(e,t,i){var n=this.api.getRoot(),r=this.api.getPlayerController("fullscreenEvt");if(e){var a=this.api.getPlayerOption(),o=a.width,s=a.height;this.width=o,this.height=s;var l=0===t?screen.width:screen.height,u=0===t?screen.height:screen.width;n.style="position:fixed; left:0;top:-"+i+"px;z-index:1000;width:"+l+"px;height:"+u+"px;",n.addEventListener("touchstart",r,!1),
this.resetRect(l,u)}else n.style="",n.removeEventListener("touchstart",r,!1),this.resetRect(this.width,this.height)}},{key:"suspenseEventDispatch",value:function(e){var t="";switch(e){case"onDidEnterSuspense":case"enterFloatingScreen":t="entersuspense";break;case"onDidExitSuspense":case"exitFloatingScreen":t="exitsuspense";break;case"onDidCloseSuspense":case"closeFloatingScreen":t="closesuspense";break;case"onFloatingClick":t="suspenseclick";break;case"onDidEnterPip":t="enterpip";break
;case"onDidClosePip":t="closepip";break;case"onTapPipRestoreBtn":t="pipclick";break;case"onStartPipFailed":t="pipfail"}t&&this.api.emit(t)}},{key:"androidCreateVideo",value:function(e,t){var i=this,n=0<arguments.length&&void 0!==e?e:"",r=1<arguments.length&&void 0!==t&&t;this.api.setMode("na"),this.androidNaEvent().then(function(){r?i.videoEventDispatch():i.createVideoTag({"t7-video-player-type":"h5samelayer","t7-video-player-ext":n}),i.androidInitPlayer(),r&&i.api.emit("playing")}),
this.naBackRecovery()}},{key:"androidInitPlayer",value:function(){var i=this,t=this.api.getVideoInstance(),n=this.api.getPlayerOption(),e=this.api.getBoxTools(),r=e.version,a=e.versionCompare,o=e.getGlobalFunc,s=e.isBdhonor,l=e.isHighVersionSearchCraft,u=e.isJisuBox,p={},c=["from","page"];a(r,"13.6")<0&&!s()&&!l()&&!u()&&c.push("value"),c.forEach(function(e){n.hasOwnProperty(e)&&(p[e]=n[e])});var h=["mpd","clarityUrl","from","page"].concat(n.passThrough||[]),d={videoUrl:n.src,accurateSeek:"1"}
;h.forEach(function(e){n.hasOwnProperty(e)&&(d[e]=n[e])}),d.mpd&&0<Object.keys(d.mpd).length&&d.clarityUrl&&delete d.clarityUrl;var f={vid:n.vid,ignore4gToast:+!!n.ignore4gToast,syncProgress:+!!n.needReadLocalProgress,getSysVolume:+(!n.hasOwnProperty("volume")||n.muted),isIgnoreVolumeChange:+!!n.isIgnoreVolumeChange,audioGroupScope:n.audioGroupScope||""},y=$($({},p),{},{extLog:$({prepareInvokePlayerTime:this.perf.clk},n.ext||{})});0<=a(r,"13.6")||s()||l()||u()?(y.ext_log=y.extLog,delete y.extLog
,y.ext_log.value=n.value||"",d=$($({},d),y)):f.samelrLog=y,f.videoInfo=d;var v=(0<=a(r,"13.37")||s()||l()||u())&&"1"===this.pluginOptions.isGetPlayingDurationEnabled,g=0<=a(r,"13.60")&&"1"===n.isGetCurrentPlayedProgressEnabled;if(v||g){v&&(f.isGetPlayingDurationEnabled="1"),g&&(f.isGetCurrentPlayedProgressEnabled="1");var m=o(function(e){try{if(0===(e=JSON.parse(e)).status&&"get_playing_duration"===e.action&&i.api.setPlayerOption("playingDuration",e.data/1e3||0),
0===e.status&&"get_current_played_progress"===e.action){var t=e.data/1e3||0;i.api.setPlayerOption("",{currentTime:t}),i.api.emit("timeupdate",t)}}catch(e){}});f.jsCallback=m,this.api.setPlayerController("initActionJsCallback",m)}t.zeusVideoExt=JSON.stringify({id:this.cid,name:"h5samelayer",action:"init",data:f});var P=this.api.getPlayerInstance();t.addEventListener("loadedmetadata",function e(){i.perflog.create=new Date-i.perf.createStart,n.hasOwnProperty("volume")&&0<=n.volume&&(
P.volume=n.volume),n.useAutoVolume||(P.muted=!!n.muted),n.hasOwnProperty("seekSeconds")&&(P.currentTime=n.seekSeconds),t.removeEventListener("loadedmetadata",e)}),this.api.emit("ready",{mode:"na",isIOS:this.isIOS,isAndroid:this.isAndroid})}},{key:"androidNaEvent",value:function(){var s=this,e=this.api.getBoxTools(),t=e.invokeP,i=(0,e.getGlobalFunc)(function(e,t){if("com.baidu.videoplayer.operationresult"===e&&s.api.getVideoInstance()){try{t=JSON.parse(t)}catch(e){}if(0===t.status){
var i=s.api.getPlayerOption("containerId"),n=s.api.getVideoInstance(),r=s.api.getPlayerInstance();switch(t.action){case"init":break;case"volumeChanged":if(r.volume===t.data.volume&&!s.api.getPlayerOption("useAutoVolume")||s.api.getPlayerOption("isIgnoreVolumeChange"))return;if(s.api.setPlayerOption("volume",t.data.volume),n.volume!==t.data.volume&&(r.volume=t.data.volume),s.api.emit("volumechange",t.data.volume),!s.api.getPlayerController("playerKernelInit"))return;0!==t.data.volume||r.muted||(
r.muted=!0),0<t.data.volume&&r.muted&&(r.muted=!1);break;case"setMute":r.muted!==!!t.data.muted&&(s.api.setPlayerOption("muted",!!t.data.muted),s.api.emit("mutedchange",!!t.data.muted));break;case"getSysVolume":var a=1==+t.data.volume?+t.data.volume:+t.data.volume.toFixed(3);s.api.setPlayerOption("volume",a);break;case"hasFloatingPlayer":var o=s.api.getPlayerController("androidIsExistSuspense");t.id===i&&o&&(o(!!t.data.value),s.api.setPlayerController("androidIsExistSuspense",null));break
;default:t.id===i&&s.suspenseEventDispatch(t.action)}}}});return this.api.setPlayerController("operationjscallback",i),t("v5/datachannel/register",{action:"com.baidu.videoplayer.operationresult",jscallback:i})}},{key:"videoEventDispatch",value:function(){var n=this,r=this.api.getVideoInstance(),a="h5"===this.api.getMode(),e=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange",
"seeked","seeking","stalled","suspend","timeupdate","waiting","webkitendfullscreen"];a&&e.push("volumechange");var t={};e.forEach(function(i){t[i]=function(e){var t=n.api.getPlayerController("playerKernelInit");a||t||"canplay"!==i||!n.api.getPlayerOption("autoplay")||(n.isEmitPerf=!0,r.play()),t||"play"!==i||(n.api.setPlayerController("playerKernelInit",!0),n.perflog.clk2play=new Date-n.perf.clk,n.isEmitPerf&&n.emitPerfEvent()),n.api.emit(i,e)},r.addEventListener(i,t[i])}),
this.api.setPlayerController("videoEventHandler",t);var i={};["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"].forEach(function(e){i[e]=function(){var e=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;e&&e===r?(n.api.setPlayerOption("fullscreen",!0),n.api.emit("enterfullscreen")):n.api.getPlayerOption("fullscreen")&&(n.api.setPlayerOption("fullscreen",!1),n.api.emit("exitfullscreen"))
},document.addEventListener(e,i[e])}),this.api.setPlayerController("docEventHandler",i)}},{key:"createVideoTag",value:function(e){var t=0<arguments.length&&void 0!==e?e:{},i=this.api.getRoot(),n=this.api.getPlayerOption(),r=document.createElement("video"),a=n.width?n.width+"px":"100%",o=n.height?n.height+"px":"100%";r.style="width:"+a+"; height: "+o+";"+(2===n.videoGravity?"object-fit: cover;":""),Object.keys(t).forEach(function(e){return r.setAttribute(e,t[e])}),i.appendChild(r);var s=[
"controls","loop","mediaGroup","playbackRate","preload","src","poster","volume"];return"h5"===this.api.getMode()&&(s=s.concat(["muted","autoplay"])),Object.keys(n).filter(function(e){return-1<s.indexOf(e)}).forEach(function(e){try{r[e]=n[e]}catch(e){}}),this.api.setPlayerOption("containerId",this.cid),this.api.setVideoInstance(r),this.videoEventDispatch(),r}},{key:"emitPerfEvent",value:function(){var e=this.perf,t=e.clk,i=e.queryStart,n=e.createStart;this.perflog.clk2create=n-t,i&&(
this.perflog.clk2query=i-t),this.api.emit("perf",this.perflog),this.perflog={},this.isEmitPerf=!1}},{key:"resetRect",value:function(e,t){var i=this.api.getBoxTools(),n=i.isIOS,r=i.invokeP,a=this.api.getVideoInstance(),o=this.api.getPlayerOption(),s=o.containerId,l=o.videoGravity;if("na"===this.api.getMode()&&n()){var u=Z(t),p=u.wrap,c=u.inner,h=a.firstChild;a.style.width=e+"px",a.style.height=p+"px",h.style.height=c+"px",r("video/slrUpdatePlayerInfo",{params:{containerId:s,position:{left:0,
top:0,width:e,height:t}}})}else{var d=e?e+"px":"100%",f=t?t+"px":"100%";a.style="width:"+d+"; height: "+f+";"+(2===l?"object-fit: cover;":"")}}},{key:"reset",value:function(e){var t=this.api.getVideoInstance();if(t){e.hasOwnProperty("volume")||this.api.setPlayerOption("volume",-1);var i=this.api.getPlayerOption(),n=this.api.getMode();if((e.width||e.height)&&(this.resetRect(i.width,i.height),e.width&&delete e.width,e.height&&delete e.height),!(0===Object.keys(e
).length||"h5"===n&&this.api.getPlayerController("slrOnly"))){if(this.perf.createStart=+new Date,this.perf.clk=e.prepareInvokePlayerTime||this.perf.createStart,this.api.setPlayerController("playerKernelInit",!1),"na"===n&&this.isIOS)return this.perf.queryStart=this.perf.createStart,void this.iosInvokePlayer("video/slrSetPlayerInfo");var r=["controls","loop","mediaGroup","playbackRate","preload","src","poster","volume"];"h5"===n&&(r=r.concat(["muted","autoplay"])),Object.keys(i).filter(function(e
){return-1<r.indexOf(e)}).forEach(function(e){try{t[e]=i[e]}catch(e){}}),"h5"!==n?this.isAndroid&&(t.setAttribute("t7-video-player-ext",i.pageUrl||""),this.androidInitPlayer()):this.api.emit("ready",{mode:"h5",isIOS:this.isIOS,isAndroid:this.isAndroid})}}}},{key:"h5Run",value:function(){if(this.api.setMode("h5"),this.removeDom(),this.api.getPlayerController("slrOnly"))return this.api.emit("ready",{mode:"h5",isIOS:this.isIOS,isAndroid:this.isAndroid}),void this.emitPerfEvent()
;this.isEmitPerf=!!this.api.getPlayerOption("autoplay"),this.createVideoTag({playsinline:!0,"webkit-playsinline":!0}),this.api.emit("ready",{mode:"h5",isIOS:this.isIOS,isAndroid:this.isAndroid})}}]),n}(),te=function(){function i(e,t){a(this,i),this.api=e,this.pluginOptions=t}return o(i,[{key:"get",value:function(){var e=this.api.getBoxTools().isIOS;if("na"===this.api.getMode()&&e())return this.api.getPlayerOption("ended");var t=this.api.getVideoInstance();return t?t.ended:""}}]),i}(),
ie=function(){function i(e,t){a(this,i),this.api=e,this.pluginOptions=t}return o(i,[{key:"run",value:function(){if("na"===this.api.getMode())return this.naRun();this.h5Run()}},{key:"h5Run",value:function(){var e=this.api.getVideoInstance();return e&&"function"==typeof e.pause&&e.pause()}},{key:"naRun",value:function(){var e=this.api.getBoxTools(),t=e.isIOS,i=e.isAndroid,n=e.invokeP;t()?n("video/slrPausePlayer",{params:{containerId:this.api.getPlayerOption("containerId")}}):i()&&this.h5Run()}}]),
i}(),ne=function(){function i(e,t){a(this,i),this.api=e,this.pluginOptions=t}return o(i,[{key:"get",value:function(){return this.api.getPlayerOption("prerender")}}]),i}(),re=function(){function i(e,t){a(this,i),this.api=e,this.pluginOptions=t}return o(i,[{key:"get",value:function(){var e="na"===this.api.getMode(),t=this.api.getBoxTools().isIOS,i=this.api.getBoxTools().isAndroid,n=this.api.getPlayerOption("isGetCurrentPlayedProgressEnabled");if(e&&t())return this.api.getPlayerOption("currentTime"
);if(e&&i()&&"1"===n)return this.api.getPlayerOption("currentTime");var r=this.api.getVideoInstance();return r?r.currentTime:""}},{key:"set",value:function(e){var t=this,i=this.api.getBoxTools(),n=i.isIOS,r=i.invokeP;if("na"===this.api.getMode()&&n()){var a=this.api.getPlayerOption(),o=a.containerId,s=a.accurate;r("video/slrSeekPlayer",{params:{containerId:o,seconds:e,accurate:s}}).then(function(){t.api.setPlayerOption("",{currentTime:e}),t.api.emit("timeupdate",e),t.api.emit("seeked",e)})}else{
var l=this.api.getVideoInstance();l&&(l.currentTime=e)}}}]),i}(),ae=function(){function i(e,t){a(this,i),this.api=e,this.pluginOptions=t}return o(i,[{key:"get",value:function(){return this.api.getPlayerOption("playingDuration")||0}}]),i}(),oe=function(){function i(e,t){a(this,i),this.api=e,this.pluginOptions=t}return o(i,[{key:"get",value:function(){var e=this.api.getBoxTools().isIOS;if("na"===this.api.getMode()&&e())return this.api.getPlayerOption("loop");var t=this.api.getVideoInstance()
;return t?t.loop:""}},{key:"set",value:function(e){var t=this;if(e!==this.api.getPlayerOption("loop")){var i=this.api.getBoxTools(),n=i.isIOS,r=i.invokeP;if("na"===this.api.getMode()&&n()){r("video/slrSetLoop",{params:{containerId:this.api.getPlayerOption("containerId"),loop:+e}}).then(function(){return t.api.setPlayerOption("loop",e)})}else{var a=this.api.getVideoInstance();a&&(a.loop=e),this.api.setPlayerOption("loop",e)}}}}]),i}(),se=function(){function i(e,t){a(this,i),this.api=e,
this.pluginOptions=t}return o(i,[{key:"get",value:function(){var e=this.api.getBoxTools().isIOS;if("na"===this.api.getMode()&&e())return this.api.getPlayerOption("paused");var t=this.api.getVideoInstance();return t?t.paused:""}}]),i}(),le=function(){function i(e,t){a(this,i),this.api=e,this.pluginOptions=t}return o(i,[{key:"get",value:function(){var e=this.api.getBoxTools().isIOS;if("na"===this.api.getMode()&&e())return this.api.getPlayerOption("poster");var t=this.api.getVideoInstance()
;return t?t.poster:""}}]),i}(),ue=function(){function i(e,t){a(this,i),this.api=e,this.pluginOptions=t}return o(i,[{key:"get",value:function(){var e=this.api.getBoxTools().isIOS;if("na"===this.api.getMode()&&e())return this.api.getPlayerOption("readyState");var t=this.api.getVideoInstance();return t?t.readyState:""}}]),i}(),pe=function(){function i(e,t){a(this,i),this.api=e,this.pluginOptions=t}return o(i,[{key:"get",value:function(){var e=this.api.getBoxTools().isIOS;if("na"===this.api.getMode(
)&&e())return this.api.getPlayerOption("networkState");var t=this.api.getVideoInstance();return t?t.networkState:""}}]),i}(),ce=function(){function i(e,t){a(this,i),this.api=e,this.pluginOptions=t}return o(i,[{key:"run",value:function(){if("na"===this.api.getMode())return this.naRun();this.h5Run()}},{key:"naRun",value:function(){var e=this.api.getBoxTools(),t=e.isIOS,i=e.invokeP,n=this.api.getPlayerOption("containerId");t()&&i("video/slrReplayPlayer",{params:{containerId:n}}),this.h5Run()}},{
key:"h5Run",value:function(){var e=this.api.getVideoInstance();e&&(e.currentTime=0,(e.paused||e.ended)&&e.play())}}]),i}(),he=function(){function i(e,t){a(this,i),this.api=e,this.pluginOptions=t}return o(i,[{key:"run",value:function(){"na"===this.api.getMode()&&this.naRun()}},{key:"naRun",value:function(){var e=this.api.getBoxTools(),t=e.isIOS,i=e.isAndroid,n=e.invokeP,r=this.api.getPlayerOption("containerId"),a=this.api.getPlayerOption("suspenseAnimate");if(t())n("video/slrEnterSuspensePlayer",
{params:{containerId:r,animate:a}});else if(i()){var o,s=null!==(o=this.api.getPlayerOption("isPortrait"))&&void 0!==o?o:-1;this.api.getVideoInstance().zeusVideoExt=JSON.stringify({id:r,name:"h5samelayer",action:"enterFloatingScreen",data:{isPortrait:s}})}}}]),i}(),de=function(){function i(e,t){a(this,i),this.api=e,this.pluginOptions=t}return o(i,[{key:"get",value:function(){return!!this.api.getPlayerOption("fullscreen")}}]),i}(),fe=function(){function i(e,t){a(this,i),this.api=e,
this.pluginOptions=t}return o(i,[{key:"run",value:function(){"na"===this.api.getMode()&&this.naRun()}},{key:"naRun",value:function(){var e=this.api.getBoxTools(),t=e.isIOS,i=e.isAndroid,n=e.invokeP,r=this.api.getPlayerOption("containerId");if(t())n("video/slrCloseSuspensePlayer",{params:{containerId:r}});else if(i()){this.api.getVideoInstance().zeusVideoExt=JSON.stringify({id:r,name:"h5samelayer",action:"closeFloatingScreen"})}}}]),i}(),ye=function(){function i(e,t){a(this,i),this.api=e,
this.pluginOptions=t}return o(i,[{key:"get",value:function(){return this.api.getPlayerOption("timeInterval")}},{key:"set",value:function(e){var t=this,i=this.api.getBoxTools(),n=i.isIOS,r=i.invokeP;"na"===this.api.getMode()&&n()&&r("video/slrSetVideoProgressTimeInterval",{params:{containerId:this.api.getPlayerOption("containerId"),timeInterval:e}}).then(function(){return t.api.setPlayerOption("timeInterval",e)})}}]),i}(),ve=function(){function i(e,t){a(this,i),this.api=e,this.pluginOptions=t}
return o(i,[{key:"get",value:function(){return!!this.api.getPlayerOption("isIgnoreDeviceOrientation")}},{key:"set",value:function(e){var t=this.api.getBoxTools(),i=t.isIOS,n=t.invokeP;if("na"===this.api.getMode()&&i()){var r=this.api.getPlayerOption("containerId"),a=this.api.getPlayerOption("fullScreenType");this.api.setPlayerOption("isIgnoreDeviceOrientation",e),n("video/slrSetIgnoreDeviceOrientation",{params:{containerId:r,isIgnoreDeviceOrientation:+e,fullScreenType:a}})}}}]),i}(),ge=function(
){function i(e,t){a(this,i),this.api=e,this.pluginOptions=t}return o(i,[{key:"run",value:function(e){if("na"===this.api.getMode())return this.naRun(e);this.h5Run(e)}},{key:"naRun",value:function(e){var t=void 0===e?this.api.getPlayerOption("direction"):e;this.api.setPlayerOption("direction",t);var i=this.api.getBoxTools(),n=i.isIOS,r=i.isAndroid,a=i.invokeP;if(n()){var o=this.api.getPlayerOption(),s=o.playerControlType,l=o.fullScreenType;2===s&&(l="windowFullScreen"),a(
"windowFullScreen"===l?"video/slrEnterFullWindowScreen":"video/slrEnterFullCustomScreen",{params:{containerId:o.containerId,direction:t}})}else r()&&this.h5Run()}},{key:"h5Run",value:function(){var e=this.api.getVideoInstance(),t=this.api.getRoot(),i=t.requestFullscreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullscreen;i?i.call(t):e.webkitSupportsFullscreen&&e.webkitEnterFullscreen()}}]),i}(),me=function(){function i(e,t){a(this,i),this.api=e,this.pluginOptions=t}
return o(i,[{key:"run",value:function(){"na"===this.api.getMode()&&this.naRun()}},{key:"naRun",value:function(){var e=this.api.getBoxTools(),t=e.isIOS,i=e.isAndroid,n=e.invokeP,r=this.api.getPlayerOption("containerId"),a=this.api.getPlayerOption("suspenseAnimate");if(t())n("video/slrExitSuspensePlayer",{params:{containerId:r,animate:a}});else if(i()){this.api.getVideoInstance().zeusVideoExt=JSON.stringify({id:r,name:"h5samelayer",action:"exitFloatingScreen"})}}}]),i}(),Pe=function(){function i(e
,t){a(this,i),this.api=e,this.pluginOptions=t}return o(i,[{key:"run",value:function(){if("na"===this.api.getMode())return this.naRun();this.h5Run()}},{key:"naRun",value:function(){var e=this.api.getBoxTools(),t=e.isIOS,i=e.isAndroid,n=e.invokeP;if(t()){var r=this.api.getPlayerOption();n("windowFullScreen"===r.fullScreenType?"video/slrExitFullWindowScreen":"video/slrExitFullCustomScreen",{params:{containerId:r.containerId}})}else i()&&this.h5Run()}},{key:"h5Run",value:function(){(
document.exitFullScreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen).call(document)}}]),i}(),Oe=function(){function i(e,t){a(this,i),this.api=e,this.pluginOptions=t}return o(i,[{key:"get",value:function(){var i=this,e=this.api.getBoxTools(),t=e.isIOS,n=e.isAndroid,r=e.invokeP;if("na"===this.api.getMode()){var a=this.api.getPlayerOption("containerId");if(t())return new Promise(function(t){r("video/slrIsexistSuspensePlayer",{params:{containerId:a}}
).then(function(e){i.api.setPlayerOption("suspenseType",e.type),t(!!e.exist)})});if(n())return this.api.getVideoInstance().zeusVideoExt=JSON.stringify({id:a,name:"h5samelayer",action:"hasFloatingPlayer"}),new Promise(function(e){i.api.setPlayerController("androidIsExistSuspense",e)})}}}]),i}(),ke=function(){function i(e,t){a(this,i),this.api=e,this.pluginOptions=t}return o(i,[{key:"run",value:function(){"na"===this.api.getMode()&&this.naRun()}},{key:"naRun",value:function(){
var e=this.api.getBoxTools(),t=e.isIOS,i=e.invokeP;t()&&i("video/slrCloseSystemSuspensePlayer",{params:{containerId:this.api.getPlayerOption("containerId")}})}}]),i}(),be=function(){function i(e,t){a(this,i),this.api=e,this.pluginOptions=t}return o(i,[{key:"run",value:function(){var e=this.api.getBoxTools(),t=e.isIOS,i=e.invokeP;"na"===this.api.getMode()&&t()&&i("video/slrEnterSystemSuspensePlayer",{params:{containerId:this.api.getPlayerOption("containerId")}})}}]),i}(),xe={autoplay:A,paused:se,
currentTime:re,playingDuration:ae,duration:N,ended:te,loop:oe,muted:F,networkState:pe,playbackRate:G,prerender:ne,readyState:ue,src:J,poster:le,volume:L,error:q,fullscreen:de,timeInterval:ye,isExistSuspense:Oe,fullScreenType:function(){function i(e,t){a(this,i),this.api=e,this.pluginOptions=t}return o(i,[{key:"get",value:function(){var e=this.api.getBoxTools().isIOS;return"na"===this.api.getMode()&&e()?this.api.getPlayerOption("fullScreenType"):""}},{key:"set",value:function(e){
this.api.setPlayerOption("fullScreenType",e)}}]),i}(),isIgnoreDeviceOrientation:ve,suspenseType:function(){function i(e,t){a(this,i),this.api=e,this.pluginOptions=t}return o(i,[{key:"get",value:function(){var e=this.api.getBoxTools().isIOS;return"na"===this.api.getMode()&&e()?this.api.getPlayerOption("suspenseType"):""}}]),i}(),create:ee,play:H,replay:ce,enterFullscreen:ge,exitFullscreen:Pe,enterSuspense:he,exitSuspense:me,closeSuspense:fe,enterSystemSuspense:be,closeSystemSuspense:ke,pause:ie}
;function Ie(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=h(n);if(r){var i=h(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return c(this,e)}}function Se(e){if(k()&&0<=x(B,"12.6")||m()||S()||b()){var t=P(
)?"video/slrPrefetchVideo":O()?"videoplayer/slrPrefetchVideo":"";t&&j(t,{params:{prefetchInfo:e}})}}var we=function(){s(r,d);var n=Ie(r);function r(e){var t;if(a(this,r),!e||"object"!==C(e)||0===Object.keys(e).length||!e.id)throw new Error("player config error");var i=document.getElementById(e.id);if(!i)throw new Error("element with id: ".concat(e.id," is not exist"));return(t=n.call(this))._defaultInit=!e.customizedInit,t.options={autoplay:!1,muted:!1,loop:!1},t.reset(e),t._controller={},
t._mode=e.mode||"h5",e.plugins&&t.registryPlugins(e.plugins),t._root=i,t.video=null,t._plugins=xe,t._inited=!1,t._defaultInit&&t.init(),t}return o(r,[{key:"reset",value:function(t){var i=this;Object.keys(t).forEach(function(e){"pluginOptions"!==e&&(i.options[e]=t[e])}),this.pluginOptions=t.pluginOptions||this.pluginOptions||{},this._inited&&this.emit("reset",t)}},{key:"_validate",value:function(e){return 0!==e.indexOf("_")&&(-1===["on","once","emit","off","init","destroy","reset",
"registryPlugin","registryPlugins","isSupportCode"].indexOf(e)||this[e])}},{key:"registryPlugin",value:function(e,t){if(this._validate(e)){if(this._inited)return this._loadPlugin(e,t);this._plugins||(this._plugins={}),this._plugins[e]=t}}},{key:"registryPlugins",value:function(e,t){var i=this,n=0<arguments.length&&void 0!==e?e:{},r=1<arguments.length&&void 0!==t?t:"h5";this._mode=r,Object.keys(n).forEach(function(e){return i.registryPlugin(e,n[e])})}},{key:"_loadPlugin",value:function(e,t){
var i=new t(new D(e,this),this.pluginOptions[e]);this._defineProp(e,i)}},{key:"_defineProp",value:function(e,t){var i={};"function"===C(t.get)?(i.get=t.get.bind(t),"function"===C(t.set)&&(i.set=t.set.bind(t))):"function"===C(t.run)&&(i={get:function(){return t.run.bind(t)}}),Object.defineProperty(this,e,i)}},{key:"init",value:function(){var i=this;this._inited||(this._inited=!0,Object.keys(this._plugins).forEach(function(e){var t=i._plugins[e];i._loadPlugin(e,t)}),this.emit("init"))}},{
key:"destroy",value:function(){this._root&&(this.emit("destroy"),this.removeAllListeners(),this._root=null)}}]),r}();t.default=we,t.prefetch=Se,Object.defineProperty(t,"__esModule",{value:!0})});;
define("@baidu/xbox-player",["require","@baidu/xbox-player/dist/player.amd"],function(a,e){return e});