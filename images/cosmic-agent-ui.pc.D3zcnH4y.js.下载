define("js/cosmic-agent-ui.pc.D3zcnH4y",["require","exports","./cosmic.pc.CiKfZjh1","san"],(function(require,exports,cosmic,san){"use strict";var _excluded=["premium","referrerPolicy"];function _defineProperty$1(e,t,n){return(t=_toPropertyKey$1(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPrimitive$1(e,t){if("object"!=cosmic._typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=cosmic._typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _toPropertyKey$1(e){var t=_toPrimitive$1(e,"string");return"symbol"==cosmic._typeof(t)?t:String(t)}function _classCallCheck$1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass$1(e,t,n){return t&&_defineProperties$1(e.prototype,t),n&&_defineProperties$1(e,n),e}function _defineProperty$2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ownKeys$1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread2$1(e){for(var t=1;t<Array.from(arguments).length;t++){var n=null!=Array.from(arguments)[t]?Array.from(arguments)[t]:{};t%2?ownKeys$1(Object(n),!0).forEach((function(t){_defineProperty$2(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$1(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var defaults$1={addCSS:!0,thumbWidth:15,watch:!0};function matches$1(e,t){return function(){return Array.from(document.querySelectorAll(t)).includes(this)}.call(e,t)}function trigger(e,t){if(e&&t){var n=new Event(t,{bubbles:!0});e.dispatchEvent(n)}}var getConstructor$1=function(e){return null!=e?e.constructor:null},instanceOf$1=function(e,t){return!!(e&&t&&e instanceof t)},isNullOrUndefined$1=function(e){return null==e},isObject$1$1=function(e){return getConstructor$1(e)===Object},isNumber$1=function(e){return getConstructor$1(e)===Number&&!Number.isNaN(e)},isString$1=function(e){return getConstructor$1(e)===String},isBoolean$1=function(e){return getConstructor$1(e)===Boolean},isFunction$1=function(e){return getConstructor$1(e)===Function},isArray$1=function(e){return Array.isArray(e)},isNodeList$1=function(e){return instanceOf$1(e,NodeList)},isElement$1=function(e){return instanceOf$1(e,Element)},isEvent$1=function(e){return instanceOf$1(e,Event)},isEmpty$1=function(e){return isNullOrUndefined$1(e)||(isString$1(e)||isArray$1(e)||isNodeList$1(e))&&!e.length||isObject$1$1(e)&&!Object.keys(e).length},is$1={nullOrUndefined:isNullOrUndefined$1,object:isObject$1$1,number:isNumber$1,string:isString$1,boolean:isBoolean$1,function:isFunction$1,array:isArray$1,nodeList:isNodeList$1,element:isElement$1,event:isEvent$1,empty:isEmpty$1};function getDecimalPlaces(e){var t="".concat(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}function round(e,t){if(1>t){var n=getDecimalPlaces(t);return parseFloat(e.toFixed(n))}return Math.round(e/t)*t}var RangeTouch=function(){function e(t,n){_classCallCheck$1(this,e),is$1.element(t)?this.element=t:is$1.string(t)&&(this.element=document.querySelector(t)),is$1.element(this.element)&&is$1.empty(this.element.rangeTouch)&&(this.config=_objectSpread2$1({},defaults$1,{},n),this.init())}return _createClass$1(e,[{key:"init",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(e){var t=this,n=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach((function(e){t.element[n](e,(function(e){return t.set(e)}),!1)}))}},{key:"get",value:function(t){if(!e.enabled||!is$1.event(t))return null;var n,i=t.target,o=t.changedTouches[0],a=parseFloat(i.getAttribute("min"))||0,r=parseFloat(i.getAttribute("max"))||100,s=parseFloat(i.getAttribute("step"))||1,c=i.getBoundingClientRect(),l=100/c.width*(this.config.thumbWidth/2)/100;return 0>(n=100/c.width*(o.clientX-c.left))?n=0:100<n&&(n=100),50>n?n-=(100-2*n)*l:50<n&&(n+=2*(n-50)*l),a+round(n/100*(r-a),s)}},{key:"set",value:function(t){e.enabled&&is$1.event(t)&&!t.target.disabled&&(t.preventDefault(),t.target.value=this.get(t),trigger(t.target,"touchend"===t.type?"change":"input"))}}],[{key:"setup",value:function(t){var n=1<Array.from(arguments).length&&void 0!==Array.from(arguments)[1]?Array.from(arguments)[1]:{},i=null;if(is$1.empty(t)||is$1.string(t)?i=Array.from(document.querySelectorAll(is$1.string(t)?t:'input[type="range"]')):is$1.element(t)?i=[t]:is$1.nodeList(t)?i=Array.from(t):is$1.array(t)&&(i=t.filter(is$1.element)),is$1.empty(i))return null;var o=_objectSpread2$1({},defaults$1,{},n);if(is$1.string(t)&&o.watch){var a=new MutationObserver((function(n){Array.from(n).forEach((function(n){Array.from(n.addedNodes).forEach((function(n){is$1.element(n)&&matches$1(n,t)&&new e(n,o)}))}))}));a.observe(document.body,{childList:!0,subtree:!0})}return i.map((function(t){return new e(t,n)}))}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),e}(),getConstructor=function(e){return null!=e?e.constructor:null},instanceOf=function(e,t){return Boolean(e&&t&&e instanceof t)},isNullOrUndefined=function(e){return null==e},isObject$2=function(e){return getConstructor(e)===Object},isNumber=function(e){return getConstructor(e)===Number&&!Number.isNaN(e)},isString=function(e){return getConstructor(e)===String},isBoolean=function(e){return getConstructor(e)===Boolean},isFunction=function(e){return"function"==typeof e},isArray=function(e){return Array.isArray(e)},isWeakMap=function(e){return instanceOf(e,WeakMap)},isNodeList=function(e){return instanceOf(e,NodeList)},isTextNode=function(e){return getConstructor(e)===Text},isEvent=function(e){return instanceOf(e,Event)},isKeyboardEvent=function(e){return instanceOf(e,KeyboardEvent)},isCue=function(e){return instanceOf(e,window.TextTrackCue)||instanceOf(e,window.VTTCue)},isTrack=function(e){return instanceOf(e,TextTrack)||!isNullOrUndefined(e)&&isString(e.kind)},isPromise=function(e){return instanceOf(e,Promise)&&isFunction(e.then)},isElement=function(e){return null!==e&&"object"==cosmic._typeof(e)&&1===e.nodeType&&"object"==cosmic._typeof(e.style)&&"object"==cosmic._typeof(e.ownerDocument)},isEmpty=function(e){return isNullOrUndefined(e)||(isString(e)||isArray(e)||isNodeList(e))&&!e.length||isObject$2(e)&&!Object.keys(e).length},isUrl=function(e){if(instanceOf(e,window.URL))return!0;if(!isString(e))return!1;var t=e;e.startsWith("http://")&&e.startsWith("https://")||(t="http://".concat(e));try{return!isEmpty(new URL(t).hostname)}catch(e){return!1}},is={nullOrUndefined:isNullOrUndefined,object:isObject$2,number:isNumber,string:isString,boolean:isBoolean,function:isFunction,array:isArray,weakMap:isWeakMap,nodeList:isNodeList,element:isElement,textNode:isTextNode,event:isEvent,keyboardEvent:isKeyboardEvent,cue:isCue,track:isTrack,promise:isPromise,url:isUrl,empty:isEmpty},transitionEndEvent=function(){var e=document.createElement("span"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n=Object.keys(t).find((function(t){return void 0!==e.style[t]}));return!!is.string(n)&&t[n]}();function repaint(e,t){setTimeout((function(){try{e.hidden=!0,e.offsetHeight,e.hidden=!1}catch(e){}}),t)}var isIE=Boolean(window.document.documentMode),isEdge=/Edge/g.test(navigator.userAgent),isWebKit="WebkitAppearance"in document.documentElement.style&&!/Edge/g.test(navigator.userAgent),isIPhone=/iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1,isIPadOS="MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,isIos=/iPad|iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1,browser={isIE:isIE,isEdge:isEdge,isWebKit:isWebKit,isIPhone:isIPhone,isIPadOS:isIPadOS,isIos:isIos};function cloneDeep(e){return JSON.parse(JSON.stringify(e))}function getDeep(e,t){return t.split(".").reduce((function(e,t){return e&&e[t]}),e)}function extend(){for(var e=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:{},t=Array.from(arguments).length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=Array.from(arguments)[i];if(!n.length)return e;var o=n.shift();return is.object(o)?(Object.keys(o).forEach((function(t){is.object(o[t])?(Object.keys(e).includes(t)||Object.assign(e,cosmic._defineProperty({},t,{})),extend(e[t],o[t])):Object.assign(e,cosmic._defineProperty({},t,o[t]))})),extend.apply(void 0,[e].concat(n))):e}function wrap(e,t){var n=e.length?e:[e];Array.from(n).reverse().forEach((function(e,n){var i=n>0?t.cloneNode(!0):t,o=e.parentNode,a=e.nextSibling;i.appendChild(e),a?o.insertBefore(i,a):o.appendChild(i)}))}function setAttributes(e,t){is.element(e)&&!is.empty(t)&&Object.entries(t).filter((function(e){var t=cosmic._slicedToArray(e,2)[1];return!is.nullOrUndefined(t)})).forEach((function(t){var n=cosmic._slicedToArray(t,2),i=n[0],o=n[1];return e.setAttribute(i,o)}))}function createElement(e,t,n){var i=document.createElement(e);return is.object(t)&&setAttributes(i,t),is.string(n)&&(i.innerText=n),i}function insertAfter(e,t){is.element(e)&&is.element(t)&&t.parentNode.insertBefore(e,t.nextSibling)}function insertElement(e,t,n,i){is.element(t)&&t.appendChild(createElement(e,n,i))}function removeElement(e){is.nodeList(e)||is.array(e)?Array.from(e).forEach(removeElement):is.element(e)&&is.element(e.parentNode)&&e.parentNode.removeChild(e)}function emptyElement(e){if(is.element(e))for(var t=e.childNodes.length;t>0;)e.removeChild(e.lastChild),t-=1}function replaceElement(e,t){return is.element(t)&&is.element(t.parentNode)&&is.element(e)?(t.parentNode.replaceChild(e,t),e):null}function getAttributesFromSelector(e,t){if(!is.string(e)||is.empty(e))return{};var n={},i=extend({},t);return e.split(",").forEach((function(e){var t=e.trim(),o=t.replace(".",""),a=t.replace(/[[\]]/g,"").split("="),r=cosmic._slicedToArray(a,1)[0],s=a.length>1?a[1].replace(/["']/g,""):"";switch(t.charAt(0)){case".":is.string(i.class)?n.class="".concat(i.class," ").concat(o):n.class=o;break;case"#":n.id=t.replace("#","");break;case"[":n[r]=s}})),extend(i,n)}function toggleHidden(e,t){if(is.element(e)){var n=t;is.boolean(n)||(n=!e.hidden),e.hidden=n}}function toggleClass(e,t,n){if(is.nodeList(e))return Array.from(e).map((function(e){return toggleClass(e,t,n)}));if(is.element(e)){var i="toggle";return void 0!==n&&(i=n?"add":"remove"),e.classList[i](t),e.classList.contains(t)}return!1}function hasClass(e,t){return is.element(e)&&e.classList.contains(t)}function matches(e,t){var n=Element.prototype;return(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||function(){return Array.from(document.querySelectorAll(t)).includes(this)}).call(e,t)}function closest$1(e,t){return(Element.prototype.closest||function(){var e=this;do{if(matches.matches(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}).call(e,t)}function getElements(e){return this.elements.container.querySelectorAll(e)}function getElement(e){return this.elements.container.querySelector(e)}function setFocus(){var e=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:null,t=Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1]&&Array.from(arguments)[1];is.element(e)&&e.focus({preventScroll:!0,focusVisible:t})}var defaultCodecs={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},support={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check:function(e,t){var n=support[e]||"html5"!==t;return{api:n,ui:n&&support.rangeInput}},pip:!(browser.isIPhone||!is.function(createElement("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||createElement("video").disablePictureInPicture)),airplay:is.function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime:function(e){if(is.empty(e))return!1;var t=e.split("/"),n=cosmic._slicedToArray(t,1)[0],i=e;if(!this.isHTML5||n!==this.type)return!1;Object.keys(defaultCodecs).includes(i)&&(i+='; codecs="'.concat(defaultCodecs[e],'"'));try{return Boolean(i&&this.media.canPlayType(i).replace(/no/,""))}catch(e){return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(e=document.createElement("input"),e.type="range","range"===e.type),touch:"ontouchstart"in document.documentElement,transitions:!1!==transitionEndEvent,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},supportsPassiveListeners=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){return e=!0,null}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e}(),e;function toggleListener(e,t,n){var i=this,o=Array.from(arguments).length>3&&void 0!==Array.from(arguments)[3]&&Array.from(arguments)[3],a=!(Array.from(arguments).length>4&&void 0!==Array.from(arguments)[4])||Array.from(arguments)[4],r=Array.from(arguments).length>5&&void 0!==Array.from(arguments)[5]&&Array.from(arguments)[5];if(e&&"addEventListener"in e&&!is.empty(t)&&is.function(n)){var s=t.split(" "),c=r;supportsPassiveListeners&&(c={passive:a,capture:r}),s.forEach((function(t){i&&i.eventListeners&&o&&i.eventListeners.push({element:e,type:t,callback:n,options:c}),e[o?"addEventListener":"removeEventListener"](t,n,c)}))}}function on(e){var t=Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1]?Array.from(arguments)[1]:"",n=Array.from(arguments).length>2?Array.from(arguments)[2]:void 0,i=!(Array.from(arguments).length>3&&void 0!==Array.from(arguments)[3])||Array.from(arguments)[3],o=Array.from(arguments).length>4&&void 0!==Array.from(arguments)[4]&&Array.from(arguments)[4];toggleListener.call(this,e,t,n,!0,i,o)}function off(e){var t=Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1]?Array.from(arguments)[1]:"",n=Array.from(arguments).length>2?Array.from(arguments)[2]:void 0,i=!(Array.from(arguments).length>3&&void 0!==Array.from(arguments)[3])||Array.from(arguments)[3],o=Array.from(arguments).length>4&&void 0!==Array.from(arguments)[4]&&Array.from(arguments)[4];toggleListener.call(this,e,t,n,!1,i,o)}function once(e){var t=this,n=Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1]?Array.from(arguments)[1]:"",i=Array.from(arguments).length>2?Array.from(arguments)[2]:void 0,o=!(Array.from(arguments).length>3&&void 0!==Array.from(arguments)[3])||Array.from(arguments)[3],a=Array.from(arguments).length>4&&void 0!==Array.from(arguments)[4]&&Array.from(arguments)[4],r=function(){for(var s=Array.from(arguments).length,c=new Array(s),l=0;l<s;l++)c[l]=Array.from(arguments)[l];off(e,n,r,o,a),i.apply(t,c)};toggleListener.call(this,e,n,r,!0,o,a)}function triggerEvent(e){var t=Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1]?Array.from(arguments)[1]:"",n=Array.from(arguments).length>2&&void 0!==Array.from(arguments)[2]&&Array.from(arguments)[2],i=Array.from(arguments).length>3&&void 0!==Array.from(arguments)[3]?Array.from(arguments)[3]:{};if(is.element(e)&&!is.empty(t)){var o=new CustomEvent(t,{bubbles:n,detail:cosmic._objectSpread2(cosmic._objectSpread2({},i),{},{plyr:this})});e.dispatchEvent(o)}}function unbindListeners(){this&&this.eventListeners&&(this.eventListeners.forEach((function(e){var t=e.element,n=e.type,i=e.callback,o=e.options;t.removeEventListener(n,i,o)})),this.eventListeners=[])}function ready(){var e=this;return new Promise((function(t){return e.ready?setTimeout(t,0):on.call(e,e.elements.container,"ready",t)})).then((function(){}))}function silencePromise(e){is.promise(e)&&e.then(null,(function(){}))}function dedupe(e){return is.array(e)?e.filter((function(t,n){return e.indexOf(t)===n})):e}function closest(e,t){return is.array(e)&&e.length?e.reduce((function(e,n){return Math.abs(n-t)<Math.abs(e-t)?n:e})):null}function supportsCSS(e){return!(!window||!window.CSS)&&window.CSS.supports(e)}var standardRatios=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce((function(e,t){var n=cosmic._slicedToArray(t,2),i=n[0],o=n[1];return cosmic._objectSpread2(cosmic._objectSpread2({},e),{},cosmic._defineProperty({},i/o,[i,o]))}),{});function validateAspectRatio(e){return!!(is.array(e)||is.string(e)&&e.includes(":"))&&(is.array(e)?e:e.split(":")).map(Number).every(is.number)}function reduceAspectRatio(e){if(!is.array(e)||!e.every(is.number))return null;var t=cosmic._slicedToArray(e,2),n=t[0],i=t[1],o=function(e,t){return 0===t?e:o(t,e%t)},a=o(n,i);return[n/a,i/a]}function getAspectRatio(e){var t=function(e){return validateAspectRatio(e)?e.split(":").map(Number):null},n=t(e);if(null===n&&(n=t(this.config.ratio)),null===n&&!is.empty(this.embed)&&is.array(this.embed.ratio)&&(n=this.embed.ratio),null===n&&this.isHTML5){var i=this.media;n=[i.videoWidth,i.videoHeight]}return reduceAspectRatio(n)}function setAspectRatio(e){if(!this.isVideo)return{};var t=this.elements.wrapper,n=getAspectRatio.call(this,e);if(!is.array(n))return{};var i=reduceAspectRatio(n),o=cosmic._slicedToArray(i,2),a=o[0],r=o[1],s=100/a*r;if(supportsCSS("aspect-ratio: ".concat(a,"/").concat(r))?t.style.aspectRatio="".concat(a,"/").concat(r):t.style.paddingBottom="".concat(s,"%"),this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){var c=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),l=(c-s)/(c/50);this.fullscreen.active?t.style.paddingBottom=null:this.media.style.transform="translateY(-".concat(l,"%)")}else this.isHTML5&&t.classList.add(this.config.classNames.videoFixedRatio);return{padding:s,ratio:n}}function roundAspectRatio(e,t){var n=Array.from(arguments).length>2&&void 0!==Array.from(arguments)[2]?Array.from(arguments)[2]:.05,i=e/t,o=closest(Object.keys(standardRatios),i);return Math.abs(o-i)<=n?standardRatios[o]:[e,t]}function getViewportSize(){return[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)]}var html5={getSources:function(){var e=this;return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter((function(t){var n=t.getAttribute("type");return!!is.empty(n)||support.mime.call(e,n)})):[]},getQualityOptions:function(){return this.config.quality.forced?this.config.quality.options:html5.getSources.call(this).map((function(e){return Number(e.getAttribute("size"))})).filter(Boolean)},setup:function(){if(this.isHTML5){var e=this;e.options.speed=e.config.speed.options,is.empty(this.config.ratio)||setAspectRatio.call(e),Object.defineProperty(e.media,"quality",{get:function(){var t=html5.getSources.call(e).find((function(t){return t.getAttribute("src")===e.source}));return t&&Number(t.getAttribute("size"))},set:function(t){if(e.quality!==t){if(e.config.quality.forced&&is.function(e.config.quality.onChange))e.config.quality.onChange(t);else{var n=html5.getSources.call(e).find((function(e){return Number(e.getAttribute("size"))===t}));if(!n)return;var i=e.media,o=i.currentTime,a=i.paused,r=i.preload,s=i.readyState,c=i.playbackRate;e.media.src=n.getAttribute("src"),("none"!==r||s)&&(e.once("loadedmetadata",(function(){e.speed=c,e.currentTime=o,a||silencePromise(e.play())})),e.media.load())}triggerEvent.call(e,e.media,"qualitychange",!1,{quality:t})}}})}},cancelRequests:function(){this.isHTML5&&(removeElement(html5.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function generateId$1(e){return"".concat(e,"-").concat(Math.floor(1e4*Math.random()))}function format(e){for(var t=Array.from(arguments).length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=Array.from(arguments)[i];return is.empty(e)?e:e.toString().replace(/{(\d+)}/g,(function(e,t){return n[t].toString()}))}function getPercentage(e,t){return 0===e||0===t||Number.isNaN(e)||Number.isNaN(t)?0:(e/t*100).toFixed(2)}var replaceAll=function(){var e=Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1]?Array.from(arguments)[1]:"",t=Array.from(arguments).length>2&&void 0!==Array.from(arguments)[2]?Array.from(arguments)[2]:"";return(Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:"").replace(new RegExp(e.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),t.toString())},toTitleCase=function(){return(Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:"").toString().replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}))};function toPascalCase(){var e=(Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:"").toString();return e=replaceAll(e,"-"," "),e=replaceAll(e,"_"," "),e=toTitleCase(e),replaceAll(e," ","")}function toCamelCase(){var e=(Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:"").toString();return(e=toPascalCase(e)).charAt(0).toLowerCase()+e.slice(1)}function stripHTML(e){var t=document.createDocumentFragment(),n=document.createElement("div");return t.appendChild(n),n.innerHTML=e,t.firstChild.innerText}function getHTML(e){var t=document.createElement("div");return t.appendChild(e),t.innerHTML}var resources={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},i18n={get:function(){var e=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:"",t=Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1]?Array.from(arguments)[1]:{};if(is.empty(e)||is.empty(t))return"";var n=getDeep(t.i18n,e);if(is.empty(n))return Object.keys(resources).includes(e)?resources[e]:"";var i={"{seektime}":t.seekTime,"{title}":t.title};return Object.entries(i).forEach((function(e){var t=cosmic._slicedToArray(e,2),i=t[0],o=t[1];n=replaceAll(n,i,o)})),n}},Storage=function(){return cosmic._createClass((function e(t){var n=this;cosmic._classCallCheck(this,e),_defineProperty$1(this,"get",(function(t){if(!e.supported||!n.enabled)return null;var i=window.localStorage.getItem(n.key);if(is.empty(i))return null;var o=JSON.parse(i);return is.string(t)&&t.length?o[t]:o})),_defineProperty$1(this,"set",(function(t){if(e.supported&&n.enabled&&is.object(t)){var i=n.get();is.empty(i)&&(i={}),extend(i,t);try{window.localStorage.setItem(n.key,JSON.stringify(i))}catch(t){}}})),this.enabled=t.config.storage.enabled,this.key=t.config.storage.key}),null,[{key:"supported",get:function(){try{if(!("localStorage"in window))return!1;var e="___test";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}}}])}();function fetch$1(e){var t=Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1]?Array.from(arguments)[1]:"text";return new Promise((function(n,i){try{var o=new XMLHttpRequest;if(!("withCredentials"in o))return;o.addEventListener("load",(function(){if("text"===t)try{n(JSON.parse(o.responseText))}catch(e){n(o.responseText)}else n(o.response)})),o.addEventListener("error",(function(){throw new Error(o.status)})),o.open("GET",e,!0),o.responseType=t,o.send()}catch(e){i(e)}}))}function _loadSprite(e,t){if(is.string(e)){var n="cache",i=is.string(t),o=function(){return null!==document.getElementById(t)},a=function(e,t){e.innerHTML=t,i&&o()||document.body.insertAdjacentElement("afterbegin",e)};if(!i||!o()){var r=Storage.supported,s=document.createElement("div");if(s.setAttribute("hidden",""),i&&s.setAttribute("id",t),r){var c=window.localStorage.getItem("".concat(n,"-").concat(t));if(null!==c){var l=JSON.parse(c);a(s,l.content)}}fetch$1(e).then((function(e){if(!is.empty(e)){if(r)try{window.localStorage.setItem("".concat(n,"-").concat(t),JSON.stringify({content:e}))}catch(e){}a(s,e)}})).catch((function(){}))}}}var getHours=function(e){return Math.trunc(e/60/60%60,10)},getMinutes=function(e){return Math.trunc(e/60%60,10)},getSeconds=function(e){return Math.trunc(e%60,10)};function _formatTime(){var e=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:0,t=Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1]&&Array.from(arguments)[1],n=Array.from(arguments).length>2&&void 0!==Array.from(arguments)[2]&&Array.from(arguments)[2];if(!is.number(e))return _formatTime(void 0,t,n);var i=function(e){return"0".concat(e).slice(-2)},o=getHours(e),a=getMinutes(e),r=getSeconds(e);return o=t||o>0?"".concat(o,":"):"","".concat(n&&e>0?"-":"").concat(o).concat(i(a),":").concat(i(r))}var controls={getIconUrl:function(){var e=new URL(this.config.iconUrl,window.location),t=window.location.host?window.location.host:window.top.location.host,n=e.host!==t||browser.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:n}},findElements:function(){try{return this.elements.controls=getElement.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:getElements.call(this,this.config.selectors.buttons.play),pause:getElement.call(this,this.config.selectors.buttons.pause),restart:getElement.call(this,this.config.selectors.buttons.restart),rewind:getElement.call(this,this.config.selectors.buttons.rewind),fastForward:getElement.call(this,this.config.selectors.buttons.fastForward),mute:getElement.call(this,this.config.selectors.buttons.mute),pip:getElement.call(this,this.config.selectors.buttons.pip),airplay:getElement.call(this,this.config.selectors.buttons.airplay),settings:getElement.call(this,this.config.selectors.buttons.settings),captions:getElement.call(this,this.config.selectors.buttons.captions),fullscreen:getElement.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=getElement.call(this,this.config.selectors.progress),this.elements.inputs={seek:getElement.call(this,this.config.selectors.inputs.seek),volume:getElement.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:getElement.call(this,this.config.selectors.display.buffer),currentTime:getElement.call(this,this.config.selectors.display.currentTime),duration:getElement.call(this,this.config.selectors.display.duration)},is.element(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(".".concat(this.config.classNames.tooltip))),!0}catch(e){return this.debug.warn("It looks like there is a problem with your custom controls HTML",e),this.toggleNativeControls(!0),!1}},createIcon:function(e,t){var n="http://www.w3.org/2000/svg",i=controls.getIconUrl.call(this),o="".concat(i.cors?"":i.url,"#").concat(this.config.iconPrefix),a=document.createElementNS(n,"svg");setAttributes(a,extend(t,{"aria-hidden":"true",focusable:"false"}));var r=document.createElementNS(n,"use"),s="".concat(o,"-").concat(e);return"href"in r&&r.setAttributeNS("http://www.w3.org/1999/xlink","href",s),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s),a.appendChild(r),a},createLabel:function(e){var t=Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1]?Array.from(arguments)[1]:{},n=i18n.get(e,this.config);return createElement("span",cosmic._objectSpread2(cosmic._objectSpread2({},t),{},{class:[t.class,this.config.classNames.hidden].filter(Boolean).join(" ")}),n)},createBadge:function(e){if(is.empty(e))return null;var t=createElement("span",{class:this.config.classNames.menu.value});return t.appendChild(createElement("span",{class:this.config.classNames.menu.badge},e)),t},createButton:function(e,t){var n=this,i=extend({},t),o=toCamelCase(e),a={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach((function(e){Object.keys(i).includes(e)&&(a[e]=i[e],delete i[e])})),"button"!==a.element||Object.keys(i).includes("type")||(i.type="button"),Object.keys(i).includes("class")?i.class.split(" ").some((function(e){return e===n.config.classNames.control}))||extend(i,{class:"".concat(i.class," ").concat(this.config.classNames.control)}):i.class=this.config.classNames.control,e){case"play":a.toggle=!0,a.label="play",a.labelPressed="pause",a.icon="play",a.iconPressed="pause";break;case"mute":a.toggle=!0,a.label="mute",a.labelPressed="unmute",a.icon="volume",a.iconPressed="muted";break;case"captions":a.toggle=!0,a.label="enableCaptions",a.labelPressed="disableCaptions",a.icon="captions-off",a.iconPressed="captions-on";break;case"fullscreen":a.toggle=!0,a.label="enterFullscreen",a.labelPressed="exitFullscreen",a.icon="enter-fullscreen",a.iconPressed="exit-fullscreen";break;case"play-large":i.class+=" ".concat(this.config.classNames.control,"--overlaid"),o="play",a.label="play",a.icon="play";break;default:is.empty(a.label)&&(a.label=o),is.empty(a.icon)&&(a.icon=e)}var r=createElement(a.element);return a.toggle?(r.appendChild(controls.createIcon.call(this,a.iconPressed,{class:"icon--pressed"})),r.appendChild(controls.createIcon.call(this,a.icon,{class:"icon--not-pressed"})),r.appendChild(controls.createLabel.call(this,a.labelPressed,{class:"label--pressed"})),r.appendChild(controls.createLabel.call(this,a.label,{class:"label--not-pressed"}))):(r.appendChild(controls.createIcon.call(this,a.icon)),r.appendChild(controls.createLabel.call(this,a.label))),extend(i,getAttributesFromSelector(this.config.selectors.buttons[o],i)),setAttributes(r,i),"play"===o?(is.array(this.elements.buttons[o])||(this.elements.buttons[o]=[]),this.elements.buttons[o].push(r)):this.elements.buttons[o]=r,r},createRange:function(e,t){var n=createElement("input",extend(getAttributesFromSelector(this.config.selectors.inputs[e]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":i18n.get(e,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},t));return this.elements.inputs[e]=n,controls.updateRangeFill.call(this,n),RangeTouch.setup(n),n},createProgress:function(e,t){var n=createElement("progress",extend(getAttributesFromSelector(this.config.selectors.display[e]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},t));if("volume"!==e){n.appendChild(createElement("span",null,"0"));var i={played:"played",buffer:"buffered"}[e],o=i?i18n.get(i,this.config):"";n.innerText="% ".concat(o.toLowerCase())}return this.elements.display[e]=n,n},createTime:function(e,t){var n=getAttributesFromSelector(this.config.selectors.display[e],t),i=createElement("div",extend(n,{class:"".concat(n.class?n.class:""," ").concat(this.config.classNames.display.time," ").trim(),"aria-label":i18n.get(e,this.config),role:"timer"}),"00:00");return this.elements.display[e]=i,i},bindMenuItemShortcuts:function(e,t){var n=this;on.call(this,e,"keydown keyup",(function(i){if([" ","ArrowUp","ArrowDown","ArrowRight"].includes(i.key)&&(i.preventDefault(),i.stopPropagation(),"keydown"!==i.type)){var o,a=matches(e,'[role="menuitemradio"]');if(!a&&[" ","ArrowRight"].includes(i.key))controls.showMenuPanel.call(n,t,!0);else" "!==i.key&&("ArrowDown"===i.key||a&&"ArrowRight"===i.key?(o=e.nextElementSibling,is.element(o)||(o=e.parentNode.firstElementChild)):(o=e.previousElementSibling,is.element(o)||(o=e.parentNode.lastElementChild)),setFocus.call(n,o,!0))}}),!1),on.call(this,e,"keyup",(function(e){"Return"===e.key&&controls.focusFirstMenuItem.call(n,null,!0)}))},createMenuItem:function(e){var t=this,n=e.value,i=e.list,o=e.type,a=e.title,r=e.badge,s=void 0===r?null:r,c=e.checked,l=void 0!==c&&c,d=getAttributesFromSelector(this.config.selectors.inputs[o]),p=createElement("button",extend(d,{type:"button",role:"menuitemradio",class:"".concat(this.config.classNames.control," ").concat(d.class?d.class:"").trim(),"aria-checked":l,value:n})),h=createElement("span");h.innerHTML=a,is.element(s)&&h.appendChild(s),p.appendChild(h),Object.defineProperty(p,"checked",{enumerable:!0,get:function(){return"true"===p.getAttribute("aria-checked")},set:function(e){e&&Array.from(p.parentNode.children).filter((function(e){return matches(e,'[role="menuitemradio"]')})).forEach((function(e){return e.setAttribute("aria-checked","false")})),p.setAttribute("aria-checked",e?"true":"false")}}),this.listeners.bind(p,"click keyup",(function(e){if(!is.keyboardEvent(e)||" "===e.key){switch(e.preventDefault(),e.stopPropagation(),p.checked=!0,o){case"language":t.currentTrack=Number(n);break;case"quality":t.quality=n;break;case"speed":t.speed=parseFloat(n)}controls.showMenuPanel.call(t,"home",is.keyboardEvent(e))}}),o,!1),controls.bindMenuItemShortcuts.call(this,p,o),i.appendChild(p)},formatTime:function(){var e=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:0,t=Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1]&&Array.from(arguments)[1];return is.number(e)?_formatTime(e,getHours(this.duration)>0,t):e},updateTimeDisplay:function(){var e=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:null,t=Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1]?Array.from(arguments)[1]:0,n=Array.from(arguments).length>2&&void 0!==Array.from(arguments)[2]&&Array.from(arguments)[2];is.element(e)&&is.number(t)&&(e.innerText=controls.formatTime(t,n))},updateVolume:function(){this.supported.ui&&(is.element(this.elements.inputs.volume)&&controls.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),is.element(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||0===this.volume))},setRange:function(e){var t=Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1]?Array.from(arguments)[1]:0;is.element(e)&&(e.value=t,controls.updateRangeFill.call(this,e))},updateProgress:function(e){var t=this;if(this.supported.ui&&is.event(e)){var n=0;if(e)switch(e.type){case"timeupdate":case"seeking":case"seeked":n=getPercentage(this.currentTime,this.duration),"timeupdate"===e.type&&controls.setRange.call(this,this.elements.inputs.seek,n);break;case"playing":case"progress":!function(e,n){var i=is.number(n)?n:0,o=is.element(e)?e:t.elements.display.buffer;if(is.element(o)){o.value=i;var a=o.getElementsByTagName("span")[0];is.element(a)&&(a.childNodes[0].nodeValue=i)}}(this.elements.display.buffer,100*this.buffered)}}},updateRangeFill:function(e){var t=is.event(e)?e.target:e;if(is.element(t)&&"range"===t.getAttribute("type")){if(matches(t,this.config.selectors.inputs.seek)){t.setAttribute("aria-valuenow",this.currentTime);var n=controls.formatTime(this.currentTime),i=controls.formatTime(this.duration),o=i18n.get("seekLabel",this.config);t.setAttribute("aria-valuetext",o.replace("{currentTime}",n).replace("{duration}",i))}else if(matches(t,this.config.selectors.inputs.volume)){var a=100*t.value;t.setAttribute("aria-valuenow",a),t.setAttribute("aria-valuetext","".concat(a.toFixed(1),"%"))}else t.setAttribute("aria-valuenow",t.value);(browser.isWebKit||browser.isIPadOS)&&t.style.setProperty("--value",t.value/t.max*100+"%")}},updateSeekTooltip:function(e){var t,n;if(this.config.tooltips.seek&&is.element(this.elements.inputs.seek)&&is.element(this.elements.display.seekTooltip)&&0!==this.duration){var i=this.elements.display.seekTooltip,o="".concat(this.config.classNames.tooltip,"--visible"),a=function(e){return toggleClass(i,o,e)};if(this.touch)a(!1);else{var r=0,s=this.elements.progress.getBoundingClientRect();if(is.event(e))r=100/s.width*(e.pageX-s.left);else{if(!hasClass(i,o))return;r=parseFloat(i.style.left,10)}r<0?r=0:r>100&&(r=100);var c=this.duration/100*r;i.innerText=controls.formatTime(c);var l=null===(t=this.config.markers)||void 0===t||null===(n=t.points)||void 0===n?void 0:n.find((function(e){return e.time===Math.round(c)}));l&&i.insertAdjacentHTML("afterbegin","".concat(l.label,"<br>")),i.style.left="".concat(r,"%"),is.event(e)&&["mouseenter","mouseleave"].includes(e.type)&&a("mouseenter"===e.type)}}},timeUpdate:function(e){var t=!is.element(this.elements.display.duration)&&this.config.invertTime;controls.updateTimeDisplay.call(this,this.elements.display.currentTime,t?this.duration-this.currentTime:this.currentTime,t),e&&"timeupdate"===e.type&&this.media.seeking||controls.updateProgress.call(this,e)},durationUpdate:function(){if(this.supported.ui&&(this.config.invertTime||!this.currentTime)){if(this.duration>=Math.pow(2,32))return toggleHidden(this.elements.display.currentTime,!0),void toggleHidden(this.elements.progress,!0);is.element(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);var e=is.element(this.elements.display.duration);!e&&this.config.displayDuration&&this.paused&&controls.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),e&&controls.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),this.config.markers.enabled&&controls.setMarkers.call(this),controls.updateSeekTooltip.call(this)}},toggleMenuButton:function(e,t){toggleHidden(this.elements.settings.buttons[e],!t)},updateSetting:function(e,t,n){var i=this.elements.settings.panels[e],o=null,a=t;if("captions"===e)o=this.currentTrack;else{if(o=is.empty(n)?this[e]:n,is.empty(o)&&(o=this.config[e].default),!is.empty(this.options[e])&&!this.options[e].includes(o))return void this.debug.warn("Unsupported value of '".concat(o,"' for ").concat(e));if(!this.config[e].options.includes(o))return void this.debug.warn("Disabled value of '".concat(o,"' for ").concat(e))}if(is.element(a)||(a=i&&i.querySelector('[role="menu"]')),is.element(a)){this.elements.settings.buttons[e].querySelector(".".concat(this.config.classNames.menu.value)).innerHTML=controls.getLabel.call(this,e,o);var r=a&&a.querySelector('[value="'.concat(o,'"]'));is.element(r)&&(r.checked=!0)}},getLabel:function(e,t){switch(e){case"speed":return 1===t?i18n.get("normal",this.config):"".concat(t,"&times;");case"quality":if(is.number(t)){var n=i18n.get("qualityLabel.".concat(t),this.config);return n.length?n:"".concat(t,"p")}return toTitleCase(t);case"captions":return captions.getLabel.call(this);default:return null}},setQualityMenu:function(e){var t=this;if(is.element(this.elements.settings.panels.quality)){var n="quality",i=this.elements.settings.panels.quality.querySelector('[role="menu"]');is.array(e)&&(this.options.quality=dedupe(e).filter((function(e){return t.config.quality.options.includes(e)})));var o=!is.empty(this.options.quality)&&this.options.quality.length>1;if(controls.toggleMenuButton.call(this,n,o),emptyElement(i),controls.checkMenu.call(this),o){var a=function(e){var n=i18n.get("qualityBadge.".concat(e),t.config);return n.length?controls.createBadge.call(t,n):null};this.options.quality.sort((function(e,n){var i=t.config.quality.options;return i.indexOf(e)>i.indexOf(n)?1:-1})).forEach((function(e){controls.createMenuItem.call(t,{value:e,list:i,type:n,title:controls.getLabel.call(t,"quality",e),badge:a(e)})})),controls.updateSetting.call(this,n,i)}}},setCaptionsMenu:function(){var e=this;if(is.element(this.elements.settings.panels.captions)){var t="captions",n=this.elements.settings.panels.captions.querySelector('[role="menu"]'),i=captions.getTracks.call(this),o=Boolean(i.length);if(controls.toggleMenuButton.call(this,t,o),emptyElement(n),controls.checkMenu.call(this),o){var a=i.map((function(t,i){return{value:i,checked:e.captions.toggled&&e.currentTrack===i,title:captions.getLabel.call(e,t),badge:t.language&&controls.createBadge.call(e,t.language.toUpperCase()),list:n,type:"language"}}));a.unshift({value:-1,checked:!this.captions.toggled,title:i18n.get("disabled",this.config),list:n,type:"language"}),a.forEach(controls.createMenuItem.bind(this)),controls.updateSetting.call(this,t,n)}}},setSpeedMenu:function(){var e=this;if(is.element(this.elements.settings.panels.speed)){var t="speed",n=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter((function(t){return t>=e.minimumSpeed&&t<=e.maximumSpeed}));var i=!is.empty(this.options.speed)&&this.options.speed.length>1;controls.toggleMenuButton.call(this,t,i),emptyElement(n),controls.checkMenu.call(this),i&&(this.options.speed.forEach((function(i){controls.createMenuItem.call(e,{value:i,list:n,type:t,title:controls.getLabel.call(e,"speed",i)})})),controls.updateSetting.call(this,t,n))}},checkMenu:function(){var e=this.elements.settings.buttons,t=!is.empty(e)&&Object.values(e).some((function(e){return!e.hidden}));toggleHidden(this.elements.settings.menu,!t)},focusFirstMenuItem:function(e){var t=Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1]&&Array.from(arguments)[1];if(!this.elements.settings.popup.hidden){var n=e;is.element(n)||(n=Object.values(this.elements.settings.panels).find((function(e){return!e.hidden})));var i=n.querySelector('[role^="menuitem"]');setFocus.call(this,i,t)}},toggleMenu:function(e){var t=this.elements.settings.popup,n=this.elements.buttons.settings;if(is.element(t)&&is.element(n)){var i=t.hidden,o=i;if(is.boolean(e))o=e;else if(is.keyboardEvent(e)&&"Escape"===e.key)o=!1;else if(is.event(e)){var a=is.function(e.composedPath)?e.composedPath()[0]:e.target,r=t.contains(a);if(r||!r&&e.target!==n&&o)return}n.setAttribute("aria-expanded",o),toggleHidden(t,!o),toggleClass(this.elements.container,this.config.classNames.menu.open,o),o&&is.keyboardEvent(e)?controls.focusFirstMenuItem.call(this,null,!0):o||i||setFocus.call(this,n,is.keyboardEvent(e))}},getMenuSize:function(e){var t=e.cloneNode(!0);t.style.position="absolute",t.style.opacity=0,t.removeAttribute("hidden"),e.parentNode.appendChild(t);var n=t.scrollWidth,i=t.scrollHeight;return removeElement(t),{width:n,height:i}},showMenuPanel:function(){var e=this,t=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:"",n=Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1]&&Array.from(arguments)[1],i=this.elements.container.querySelector("#plyr-settings-".concat(this.id,"-").concat(t));if(is.element(i)){var o=i.parentNode,a=Array.from(o.children).find((function(e){return!e.hidden}));if(support.transitions&&!support.reducedMotion){o.style.width="".concat(a.scrollWidth,"px"),o.style.height="".concat(a.scrollHeight,"px");var r=controls.getMenuSize.call(this,i),s=function(t){t.target===o&&["width","height"].includes(t.propertyName)&&(o.style.width="",o.style.height="",off.call(e,o,transitionEndEvent,s))};on.call(this,o,transitionEndEvent,s),o.style.width="".concat(r.width,"px"),o.style.height="".concat(r.height,"px")}toggleHidden(a,!0),toggleHidden(i,!1),controls.focusFirstMenuItem.call(this,i,n)}},setDownloadUrl:function(){var e=this.elements.buttons.download;is.element(e)&&e.setAttribute("href",this.download)},create:function(e){var t=this,n=controls.bindMenuItemShortcuts,i=controls.createButton,o=controls.createProgress,a=controls.createRange,r=controls.createTime,s=controls.setQualityMenu,c=controls.setSpeedMenu,l=controls.showMenuPanel;this.elements.controls=null,is.array(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(i.call(this,"play-large"));var d=createElement("div",getAttributesFromSelector(this.config.selectors.controls.wrapper));this.elements.controls=d;var p={class:"plyr__controls__item"};return dedupe(is.array(this.config.controls)?this.config.controls:[]).forEach((function(s){if("restart"===s&&d.appendChild(i.call(t,"restart",p)),"rewind"===s&&d.appendChild(i.call(t,"rewind",p)),"play"===s&&d.appendChild(i.call(t,"play",p)),"fast-forward"===s&&d.appendChild(i.call(t,"fast-forward",p)),"progress"===s){var c=createElement("div",{class:"".concat(p.class," plyr__progress__container")}),h=createElement("div",getAttributesFromSelector(t.config.selectors.progress));if(h.appendChild(a.call(t,"seek",{id:"plyr-seek-".concat(e.id)})),h.appendChild(o.call(t,"buffer")),t.config.tooltips.seek){var u=createElement("span",{class:t.config.classNames.tooltip},"00:00");h.appendChild(u),t.elements.display.seekTooltip=u}t.elements.progress=h,c.appendChild(t.elements.progress),d.appendChild(c)}if("current-time"===s&&d.appendChild(r.call(t,"currentTime",p)),"duration"===s&&d.appendChild(r.call(t,"duration",p)),"mute"===s||"volume"===s){var m=t.elements.volume;if(is.element(m)&&d.contains(m)||(m=createElement("div",extend({},p,{class:"".concat(p.class," plyr__volume").trim()})),t.elements.volume=m,d.appendChild(m)),"mute"===s&&m.appendChild(i.call(t,"mute")),"volume"===s&&!browser.isIos&&!browser.isIPadOS){var f={max:1,step:.05,value:t.config.volume};m.appendChild(a.call(t,"volume",extend(f,{id:"plyr-volume-".concat(e.id)})))}}if("captions"===s&&d.appendChild(i.call(t,"captions",p)),"settings"===s&&!is.empty(t.config.settings)){var g=createElement("div",extend({},p,{class:"".concat(p.class," plyr__menu").trim(),hidden:""}));g.appendChild(i.call(t,"settings",{"aria-haspopup":!0,"aria-controls":"plyr-settings-".concat(e.id),"aria-expanded":!1}));var y=createElement("div",{class:"plyr__menu__container",id:"plyr-settings-".concat(e.id),hidden:""}),v=createElement("div"),b=createElement("div",{id:"plyr-settings-".concat(e.id,"-home")}),x=createElement("div",{role:"menu"});b.appendChild(x),v.appendChild(b),t.elements.settings.panels.home=b,t.config.settings.forEach((function(i){var o=createElement("button",extend(getAttributesFromSelector(t.config.selectors.buttons.settings),{type:"button",class:"".concat(t.config.classNames.control," ").concat(t.config.classNames.control,"--forward"),role:"menuitem","aria-haspopup":!0,hidden:""}));n.call(t,o,i),on.call(t,o,"click",(function(){l.call(t,i,!1)}));var a=createElement("span",null,i18n.get(i,t.config)),r=createElement("span",{class:t.config.classNames.menu.value});r.innerHTML=e[i],a.appendChild(r),o.appendChild(a),x.appendChild(o);var s=createElement("div",{id:"plyr-settings-".concat(e.id,"-").concat(i),hidden:""}),c=createElement("button",{type:"button",class:"".concat(t.config.classNames.control," ").concat(t.config.classNames.control,"--back")});c.appendChild(createElement("span",{"aria-hidden":!0},i18n.get(i,t.config))),c.appendChild(createElement("span",{class:t.config.classNames.hidden},i18n.get("menuBack",t.config))),on.call(t,s,"keydown",(function(e){"ArrowLeft"===e.key&&(e.preventDefault(),e.stopPropagation(),l.call(t,"home",!0))}),!1),on.call(t,c,"click",(function(){l.call(t,"home",!1)})),s.appendChild(c),s.appendChild(createElement("div",{role:"menu"})),v.appendChild(s),t.elements.settings.buttons[i]=o,t.elements.settings.panels[i]=s})),y.appendChild(v),g.appendChild(y),d.appendChild(g),t.elements.settings.popup=y,t.elements.settings.menu=g}if("pip"===s&&support.pip&&d.appendChild(i.call(t,"pip",p)),"airplay"===s&&support.airplay&&d.appendChild(i.call(t,"airplay",p)),"download"===s){var _=extend({},p,{element:"a",href:t.download,target:"_blank"});t.isHTML5&&(_.download="");var k=t.config.urls.download;!is.url(k)&&t.isEmbed&&extend(_,{icon:"logo-".concat(t.provider),label:t.provider}),d.appendChild(i.call(t,"download",_))}"fullscreen"===s&&d.appendChild(i.call(t,"fullscreen",p))})),this.isHTML5&&s.call(this,html5.getQualityOptions.call(this)),c.call(this),d},inject:function(){var e=this;if(this.config.loadSprite){var t=controls.getIconUrl.call(this);t.cors&&_loadSprite(t.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());var n=null;this.elements.controls=null;var i,o={id:this.id,seektime:this.config.seekTime,title:this.config.title},a=!0;if(is.function(this.config.controls)&&(this.config.controls=this.config.controls.call(this,o)),this.config.controls||(this.config.controls=[]),is.element(this.config.controls)||is.string(this.config.controls)?n=this.config.controls:(n=controls.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:captions.getLabel.call(this)}),a=!1),a&&is.string(this.config.controls)&&(n=function(e){var t=e;return Object.entries(o).forEach((function(e){var n=cosmic._slicedToArray(e,2),i=n[0],o=n[1];t=replaceAll(t,"{".concat(i,"}"),o)})),t}(n)),is.string(this.config.selectors.controls.container)&&(i=document.querySelector(this.config.selectors.controls.container)),is.element(i)||(i=this.elements.container),i[is.element(n)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",n),is.element(this.elements.controls)||controls.findElements.call(this),!is.empty(this.elements.buttons)){var r=function(t){var n=e.config.classNames.controlPressed;t.setAttribute("aria-pressed","false"),Object.defineProperty(t,"pressed",{configurable:!0,enumerable:!0,get:function(){return hasClass(t,n)},set:function(){var e=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]&&Array.from(arguments)[0];toggleClass(t,n,e),t.setAttribute("aria-pressed",e?"true":"false")}})};Object.values(this.elements.buttons).filter(Boolean).forEach((function(e){is.array(e)||is.nodeList(e)?Array.from(e).filter(Boolean).forEach(r):r(e)}))}if(browser.isEdge&&repaint(i),this.config.tooltips.controls){var s=this.config,c=s.classNames,l=s.selectors,d="".concat(l.controls.wrapper," ").concat(l.labels," .").concat(c.hidden),p=getElements.call(this,d);Array.from(p).forEach((function(t){toggleClass(t,e.config.classNames.hidden,!1),toggleClass(t,e.config.classNames.tooltip,!0)}))}},setMediaMetadata:function(){try{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:this.config.mediaMetadata.title,artist:this.config.mediaMetadata.artist,album:this.config.mediaMetadata.album,artwork:this.config.mediaMetadata.artwork}))}catch(e){}},setMarkers:function(){var e,t,n=this;if(this.duration&&!this.elements.markers){var i=null===(e=this.config.markers)||void 0===e||null===(t=e.points)||void 0===t?void 0:t.filter((function(e){var t=e.time;return t>0&&t<n.duration}));if(null!=i&&i.length){var o=document.createDocumentFragment(),a=document.createDocumentFragment(),r=null,s="".concat(this.config.classNames.tooltip,"--visible"),c=function(e){return toggleClass(r,s,e)};i.forEach((function(e){var t=createElement("span",{class:n.config.classNames.marker},""),i=e.time/n.duration*100+"%";r&&(t.addEventListener("mouseenter",(function(){e.label||(r.style.left=i,r.innerHTML=e.label,c(!0))})),t.addEventListener("mouseleave",(function(){c(!1)}))),t.addEventListener("click",(function(){n.currentTime=e.time})),t.style.left=i,a.appendChild(t)})),o.appendChild(a),this.config.tooltips.seek||(r=createElement("span",{class:this.config.classNames.tooltip},""),o.appendChild(r)),this.elements.markers={points:a,tip:r},this.elements.progress.appendChild(o)}}}};function parseUrl(e){var t=e;if(!(Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1])||Array.from(arguments)[1]){var n=document.createElement("a");n.href=t,t=n.href}try{return new URL(t)}catch(e){return null}}function buildUrlParams(e){var t=new URLSearchParams;return is.object(e)&&Object.entries(e).forEach((function(e){var n=cosmic._slicedToArray(e,2),i=n[0],o=n[1];t.set(i,o)})),t}var captions={setup:function(){var e;if(this.supported.ui)if(!this.isVideo||this.isYouTube||this.isHTML5&&!support.textTracks)is.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&controls.setCaptionsMenu.call(this);else{if(is.element(this.elements.captions)||(this.elements.captions=createElement("div",getAttributesFromSelector(this.config.selectors.captions)),this.elements.captions.setAttribute("dir","auto"),insertAfter(this.elements.captions,this.elements.wrapper)),browser.isIE&&window.URL){var t=this.media.querySelectorAll("track");Array.from(t).forEach((function(e){var t=e.getAttribute("src"),n=parseUrl(t);null!==n&&n.hostname!==window.location.href.hostname&&["http:","https:"].includes(n.protocol)&&fetch$1(t,"blob").then((function(t){e.setAttribute("src",window.URL.createObjectURL(t))})).catch((function(){removeElement(e)}))}))}var n=dedupe((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map((function(e){return e.split("-")[0]}))),i=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();"auto"===i&&(e=n,i=cosmic._slicedToArray(e,1)[0]);var o=this.storage.get("captions");if(is.boolean(o)||(o=this.config.captions.active),Object.assign(this.captions,{toggled:!1,active:o,language:i,languages:n}),this.isHTML5){var a=this.config.captions.update?"addtrack removetrack":"removetrack";on.call(this,this.media.textTracks,a,captions.update.bind(this))}setTimeout(captions.update.bind(this),0)}},update:function(){var e=this,t=captions.getTracks.call(this,!0),n=this.captions,i=n.active,o=n.language,a=n.meta,r=n.currentTrackNode,s=Boolean(t.find((function(e){return e.language===o})));this.isHTML5&&this.isVideo&&t.filter((function(e){return!a.get(e)})).forEach((function(t){e.debug.log("Track added",t),a.set(t,{default:"showing"===t.mode}),"showing"===t.mode&&(t.mode="hidden"),on.call(e,t,"cuechange",(function(){return captions.updateCues.call(e)}))})),(s&&this.language!==o||!t.includes(r))&&(captions.setLanguage.call(this,o),captions.toggle.call(this,i&&s)),this.elements&&toggleClass(this.elements.container,this.config.classNames.captions.enabled,!is.empty(t)),is.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&controls.setCaptionsMenu.call(this)},toggle:function(e){var t=this,n=!(Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1])||Array.from(arguments)[1];if(this.supported.ui){var i=this.captions.toggled,o=this.config.classNames.captions.active,a=is.nullOrUndefined(e)?!i:e;if(a!==i){if(n||(this.captions.active=a,this.storage.set({captions:a})),!this.language&&a&&!n){var r=captions.getTracks.call(this),s=captions.findTrack.call(this,[this.captions.language].concat(cosmic._toConsumableArray(this.captions.languages)),!0);return this.captions.language=s.language,void captions.set.call(this,r.indexOf(s))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=a),toggleClass(this.elements.container,o,a),this.captions.toggled=a,controls.updateSetting.call(this,"captions"),triggerEvent.call(this,this.media,a?"captionsenabled":"captionsdisabled")}setTimeout((function(){a&&t.captions.toggled&&(t.captions.currentTrackNode.mode="hidden")}))}},set:function(e){var t=!(Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1])||Array.from(arguments)[1],n=captions.getTracks.call(this);if(-1!==e)if(is.number(e))if(e in n){if(this.captions.currentTrack!==e){this.captions.currentTrack=e;var i=n[e],o=(i||{}).language;this.captions.currentTrackNode=i,controls.updateSetting.call(this,"captions"),t||(this.captions.language=o,this.storage.set({language:o})),this.isVimeo&&this.embed.enableTextTrack(o),triggerEvent.call(this,this.media,"languagechange")}captions.toggle.call(this,!0,t),this.isHTML5&&this.isVideo&&captions.updateCues.call(this)}else this.debug.warn("Track not found",e);else this.debug.warn("Invalid caption argument",e);else captions.toggle.call(this,!1,t)},setLanguage:function(e){var t=!(Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1])||Array.from(arguments)[1];if(is.string(e)){var n=e.toLowerCase();this.captions.language=n;var i=captions.getTracks.call(this),o=captions.findTrack.call(this,[n]);captions.set.call(this,i.indexOf(o),t)}else this.debug.warn("Invalid language argument",e)},getTracks:function(){var e=this,t=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]&&Array.from(arguments)[0];return Array.from((this.media||{}).textTracks||[]).filter((function(n){return!e.isHTML5||t||e.captions.meta.has(n)})).filter((function(e){return["captions","subtitles"].includes(e.kind)}))},findTrack:function(e){var t,n=this,i=Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1]&&Array.from(arguments)[1],o=captions.getTracks.call(this),a=function(e){return Number((n.captions.meta.get(e)||{}).default)},r=Array.from(o).sort((function(e,t){return a(t)-a(e)}));return e.every((function(e){return t=r.find((function(t){return t.language===e})),!t})),t||(i?r[0]:void 0)},getCurrentTrack:function(){return captions.getTracks.call(this)[this.currentTrack]},getLabel:function(e){var t=e;return!is.track(t)&&support.textTracks&&this.captions.toggled&&(t=captions.getCurrentTrack.call(this)),is.track(t)?is.empty(t.label)?is.empty(t.language)?i18n.get("enabled",this.config):e.language.toUpperCase():t.label:i18n.get("disabled",this.config)},updateCues:function(e){if(this.supported.ui)if(is.element(this.elements.captions))if(is.nullOrUndefined(e)||Array.isArray(e)){var t=e;if(!t){var n=captions.getCurrentTrack.call(this);t=Array.from((n||{}).activeCues||[]).map((function(e){return e.getCueAsHTML()})).map(getHTML)}var i=t.map((function(e){return e.trim()})).join("\n");if(i!==this.elements.captions.innerHTML){emptyElement(this.elements.captions);var o=createElement("span",getAttributesFromSelector(this.config.selectors.caption));o.innerHTML=i,this.elements.captions.appendChild(o),triggerEvent.call(this,this.media,"cuechange")}}else this.debug.warn("updateCues: Invalid input",e);else this.debug.warn("No captions element to render to")}},defaults={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.7.8/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",marker:"plyr__progress__marker",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1},mediaMetadata:{title:"",artist:"",album:"",artwork:[]},markers:{enabled:!1,points:[]}},pip={active:"picture-in-picture",inactive:"inline"},providers={html5:"html5",youtube:"youtube",vimeo:"vimeo"},types={audio:"audio",video:"video"};function getProviderByUrl(e){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(e)?providers.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(e)?providers.vimeo:null}var noop=function(){},Console=function(){return cosmic._createClass((function e(){var t=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]&&Array.from(arguments)[0];cosmic._classCallCheck(this,e),this.enabled=window.console&&t,this.enabled&&this.log("Debugging enabled")}),[{key:"log",get:function(){return this.enabled?Function.prototype.bind.call(console.log,console):noop}},{key:"warn",get:function(){return this.enabled?Function.prototype.bind.call(console.warn,console):noop}},{key:"error",get:function(){return this.enabled?Function.prototype.bind.call(console.error,console):noop}}])}(),Fullscreen=function(){function e(t){var n=this;cosmic._classCallCheck(this,e),_defineProperty$1(this,"onChange",(function(){if(n.supported){var e=n.player.elements.buttons.fullscreen;is.element(e)&&(e.pressed=n.active);var t=n.target===n.player.media?n.target:n.player.elements.container;triggerEvent.call(n.player,t,n.active?"enterfullscreen":"exitfullscreen",!0)}})),_defineProperty$1(this,"toggleFallback",(function(){var e,t,i=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]&&Array.from(arguments)[0];if(i?n.scrollPosition={x:null!==(e=window.scrollX)&&void 0!==e?e:0,y:null!==(t=window.scrollY)&&void 0!==t?t:0}:window.scrollTo(n.scrollPosition.x,n.scrollPosition.y),document.body.style.overflow=i?"hidden":"",toggleClass(n.target,n.player.config.classNames.fullscreen.fallback,i),browser.isIos){var o=document.head.querySelector('meta[name="viewport"]'),a="viewport-fit=cover";o||(o=document.createElement("meta")).setAttribute("name","viewport");var r=is.string(o.content)&&o.content.includes(a);i?(n.cleanupViewport=!r,r||(o.content+=",".concat(a))):n.cleanupViewport&&(o.content=o.content.split(",").filter((function(e){return e.trim()!==a})).join(","))}n.onChange()})),_defineProperty$1(this,"trapFocus",(function(e){if(!browser.isIos&&!browser.isIPadOS&&n.active&&"Tab"===e.key){var t=document.activeElement,i=getElements.call(n.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),o=cosmic._slicedToArray(i,1)[0],a=i[i.length-1];t!==a||e.shiftKey?t===o&&e.shiftKey&&(a.focus(),e.preventDefault()):(o.focus(),e.preventDefault())}})),_defineProperty$1(this,"update",(function(){var t;n.supported?(t=n.forceFallback?"Fallback (forced)":e.nativeSupported?"Native":"Fallback",n.player.debug.log("".concat(t," fullscreen enabled"))):n.player.debug.log("Fullscreen not supported and fallback disabled");toggleClass(n.player.elements.container,n.player.config.classNames.fullscreen.enabled,n.supported)})),_defineProperty$1(this,"enter",(function(){n.supported&&(browser.isIos&&n.player.config.fullscreen.iosNative?n.player.isVimeo?n.player.embed.requestFullscreen():n.target.webkitEnterFullscreen():!e.nativeSupported||n.forceFallback?n.toggleFallback(!0):n.prefix?is.empty(n.prefix)||n.target["".concat(n.prefix,"Request").concat(n.property)]():n.target.requestFullscreen({navigationUI:"hide"}))})),_defineProperty$1(this,"exit",(function(){if(n.supported)if(browser.isIos&&n.player.config.fullscreen.iosNative)n.player.isVimeo?n.player.embed.exitFullscreen():n.target.webkitEnterFullscreen(),silencePromise(n.player.play());else if(!e.nativeSupported||n.forceFallback)n.toggleFallback(!1);else if(n.prefix){if(!is.empty(n.prefix)){var t="moz"===n.prefix?"Cancel":"Exit";document["".concat(n.prefix).concat(t).concat(n.property)]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)})),_defineProperty$1(this,"toggle",(function(){n.active?n.exit():n.enter()})),this.player=t,this.prefix=e.prefix,this.property=e.property,this.scrollPosition={x:0,y:0},this.forceFallback="force"===t.config.fullscreen.fallback,this.player.elements.fullscreen=t.config.fullscreen.container&&closest$1(this.player.elements.container,t.config.fullscreen.container),on.call(this.player,document,"ms"===this.prefix?"MSFullscreenChange":"".concat(this.prefix,"fullscreenchange"),(function(){n.onChange()})),on.call(this.player,this.player.elements.container,"dblclick",(function(e){is.element(n.player.elements.controls)&&n.player.elements.controls.contains(e.target)||n.player.listeners.proxy(e,n.toggle,"fullscreen")})),on.call(this,this.player.elements.container,"keydown",(function(e){return n.trapFocus(e)})),this.update()}return cosmic._createClass(e,[{key:"useNative",get:function(){return e.nativeSupported&&!this.forceFallback}},{key:"supported",get:function(){return[this.player.config.fullscreen.enabled,this.player.isVideo,e.nativeSupported||this.player.config.fullscreen.fallback,!this.player.isYouTube||e.nativeSupported||!browser.isIos||this.player.config.playsinline&&!this.player.config.fullscreen.iosNative].every(Boolean)}},{key:"active",get:function(){if(!this.supported)return!1;if(!e.nativeSupported||this.forceFallback)return hasClass(this.target,this.player.config.classNames.fullscreen.fallback);var t=this.prefix?this.target.getRootNode()["".concat(this.prefix).concat(this.property,"Element")]:this.target.getRootNode().fullscreenElement;return t&&t.shadowRoot?t===this.target.getRootNode().host:t===this.target}},{key:"target",get:function(){var e;return browser.isIos&&this.player.config.fullscreen.iosNative?this.player.media:null!==(e=this.player.elements.fullscreen)&&void 0!==e?e:this.player.elements.container}}],[{key:"nativeSupported",get:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},{key:"prefix",get:function(){if(is.function(document.exitFullscreen))return"";var e="";return["webkit","moz","ms"].some((function(t){return!(!is.function(document["".concat(t,"ExitFullscreen")])&&!is.function(document["".concat(t,"CancelFullScreen")])||(e=t,0))})),e}},{key:"property",get:function(){return"moz"===this.prefix?"FullScreen":"Fullscreen"}}])}();function loadImage(e){var t=Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1]?Array.from(arguments)[1]:1;return new Promise((function(n,i){var o=new Image,a=function(){delete o.onload,delete o.onerror,(o.naturalWidth>=t?n:i)(o)};Object.assign(o,{onload:a,onerror:a,src:e})}))}var ui={addStyleHook:function(){toggleClass(this.elements.container,this.config.selectors.container.replace(".",""),!0),toggleClass(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls:function(){Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]&&Array.from(arguments)[0]&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build:function(){var e=this;if(this.listeners.media(),!this.supported.ui)return this.debug.warn("Basic support only for ".concat(this.provider," ").concat(this.type)),void ui.toggleNativeControls.call(this,!0);is.element(this.elements.controls)||(controls.inject.call(this),this.listeners.controls()),ui.toggleNativeControls.call(this),this.isHTML5&&captions.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,controls.updateVolume.call(this),controls.timeUpdate.call(this),controls.durationUpdate.call(this),ui.checkPlaying.call(this),toggleClass(this.elements.container,this.config.classNames.pip.supported,support.pip&&this.isHTML5&&this.isVideo),toggleClass(this.elements.container,this.config.classNames.airplay.supported,support.airplay&&this.isHTML5),toggleClass(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout((function(){triggerEvent.call(e,e.media,"ready")}),0),ui.setTitle.call(this),this.poster&&ui.setPoster.call(this,this.poster,!1).catch((function(){})),this.config.duration&&controls.durationUpdate.call(this),this.config.mediaMetadata&&controls.setMediaMetadata.call(this)},setTitle:function(){var e=i18n.get("play",this.config);if(is.string(this.config.title)&&!is.empty(this.config.title)&&(e+=", ".concat(this.config.title)),Array.from(this.elements.buttons.play||[]).forEach((function(t){t.setAttribute("aria-label",e)})),this.isEmbed){var t=getElement.call(this,"iframe");if(!is.element(t))return;var n=is.empty(this.config.title)?"video":this.config.title,i=i18n.get("frameTitle",this.config);t.setAttribute("title",i.replace("{title}",n))}},togglePoster:function(e){toggleClass(this.elements.container,this.config.classNames.posterEnabled,e)},setPoster:function(e){var t=this;return(!(Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1])||Array.from(arguments)[1])&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",e),this.elements.poster.removeAttribute("hidden"),ready.call(this).then((function(){return loadImage(e)})).catch((function(n){throw e===t.poster&&ui.togglePoster.call(t,!1),n})).then((function(){if(e!==t.poster)throw new Error("setPoster cancelled by later call to setPoster")})).then((function(){return Object.assign(t.elements.poster.style,{backgroundImage:"url('".concat(e,"')"),backgroundSize:""}),ui.togglePoster.call(t,!0),e})))},checkPlaying:function(e){var t=this;toggleClass(this.elements.container,this.config.classNames.playing,this.playing),toggleClass(this.elements.container,this.config.classNames.paused,this.paused),toggleClass(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach((function(e){Object.assign(e,{pressed:t.playing}),e.setAttribute("aria-label",i18n.get(t.playing?"pause":"play",t.config))})),is.event(e)&&"timeupdate"===e.type||ui.toggleControls.call(this)},checkLoading:function(e){var t=this;this.loading=["stalled","waiting"].includes(e.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout((function(){toggleClass(t.elements.container,t.config.classNames.loading,t.loading),ui.toggleControls.call(t)}),this.loading?250:0)},toggleControls:function(e){var t=this.elements.controls;if(t&&this.config.hideControls){var n=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(Boolean(e||this.loading||this.paused||t.pressed||t.hover||n))}},migrateStyles:function(){var e=this;Object.values(cosmic._objectSpread2({},this.media.style)).filter((function(e){return!is.empty(e)&&is.string(e)&&e.startsWith("--plyr")})).forEach((function(t){e.elements.container.style.setProperty(t,e.media.style.getPropertyValue(t)),e.media.style.removeProperty(t)})),is.empty(this.media.style)&&this.media.removeAttribute("style")}},Listeners=function(){return cosmic._createClass((function e(t){var n=this;cosmic._classCallCheck(this,e),_defineProperty$1(this,"firstTouch",(function(){var e=n.player,t=e.elements;e.touch=!0,toggleClass(t.container,e.config.classNames.isTouch,!0)})),_defineProperty$1(this,"global",(function(){var e=!(Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0])||Array.from(arguments)[0],t=n.player;t.config.keyboard.global&&toggleListener.call(t,window,"keydown keyup",n.handleKey,e,!1),toggleListener.call(t,document.body,"click",n.toggleMenu,e),once.call(t,document.body,"touchstart",n.firstTouch)})),_defineProperty$1(this,"container",(function(){var e=n.player,t=e.config,i=e.elements,o=e.timers;!t.keyboard.global&&t.keyboard.focused&&on.call(e,i.container,"keydown keyup",n.handleKey,!1),on.call(e,i.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",(function(t){var n=i.controls;n&&"enterfullscreen"===t.type&&(n.pressed=!1,n.hover=!1);var a=0;["touchstart","touchmove","mousemove"].includes(t.type)&&(ui.toggleControls.call(e,!0),a=e.touch?3e3:2e3),clearTimeout(o.controls),o.controls=setTimeout((function(){return ui.toggleControls.call(e,!1)}),a)}));var a=function(){if(e.isVimeo&&!e.config.vimeo.premium){var t=i.wrapper,n=e.fullscreen.active,o=getAspectRatio.call(e),a=cosmic._slicedToArray(o,2),r=a[0],s=a[1],c=supportsCSS("aspect-ratio: ".concat(r," / ").concat(s));if(n){var l=getViewportSize(),d=cosmic._slicedToArray(l,2),p=d[0],h=d[1],u=p/h>r/s;c?(t.style.width=u?"auto":"100%",t.style.height=u?"100%":"auto"):(t.style.maxWidth=u?h/s*r+"px":null,t.style.margin=u?"0 auto":null)}else c?(t.style.width=null,t.style.height=null):(t.style.maxWidth=null,t.style.margin=null)}},r=function(){clearTimeout(o.resized),o.resized=setTimeout(a,50)};on.call(e,i.container,"enterfullscreen exitfullscreen",(function(t){e.fullscreen.target===i.container&&(!e.isEmbed&&is.empty(e.config.ratio)||(a(),("enterfullscreen"===t.type?on:off).call(e,window,"resize",r)))}))})),_defineProperty$1(this,"media",(function(){var e=n.player,t=e.elements;if(on.call(e,e.media,"timeupdate seeking seeked",(function(t){return controls.timeUpdate.call(e,t)})),on.call(e,e.media,"durationchange loadeddata loadedmetadata",(function(t){return controls.durationUpdate.call(e,t)})),on.call(e,e.media,"ended",(function(){e.isHTML5&&e.isVideo&&e.config.resetOnEnd&&(e.restart(),e.pause())})),on.call(e,e.media,"progress playing seeking seeked",(function(t){return controls.updateProgress.call(e,t)})),on.call(e,e.media,"volumechange",(function(t){return controls.updateVolume.call(e,t)})),on.call(e,e.media,"playing play pause ended emptied timeupdate",(function(t){return ui.checkPlaying.call(e,t)})),on.call(e,e.media,"waiting canplay seeked playing",(function(t){return ui.checkLoading.call(e,t)})),e.supported.ui&&e.config.clickToPlay&&!e.isAudio){var i=getElement.call(e,".".concat(e.config.classNames.video));if(!is.element(i))return;on.call(e,t.container,"click",(function(o){([t.container,i].includes(o.target)||i.contains(o.target))&&(e.touch&&e.config.hideControls||(e.ended?(n.proxy(o,e.restart,"restart"),n.proxy(o,(function(){silencePromise(e.play())}),"play")):n.proxy(o,(function(){silencePromise(e.togglePlay())}),"play")))}))}e.supported.ui&&e.config.disableContextMenu&&on.call(e,t.wrapper,"contextmenu",(function(e){e.preventDefault()}),!1),on.call(e,e.media,"volumechange",(function(){e.storage.set({volume:e.volume,muted:e.muted})})),on.call(e,e.media,"ratechange",(function(){controls.updateSetting.call(e,"speed"),e.storage.set({speed:e.speed})})),on.call(e,e.media,"qualitychange",(function(t){controls.updateSetting.call(e,"quality",null,t.detail.quality)})),on.call(e,e.media,"ready qualitychange",(function(){controls.setDownloadUrl.call(e)}));var o=e.config.events.concat(["keyup","keydown"]).join(" ");on.call(e,e.media,o,(function(n){var i=n.detail,o=void 0===i?{}:i;"error"===n.type&&(o=e.media.error),triggerEvent.call(e,t.container,n.type,!0,o)}))})),_defineProperty$1(this,"proxy",(function(e,t,i){var o=n.player,a=o.config.listeners[i],r=!0;is.function(a)&&(r=a.call(o,e)),!1!==r&&is.function(t)&&t.call(o,e)})),_defineProperty$1(this,"bind",(function(e,t,i,o){var a=!(Array.from(arguments).length>4&&void 0!==Array.from(arguments)[4])||Array.from(arguments)[4],r=n.player,s=r.config.listeners[o],c=is.function(s);on.call(r,e,t,(function(e){return n.proxy(e,i,o)}),a&&!c)})),_defineProperty$1(this,"controls",(function(){var e=n.player,t=e.elements,i=browser.isIE?"change":"input";if(t.buttons.play&&Array.from(t.buttons.play).forEach((function(t){n.bind(t,"click",(function(){silencePromise(e.togglePlay())}),"play")})),n.bind(t.buttons.restart,"click",e.restart,"restart"),n.bind(t.buttons.rewind,"click",(function(){e.lastSeekTime=Date.now(),e.rewind()}),"rewind"),n.bind(t.buttons.fastForward,"click",(function(){e.lastSeekTime=Date.now(),e.forward()}),"fastForward"),n.bind(t.buttons.mute,"click",(function(){e.muted=!e.muted}),"mute"),n.bind(t.buttons.captions,"click",(function(){return e.toggleCaptions()})),n.bind(t.buttons.download,"click",(function(){triggerEvent.call(e,e.media,"download")}),"download"),n.bind(t.buttons.fullscreen,"click",(function(){e.fullscreen.toggle()}),"fullscreen"),n.bind(t.buttons.pip,"click",(function(){e.pip="toggle"}),"pip"),n.bind(t.buttons.airplay,"click",e.airplay,"airplay"),n.bind(t.buttons.settings,"click",(function(t){t.stopPropagation(),t.preventDefault(),controls.toggleMenu.call(e,t)}),null,!1),n.bind(t.buttons.settings,"keyup",(function(t){[" ","Enter"].includes(t.key)&&("Enter"!==t.key?(t.preventDefault(),t.stopPropagation(),controls.toggleMenu.call(e,t)):controls.focusFirstMenuItem.call(e,null,!0))}),null,!1),n.bind(t.settings.menu,"keydown",(function(t){"Escape"===t.key&&controls.toggleMenu.call(e,t)})),n.bind(t.inputs.seek,"mousedown mousemove",(function(e){var n=t.progress.getBoundingClientRect(),i=100/n.width*(e.pageX-n.left);e.currentTarget.setAttribute("seek-value",i)})),n.bind(t.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",(function(t){var n=t.currentTarget,i="play-on-seeked";if(!is.keyboardEvent(t)||["ArrowLeft","ArrowRight"].includes(t.key)){e.lastSeekTime=Date.now();var o=n.hasAttribute(i),a=["mouseup","touchend","keyup"].includes(t.type);o&&a?(n.removeAttribute(i),silencePromise(e.play())):!a&&e.playing&&(n.setAttribute(i,""),e.pause())}})),browser.isIos){var o=getElements.call(e,'input[type="range"]');Array.from(o).forEach((function(e){return n.bind(e,i,(function(e){return repaint(e.target)}))}))}n.bind(t.inputs.seek,i,(function(t){var n=t.currentTarget,i=n.getAttribute("seek-value");is.empty(i)&&(i=n.value),n.removeAttribute("seek-value"),e.currentTime=i/n.max*e.duration}),"seek"),n.bind(t.progress,"mouseenter mouseleave mousemove",(function(t){return controls.updateSeekTooltip.call(e,t)})),n.bind(t.progress,"mousemove touchmove",(function(t){var n=e.previewThumbnails;n&&n.loaded&&n.startMove(t)})),n.bind(t.progress,"mouseleave touchend click",(function(){var t=e.previewThumbnails;t&&t.loaded&&t.endMove(!1,!0)})),n.bind(t.progress,"mousedown touchstart",(function(t){var n=e.previewThumbnails;n&&n.loaded&&n.startScrubbing(t)})),n.bind(t.progress,"mouseup touchend",(function(t){var n=e.previewThumbnails;n&&n.loaded&&n.endScrubbing(t)})),browser.isWebKit&&Array.from(getElements.call(e,'input[type="range"]')).forEach((function(t){n.bind(t,"input",(function(t){return controls.updateRangeFill.call(e,t.target)}))})),e.config.toggleInvert&&!is.element(t.display.duration)&&n.bind(t.display.currentTime,"click",(function(){0!==e.currentTime&&(e.config.invertTime=!e.config.invertTime,controls.timeUpdate.call(e))})),n.bind(t.inputs.volume,i,(function(t){e.volume=t.target.value}),"volume"),n.bind(t.controls,"mouseenter mouseleave",(function(n){t.controls.hover=!e.touch&&"mouseenter"===n.type})),t.fullscreen&&Array.from(t.fullscreen.children).filter((function(e){return!e.contains(t.container)})).forEach((function(i){n.bind(i,"mouseenter mouseleave",(function(n){t.controls&&(t.controls.hover=!e.touch&&"mouseenter"===n.type)}))})),n.bind(t.controls,"mousedown mouseup touchstart touchend touchcancel",(function(e){t.controls.pressed=["mousedown","touchstart"].includes(e.type)})),n.bind(t.controls,"focusin",(function(){var i=e.config,o=e.timers;toggleClass(t.controls,i.classNames.noTransition,!0),ui.toggleControls.call(e,!0),setTimeout((function(){toggleClass(t.controls,i.classNames.noTransition,!1)}),0);var a=n.touch?3e3:4e3;clearTimeout(o.controls),o.controls=setTimeout((function(){return ui.toggleControls.call(e,!1)}),a)})),n.bind(t.inputs.volume,"wheel",(function(t){var n=t.webkitDirectionInvertedFromDevice,i=[t.deltaX,-t.deltaY].map((function(e){return n?-e:e})),o=cosmic._slicedToArray(i,2),a=o[0],r=o[1],s=Math.sign(Math.abs(a)>Math.abs(r)?a:r);e.increaseVolume(s/50);var c=e.media.volume;(1===s&&c<1||-1===s&&c>0)&&t.preventDefault()}),"volume",!1)})),this.player=t,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.firstTouch=this.firstTouch.bind(this)}),[{key:"handleKey",value:function(e){var t,n=this.player,i=n.elements,o=e.key,a=e.type,r=e.altKey,s=e.ctrlKey,c=e.metaKey,l=e.shiftKey,d="keydown"===a,p=d&&o===this.lastKey;if(!(r||s||c||l)&&o)if(d){var h=document.activeElement;if(is.element(h)){var u=n.config.selectors.editable;if(h!==i.inputs.seek&&matches(h,u))return;if(" "===e.key&&matches(h,'button, [role^="menuitem"]'))return}switch([" ","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","0","1","2","3","4","5","6","7","8","9","c","f","k","l","m"].includes(o)&&(e.preventDefault(),e.stopPropagation()),o){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":p||(t=parseInt(o,10),n.currentTime=n.duration/10*t);break;case" ":case"k":p||silencePromise(n.togglePlay());break;case"ArrowUp":n.increaseVolume(.1);break;case"ArrowDown":n.decreaseVolume(.1);break;case"m":p||(n.muted=!n.muted);break;case"ArrowRight":n.forward();break;case"ArrowLeft":n.rewind();break;case"f":n.fullscreen.toggle();break;case"c":p||n.toggleCaptions();break;case"l":n.loop=!n.loop}"Escape"===o&&!n.fullscreen.usingNative&&n.fullscreen.active&&n.fullscreen.toggle(),this.lastKey=o}else this.lastKey=null}},{key:"toggleMenu",value:function(e){controls.toggleMenu.call(this.player,e)}}])}();function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var loadjs_umd=createCommonjsModule((function(e,t){e.exports=function(){var e=function(){},t={},n={},i={};function o(e,t){if(e){var o=i[e];if(n[e]=t,o)for(;o.length;)o[0](e,t),o.splice(0,1)}}function a(t,n){t.call&&(t={success:t}),n.length?(t.error||e)(n):(t.success||e)(t)}function r(t,n,i,o){var a,s,c=document,l=i.async,d=(i.numRetries||0)+1,p=i.before||e,h=t.replace(/[\?|#].*$/,""),u=t.replace(/^(css|img)!/,"");o=o||0,/(^css!|\.css$)/.test(h)?((s=c.createElement("link")).rel="stylesheet",s.href=u,(a="hideFocus"in s)&&s.relList&&(a=0,s.rel="preload",s.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(h)?(s=c.createElement("img")).src=u:((s=c.createElement("script")).src=t,s.async=void 0===l||l),s.onload=s.onerror=s.onbeforeload=function(e){var c=e.type[0];if(a)try{s.sheet.cssText.length||(c="e")}catch(e){18!=e.code&&(c="e")}if("e"==c){if((o+=1)<d)return r(t,n,i,o)}else if("preload"==s.rel&&"style"==s.as)return s.rel="stylesheet";n(t,c,e.defaultPrevented)},!1!==p(t,s)&&c.head.appendChild(s)}function s(e,t,n){var i,o,a=(e=e.push?e:[e]).length,s=a,c=[];for(i=function(e,n,i){if("e"==n&&c.push(e),"b"==n){if(!i)return;c.push(e)}--a||t(c)},o=0;o<s;o++)r(e[o],i,n)}function c(e,n,i){var r,c;if(n&&n.trim&&(r=n),c=(r?i:n)||{},r){if(r in t)throw"LoadJS";t[r]=!0}function l(t,n){s(e,(function(e){a(c,e),t&&a({success:t,error:n},e),o(r,e)}),c)}if(c.returnPromise)return new Promise(l);l()}return c.ready=function(e,t){return function(e,t){e=e.push?e:[e];var o,a,r,s=[],c=e.length,l=c;for(o=function(e,n){n.length&&s.push(e),--l||t(s)};c--;)a=e[c],(r=n[a])?o(a,r):(i[a]=i[a]||[]).push(o)}(e,(function(e){a(t,e)})),c},c.done=function(e){o(e,[])},c.reset=function(){t={},n={},i={}},c.isDefined=function(e){return e in t},c}()}));function loadScript(e){return new Promise((function(t,n){loadjs_umd(e,{success:t,error:n})}))}function parseId$1(e){return is.empty(e)?null:is.number(Number(e))?e:e.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:e}function parseHash(e){var t=e.match(/^.*(vimeo.com\/|video\/)(\d+)(\?.*&*h=|\/)+([\d,a-f]+)/);return t&&5===t.length?t[4]:null}function assurePlaybackState$1(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,triggerEvent.call(this,this.media,e?"play":"pause"))}var vimeo={setup:function(){var e=this;toggleClass(e.elements.wrapper,e.config.classNames.embed,!0),e.options.speed=e.config.speed.options,setAspectRatio.call(e),is.object(window.Vimeo)?vimeo.ready.call(e):loadScript(e.config.urls.vimeo.sdk).then((function(){vimeo.ready.call(e)})).catch((function(t){e.debug.warn("Vimeo SDK (player.js) failed to load",t)}))},ready:function(){var e=this,t=this,n=t.config.vimeo,i=n.premium,o=n.referrerPolicy,a=cosmic._objectWithoutProperties(n,_excluded),r=t.media.getAttribute("src"),s="";is.empty(r)?(r=t.media.getAttribute(t.config.attributes.embed.id),s=t.media.getAttribute(t.config.attributes.embed.hash)):s=parseHash(r);var c=s?{h:s}:{};i&&Object.assign(a,{controls:!1,sidedock:!1});var l=buildUrlParams(cosmic._objectSpread2(cosmic._objectSpread2({loop:t.config.loop.active,autoplay:t.autoplay,muted:t.muted,gesture:"media",playsinline:t.config.playsinline},c),a)),d=parseId$1(r),p=createElement("iframe"),h=format(t.config.urls.vimeo.iframe,d,l);if(p.setAttribute("src",h),p.setAttribute("allowfullscreen",""),p.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),is.empty(o)||p.setAttribute("referrerPolicy",o),i||!n.customControls)p.setAttribute("data-poster",t.poster),t.media=replaceElement(p,t.media);else{var u=createElement("div",{class:t.config.classNames.embedContainer,"data-poster":t.poster});u.appendChild(p),t.media=replaceElement(u,t.media)}n.customControls||fetch$1(format(t.config.urls.vimeo.api,h)).then((function(e){!is.empty(e)&&e.thumbnail_url&&ui.setPoster.call(t,e.thumbnail_url).catch((function(){}))})),t.embed=new window.Vimeo.Player(p,{autopause:t.config.autopause,muted:t.muted}),t.media.paused=!0,t.media.currentTime=0,t.supported.ui&&t.embed.disableTextTrack(),t.media.play=function(){return assurePlaybackState$1.call(t,!0),t.embed.play()},t.media.pause=function(){return assurePlaybackState$1.call(t,!1),t.embed.pause()},t.media.stop=function(){t.pause(),t.currentTime=0};var m=t.media.currentTime;Object.defineProperty(t.media,"currentTime",{get:function(){return m},set:function(e){var n=t.embed,i=t.media,o=t.paused,a=t.volume,r=o&&!n.hasPlayed;i.seeking=!0,triggerEvent.call(t,i,"seeking"),Promise.resolve(r&&n.setVolume(0)).then((function(){return n.setCurrentTime(e)})).then((function(){return r&&n.pause()})).then((function(){return r&&n.setVolume(a)})).catch((function(){}))}});var f=t.config.speed.selected;Object.defineProperty(t.media,"playbackRate",{get:function(){return f},set:function(e){t.embed.setPlaybackRate(e).then((function(){f=e,triggerEvent.call(t,t.media,"ratechange")})).catch((function(){t.options.speed=[1]}))}});var g=t.config.volume;Object.defineProperty(t.media,"volume",{get:function(){return g},set:function(e){t.embed.setVolume(e).then((function(){g=e,triggerEvent.call(t,t.media,"volumechange")}))}});var y=t.config.muted;Object.defineProperty(t.media,"muted",{get:function(){return y},set:function(e){var n=!!is.boolean(e)&&e;t.embed.setMuted(!!n||t.config.muted).then((function(){y=n,triggerEvent.call(t,t.media,"volumechange")}))}});var v,b=t.config.loop;Object.defineProperty(t.media,"loop",{get:function(){return b},set:function(e){var n=is.boolean(e)?e:t.config.loop.active;t.embed.setLoop(n).then((function(){b=n}))}}),t.embed.getVideoUrl().then((function(e){v=e,controls.setDownloadUrl.call(t)})).catch((function(t){e.debug.warn(t)})),Object.defineProperty(t.media,"currentSrc",{get:function(){return v}}),Object.defineProperty(t.media,"ended",{get:function(){return t.currentTime===t.duration}}),Promise.all([t.embed.getVideoWidth(),t.embed.getVideoHeight()]).then((function(n){var i=cosmic._slicedToArray(n,2),o=i[0],a=i[1];t.embed.ratio=roundAspectRatio(o,a),setAspectRatio.call(e)})),t.embed.setAutopause(t.config.autopause).then((function(e){t.config.autopause=e})),t.embed.getVideoTitle().then((function(n){t.config.title=n,ui.setTitle.call(e)})),t.embed.getCurrentTime().then((function(e){m=e,triggerEvent.call(t,t.media,"timeupdate")})),t.embed.getDuration().then((function(e){t.media.duration=e,triggerEvent.call(t,t.media,"durationchange")})),t.embed.getTextTracks().then((function(e){t.media.textTracks=e,captions.setup.call(t)})),t.embed.on("cuechange",(function(e){var n=e.cues,i=(void 0===n?[]:n).map((function(e){return stripHTML(e.text)}));captions.updateCues.call(t,i)})),t.embed.on("loaded",(function(){t.embed.getPaused().then((function(e){assurePlaybackState$1.call(t,!e),e||triggerEvent.call(t,t.media,"playing")})),is.element(t.embed.element)&&t.supported.ui&&t.embed.element.setAttribute("tabindex",-1)})),t.embed.on("bufferstart",(function(){triggerEvent.call(t,t.media,"waiting")})),t.embed.on("bufferend",(function(){triggerEvent.call(t,t.media,"playing")})),t.embed.on("play",(function(){assurePlaybackState$1.call(t,!0),triggerEvent.call(t,t.media,"playing")})),t.embed.on("pause",(function(){assurePlaybackState$1.call(t,!1)})),t.embed.on("timeupdate",(function(e){t.media.seeking=!1,m=e.seconds,triggerEvent.call(t,t.media,"timeupdate")})),t.embed.on("progress",(function(e){t.media.buffered=e.percent,triggerEvent.call(t,t.media,"progress"),1===parseInt(e.percent,10)&&triggerEvent.call(t,t.media,"canplaythrough"),t.embed.getDuration().then((function(e){e!==t.media.duration&&(t.media.duration=e,triggerEvent.call(t,t.media,"durationchange"))}))})),t.embed.on("seeked",(function(){t.media.seeking=!1,triggerEvent.call(t,t.media,"seeked")})),t.embed.on("ended",(function(){t.media.paused=!0,triggerEvent.call(t,t.media,"ended")})),t.embed.on("error",(function(e){t.media.error=e,triggerEvent.call(t,t.media,"error")})),n.customControls&&setTimeout((function(){return ui.build.call(t)}),0)}};function parseId(e){return is.empty(e)?null:e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:e}function assurePlaybackState(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,triggerEvent.call(this,this.media,e?"play":"pause"))}function getHost(e){return e.noCookie?"https://www.youtube-nocookie.com":"http:"===window.location.protocol?"http://www.youtube.com":void 0}var youtube={setup:function(){var e=this;if(toggleClass(this.elements.wrapper,this.config.classNames.embed,!0),is.object(window.YT)&&is.function(window.YT.Player))youtube.ready.call(this);else{var t=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){is.function(t)&&t(),youtube.ready.call(e)},loadScript(this.config.urls.youtube.sdk).catch((function(t){e.debug.warn("YouTube API failed to load",t)}))}},getTitle:function(e){var t=this;fetch$1(format(this.config.urls.youtube.api,e)).then((function(e){if(is.object(e)){var n=e.title,i=e.height,o=e.width;t.config.title=n,ui.setTitle.call(t),t.embed.ratio=roundAspectRatio(o,i)}setAspectRatio.call(t)})).catch((function(){setAspectRatio.call(t)}))},ready:function(){var e=this,t=e.config.youtube,n=e.media&&e.media.getAttribute("id");if(is.empty(n)||!n.startsWith("youtube-")){var i=e.media.getAttribute("src");is.empty(i)&&(i=e.media.getAttribute(this.config.attributes.embed.id));var o=parseId(i),a=createElement("div",{id:generateId$1(e.provider),"data-poster":t.customControls?e.poster:void 0});if(e.media=replaceElement(a,e.media),t.customControls){var r=function(e){return"https://i.ytimg.com/vi/".concat(o,"/").concat(e,"default.jpg")};loadImage(r("maxres"),121).catch((function(){return loadImage(r("sd"),121)})).catch((function(){return loadImage(r("hq"))})).then((function(t){return ui.setPoster.call(e,t.src)})).then((function(t){t.includes("maxres")||(e.elements.poster.style.backgroundSize="cover")})).catch((function(){}))}e.embed=new window.YT.Player(e.media,{videoId:o,host:getHost(t),playerVars:extend({},{autoplay:e.config.autoplay?1:0,hl:e.config.hl,controls:e.supported.ui&&t.customControls?0:1,disablekb:1,playsinline:e.config.playsinline&&!e.config.fullscreen.iosNative?1:0,cc_load_policy:e.captions.active?1:0,cc_lang_pref:e.config.captions.language,widget_referrer:window?window.location.href:null},t),events:{onError:function(t){if(!e.media.error){var n=t.data,i={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[n]||"An unknown error occurred";e.media.error={code:n,message:i},triggerEvent.call(e,e.media,"error")}},onPlaybackRateChange:function(t){var n=t.target;e.media.playbackRate=n.getPlaybackRate(),triggerEvent.call(e,e.media,"ratechange")},onReady:function(n){if(!is.function(e.media.play)){var i=n.target;youtube.getTitle.call(e,o),e.media.play=function(){assurePlaybackState.call(e,!0),i.playVideo()},e.media.pause=function(){assurePlaybackState.call(e,!1),i.pauseVideo()},e.media.stop=function(){i.stopVideo()},e.media.duration=i.getDuration(),e.media.paused=!0,e.media.currentTime=0,Object.defineProperty(e.media,"currentTime",{get:function(){return Number(i.getCurrentTime())},set:function(t){e.paused&&!e.embed.hasPlayed&&e.embed.mute(),e.media.seeking=!0,triggerEvent.call(e,e.media,"seeking"),i.seekTo(t)}}),Object.defineProperty(e.media,"playbackRate",{get:function(){return i.getPlaybackRate()},set:function(e){i.setPlaybackRate(e)}});var a=e.config.volume;Object.defineProperty(e.media,"volume",{get:function(){return a},set:function(t){a=t,i.setVolume(100*a),triggerEvent.call(e,e.media,"volumechange")}});var r=e.config.muted;Object.defineProperty(e.media,"muted",{get:function(){return r},set:function(t){var n=is.boolean(t)?t:r;r=n,i[n?"mute":"unMute"](),i.setVolume(100*a),triggerEvent.call(e,e.media,"volumechange")}}),Object.defineProperty(e.media,"currentSrc",{get:function(){return i.getVideoUrl()}}),Object.defineProperty(e.media,"ended",{get:function(){return e.currentTime===e.duration}});var s=i.getAvailablePlaybackRates();e.options.speed=s.filter((function(t){return e.config.speed.options.includes(t)})),e.supported.ui&&t.customControls&&e.media.setAttribute("tabindex",-1),triggerEvent.call(e,e.media,"timeupdate"),triggerEvent.call(e,e.media,"durationchange"),clearInterval(e.timers.buffering),e.timers.buffering=setInterval((function(){e.media.buffered=i.getVideoLoadedFraction(),(null===e.media.lastBuffered||e.media.lastBuffered<e.media.buffered)&&triggerEvent.call(e,e.media,"progress"),e.media.lastBuffered=e.media.buffered,1===e.media.buffered&&(clearInterval(e.timers.buffering),triggerEvent.call(e,e.media,"canplaythrough"))}),200),t.customControls&&setTimeout((function(){return ui.build.call(e)}),50)}},onStateChange:function(n){var i=n.target;switch(clearInterval(e.timers.playing),e.media.seeking&&[1,2].includes(n.data)&&(e.media.seeking=!1,triggerEvent.call(e,e.media,"seeked")),n.data){case-1:triggerEvent.call(e,e.media,"timeupdate"),e.media.buffered=i.getVideoLoadedFraction(),triggerEvent.call(e,e.media,"progress");break;case 0:assurePlaybackState.call(e,!1),e.media.loop?(i.stopVideo(),i.playVideo()):triggerEvent.call(e,e.media,"ended");break;case 1:t.customControls&&!e.config.autoplay&&e.media.paused&&!e.embed.hasPlayed?e.media.pause():(assurePlaybackState.call(e,!0),triggerEvent.call(e,e.media,"playing"),e.timers.playing=setInterval((function(){triggerEvent.call(e,e.media,"timeupdate")}),50),e.media.duration!==i.getDuration()&&(e.media.duration=i.getDuration(),triggerEvent.call(e,e.media,"durationchange")));break;case 2:e.muted||e.embed.unMute(),assurePlaybackState.call(e,!1);break;case 3:triggerEvent.call(e,e.media,"waiting")}triggerEvent.call(e,e.elements.container,"statechange",!1,{code:n.data})}}})}}},media={setup:function(){this.media?(toggleClass(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),toggleClass(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&toggleClass(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=createElement("div",{class:this.config.classNames.video}),wrap(this.media,this.elements.wrapper),this.elements.poster=createElement("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?html5.setup.call(this):this.isYouTube?youtube.setup.call(this):this.isVimeo&&vimeo.setup.call(this)):this.debug.warn("No media element found!")}},Ads=function(){return cosmic._createClass((function e(t){var n=this;cosmic._classCallCheck(this,e),_defineProperty$1(this,"load",(function(){n.enabled&&(is.object(window.google)&&is.object(window.google.ima)?n.ready():loadScript(n.player.config.urls.googleIMA.sdk).then((function(){n.ready()})).catch((function(){n.trigger("error",new Error("Google IMA SDK failed to load"))})))})),_defineProperty$1(this,"ready",(function(){var e;n.enabled||((e=n).manager&&e.manager.destroy(),e.elements.displayContainer&&e.elements.displayContainer.destroy(),e.elements.container.remove()),n.startSafetyTimer(12e3,"ready()"),n.managerPromise.then((function(){n.clearSafetyTimer("onAdsManagerLoaded()")})),n.listeners(),n.setupIMA()})),_defineProperty$1(this,"setupIMA",(function(){n.elements.container=createElement("div",{class:n.player.config.classNames.ads}),n.player.elements.container.appendChild(n.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(n.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(n.player.config.playsinline),n.elements.displayContainer=new google.ima.AdDisplayContainer(n.elements.container,n.player.media),n.loader=new google.ima.AdsLoader(n.elements.displayContainer),n.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(e){return n.onAdsManagerLoaded(e)}),!1),n.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){return n.onAdError(e)}),!1),n.requestAds()})),_defineProperty$1(this,"requestAds",(function(){var e=n.player.elements.container;try{var t=new google.ima.AdsRequest;t.adTagUrl=n.tagUrl,t.linearAdSlotWidth=e.offsetWidth,t.linearAdSlotHeight=e.offsetHeight,t.nonLinearAdSlotWidth=e.offsetWidth,t.nonLinearAdSlotHeight=e.offsetHeight,t.forceNonLinearFullSlot=!1,t.setAdWillPlayMuted(!n.player.muted),n.loader.requestAds(t)}catch(e){n.onAdError(e)}})),_defineProperty$1(this,"pollCountdown",(function(){if(!(Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]&&Array.from(arguments)[0]))return clearInterval(n.countdownTimer),void n.elements.container.removeAttribute("data-badge-text");n.countdownTimer=setInterval((function(){var e=_formatTime(Math.max(n.manager.getRemainingTime(),0)),t="".concat(i18n.get("advertisement",n.player.config)," - ").concat(e);n.elements.container.setAttribute("data-badge-text",t)}),100)})),_defineProperty$1(this,"onAdsManagerLoaded",(function(e){if(n.enabled){var t=new google.ima.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!0,t.enablePreloading=!0,n.manager=e.getAdsManager(n.player,t),n.cuePoints=n.manager.getCuePoints(),n.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){return n.onAdError(e)})),Object.keys(google.ima.AdEvent.Type).forEach((function(e){n.manager.addEventListener(google.ima.AdEvent.Type[e],(function(e){return n.onAdEvent(e)}))})),n.trigger("loaded")}})),_defineProperty$1(this,"addCuePoints",(function(){is.empty(n.cuePoints)||n.cuePoints.forEach((function(e){if(0!==e&&-1!==e&&e<n.player.duration){var t=n.player.elements.progress;if(is.element(t)){var i=100/n.player.duration*e,o=createElement("span",{class:n.player.config.classNames.cues});o.style.left="".concat(i.toString(),"%"),t.appendChild(o)}}}))})),_defineProperty$1(this,"onAdEvent",(function(e){var t=n.player.elements.container,i=e.getAd(),o=e.getAdData();switch(function(e){triggerEvent.call(n.player,n.player.media,"ads".concat(e.replace(/_/g,"").toLowerCase()))}(e.type),e.type){case google.ima.AdEvent.Type.LOADED:n.trigger("loaded"),n.pollCountdown(!0),i.isLinear()||(i.width=t.offsetWidth,i.height=t.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:n.manager.setVolume(n.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:n.player.ended?n.loadAds():n.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:n.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:n.pollCountdown(),n.resumeContent();break;case google.ima.AdEvent.Type.LOG:o.adError&&n.player.debug.warn("Non-fatal ad error: ".concat(o.adError.getMessage()))}})),_defineProperty$1(this,"onAdError",(function(e){n.cancel(),n.player.debug.warn("Ads error",e)})),_defineProperty$1(this,"listeners",(function(){var e,t=n.player.elements.container;n.player.on("canplay",(function(){n.addCuePoints()})),n.player.on("ended",(function(){n.loader.contentComplete()})),n.player.on("timeupdate",(function(){e=n.player.currentTime})),n.player.on("seeked",(function(){var t=n.player.currentTime;is.empty(n.cuePoints)||n.cuePoints.forEach((function(i,o){e<i&&i<t&&(n.manager.discardAdBreak(),n.cuePoints.splice(o,1))}))})),window.addEventListener("resize",(function(){n.manager&&n.manager.resize(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL)}))})),_defineProperty$1(this,"play",(function(){var e=n.player.elements.container;n.managerPromise||n.resumeContent(),n.managerPromise.then((function(){n.manager.setVolume(n.player.volume),n.elements.displayContainer.initialize();try{n.initialized||(n.manager.init(e.offsetWidth,e.offsetHeight,google.ima.ViewMode.NORMAL),n.manager.start()),n.initialized=!0}catch(e){n.onAdError(e)}})).catch((function(){}))})),_defineProperty$1(this,"resumeContent",(function(){n.elements.container.style.zIndex="",n.playing=!1,silencePromise(n.player.media.play())})),_defineProperty$1(this,"pauseContent",(function(){n.elements.container.style.zIndex=3,n.playing=!0,n.player.media.pause()})),_defineProperty$1(this,"cancel",(function(){n.initialized&&n.resumeContent(),n.trigger("error"),n.loadAds()})),_defineProperty$1(this,"loadAds",(function(){n.managerPromise.then((function(){n.manager&&n.manager.destroy(),n.managerPromise=new Promise((function(e){n.on("loaded",e),n.player.debug.log(n.manager)})),n.initialized=!1,n.requestAds()})).catch((function(){}))})),_defineProperty$1(this,"trigger",(function(e){for(var t=Array.from(arguments).length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=Array.from(arguments)[o];var a=n.events[e];is.array(a)&&a.forEach((function(e){is.function(e)&&e.apply(n,i)}))})),_defineProperty$1(this,"on",(function(e,t){return is.array(n.events[e])||(n.events[e]=[]),n.events[e].push(t),n})),_defineProperty$1(this,"startSafetyTimer",(function(e,t){n.player.debug.log("Safety timer invoked from: ".concat(t)),n.safetyTimer=setTimeout((function(){n.cancel(),n.clearSafetyTimer("startSafetyTimer()")}),e)})),_defineProperty$1(this,"clearSafetyTimer",(function(e){is.nullOrUndefined(n.safetyTimer)||(n.player.debug.log("Safety timer cleared from: ".concat(e)),clearTimeout(n.safetyTimer),n.safetyTimer=null)})),this.player=t,this.config=t.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((function(e,t){n.on("loaded",e),n.on("error",t)})),this.load()}),[{key:"enabled",get:function(){var e=this.config;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!is.empty(e.publisherId)||is.url(e.tagUrl))}},{key:"tagUrl",get:function(){var e=this.config;return is.url(e.tagUrl)?e.tagUrl:"https://go.aniview.com/api/adserver6/vast/?".concat(buildUrlParams({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:e.publisherId}))}}])}();function clamp(){var e=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:0,t=Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1]?Array.from(arguments)[1]:0,n=Array.from(arguments).length>2&&void 0!==Array.from(arguments)[2]?Array.from(arguments)[2]:255;return Math.min(Math.max(e,t),n)}var parseVtt=function(e){var t=[];return e.split(/\r\n\r\n|\n\n|\r\r/).forEach((function(e){var n={};e.split(/\r\n|\n|\r/).forEach((function(e){if(is.number(n.startTime)){if(!is.empty(e.trim())&&is.empty(n.text)){var t,i,o,a=e.trim().split("#xywh=");t=cosmic._slicedToArray(a,1),n.text=t[0],a[1]&&(i=a[1].split(","),o=cosmic._slicedToArray(i,4),n.x=o[0],n.y=o[1],n.w=o[2],n.h=o[3])}}else{var r=e.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);r&&(n.startTime=60*Number(r[1]||0)*60+60*Number(r[2])+Number(r[3])+Number("0.".concat(r[4])),n.endTime=60*Number(r[6]||0)*60+60*Number(r[7])+Number(r[8])+Number("0.".concat(r[9])))}})),n.text&&t.push(n)})),t},fitRatio=function(e,t){var n={};return e>t.width/t.height?(n.width=t.width,n.height=1/e*t.width):(n.height=t.height,n.width=e*t.height),n},PreviewThumbnails=function(){return cosmic._createClass((function e(t){var n=this;cosmic._classCallCheck(this,e),_defineProperty$1(this,"load",(function(){n.player.elements.display.seekTooltip&&(n.player.elements.display.seekTooltip.hidden=n.enabled),n.enabled&&n.getThumbnails().then((function(){n.enabled&&(n.render(),n.determineContainerAutoSizing(),n.listeners(),n.loaded=!0)}))})),_defineProperty$1(this,"getThumbnails",(function(){return new Promise((function(e){var t=n.player.config.previewThumbnails.src;if(is.empty(t))throw new Error("Missing previewThumbnails.src config attribute");var i=function(){n.thumbnails.sort((function(e,t){return e.height-t.height})),n.player.debug.log("Preview thumbnails",n.thumbnails),e()};if(is.function(t))t((function(e){n.thumbnails=e,i()}));else{var o=(is.string(t)?[t]:t).map((function(e){return n.getThumbnail(e)}));Promise.all(o).then(i)}}))})),_defineProperty$1(this,"getThumbnail",(function(e){return new Promise((function(t){fetch$1(e).then((function(i){var o={frames:parseVtt(i),height:null,urlPrefix:""};o.frames[0].text.startsWith("/")||o.frames[0].text.startsWith("http://")||o.frames[0].text.startsWith("https://")||(o.urlPrefix=e.substring(0,e.lastIndexOf("/")+1));var a=new Image;a.onload=function(){o.height=a.naturalHeight,o.width=a.naturalWidth,n.thumbnails.push(o),t()},a.src=o.urlPrefix+o.frames[0].text}))}))})),_defineProperty$1(this,"startMove",(function(e){if(n.loaded&&is.event(e)&&["touchmove","mousemove"].includes(e.type)&&n.player.media.duration){if("touchmove"===e.type)n.seekTime=n.player.media.duration*(n.player.elements.inputs.seek.value/100);else{var t,i,o=n.player.elements.progress.getBoundingClientRect(),a=100/o.width*(e.pageX-o.left);n.seekTime=n.player.media.duration*(a/100),n.seekTime<0&&(n.seekTime=0),n.seekTime>n.player.media.duration-1&&(n.seekTime=n.player.media.duration-1),n.mousePosX=e.pageX,n.elements.thumb.time.innerText=_formatTime(n.seekTime);var r=null===(t=n.player.config.markers)||void 0===t||null===(i=t.points)||void 0===i?void 0:i.find((function(e){return e.time===Math.round(n.seekTime)}));r&&n.elements.thumb.time.insertAdjacentHTML("afterbegin","".concat(r.label,"<br>"))}n.showImageAtCurrentTime()}})),_defineProperty$1(this,"endMove",(function(){n.toggleThumbContainer(!1,!0)})),_defineProperty$1(this,"startScrubbing",(function(e){(is.nullOrUndefined(e.button)||!1===e.button||0===e.button)&&(n.mouseDown=!0,n.player.media.duration&&(n.toggleScrubbingContainer(!0),n.toggleThumbContainer(!1,!0),n.showImageAtCurrentTime()))})),_defineProperty$1(this,"endScrubbing",(function(){n.mouseDown=!1,Math.ceil(n.lastTime)===Math.ceil(n.player.media.currentTime)?n.toggleScrubbingContainer(!1):once.call(n.player,n.player.media,"timeupdate",(function(){n.mouseDown||n.toggleScrubbingContainer(!1)}))})),_defineProperty$1(this,"listeners",(function(){n.player.on("play",(function(){n.toggleThumbContainer(!1,!0)})),n.player.on("seeked",(function(){n.toggleThumbContainer(!1)})),n.player.on("timeupdate",(function(){n.lastTime=n.player.media.currentTime}))})),_defineProperty$1(this,"render",(function(){n.elements.thumb.container=createElement("div",{class:n.player.config.classNames.previewThumbnails.thumbContainer}),n.elements.thumb.imageContainer=createElement("div",{class:n.player.config.classNames.previewThumbnails.imageContainer}),n.elements.thumb.container.appendChild(n.elements.thumb.imageContainer);var e=createElement("div",{class:n.player.config.classNames.previewThumbnails.timeContainer});n.elements.thumb.time=createElement("span",{},"00:00"),e.appendChild(n.elements.thumb.time),n.elements.thumb.imageContainer.appendChild(e),is.element(n.player.elements.progress)&&n.player.elements.progress.appendChild(n.elements.thumb.container),n.elements.scrubbing.container=createElement("div",{class:n.player.config.classNames.previewThumbnails.scrubbingContainer}),n.player.elements.wrapper.appendChild(n.elements.scrubbing.container)})),_defineProperty$1(this,"destroy",(function(){n.elements.thumb.container&&n.elements.thumb.container.remove(),n.elements.scrubbing.container&&n.elements.scrubbing.container.remove()})),_defineProperty$1(this,"showImageAtCurrentTime",(function(){n.mouseDown?n.setScrubbingContainerSize():n.setThumbContainerSizeAndPos();var e=n.thumbnails[0].frames.findIndex((function(e){return n.seekTime>=e.startTime&&n.seekTime<=e.endTime})),t=e>=0,i=0;n.mouseDown||n.toggleThumbContainer(t),t&&(n.thumbnails.forEach((function(t,o){n.loadedImages.includes(t.frames[e].text)&&(i=o)})),e!==n.showingThumb&&(n.showingThumb=e,n.loadImage(i)))})),_defineProperty$1(this,"loadImage",(function(){var e=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:0,t=n.showingThumb,i=n.thumbnails[e],o=i.urlPrefix,a=i.frames[t],r=i.frames[t].text,s=o+r;if(n.currentImageElement&&n.currentImageElement.dataset.filename===r)n.showImage(n.currentImageElement,a,e,t,r,!1),n.currentImageElement.dataset.index=t,n.removeOldImages(n.currentImageElement);else{n.loadingImage&&n.usingSprites&&(n.loadingImage.onload=null);var c=new Image;c.src=s,c.dataset.index=t,c.dataset.filename=r,n.showingThumbFilename=r,n.player.debug.log("Loading image: ".concat(s)),c.onload=function(){return n.showImage(c,a,e,t,r,!0)},n.loadingImage=c,n.removeOldImages(c)}})),_defineProperty$1(this,"showImage",(function(e,t,i,o,a){var r=!(Array.from(arguments).length>5&&void 0!==Array.from(arguments)[5])||Array.from(arguments)[5];n.player.debug.log("Showing thumb: ".concat(a,". num: ").concat(o,". qual: ").concat(i,". newimg: ").concat(r)),n.setImageSizeAndOffset(e,t),r&&(n.currentImageContainer.appendChild(e),n.currentImageElement=e,n.loadedImages.includes(a)||n.loadedImages.push(a)),n.preloadNearby(o,!0).then(n.preloadNearby(o,!1)).then(n.getHigherQuality(i,e,t,a))})),_defineProperty$1(this,"removeOldImages",(function(e){Array.from(n.currentImageContainer.children).forEach((function(t){if("img"===t.tagName.toLowerCase()){var i=n.usingSprites?500:1e3;if(t.dataset.index!==e.dataset.index&&!t.dataset.deleting){t.dataset.deleting=!0;var o=n.currentImageContainer;setTimeout((function(){o.removeChild(t),n.player.debug.log("Removing thumb: ".concat(t.dataset.filename))}),i)}}}))})),_defineProperty$1(this,"preloadNearby",(function(e){var t=!(Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1])||Array.from(arguments)[1];return new Promise((function(i){setTimeout((function(){var o=n.thumbnails[0].frames[e].text;if(n.showingThumbFilename===o){var a;a=t?n.thumbnails[0].frames.slice(e):n.thumbnails[0].frames.slice(0,e).reverse();var r=!1;a.forEach((function(e){var t=e.text;if(t!==o&&!n.loadedImages.includes(t)){r=!0,n.player.debug.log("Preloading thumb filename: ".concat(t));var a=n.thumbnails[0].urlPrefix+t,s=new Image;s.src=a,s.onload=function(){n.player.debug.log("Preloaded thumb filename: ".concat(t)),n.loadedImages.includes(t)||n.loadedImages.push(t),i()}}})),r||i()}}),300)}))})),_defineProperty$1(this,"getHigherQuality",(function(e,t,i,o){if(e<n.thumbnails.length-1){var a=t.naturalHeight;n.usingSprites&&(a=i.h),a<n.thumbContainerHeight&&setTimeout((function(){n.showingThumbFilename===o&&(n.player.debug.log("Showing higher quality thumb for: ".concat(o)),n.loadImage(e+1))}),300)}})),_defineProperty$1(this,"toggleThumbContainer",(function(){var e=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]&&Array.from(arguments)[0],t=Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1]&&Array.from(arguments)[1],i=n.player.config.classNames.previewThumbnails.thumbContainerShown;n.elements.thumb.container.classList.toggle(i,e),!e&&t&&(n.showingThumb=null,n.showingThumbFilename=null)})),_defineProperty$1(this,"toggleScrubbingContainer",(function(){var e=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]&&Array.from(arguments)[0],t=n.player.config.classNames.previewThumbnails.scrubbingContainerShown;n.elements.scrubbing.container.classList.toggle(t,e),e||(n.showingThumb=null,n.showingThumbFilename=null)})),_defineProperty$1(this,"determineContainerAutoSizing",(function(){(n.elements.thumb.imageContainer.clientHeight>20||n.elements.thumb.imageContainer.clientWidth>20)&&(n.sizeSpecifiedInCSS=!0)})),_defineProperty$1(this,"setThumbContainerSizeAndPos",(function(){var e=n.elements.thumb.imageContainer;if(n.sizeSpecifiedInCSS){if(e.clientHeight>20&&e.clientWidth<20){var t=Math.floor(e.clientHeight*n.thumbAspectRatio);e.style.width="".concat(t,"px")}else if(e.clientHeight<20&&e.clientWidth>20){var i=Math.floor(e.clientWidth/n.thumbAspectRatio);e.style.height="".concat(i,"px")}}else{var o=Math.floor(n.thumbContainerHeight*n.thumbAspectRatio);e.style.height="".concat(n.thumbContainerHeight,"px"),e.style.width="".concat(o,"px")}n.setThumbContainerPos()})),_defineProperty$1(this,"setThumbContainerPos",(function(){var e=n.player.elements.progress.getBoundingClientRect(),t=n.player.elements.container.getBoundingClientRect(),i=n.elements.thumb.container,o=t.left-e.left+10,a=t.right-e.left-i.clientWidth-10,r=n.mousePosX-e.left-i.clientWidth/2,s=clamp(r,o,a);i.style.left="".concat(s,"px"),i.style.setProperty("--preview-arrow-offset",r-s+"px")})),_defineProperty$1(this,"setScrubbingContainerSize",(function(){var e=fitRatio(n.thumbAspectRatio,{width:n.player.media.clientWidth,height:n.player.media.clientHeight}),t=e.width,i=e.height;n.elements.scrubbing.container.style.width="".concat(t,"px"),n.elements.scrubbing.container.style.height="".concat(i,"px")})),_defineProperty$1(this,"setImageSizeAndOffset",(function(e,t){if(n.usingSprites){var i=n.thumbContainerHeight/t.h;e.style.height=e.naturalHeight*i+"px",e.style.width=e.naturalWidth*i+"px",e.style.left="-".concat(t.x*i,"px"),e.style.top="-".concat(t.y*i,"px")}})),this.player=t,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}),[{key:"enabled",get:function(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}},{key:"currentImageContainer",get:function(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}},{key:"usingSprites",get:function(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}},{key:"thumbAspectRatio",get:function(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}},{key:"thumbContainerHeight",get:function(){return this.mouseDown?fitRatio(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight}).height:this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}},{key:"currentImageElement",get:function(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement},set:function(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}}])}(),source={insertElements:function(e,t){var n=this;is.string(t)?insertElement(e,this.media,{src:t}):is.array(t)&&t.forEach((function(t){insertElement(e,n.media,t)}))},change:function(e){var t=this;getDeep(e,"sources.length")?(html5.cancelRequests.call(this),this.destroy.call(this,(function(){t.options.quality=[],removeElement(t.media),t.media=null,is.element(t.elements.container)&&t.elements.container.removeAttribute("class");var n=e.sources,i=e.type,o=cosmic._slicedToArray(n,1)[0],a=o.provider,r=void 0===a?providers.html5:a,s=o.src,c="html5"===r?i:"div",l="html5"===r?{}:{src:s};Object.assign(t,{provider:r,type:i,supported:support.check(i,r,t.config.playsinline),media:createElement(c,l)}),t.elements.container.appendChild(t.media),is.boolean(e.autoplay)&&(t.config.autoplay=e.autoplay),t.isHTML5&&(t.config.crossorigin&&t.media.setAttribute("crossorigin",""),t.config.autoplay&&t.media.setAttribute("autoplay",""),is.empty(e.poster)||(t.poster=e.poster),t.config.loop.active&&t.media.setAttribute("loop",""),t.config.muted&&t.media.setAttribute("muted",""),t.config.playsinline&&t.media.setAttribute("playsinline","")),ui.addStyleHook.call(t),t.isHTML5&&source.insertElements.call(t,"source",n),t.config.title=e.title,media.setup.call(t),t.isHTML5&&Object.keys(e).includes("tracks")&&source.insertElements.call(t,"track",e.tracks),(t.isHTML5||t.isEmbed&&!t.supported.ui)&&ui.build.call(t),t.isHTML5&&t.media.load(),is.empty(e.previewThumbnails)||(Object.assign(t.config.previewThumbnails,e.previewThumbnails),t.previewThumbnails&&t.previewThumbnails.loaded&&(t.previewThumbnails.destroy(),t.previewThumbnails=null),t.config.previewThumbnails.enabled&&(t.previewThumbnails=new PreviewThumbnails(t))),t.fullscreen.update()}),!0)):this.debug.warn("Invalid source format")}},Plyr=function(){function e(t,n){var i=this;if(cosmic._classCallCheck(this,e),_defineProperty$1(this,"play",(function(){return is.function(i.media.play)?(i.ads&&i.ads.enabled&&i.ads.managerPromise.then((function(){return i.ads.play()})).catch((function(){return silencePromise(i.media.play())})),i.media.play()):null})),_defineProperty$1(this,"pause",(function(){return i.playing&&is.function(i.media.pause)?i.media.pause():null})),_defineProperty$1(this,"togglePlay",(function(e){return(is.boolean(e)?e:!i.playing)?i.play():i.pause()})),_defineProperty$1(this,"stop",(function(){i.isHTML5?(i.pause(),i.restart()):is.function(i.media.stop)&&i.media.stop()})),_defineProperty$1(this,"restart",(function(){i.currentTime=0})),_defineProperty$1(this,"rewind",(function(e){i.currentTime-=is.number(e)?e:i.config.seekTime})),_defineProperty$1(this,"forward",(function(e){i.currentTime+=is.number(e)?e:i.config.seekTime})),_defineProperty$1(this,"increaseVolume",(function(e){var t=i.media.muted?0:i.volume;i.volume=t+(is.number(e)?e:0)})),_defineProperty$1(this,"decreaseVolume",(function(e){i.increaseVolume(-e)})),_defineProperty$1(this,"airplay",(function(){support.airplay&&i.media.webkitShowPlaybackTargetPicker()})),_defineProperty$1(this,"toggleControls",(function(e){if(i.supported.ui&&!i.isAudio){var t=hasClass(i.elements.container,i.config.classNames.hideControls),n=void 0===e?void 0:!e,o=toggleClass(i.elements.container,i.config.classNames.hideControls,n);if(o&&is.array(i.config.controls)&&i.config.controls.includes("settings")&&!is.empty(i.config.settings)&&controls.toggleMenu.call(i,!1),o!==t){var a=o?"controlshidden":"controlsshown";triggerEvent.call(i,i.media,a)}return!o}return!1})),_defineProperty$1(this,"on",(function(e,t){on.call(i,i.elements.container,e,t)})),_defineProperty$1(this,"once",(function(e,t){once.call(i,i.elements.container,e,t)})),_defineProperty$1(this,"off",(function(e,t){off(i.elements.container,e,t)})),_defineProperty$1(this,"destroy",(function(e){var t=Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1]&&Array.from(arguments)[1];if(i.ready){var n=function(){document.body.style.overflow="",i.embed=null,t?(Object.keys(i.elements).length&&(removeElement(i.elements.buttons.play),removeElement(i.elements.captions),removeElement(i.elements.controls),removeElement(i.elements.wrapper),i.elements.buttons.play=null,i.elements.captions=null,i.elements.controls=null,i.elements.wrapper=null),is.function(e)&&e()):(unbindListeners.call(i),html5.cancelRequests.call(i),replaceElement(i.elements.original,i.elements.container),triggerEvent.call(i,i.elements.original,"destroyed",!0),is.function(e)&&e.call(i.elements.original),i.ready=!1,setTimeout((function(){i.elements=null,i.media=null}),200))};i.stop(),clearTimeout(i.timers.loading),clearTimeout(i.timers.controls),clearTimeout(i.timers.resized),i.isHTML5?(ui.toggleNativeControls.call(i,!0),n()):i.isYouTube?(clearInterval(i.timers.buffering),clearInterval(i.timers.playing),null!==i.embed&&is.function(i.embed.destroy)&&i.embed.destroy(),n()):i.isVimeo&&(null!==i.embed&&i.embed.unload().then(n),setTimeout(n,200))}})),_defineProperty$1(this,"supports",(function(e){return support.mime.call(i,e)})),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=support.touch,this.media=t,is.string(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||is.nodeList(this.media)||is.array(this.media))&&(this.media=this.media[0]),this.config=extend({},defaults,e.defaults,n||{},function(){try{return JSON.parse(i.media.getAttribute("data-plyr-config"))}catch(e){return{}}}()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new Console(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",support),!is.nullOrUndefined(this.media)&&is.element(this.media))if(this.media.plyr)this.debug.warn("Target already setup");else if(this.config.enabled)if(support.check().api){var o=this.media.cloneNode(!0);o.autoplay=!1,this.elements.original=o;var a=this.media.tagName.toLowerCase(),r=null,s=null;switch(a){case"div":if(r=this.media.querySelector("iframe"),is.element(r)){if(s=parseUrl(r.getAttribute("src")),this.provider=getProviderByUrl(s.toString()),this.elements.container=this.media,this.media=r,this.elements.container.className="",s.search.length){var c=["1","true"];c.includes(s.searchParams.get("autoplay"))&&(this.config.autoplay=!0),c.includes(s.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=c.includes(s.searchParams.get("playsinline")),this.config.youtube.hl=s.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(is.empty(this.provider)||!Object.values(providers).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=types.video;break;case"video":case"audio":this.type=a,this.provider=providers.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=support.check(this.type,this.provider),this.supported.api?(this.eventListeners=[],this.listeners=new Listeners(this),this.storage=new Storage(this),this.media.plyr=this,is.element(this.elements.container)||(this.elements.container=createElement("div"),wrap(this.media,this.elements.container)),ui.migrateStyles.call(this),ui.addStyleHook.call(this),media.setup.call(this),this.config.debug&&on.call(this,this.elements.container,this.config.events.join(" "),(function(e){i.debug.log("event: ".concat(e.type))})),this.fullscreen=new Fullscreen(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&ui.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new Ads(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",(function(){return silencePromise(i.play())})),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new PreviewThumbnails(this))):this.debug.error("Setup failed: no support")}else this.debug.error("Setup failed: no support");else this.debug.error("Setup failed: disabled by config");else this.debug.error("Setup failed: no suitable element passed")}return cosmic._createClass(e,[{key:"isHTML5",get:function(){return this.provider===providers.html5}},{key:"isEmbed",get:function(){return this.isYouTube||this.isVimeo}},{key:"isYouTube",get:function(){return this.provider===providers.youtube}},{key:"isVimeo",get:function(){return this.provider===providers.vimeo}},{key:"isVideo",get:function(){return this.type===types.video}},{key:"isAudio",get:function(){return this.type===types.audio}},{key:"playing",get:function(){return Boolean(this.ready&&!this.paused&&!this.ended)}},{key:"paused",get:function(){return Boolean(this.media.paused)}},{key:"stopped",get:function(){return Boolean(this.paused&&0===this.currentTime)}},{key:"ended",get:function(){return Boolean(this.media.ended)}},{key:"currentTime",get:function(){return Number(this.media.currentTime)},set:function(e){if(this.duration){var t=is.number(e)&&e>0;this.media.currentTime=t?Math.min(e,this.duration):0,this.debug.log("Seeking to ".concat(this.currentTime," seconds"))}}},{key:"buffered",get:function(){var e=this.media.buffered;return is.number(e)?e:e&&e.length&&this.duration>0?e.end(0)/this.duration:0}},{key:"seeking",get:function(){return Boolean(this.media.seeking)}},{key:"duration",get:function(){var e=parseFloat(this.config.duration),t=(this.media||{}).duration,n=is.number(t)&&t!==1/0?t:0;return e||n}},{key:"volume",get:function(){return Number(this.media.volume)},set:function(e){var t=e;is.string(t)&&(t=Number(t)),is.number(t)||(t=this.storage.get("volume")),is.number(t)||(t=this.config.volume),t>1&&(t=1),t<0&&(t=0),this.config.volume=t,this.media.volume=t,!is.empty(e)&&this.muted&&t>0&&(this.muted=!1)}},{key:"muted",get:function(){return Boolean(this.media.muted)},set:function(e){var t=e;is.boolean(t)||(t=this.storage.get("muted")),is.boolean(t)||(t=this.config.muted),this.config.muted=t,this.media.muted=t}},{key:"hasAudio",get:function(){return!this.isHTML5||!!this.isAudio||Boolean(this.media.mozHasAudio)||Boolean(this.media.webkitAudioDecodedByteCount)||Boolean(this.media.audioTracks&&this.media.audioTracks.length)}},{key:"speed",get:function(){return Number(this.media.playbackRate)},set:function(e){var t=this,n=null;is.number(e)&&(n=e),is.number(n)||(n=this.storage.get("speed")),is.number(n)||(n=this.config.speed.selected);var i=this.minimumSpeed,o=this.maximumSpeed;n=clamp(n,i,o),this.config.speed.selected=n,setTimeout((function(){t.media&&(t.media.playbackRate=n)}),0)}},{key:"minimumSpeed",get:function(){return this.isYouTube?Math.min.apply(Math,cosmic._toConsumableArray(this.options.speed)):this.isVimeo?.5:.0625}},{key:"maximumSpeed",get:function(){return this.isYouTube?Math.max.apply(Math,cosmic._toConsumableArray(this.options.speed)):this.isVimeo?2:16}},{key:"quality",get:function(){return this.media.quality},set:function(e){var t=this.config.quality,n=this.options.quality;if(n.length){var i=[!is.empty(e)&&Number(e),this.storage.get("quality"),t.selected,t.default].find(is.number),o=!0;if(!n.includes(i)){var a=closest(n,i);this.debug.warn("Unsupported quality option: ".concat(i,", using ").concat(a," instead")),i=a,o=!1}t.selected=i,this.media.quality=i,o&&this.storage.set({quality:i})}}},{key:"loop",get:function(){return Boolean(this.media.loop)},set:function(e){var t=is.boolean(e)?e:this.config.loop.active;this.config.loop.active=t,this.media.loop=t}},{key:"source",get:function(){return this.media.currentSrc},set:function(e){source.change.call(this,e)}},{key:"download",get:function(){var e=this.config.urls.download;return is.url(e)?e:this.source},set:function(e){is.url(e)&&(this.config.urls.download=e,controls.setDownloadUrl.call(this))}},{key:"poster",get:function(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null},set:function(e){this.isVideo?ui.setPoster.call(this,e,!1).catch((function(){})):this.debug.warn("Poster can only be set for video")}},{key:"ratio",get:function(){if(!this.isVideo)return null;var e=reduceAspectRatio(getAspectRatio.call(this));return is.array(e)?e.join(":"):e},set:function(e){this.isVideo?is.string(e)&&validateAspectRatio(e)?(this.config.ratio=reduceAspectRatio(e),setAspectRatio.call(this)):this.debug.error("Invalid aspect ratio specified (".concat(e,")")):this.debug.warn("Aspect ratio can only be set for video")}},{key:"autoplay",get:function(){return Boolean(this.config.autoplay)},set:function(e){this.config.autoplay=is.boolean(e)?e:this.config.autoplay}},{key:"toggleCaptions",value:function(e){captions.toggle.call(this,e,!1)}},{key:"currentTrack",get:function(){var e=this.captions,t=e.toggled,n=e.currentTrack;return t?n:-1},set:function(e){captions.set.call(this,e,!1),captions.setup.call(this)}},{key:"language",get:function(){return(captions.getCurrentTrack.call(this)||{}).language},set:function(e){captions.setLanguage.call(this,e,!1)}},{key:"pip",get:function(){return support.pip?is.empty(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===pip.active:null},set:function(e){if(support.pip){var t=is.boolean(e)?e:!this.pip;is.function(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(t?pip.active:pip.inactive),is.function(this.media.requestPictureInPicture)&&(!this.pip&&t?this.media.requestPictureInPicture():this.pip&&!t&&document.exitPictureInPicture())}}},{key:"setPreviewThumbnails",value:function(e){this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),Object.assign(this.config.previewThumbnails,e),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new PreviewThumbnails(this))}}],[{key:"supported",value:function(e,t){return support.check(e,t)}},{key:"loadSprite",value:function(e,t){return _loadSprite(e,t)}},{key:"setup",value:function(t){var n=Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1]?Array.from(arguments)[1]:{},i=null;return is.string(t)?i=Array.from(document.querySelectorAll(t)):is.nodeList(t)?i=Array.from(t):is.array(t)&&(i=t.filter(is.element)),is.empty(i)?null:i.map((function(t){return new e(t,n)}))}}])}();Plyr.defaults=cloneDeep(defaults);var _assign=function(){return _assign=Object.assign||function(e){for(var t,n=1,i=Array.from(arguments).length;n<i;n++)for(var o in t=Array.from(arguments)[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_assign.apply(this,Array.from(arguments))};function __rest(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}function __awaiter(e,t,n,i){return new(n||(n=Promise))((function(t,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function r(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(e){e(i)}))).then(a,r)}s((i=i.apply(e,[])).next())}))}function __generator(e,t){var n,i,o,a,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}function __values(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,a=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)r.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return r}function __spreadArray(e,t,n){if(2===Array.from(arguments).length)for(var i,o=0,a=t.length;o<a;o++)!i&&o in t||(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function n(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,a,r,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t);else for(;!(c=(i=a.call(n)).done)&&(s.push(i.value),s.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(l)throw o}}return s}}(e,n)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?t(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e){return r="function"==typeof Symbol&&"symbol"==cosmic._typeof(Symbol.iterator)?function(e){return cosmic._typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":cosmic._typeof(e)},r(e)}"function"==typeof SuppressedError&&SuppressedError;var o={INTERP_TMP_PREFIX:"__dy{{",INTERP_TMP_SUFFIX:"}}dy__",QUOTATION:"__quotation__",BEGINNING_QUOTATION:"__beginning_quotation__",CLOSING_QUOTATION:"__closing_quotation__",DATA_PREFIX:"$data."},a=/^concat\(\$prevData\.([\w-]+)\s*,\s*([\w-]+)\)$/,c=/{{(.*?)}}/g,i=new RegExp("".concat(o.QUOTATION),"g"),s=new RegExp("^".concat(o.QUOTATION,"+")),l=new RegExp('"'.concat(o.INTERP_TMP_PREFIX,'|"').concat(o.BEGINNING_QUOTATION,"|").concat(o.INTERP_TMP_SUFFIX,'"|').concat(o.CLOSING_QUOTATION,'"'),"g"),f=new RegExp("\\+".concat(o.QUOTATION,"$"),"g");function u(e){return"string"==typeof e&&/{{(.*?)}}/.test(e)}function d(e){if(!e)return e;if(Array.isArray(e))return e.map((function(e){return d(e)}));if("object"===r(e)){if(!e)return e;var t={};return Object.keys(e).forEach((function(n){t[n]=d(e[n])})),t}return function(e){if("string"!=typeof e)return e;if(e.startsWith("{{")&&e.endsWith("}}"))return e.replace(c,(function(e,t){return"".concat(o.INTERP_TMP_PREFIX).concat(t.replace(o.DATA_PREFIX,"")).concat(o.INTERP_TMP_SUFFIX)}));var t=!1,n=e.replace(c,(function(e,n){return t=!0,"".concat(o.QUOTATION,"+").concat(n.replace(o.DATA_PREFIX,""),"+").concat(o.QUOTATION)}));return t&&(n=n.replace(s,o.BEGINNING_QUOTATION).replace(f,o.CLOSING_QUOTATION)),n}(e)}function p(e){if(!e||!e.length)return"[]";var t=[];return e.forEach((function(e,n){t[n]={action:e.action,option:d(e.option)}})),JSON.stringify(t).replace(l,"").replace(i,'"')}function y(e,t,i,o){if(!e)return{};var s=o||new san.Data(t);return function e(o){if(Array.isArray(o))return o.map((function(t){return e(t)}));if("object"===r(o)){if(!o)return o;var l={};return Object.keys(o).forEach((function(t){l[t]=e(o[t])})),l}return"string"==typeof(d=o)&&a.test(d)?function(e,t,i){var o=n(a.exec(e),3),r=o[1],s=o[2];if(!r||!s)throw new Error("concat expression error");var c=i[r],l=t[s];return c&&l?Array.isArray(c)&&Array.isArray(l)?c.concat(l):"string"==typeof c&&"string"==typeof l?c+l:"":c||l||""}(o,t,i):function(e,t){return u(e)?e.startsWith("{{")&&e.endsWith("}}")?san.evalExpr(san.parseExpr(e.slice(2,-2)),t):e.replace(c,(function(e,n){return san.evalExpr(san.parseExpr(n),t)})):e}(o,s);var d}(e)}var v,_,h={direction:{key:"flex-direction",defaultValue:"row"},wrap:{key:"flex-wrap",defaultValue:"wrap"},justifyContent:{key:"justify-content",defaultValue:"center"},alignItems:{key:"align-items",defaultValue:"center"},alignContent:{key:"align-content",defaultValue:"center"},gap:{key:"gap",defaultValue:"9px"}},g=Object.keys(h)||[],E={flex:{key:"flex",defaultValue:1},alignSelf:{key:"align-self",defaultValue:"center"}},m=Object.keys(E)||[],O={text:{name:function(e){void 0!==e.name&&(e.value=e.name,delete e.name)},size:function(e){e.size&&(e.class=e.class||"",e.class+=" cos-text-"+e.size,delete e.size)}},"grid-col":{span:function(e){e.class=e.class||"";var t=" cos-col";e.class+=t,e.span?(e.class+=t+"-"+e.span,delete e.span):e.class+=t+"-1"}},"grid-row":{all:function(e){e.class=e.class||"",e.class+=" cos-row",e.columns&&(e.class+=" cos-row-col-"+e.columns,delete e.columns),e.gutter&&(e.style=e.style||{},e.class+=" cos-gutter",e.style["--cos-grid-gutter"]=e.gutter+"px",delete e.gutter),e.align&&(e.class+=" cos-items-"+e.align,delete e.align),e.justify&&(e.class+=" cos-justify-"+e.justify.replace("space-",""),delete e.justify),e.wrap&&(e.class+=" cos-flex-wrap",delete e.wrap)}},flex:{all:function(e){e.class=e.class||"",e.class+=" cos-flex",e.style=e.style||{},g.forEach((function(t){var n=h[t];e.style[n.key]=n.defaultValue,void 0!==e[t]&&(e.style[n.key]=e[t],delete e[t])}))}},"flex-item":{all:function(e){e.class=e.class?"cosdy-flex-item ".concat(e.class):"cosdy-flex-item",e.style=e.style||{},m.forEach((function(t){var n=E[t];e.style[n.key]=n.defaultValue,void 0!==e[t]&&(e.style[n.key]=e[t],delete e[t])}))}},divider:{all:function(e){e.class=e.class||"";var t=" cos-divider",n=" cos-space-mt-lg cos-space-mb-lg";void 0!==e.vertical&&(e.vertical&&(t+="-vertical",n=" cos-space-mr-xxs cos-space-ml-xxs"),delete e.vertical),void 0!==e.inverse&&(t+=e.inverse?"-inverse":"",delete e.inverse),e.class+=t+n,void 0!==e.height&&(e.style=e.style||{},e.style.height=e.height,delete e.height)}}};!function(e){e.INITED="inited",e.RENDERING="rendering",e.RENDERED="rendered"}(v||(v={})),function(e){e[e.NOT_SUPPORT_TYPE=1001]="NOT_SUPPORT_TYPE",e[e.NOT_SUPPORT_ACTION=1002]="NOT_SUPPORT_ACTION"}(_||(_={}));var T="__dy",I={markdown:"render-finished",echarts:"render-finished"};function N(e,t,n){if(u(t))return" ".concat(e,'="').concat(t,'"');var o=function(e){return e.replace(/-/g,"")}("".concat(T).concat(n.dataIndex).concat(e));return"object"===r(t)&&u(JSON.stringify(t))?" ".concat(e,"='{{").concat(function(e){return e?JSON.stringify(d(e)).replace(l,"").replace(i,'"'):e}(t),"}}'"):(n.data[o]=t," ".concat(e,'="{{').concat(o,'}}"'))}function x(e,t,n,i){var o={},a="",r=e||{};Object.keys(r).forEach((function(e){var t=r[e];o[e]={actionArgsStr:p(t)}}));var s=n.events[t]||{};Object.keys(s).forEach((function(e){o[e]=o[e]||{},o[e].dom=!!s[e].dom}));var c=I[t];return c&&i&&(o[c]=o[c]||{},n.asyncComptRefs.push(i)),Object.keys(o).forEach((function(e){var n=o[e];a+=" on-".concat(e,"='").concat(n.dom?"native:":"",'__handleProxy($event, "').concat(e,'", "').concat(t,'", ').concat(n.actionArgsStr||"[]",")'"),n.actionArgsStr&&(a+=" ".concat(T,"action").concat(e,"='").concat(n.actionArgsStr,"'"))})),a}function R(e){return e?' s-for="'+function(e){return u(e)?e.slice(2,-2):e}(e)+'"':""}function b(e){return e?' s-if="'+e+'"':""}function S(e){return e?' class="cosdy-ui '+e+'"':' class="cosdy-ui"'}function w(e){if(!e)return"";var t=Object.keys(e);if(!t.length)return"";var n=' style="';return t.forEach((function(t){var i=e[t];n+="".concat(t,":").concat(i,";")})),n+='"'}var A={block:"div",grid:"fragment",divider:"div","grid-col":"div","grid-row":"div",flex:"div","flex-item":"div"},k={text:"span",paragraph:"div"};function P(e,t){if(e&&e.length)for(var n=0,i=e.length;n<i;n++)C(e[n],t)}function j(e){var t={};return Object.keys(A).forEach((function(e){t[e]=function(t,n){!function(e,t,n){t.dataIndex++;var i=A[n],o=e.props||{};"grid-col"===n&&O["grid-col"].span(o),"grid-row"===n&&O["grid-row"].all(o),"flex"===n&&O.flex.all(o),"flex-item"===n&&O["flex-item"].all(o),"divider"===n&&O.divider.all(o),t.tpl+="<"+i+b(e.if)+R(e.for)+w(o.style)+S(o.class)+x(e.events,n,t)+">",P(e.children,t),t.tpl+="</"+i+">"}(t,n,e)}})),Object.keys(k).forEach((function(e){t[e]=function(t,n){!function(e,t,n){t.dataIndex++;var i=k[n],o=e.props||{};"text"===n&&(O.text.name(o),O.text.size(o)),t.tpl+="<"+i+b(e.if)+R(e.for)+w(o.style)+S(o.class)+x(e.events,n,t)+">"+o.value+"</"+i+">"}(t,n,e)}})),e&&Object.keys(e).forEach((function(e){t[e]=function(t,n){!function(e,t,n){t.dataIndex++;var i="".concat(n,"-").concat(t.dataIndex);t.tpl+="<"+n+b(e.if)+R(e.for)+' s-ref="'.concat(i,'"')+x(e.events,n,t,i);var o=e.props||e.data||{};o.class=o.class?"cosdy-ui ".concat(o.class):"cosdy-ui",o&&Object.keys(o).forEach((function(e){t.tpl+=N(e,o[e],t)})),e.children?(t.tpl+=">",P(e.children,t),t.tpl+="</"+n+">"):t.tpl+=" />"}(t,n,e)}})),t}function C(e,t,n,i,o){var a;t||(t={tpl:"",data:{},parsers:j(n),events:i||{},nodes:o||{},asyncComptRefs:[],dataIndex:0,parseError:[]});var r=t.nodes[e.type||e.component];if("function"==typeof r)try{e=JSON.parse(JSON.stringify(r(JSON.parse(JSON.stringify(e)))))}catch(t){throw new Error('type: "'.concat(e.type,'" nodeTransformer error'))}var s=e.type||e.component;return s||(e.type="fragment"),t.parsers[s]?(t.parsers[s](e,t),t):(console.error('type: "'.concat(s,'" not support')),null===(a=t.parseError)||void 0===a||a.push({errCode:_.NOT_SUPPORT_TYPE,errMsg:'type: "'.concat(s,'" not support'),detail:{type:s}}),t)}var D=["link","sendPrompt","openDrawer","closeDrawer","openHalfScreen","closeHalfScreen","dispose","disabled","log","previewImage"],U={compile:function(e){if(!e.ui)throw new Error("options.ui is required");if(!e.components)throw new Error("options.components is required");var t=this.normalizeEventOption(e.events||{}),n=C(e.ui,void 0,e.components,t,e.nodes),i=Object.assign({},e.dataExtends),o=Object.keys(i).length>0,a=U.compileDataExtends(i);return san.defineComponent({components:e.components||{},template:n.tpl,__renderState:v.INITED,__appRendered:!1,__asyncComptRendered:!1,initData:function(){return n.data},inited:function(){var e=this;n.parseError&&n.parseError.forEach((function(t){e.__handleError(t)})),this.appendData({})},attached:function(){var e=this;this.nextTick((function(){e.__appRendered=!0,e.__handleRendered()}))},updated:function(){var e=this;this.__setState(v.INITED),this.nextTick((function(){e.__appRendered=!0,e.__handleRendered()}))},appendData:function(e,t){var n=this,i=Object.assign({},this.data.get());if(Object.keys(e).forEach((function(i){n.data.set(i,e[i],t)})),o){var r=a(e,i,this.data);Object.keys(r).forEach((function(e){n.data.set(e,r[e],t)}))}},__setState:function(e){e===v.INITED&&(this.__appRendered=!1,this.__asyncComptRendered=!1),this.__renderState=e},__checkAsyncComptRendered:function(){if(this.__asyncComptRendered)return!0;for(var e=n.asyncComptRefs.length-1;e>=0;e--){var t=this.ref(n.asyncComptRefs[e]);if(null==t?void 0:t.rendering)return this.__asyncComptRendered=!1,!1}return this.__asyncComptRendered=!0,!0},__handleRendered:function(){this.__renderState!==v.RENDERED&&this.__appRendered&&this.__checkAsyncComptRendered()&&(this.__setState(v.RENDERED),e.onRendered&&e.onRendered())},__handleProxy:function(n,i,o,a){var r=this;i===I[o]&&this.__handleRendered();var s=t[o];if(s&&s[i]&&s[i].listener(n),e.actions&&a&&a.length){var c=this.data.get(),l={};Object.keys(c).forEach((function(e){e.startsWith(T)||(l[e]=c[e])})),a.forEach((function(t){var i=t.action;if(!D.includes(i))return console.error("".concat(i,", action not support")),void r.__handleError({errCode:_.NOT_SUPPORT_ACTION,errMsg:"".concat(i," action not support"),detail:{action:i}});if(!e.actions[i])throw new Error("".concat(i,", action not registered"));e.actions[i]({$event:n,$data:l,args:t.option||{},node:o})}))}},__handleError:function(t){e.onError&&t.errCode&&t.errMsg&&e.onError(t)}})},compileUI:function(e,t){var n=t.components,i=t.events,o=t.nodes;if(!e)throw new Error("ui is required");if(!n)throw new Error("options.components is required");return C(e,void 0,n,this.normalizeEventOption(i||{}),o).tpl},compileDataExtends:function(e){return e?function(t){return y(e,t,Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1]?Array.from(arguments)[1]:{},Array.from(arguments).length>2?Array.from(arguments)[2]:void 0)}:function(){return{}}},normalizeEventOption:function(e){var t={};return Object.keys(e).forEach((function(n){var i=e[n];t[n]={},Object.keys(i).forEach((function(e){var o=i[e];t[n][e]="function"==typeof o?{listener:o}:o}))})),t}};function styleInject(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var css_248z$h=".agent-ui-text-container{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.agent-ui-text-content.cos-text-headline,.agent-ui-text-content.cos-text-headline-sm,.agent-ui-text-content.cos-text-headline-xl,.agent-ui-text-content.cos-text-subtitle,.agent-ui-text-content.cos-text-subtitle-sm{margin-bottom:-3px;margin-top:-3px}.agent-ui-text-content.cos-text-body,.agent-ui-text-content.cos-text-body-lg,.agent-ui-text-content.cos-text-caption,.agent-ui-text-content.cos-text-caption-sm{margin-bottom:-4.5px;margin-top:-4.5px}";styleInject(css_248z$h);var AgentUIText=san.defineComponent({template:'\n        <div\n            class="agent-ui-text cos-color-text{{(!content && !name) ? \' no-content\' : \'\'}}"\n            on-click="handleClick"\n        >\n            <div class="agent-ui-text-container">\n                <div class="agent-ui-text-content {{\n                    content || name ? sizeWithPrefix : \'\'\n                }}">\n                    {{content || name}}\n                </div>\n            </div>\n        </div>\n    ',canSpeak:!0,computed:{sizeWithPrefix:function(){var e=this.data.get("appearance")||this.data.get("size");return e?"cos-text-".concat(e):"cos-text-body"}},initData:function(){return{size:"body"}},attached:function(){this.dispatch("UI:ADD_COMPONENT",this)},getSpeakText:function(){return this.data.get("content")||this.data.get("name")},handleClick:function(){this.fire("click")}}),ROOT_UNIQUE_ID="EB_PLUGIN_UI_ROOT",CONCAT_REGEXP=/^concat\(\$prevData\.([^,]+),([^,]+)\)$/;function generateId(){return Math.random().toString(16).slice(2)}function getRoot(e){for(var t=e;t&&t._uniqueId!==ROOT_UNIQUE_ID;)t=t.owner;return t}var PLATFORM="pc",isPC=function(){return!/swandevtools|Mobile|Android|iPhone|iPad|iPod/i.test(navigator.userAgent)};function isMobile(){return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)}var isAndroid=function(){return/android/i.test(window.navigator.userAgent)},formatTimeDuration=function(e){var t=Math.floor(e/60).toString().padStart(2,"0"),n=Math.floor(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(n)};function getDesignTokenValue(e,t){return getComputedStyle(e).getPropertyValue(t)}function isObject$1(e){return"[object Object]"===Object.prototype.toString.call(e)}function mergeObject(e,t){if(!isObject$1(e)||!isObject$1(t))return{};var n=_assign(_assign({},e),t);for(var i in e)isObject$1(e[i])&&isObject$1(t[i])&&(n[i]=mergeObject(e[i],t[i]));return n}function isInterp(e){return"string"==typeof e&&e.startsWith("{{")&&e.endsWith("}}")}function isConcatExpr(e){return"string"==typeof e&&CONCAT_REGEXP.test(e)}var CONTAINER=["block","flex","flex-item","grid","grid-row","grid-col","tabs","tab","tab-pane","swiper","swiper-item"],ListLayoutAppearance;!function(e){e.PAGINATION="pagination",e.VERTICAL="vertical",e.SCROLL="scroll"}(ListLayoutAppearance||(ListLayoutAppearance={}));var DEFAULT_ITEM_WIDTH="150px",COMPONENT_LIST_LAYOUT_CONFIG={"location-item":{layoutAppearance:ListLayoutAppearance.PAGINATION,itemClass:" cos-space-mt-md"},"note-item":{layoutAppearance:ListLayoutAppearance.SCROLL},"goods-card":{layoutAppearance:ListLayoutAppearance.VERTICAL,itemClass:" cos-space-mt-md",maxSize:3},"goods-card-ghost":{layoutAppearance:ListLayoutAppearance.VERTICAL,itemClass:" cos-space-mt-md",maxSize:3},"goods-card-thin":{layoutAppearance:ListLayoutAppearance.SCROLL},"site-vcard":{layoutAppearance:ListLayoutAppearance.SCROLL,swiperItemWidth:isPC()?"41.67%":"66.67%"},"promo-card":{layoutAppearance:ListLayoutAppearance.VERTICAL,itemClass:" cos-space-mt-md"},"shop-card":{layoutAppearance:ListLayoutAppearance.VERTICAL,maxSize:3}};function processGoodsCardNode(e,t){e.props?e.props&&!e.props.appearance&&(e.props.appearance="{{".concat(t,".length === 1 ? '' : 'ghost'}}")):e.props={appearance:"{{".concat(t,".length === 1 ? '' : 'ghost'}}")};var n=e.props.appearance;return e.props.goodAppearance=n,"ghost"!==n&&"thin"!==n&&"thin-ghost"!==n?{type:"goods-card",node:e}:{type:"goods-card-".concat(n),node:e}}function processShopCardNode(e,t){return e.props?e.props&&!e.props.appearance&&(e.props.appearance="{{".concat(t,".length === 1 ? '' : 'ghost'}}")):e.props={appearance:"{{".concat(t,".length === 1 ? '' : 'ghost'}}")},e}function processAppearanceForNode(e,t){var n,i,o=null===(i=(null===(n=e.props)||void 0===n?void 0:n.appearance)||"")||void 0===i?void 0:i.trim();return e.props?o?isInterp(o)&&(o=/^\{\{(.*)\}\}$/g.exec(o||"")[1]||"",e.props.appearance="{{".concat(o," ? ").concat(o," :(").concat(t,".length <= 1 ? '' : 'ghost')}}")):e.props.appearance="{{".concat(t,".length <= 1 ? '' : 'ghost'}}"):e.props={appearance:"{{".concat(t,".length <= 1 ? '' : 'ghost'}}")},e}function processForStr(e){var t=/^\s*([$0-9a-z_]+)\s*(,\s*([$0-9a-z_]+))?\s+in\s+/gi.exec(e);if(!(null==t?void 0:t.length))return{};var n=t.index+t[0].length,i=/\s*trackBy\s+/gi.exec(e),o=e.length;return i&&(o=i.index),{item:(null==t?void 0:t[1])||"",index:(null==t?void 0:t[3])||"",list:e.slice(n,o)}}function processListNode(e,t){var n,i,o,a=(null===(n=/^\{\{(.*)\}\}$/g.exec(t.for||""))||void 0===n?void 0:n[1])||(null==t?void 0:t.for);if(!a&&!(null===(i=t.props)||void 0===i?void 0:i.__handled))return t.props?(t.props.__agentUIListItemIndex=0,"goods-card"===e&&(t.props.appearance=""),t):(t.props={__agentUIListItemIndex:0},"goods-card"===e&&(t.props.appearance=""),t);if(!a||(null===(o=t.props)||void 0===o?void 0:o.__handled))return t;var r=processForStr(a),s=r.item,c=r.index,l=r.list;if(!s||!l)return t;var d=c||"__agentUIListItemIndex";if(a="".concat(s,", ").concat(d," in ").concat(l),"goods-card"===e){var p=processGoodsCardNode(t,l);e=p.type,t=p.node}"promo-card"===e&&(t=processAppearanceForNode(t,l)),"shop-card"===e&&(t=processShopCardNode(t,l));var h=COMPONENT_LIST_LAYOUT_CONFIG[e],u=h.layoutAppearance,m=void 0===u?"":u,f=h.maxSize,g=h.itemClass,y=void 0===g?"":g,v=h.swiperItemWidth,b=void 0===v?"":v;t.props&&isObject$1(t.props)?(t.props.__agentUIListItemIndex="{{".concat(d,"}}"),t.props.__agentUIList="{{".concat(l,"}}"),t.props.__handled=!0,y&&(t.props.class=t.props.class||"",t.props.class+="{{".concat(d," !== 0 ? '").concat(y,"' : ''}}"))):(t.props={__agentUIListItemIndex:"{{".concat(d,"}}"),__handled:!0},y&&(t.props.class=t.props.class||"",t.props.class+="{{".concat(d," !== 0 ? '").concat(y,"' : ''}}"))),delete t.for;var x="";switch(e){case"location-item":x="agent-ui-location-list";break;case"note-item":x="agent-ui-note-list"}var _=(isObject$1(t.listOptions)?t.listOptions:{})||{},k=_.overscrollLink,w=__rest(_,["overscrollLink"]),C=k?{showMoreLink:!0,overscrollLink:k}:{};if(m===ListLayoutAppearance.PAGINATION)return a="".concat(s,", ").concat(d," in __page"),t.props.__agentUIListItemIndex="{{+__page_index * 3 + ".concat(d,"}}"),{type:"list-layout",if:"{{".concat(l," && ").concat(l,".length}}"),props:{class:x,type:e,appearance:m,items:"{{".concat(l,"}}")},children:[{type:"block",for:a,children:[_assign({},t),{type:"divider",props:{class:"cos-space-mt-none cos-space-mb-none"},if:"".concat(d," !== __page.length - 1")}]}]};if(m===ListLayoutAppearance.SCROLL){var S=[{type:"swiper-item",for:a,props:{width:"".concat(b||DEFAULT_ITEM_WIDTH)},children:[t]}];return{type:"list-layout",if:"{{".concat(l," && ").concat(l,".length}}"),props:_assign(_assign({class:x,type:e,appearance:m,items:"{{".concat(l,"}}")},C),w),children:S}}var E="true";f&&!isNaN(f)&&(E="".concat(d," < ").concat(f));var T={type:"block",for:a,children:[{type:"block",if:E,children:[t]}]};return{type:"list-layout",if:"{{".concat(l," && ").concat(l,".length}}"),props:_assign(_assign({class:x,type:e,appearance:m,items:"{{".concat(l,"}}")},C),w),children:[T]}}function processTabsNode(e){var t;if(e)try{var n=[];return(null===(t=null==e?void 0:e.children)||void 0===t?void 0:t.length)&&e.children.forEach((function(t){var i,o,a,r;"tab-pane"===t.type&&(null===(i=null==t?void 0:t.props)||void 0===i?void 0:i.title)&&(t.props.style=Object.assign({width:"100%"},null===(o=t.props)||void 0===o?void 0:o.style),n.push({type:"tab",props:{slot:"tab"},for:e.for||"",children:[{type:"text",props:{content:null===(a=t.props)||void 0===a?void 0:a.title,size:"subtitle-sm"}}]}),null===(r=t.props)||void 0===r||delete r.title,t.for=e.for||"",n.push(t))})),delete e.for,e.children=n,e}catch(t){return e}}var nodesProcessor=function(){var e=this,t=function(e){var t=(e.props||{}).class||"";return e.props&&isObject$1(e.props)?e.props.class=t?"cosdy-container ".concat(t):"cosdy-container":e.props={class:"cosdy-container"},e},n={};return CONTAINER.forEach((function(e){n[e]=t})),Object.assign({},n,{"base-clue-form":function(e){var t,n={action:"sendPrompt",option:{msg:""}};if(!e.events||"[object Object]"!==Object.prototype.toString.call(e.events))return e.events={submit:[n]},e;var i=e.events.submit;return i&&Array.isArray(i)?(null===(t=e.events.submit)||void 0===t||t.unshift(n),e):(e.events.submit=[n],e)},"good-card":function(e){return e.type="goods-card",processListNode("goods-card",e)},"goods-card":function(e){return processListNode("goods-card",e)},"location-item":function(e){return processListNode("location-item",e)},markdown:function(t){if(!t.props||!Object.keys(t.props))return t;if(void 0!==t.props.isAppend)return t;var n=e.data.get("_dataExtends"),i=t.props.content||"";if(isInterp(i)){var o=/{{(.*?)}}/.exec(i),a=null==o?void 0:o[1],r=new san.Data(n).get(a);if(r&&isConcatExpr(r))return t.props.isAppend=!0,t}return t},"note-item":function(e){return processListNode("note-item",e)},"note-list":function(e){var t,n;e.type="note-item";var i=e.props;if(!i||!isObject$1(i))return e;var o=null===(n=/^\{\{(.*)\}\}$/g.exec(null===(t=e.props)||void 0===t?void 0:t.items))||void 0===n?void 0:n[1];return o?(e.for="_agentUINoteListItem, _agentUINoteListIndex in ".concat(o),e.props=_assign(_assign({},i),{coverImage:"{{_agentUINoteListItem.coverImage}}",favorNum:"{{_agentUINoteListItem.favorNum}}",isVideo:"{{_agentUINoteListItem.isVideo}}",videoDuration:"{{_agentUINoteListItem.videoDuration}}",title:"{{_agentUINoteListItem.title}}",authorInfo:"{{_agentUINoteListItem.authorInfo}}",link:"{{_agentUINoteListItem.link}}"}),processListNode("note-item",e)):e},"location-list":function(e){var t,n;e.type="location-item";var i=e.props;if(!i||!isObject$1(i))return e;var o=null===(n=/^\{\{(.*)\}\}$/g.exec(null===(t=e.props)||void 0===t?void 0:t.items))||void 0===n?void 0:n[1];return o?(e.for="_agentUILocationListItem, _agentUILocationListIndex in ".concat(o),e.props=_assign(_assign({},i),{title:"{{_agentUILocationListItem.title}}",score:"{{_agentUILocationListItem.score}}",coverImage:"{{_agentUILocationListItem.coverImage}}",cost:"{{_agentUILocationListItem.cost}}",category:"{{_agentUILocationListItem.category}}",address:"{{_agentUILocationListItem.address}}",openingHours:"{{_agentUILocationListItem.openingHours}}",rankTag:"{{_agentUILocationListItem.rankTag}}",tags:"{{_agentUILocationListItem.tags}}",link:"{{_agentUILocationListItem.link}}"}),processListNode("location-item",e)):e},"site-vcard":function(e){return processListNode("site-vcard",e)},"grid-row":function(e){return(e=t(e)).props?(isObject$1(e.props)&&e.props.columns&&2==+e.props.columns&&(e.props.gutter=8),e):e},"promo-card":function(e){return processListNode("promo-card",e)},"shop-card":function(e){return processListNode("shop-card",e)},tabs:function(e){return e.for&&(e=processTabsNode(e)),t(e)},button:function(e){var t,n,i=null===(t=null==e?void 0:e.events)||void 0===t?void 0:t.click;return(null==i?void 0:i.length)&&e.props&&isObject$1(e.props)&&(e.props.__agentUIActionType=null===(n=i[0])||void 0===n?void 0:n.action),e},video:function(t){return e.data.get("_useRichVideoPlayer")?(t.type="rich-video-player",t):t}})},SDK_HANDLER_KEY,_a$2;!function(e){e.link="link",e.request="request",e.showToast="showToast",e.prompt="sendPrompt",e.previewImage="previewImage",e.frameLog="sendFrameLog",e.assistantLog="sendLog",e.openDrawer="openDrawer",e.closeDrawer="closeDrawer",e.error="error",e.dispose="dispose",e.disabled="disabled",e.overlay="overlay",e.reward="reward",e.makePhoneCall="makePhoneCall",e.markdownCache="markdownCache"}(SDK_HANDLER_KEY||(SDK_HANDLER_KEY={}));var SDK_GLOBAL_EVENT=(_a$2={},_a$2[SDK_HANDLER_KEY.prompt]="agent-ui-prompt",_a$2[SDK_HANDLER_KEY.error]="agent-ui-error",_a$2[SDK_HANDLER_KEY.frameLog]="agent-ui-log",_a$2[SDK_HANDLER_KEY.assistantLog]="agent-ui-assistant-log",_a$2[SDK_HANDLER_KEY.dispose]="agent-ui-dispose",_a$2[SDK_HANDLER_KEY.previewImage]="agent-ui-preview-image",_a$2[SDK_HANDLER_KEY.disabled]="agent-ui-disabled",_a$2[SDK_HANDLER_KEY.openDrawer]="agent-ui-open-drawer",_a$2[SDK_HANDLER_KEY.closeDrawer]="agent-ui-close-drawer",_a$2[SDK_HANDLER_KEY.overlay]="agent-ui-overlay",_a$2[SDK_HANDLER_KEY.showToast]="agent-ui-show-toast",_a$2[SDK_HANDLER_KEY.reward]="agent-ui-reward",_a$2[SDK_HANDLER_KEY.markdownCache]="agent-ui-markdown-cache",_a$2),EventEmitter=function(){function e(e){this.engine=e,this.events=new Map}return e.prototype.emit=function(e,t){var n,i,o=this.events.get(e);if(o)try{for(var a=__values(o),r=a.next();!r.done;r=a.next())(0,r.value)({target:this.target,engine:this.engine,arg:t})}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},e.prototype.on=function(e,t){this.events.has(e)||this.events.set(e,[]),this.events.get(e).push(t)},e.prototype.off=function(e){e?this.events.delete(e):this.events.clear()},e.prototype.setTarget=function(e){this.target=e},e}(),swanInvokeLoader=null,ua=navigator.userAgent,baiduReg=/baiduboxapp\/([\d.]+)/i;function initLinkSdk(){if(swanInvokeLoader)return swanInvokeLoader;var e=document.createElement("script");return e.type="text/javascript",e.src="https://b.bdstatic.com/searchbox/icms/searchbox/js/swanInvoke.js",document.body.appendChild(e),swanInvokeLoader=new Promise((function(t){return e.onload=function(){t(!0)}}))}function h5Jump(e){var t=e.url;"replace"===e.type?window.location.replace(t):window.open(t,"_blank")}function linkHandle(e,t){var n,i;if("object"==cosmic._typeof(e)){var o=(null===(n=t.env)||void 0===n?void 0:n.platform)||"";switch(ua&&baiduReg.test(ua)&&(o="na"),o){case"pc":h5Jump({url:e.pcUrl||e.url,type:e.h5JumpType||""});break;case"na":if(null===(i=e.swan)||void 0===i?void 0:i.appKey)return void initLinkSdk().then((function(){var t,n,i,o,a=(null===(t=e.swan)||void 0===t?void 0:t.query)?"".concat(null===(n=e.swan)||void 0===n?void 0:n.path,"?").concat(null===(i=e.swan)||void 0===i?void 0:i.query):null===(o=e.swan)||void 0===o?void 0:o.path;window.swanInvoke({appKey:e.swan.appKey,path:a})}));h5Jump({url:e.url,type:e.h5JumpType||""});break;default:h5Jump({url:e.url,type:e.h5JumpType||""})}}else console.error("LinkApiParams ")}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread2(e){for(var t=1;t<Array.from(arguments).length;t++){var n=null!=Array.from(arguments)[t]?Array.from(arguments)[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _regeneratorRuntime(){_regeneratorRuntime=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function d(e,t,n,i){var a=t&&t.prototype instanceof y?t:y,r=Object.create(a.prototype),s=new I(i||[]);return o(r,"_invoke",{value:E(e,n,s)}),r}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h="suspendedStart",u="suspendedYield",m="executing",f="completed",g={};function y(){}function v(){}function b(){}var x={};l(x,r,(function(){return this}));var _=Object.getPrototypeOf,k=_&&_(_(L([])));k&&k!==n&&i.call(k,r)&&(x=k);var w=b.prototype=y.prototype=Object.create(x);function C(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,r,s){var c=p(e[o],e,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==cosmic._typeof(d)&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,r,s)}),(function(e){n("throw",e,r,s)})):t.resolve(d).then((function(e){l.value=e,r(l)}),(function(e){return n("throw",e,r,s)}))}s(c.arg)}var a;o(this,"_invoke",{value:function(e,i){function o(){return new t((function(t,o){n(e,i,t,o)}))}return a=a?a.then(o,o):o()}})}function E(t,n,i){var o=h;return function(a,r){if(o===m)throw new Error("Generator is already running");if(o===f){if("throw"===a)throw r;return{value:e,done:!0}}for(i.method=a,i.arg=r;;){var s=i.delegate;if(s){var c=T(s,i);if(c){if(c===g)continue;return c}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(o===h)throw o=f,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);o=m;var l=p(t,n,i);if("normal"===l.type){if(o=i.done?f:u,l.arg===g)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(o=f,i.method="throw",i.arg=l.arg)}}}function T(t,n){var i=n.method,o=t.iterator[i];if(o===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var a=p(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var r=a.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[r];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(i.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(cosmic._typeof(t)+" is not iterable")}return v.prototype=b,o(w,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:v,configurable:!0}),v.displayName=l(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},C(S.prototype),l(S.prototype,s,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,i,o,a){void 0===a&&(a=Promise);var r=new S(d(e,n,i,o),a);return t.isGeneratorFunction(n)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},C(w),l(w,c,"Generator"),l(w,r,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=L,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(i,o){return s.type="throw",s.arg=t,n.next=i,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a],s=r.completion;if("root"===r.tryLoc)return o("end");if(r.tryLoc<=this.prev){var c=i.call(r,"catchLoc"),l=i.call(r,"finallyLoc");if(c&&l){if(this.prev<r.catchLoc)return o(r.catchLoc,!0);if(this.prev<r.finallyLoc)return o(r.finallyLoc)}else if(c){if(this.prev<r.catchLoc)return o(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return o(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var r=a?a.completion:{};return r.type=e,r.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var o=i.arg;A(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:L(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),g}},t}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==cosmic._typeof(Symbol.iterator)?function(e){return cosmic._typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":cosmic._typeof(e)},_typeof(e)}function asyncGeneratorStep(e,t,n,i,o,a,r){try{var s=e[a](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(i,o)}function _asyncToGenerator(e){return function(){var t=this,n=Array.from(arguments);return new Promise((function(i,o){var a=e.apply(t,n);function r(e){asyncGeneratorStep(a,i,o,r,s,"next",e)}function s(e){asyncGeneratorStep(a,i,o,r,s,"throw",e)}r(void 0)}))}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey(i.key),i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPrimitive(e,t){if("object"!=cosmic._typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=cosmic._typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==cosmic._typeof(t)?t:String(t)}var getUa=function(){try{return window.navigator.userAgent}catch(e){return""}},getCookie=function(){try{return document.cookie}catch(e){return""}},canIUseSendBeacon=function(){try{return"function"==typeof window.navigator.sendBeacon}catch(e){return!1}},setCookie=function(e){try{document.cookie=e}catch(e){}},isBox=function(){var e=getUa(),t=/ (lite|info) baiduboxapp\//i.test(e),n=/ mission baiduboxapp\//i.test(e);return/ baiduboxapp\//i.test(e)&&!t&&!n},isSwan=function(){var e=getUa();return/swan/i.test(e)},getLocation=function(){try{return document.location}catch(e){return{href:"",protocol:"https:",origin:"",pathname:""}}};function stringify(){var e=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:{};if(!e)return"";var t="";for(var n in e)if(e.hasOwnProperty(n)){var i;i=null===e[n]?"":"object"===_typeof(e[n])?JSON.stringify(e[n]):String(e[n]),t+="&"+encodeURIComponent(n)+"="+encodeURIComponent(i)}return t.slice(1)}function renderUrl(){var e=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:"",t=Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1]?Array.from(arguments)[1]:{};return e+(~e.indexOf("?")?"&":"?")+stringify(t)}function isObject(e){return"[object Object]"===Object.prototype.toString.call(e)}var getUrlQuery=function(e){for(var t=getLocation().href,n=new RegExp("[\\?&]([^\\?&\\=\\/]+)=([^\\?\\&\\=\\/]*)","g"),i={},o=null;null!==(o=n.exec(t));)i[o[1]]=o[2];return i[e]},getUrl=function(e,t){var n={};return Object.keys(t).forEach((function(e){void 0!==t[e]&&null!==t[e]&&""!==t[e]&&(n[e]=t[e])})),0===Object.keys(n).length?e:renderUrl(e,n)},getCookieByName=function(e){var t=getCookie();return decodeURIComponent(t.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[-.+*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||""},merge=function e(t,n){return isObject(t)&&isObject(n)?Object.keys(_objectSpread2(_objectSpread2({},t),n)).reduce((function(i,o){return i[o]=e(t[o],n[o]),i}),{}):void 0===n?t:n},getProtocol=function(){return["http:","https:"].includes(getLocation().protocol)?getLocation().protocol:"https:"},CONFIG={UBC_URL:getProtocol()+"//h2tcbox.baidu.com/ztbox",DEFAULT_LOG_DATA:{cateid:"99",actiondata:{id:"0",type:"0",timestamp:0,content:{page:"-",type:"-",value:"-",source:"default",from:"act",ext:{apptype:"-"}}}},DEFAULT_QUERY:{action:"zpblog",v:"2.0",appname:"baiduboxapp",from:"",cfrom:"",smfw:""}},CONFIG_MERGE={UBC_URL:getProtocol()+"//h2tcbox.baidu.com/ztbox",DEFAULT_LOG_DATA:{cateid:"101",data:[]},DEFAULT_QUERY:{action:"mpblog",v:"2.0",appname:"baiduboxapp",from:"",cfrom:"",smfw:"",sid:"",sn:""}},createImg=function(e){try{var t=document.createElement("img");return t.width=1,t.height=1,t.src=e,t}catch(e){return null}},callbackWaitingTime=100;function imgPing(e,t){return new Promise((function(n){e=renderUrl(e,{data:t});var i=createImg(e),o=!1;setTimeout((function(){o||(n(void 0),o=!0)}),callbackWaitingTime),i&&(i.onload=i.onerror=function(){i=null,o||(n(void 0),o=!0)})}))}function beaconSend(e,t){var n=Array.from(arguments).length>2&&void 0!==Array.from(arguments)[2]?Array.from(arguments)[2]:{};return new Promise((function(i,o){("post"===n.sendMethod?window.navigator.sendBeacon(e,"data="+encodeURIComponent(JSON.stringify(t))):window.navigator.sendBeacon(renderUrl(e,{data:t})))?i(void 0):(imgPing(e,t),o())}))}function xhrSend(e,t){var n="post"===(Array.from(arguments).length>2&&void 0!==Array.from(arguments)[2]?Array.from(arguments)[2]:{}).sendMethod?"POST":"GET";return e="POST"===n?e:renderUrl(e,{data:t}),new Promise((function(i,o){var a=new XMLHttpRequest;a.addEventListener("loadend",(function(){200===a.status?i(void 0):o()})),a.open(n,e),a.withCredentials=!0,"POST"===n?(a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send("data="+encodeURIComponent(JSON.stringify(t)))):a.send()}))}function smartSend(e,t){var n=Array.from(arguments).length>2&&void 0!==Array.from(arguments)[2]?Array.from(arguments)[2]:{};return n.useXhr?xhrSend(e,t,n):canIUseSendBeacon()&&n.useSendBeacon?beaconSend(e,t,n):imgPing(e,t)}function registerPageVisibilityEvent(e){try{var t=document,n="hidden",i="visibilitychange";if(void 0!==t.hidden)n="hidden",i="visibilitychange";else if(void 0!==t.msHidden)n="msHidden",i="msvisibilitychange";else if(void 0!==t.webkitHidden)n="webkitHidden",i="webkitvisibilitychange";else{if(void 0===t.baiduboxappvisibilitychange)return;n="webkitHidden",i="webkitvisibilitychange"}t.addEventListener&&t.addEventListener(i,(function(){e(!!t[n])}),!1)}catch(e){}}var version="3.5.3",uaRegMap=[{appname:"baiduboxmission",reg:/\bmission\sbaiduboxapp\b/i,appid:"10006"},{appname:"baiduboxlite",reg:/\b(?:lite|info) baiduboxapp\b/i,appid:"10001"},{appname:"baiduboxapp",reg:/\bbaiduboxapp\b/i,appid:"1"},{appname:"tieba",reg:/\btieba\b/i,appid:"11001"},{appname:"haokan",reg:/\bhaokan\b/i,appid:"11000"},{appname:"quanmin",reg:/\bbdminivideo\b/i,appid:"12022"},{appname:"bdmap",reg:/\bbaidumap_/i,appid:"11006"},{appname:"wangpan",reg:/\bnetdisk;/i,appid:"12018"},{appname:"askmybaby",reg:/\bmybaby\//i,appid:"12019"},{appname:"xifan",reg:/\bbdxifan\//i,appid:"12006"},{appid:"12031",appname:"sowhat"},{appid:"12010",appname:"lemon",reg:/lemonapp/i},{appid:"12015",appname:"baijiahao"},{appid:"12012",appname:"fanle"},{appid:"12013",appname:"zhaocaimao"},{appid:"12014",appname:"gamenow"},{appid:"12016",appname:"iqiyi"},{appid:"12017",appname:"baike"},{appid:"12023",appname:"flow"},{appid:"12026",appname:"dutaxi"},{appid:"12011",appname:"youjia"},{appid:"12020",appname:"feedsunion"},{appid:"12021",appname:"album"},{appid:"12024",appname:"webgame"},{appid:"12027",appname:"hmi_passenger"},{appid:"12028",appname:"bdwenku"},{appid:"12029",appname:"fanyi"},{appid:"12030",appname:"iknow"},{appid:"12025",appname:"duxiaoxiao"},{appid:"12032",appname:"baiduhanyu"},{appid:"12034",appname:"exp"},{appid:"12036",appname:"demo"},{appid:"12037",appname:"baiduyuedu"},{appid:"12038",appname:"cdm"},{appid:"12040",appname:"weiba"},{appid:"12041",appname:"baiduboxvision"},{appid:"12042",appname:"hiphop"},{appid:"12043",appname:"robobus-panel"},{appid:"12044",appname:"wenkustudent"},{appid:"12045",appname:"pc_live"},{appid:"12049",appname:"yunshangbaidu"},{appid:"12050",appname:"baiduwenku_pc"},{appid:"12051",appname:"yinci"},{appid:"12052",appname:"novel"},{appid:"12054",appname:"yoopu"},{appid:"12057",appname:"yinbo"},{appid:"12062",appname:"aiqicha"},{appid:"12066",appname:"Bamboo_Health"},{appid:"12067",appname:"Bamboo_Health_Dr"},{appid:"12073",appname:"superduer"},{appid:"12074",appname:"baidujiankangapp"},{appid:"12075",appname:"bdcrm_aifanfan"},{appid:"12077",appname:"muzhidoctor"},{appid:"12079",appname:"apollogo"},{appid:"12080",appname:"lvlin"},{appid:"12083",appname:"aipurchase"},{appid:"12088",appname:"BaiDuCarLife"},{appid:"12090",appname:"baidujiankangtt"},{appid:"12092",appname:"infoflow",reg:/\bbaiduhi/i},{appid:"12094",appname:"hmi_driver"},{appid:"12095",appname:"vr_expo"},{appid:"12096",appname:"content_ecommerce"},{appid:"12097",appname:"play_control"},{appid:"12098",appname:"aipurchaser"},{appid:"12101",appname:"ditutaojin"},{appid:"12102",appname:"hp_location"},{appid:"12106",appname:"chatroom"},{appid:"12107",appname:"gaia"},{appid:"12108",appname:"ubi"},{appid:"12109",appname:"yiju"},{appid:"12111",appname:"bml"},{appid:"12112",appname:"aihome"},{appid:"12113",appname:"aihome_children"},{appid:"12114",appname:"mobsecurity"},{appid:"12117",appname:"tomas"},{appid:"12118",appname:"baidu_flutter"},{appid:"12120",appname:"wepod"},{appid:"12121",appname:"yy"},{appid:"12122",appname:"kidedu"},{appid:"12123",appname:"wangpan_faster"},{appid:"12124",appname:"wepod_mobile"},{appid:"12125",appname:"baidu_vr_classroom_launcher"},{appid:"12407",appname:"bdhkvideo"},{appid:"12355",appname:"baiduinput"},{appid:"12501",appname:"bdhonorbrowser"},{appid:"12192",appname:"searchcraft",reg:/\bSearchCraft\b/i}],getAppByName=function(){var e=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:"",t={appname:"other",appid:"12133"};if(e){var n=uaRegMap.find((function(t){return e===t.appname}));return n||t}var i=getUa(),o=uaRegMap.find((function(e){return e.reg?e.reg.test(i):-1!==i.search(e.appname)}));return o||t},MergeLogger=function(){function e(t){var n=t.logFn;_classCallCheck(this,e),_defineProperty(this,"logFn",void 0),_defineProperty(this,"logArray",void 0),_defineProperty(this,"mergeNumMax",void 0),_defineProperty(this,"mergeInterval",void 0),_defineProperty(this,"timeId",void 0),this.logFn=n,this.logArray=[],this.mergeNumMax=5,this.mergeInterval=5,this.timeId=null}return _createClass(e,[{key:"set",value:function(e){var t=e.mergeNumMax,n=e.mergeInterval;t&&(this.mergeNumMax=t),n&&(this.mergeInterval=n)}},{key:"add",value:function(e){var t=this;this.logArray.push(e),1===this.logArray.length?this.timeId=setTimeout((function(){t.clearAll()}),1e3*this.mergeInterval):this.logArray.length>=this.mergeNumMax&&this.clearAll()}},{key:"clearAll",value:function(){this.logArray.length>0&&(this.logFn(this.logArray),this.logArray=[]),this.timeId&&(clearTimeout(this.timeId),this.timeId=null)}}]),e}(),TimeLogger=function(){function e(t){var n=t.ifHeartbeatTime,i=void 0===n||n,o=t.duration,a=void 0===o?3:o,r=t.logFn,s=void 0===r?_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))):r;_classCallCheck(this,e),_defineProperty(this,"flag",void 0),_defineProperty(this,"starttime",void 0),_defineProperty(this,"ifHeartbeatTime",void 0),_defineProperty(this,"logFn",void 0),_defineProperty(this,"intervalId",void 0),_defineProperty(this,"duration",void 0),this.starttime=Date.now(),this.ifHeartbeatTime=i,this.logFn=s,this.intervalId=null,this.duration=a,this.flag="STOP"}return _createClass(e,[{key:"sendLog",value:function(){if(this.ifHeartbeatTime)this.logFn({starttime:this.starttime,duration:this.duration});else{var e=Date.now();this.logFn({starttime:this.starttime,duration:(e-this.starttime)/1e3,endtime:e})}}},{key:"start",value:function(){var e=this;"RUNNING"!==this.flag&&(this.flag="RUNNING",this.starttime=Date.now(),this.ifHeartbeatTime&&(this.sendLog(),this.intervalId=setInterval((function(){e.sendLog()}),1e3*this.duration)))}},{key:"stop",value:function(){"RUNNING"===this.flag&&(this.ifHeartbeatTime?(this.sendLog(),this.intervalId&&clearInterval(this.intervalId),this.intervalId=null):this.sendLog(),this.flag="STOP")}},{key:"autoStop",value:function(){"RUNNING"===this.flag&&(this.stop(),this.flag="AUTO_STOP")}}]),e}(),maxStorageLength=5,isStorageInit=!1,origin="",retryLogLists={length:0};function getStorage(){isStorageInit||(isStorageInit=!0,origin=getLocation().origin+getLocation().pathname);try{var e=localStorage.getItem("RETRY_LOG_LIST");e&&(retryLogLists=JSON.parse(e))}catch(e){}var t=retryLogLists[origin];return"number"!=typeof t&&(null==t?void 0:t.list)||[]}function setStorage(e){isStorageInit||getStorage();var t=Date.now();if(!retryLogLists[origin])if(retryLogLists.length>=maxStorageLength){var n=Object.keys(retryLogLists).reduce((function(e,t){var n=retryLogLists[t];return"number"!=typeof n&&n.time<=e.time?{time:n.time,path:t}:e}),{time:t,path:""}).path;delete retryLogLists[n]}else retryLogLists.length++;retryLogLists[origin]={list:e,time:t},localStorage.setItem("RETRY_LOG_LIST",JSON.stringify(retryLogLists))}function clearStorage(){isStorageInit||getStorage(),retryLogLists[origin]&&(delete retryLogLists[origin],retryLogLists.length--),localStorage.setItem("RETRY_LOG_LIST",JSON.stringify(retryLogLists))}var RetryLogger=function(){function e(t){var n=t.logFn;_classCallCheck(this,e),_defineProperty(this,"logFn",void 0),_defineProperty(this,"retryLogList",void 0),_defineProperty(this,"retryTimesMax",void 0),_defineProperty(this,"retryLogListMax",void 0),_defineProperty(this,"_retryIntervalTimer",void 0),this.logFn=n,this.retryLogList=this._getInitErrLogs(),this.retryTimesMax=3,this.retryLogListMax=5,this._retryIntervalTimer=null}return _createClass(e,[{key:"_getInitErrLogs",value:function(){var e=this,t=getStorage();return new Map(t.map((function(t){return[t[0],_objectSpread2(_objectSpread2({},t[1]),{},{failTimes:1,sendCountDown:e._getDelayTime(t[1].failTimes)})]})))}},{key:"_getDelayTime",value:function(e){return{0:1,1:1,2:5}[e]||10+Math.floor(5*Math.random()+1)}},{key:"active",value:function(){var e=this;!this._retryIntervalTimer&&this.retryLogList.size>0&&(this._retryIntervalTimer=setInterval((function(){e._retryIntervalTimerHandler()}),1e3))}},{key:"addLog",value:function(e){var t=e.url,n=e.loggerData,i=e.loggerId;if(this.retryLogList.set(i,{url:t,loggerData:n,loggerId:i,failTimes:1,sendCountDown:this._getDelayTime(1)}),this.retryLogList.size>this.retryLogListMax){var o=this.retryLogList.keys().next().value;this.retryLogList.delete(o)}this.active(),setStorage(Array.from(this.retryLogList))}},{key:"removeLog",value:function(e){e&&this.retryLogList.delete(e)&&(0===this.retryLogList.size?clearStorage():setStorage(Array.from(this.retryLogList)))}},{key:"updateLog",value:function(e){if(e){var t=this.retryLogList.get(e);if(t){var n=t.failTimes;n+1>this.retryTimesMax?this.removeLog(e):(t.failTimes=n+1,t.sendCountDown=this._getDelayTime(t.failTimes))}}}},{key:"_retryIntervalTimerHandler",value:function(){var e=this;this.retryLogList.forEach((function(t){t.sendCountDown<0||(0==+t.sendCountDown?(t.sendCountDown=-1,e._sendLog(t)):t.sendCountDown=t.sendCountDown-1)})),0===this.retryLogList.size&&(this._retryIntervalTimer&&clearInterval(this._retryIntervalTimer),this._retryIntervalTimer=null)}},{key:"_sendLog",value:function(e){var t=this;this.logFn(e.url,e.loggerData).then((function(){t.removeLog(e.loggerId)})).catch((function(){t.updateLog(e.loggerId)}))}}]),e}(),sha256=function e(t){function n(e,t){return e>>>t|e<<32-t}for(var i,o,a=Math.pow(2,32),r="length",s="",c=[],l=8*t[r],d=e.h=e.h||[],p=e.k=e.k||[],h=p[r],u={},m=2;h<64;m++)if(!u[m]){for(i=0;i<313;i+=m)u[i]=m;d[h]=Math.pow(m,.5)*a|0,p[h++]=Math.pow(m,1/3)*a|0}for(t+="";t[r]%64-56;)t+="\0";for(i=0;i<t[r];i++){if((o=t.charCodeAt(i))>>8)return"";c[i>>2]|=o<<(3-i)%4*8}for(c[c[r]]=l/a|0,c[c[r]]=l,o=0;o<c[r];){var f=c.slice(o,o+=16),g=d;for(d=d.slice(0,8),i=0;i<64;i++){var y=f[i-15],v=f[i-2],b=d[0],x=d[4],_=d[7]+(n(x,6)^n(x,11)^n(x,25))+(x&d[5]^~x&d[6])+p[i]+(f[i]=i<16?f[i]:f[i-16]+(n(y,7)^n(y,18)^y>>>3)+f[i-7]+(n(v,17)^n(v,19)^v>>>10)|0);(d=[_+((n(b,2)^n(b,13)^n(b,22))+(b&d[1]^b&d[2]^d[1]&d[2]))|0].concat(d))[4]=d[4]+_|0}for(i=0;i<8;i++)d[i]=d[i]+g[i]|0}for(i=0;i<8;i++)for(o=3;o+1;o--){var k=d[i]>>8*o&255;s+=(k<16?0:"")+k.toString(16)}return s};function invokeByIframe(e){var t=document.createElement("iframe");t.style.display="none",t.src=e;var n=document.body;n.appendChild(t),setTimeout((function(){t&&n.removeChild(t),t=null}),0)}var guidIndex=1,guidPrefix=((new Date).getTime()+Math.floor(1e8*Math.random()+1)).toString(16).slice(8);function getId(){return"_"+guidPrefix+guidIndex++}function toGlobalFunc(e){var t=getId();return window[t]=function(){for(var t=[],n=0;n<Array.from(arguments).length;n++)t[n]=Array.from(arguments)[n];return e.apply(window,[].slice.call(t,0))},t}function versionCompare(e,t){for(var n=e.toString().split("."),i=t.toString().split("."),o=Math.max(n.length,i.length),a=0;a<o;a++){if(n[a]&&!i[a]&&parseInt(n[a],10)>0||parseInt(n[a],10)>parseInt(i[a],10))return 1;if(i[a]&&!n[a]&&parseInt(i[a],10)>0||parseInt(n[a],10)<parseInt(i[a],10))return-1}return 0}var LOW_EXIST={status:101,message:""};function isBeta(){return new Promise((function(e,t){var n=getUa(),i=/baiduboxapp\/([\d+.]+)/.exec(n);versionCompare(i&&i[1]||"0","12.20.0.0")<0?t(LOW_EXIST):invokeByIframe("baiduboxapp://app/isBeta?callback=".concat(toGlobalFunc((function(n){if(0==+(n=JSON.parse(n)).status)e(n.data);else{var i={status:n.status,message:n.message};t(i)}}))))}))}var UbcLogger=function(){function e(){var t=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:{};_classCallCheck(this,e),_defineProperty(this,"logInited",void 0),_defineProperty(this,"options",void 0),_defineProperty(this,"timerMap",void 0),_defineProperty(this,"mergeLogger",void 0),_defineProperty(this,"retryLogger",void 0),_defineProperty(this,"isBeta",void 0),_defineProperty(this,"ubcParams",void 0),_defineProperty(this,"ubcUrl",void 0),_defineProperty(this,"ubcMergeUrl",void 0),this.ubcParams=_objectSpread2({},CONFIG.DEFAULT_LOG_DATA),this.logInited=!1,this.options={duration:3,ifHeartbeatTime:!0,testMode:!1,useSendBeacon:!1,useXhr:!1,sendMethod:"get",apptype:getAppByName().appid,sendFn:null},this.timerMap=new Map,this.mergeLogger=null,this.retryLogger=null,this.ubcUrl="",this.ubcMergeUrl="",this.isBeta=!1,this.set(t),this._registerPageVisibility(),this._registerBeta()}return _createClass(e,[{key:"_initCookie",value:function(){(Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:{}).testMode&&setCookie("bd_logap_verify=1;domain=.baidu.com;path=/")}},{key:"_initUbcUrl",value:function(){var e=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:{},t=e.queryParams||{};this.isBeta&&(t=_objectSpread2({beta:1},t)),e.testMode&&(t=_objectSpread2({debug:1},t)),this.ubcUrl=getUrl(e.testMode?e.testUrl?e.testUrl:CONFIG.UBC_URL:e.onlineUrl?e.onlineUrl:CONFIG.UBC_URL,merge(CONFIG.DEFAULT_QUERY,t)),this.ubcMergeUrl=getUrl(e.testMode?e.testUrl?e.testUrl:CONFIG_MERGE.UBC_URL:e.onlineUrl?e.onlineUrl:CONFIG_MERGE.UBC_URL,merge(CONFIG_MERGE.DEFAULT_QUERY,t))}},{key:"set",value:function(){var e=this,t=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:{};this.options=_objectSpread2(_objectSpread2({},this.options),t),this._initCookie(this.options),this._initUbcUrl(this.options),this.ubcParams=merge(this.ubcParams,{actiondata:{id:this.options.serverId,content:{source:this.options.source||this.options.idfrom||getUrlQuery("source")||getUrlQuery("idfrom"),page:this.options.page,from:this.options.from,type:this.options.type,ext:_objectSpread2({apptype:this.options.apptype},this.options.ext)}}}),this.options.serverId&&(this.logInited=!0),this.mergeLogger||(this.mergeLogger=new MergeLogger({logFn:function(t){return e._sendMerge(t,{useXhr:!0,sendMethod:"post"}).catch((function(){}))}})),this.options.logMergeOpt&&this.mergeLogger.set(this.options.logMergeOpt),this.options.logErrRetry&&!this.retryLogger&&(this.retryLogger=new RetryLogger({logFn:function(t,n){return e._send(t,merge(n,{actiondata:{metadata:{uploadTimeStamp:Date.now()}}}),{useXhr:!0})}}))}},{key:"_send",value:function(e,t){var n=Array.from(arguments).length>2&&void 0!==Array.from(arguments)[2]?Array.from(arguments)[2]:{};return this.options.sendFn?Promise.resolve(this.options.sendFn(e,t,n)):smartSend(e,t,n)}},{key:"_sendNormal",value:function(){var e=this,t=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:{},n=Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1]?Array.from(arguments)[1]:{},i={},o=Date.now(),a=getCookieByName("BAIDUID");if(a&&this.options.logErrRetry){var r=sha256(a+JSON.stringify(i));return i=merge(this.ubcParams,{actiondata:{timestamp:o,content:t,metadata:{md5:r,uploadTimeStamp:o}}}),this._send(this.ubcUrl,i,_objectSpread2(_objectSpread2({},n),{},{useXhr:!0})).then((function(t){var n;return null===(n=e.retryLogger)||void 0===n||n.active(),t})).catch((function(t){var n;return r&&(null===(n=e.retryLogger)||void 0===n||n.addLog({url:e.ubcUrl,loggerData:i,loggerId:r})),Promise.reject(t)}))}return i=merge(this.ubcParams,{actiondata:{timestamp:o,content:t}}),this._send(this.ubcUrl,i,n)}},{key:"_sendMerge",value:function(){var e,t=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:[],n=Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1]?Array.from(arguments)[1]:{},i=Date.now(),o=this.ubcParams.actiondata,a=t.map((function(e){return merge(o,{timestamp:i,content:e})}));return e=_objectSpread2(_objectSpread2({},CONFIG_MERGE.DEFAULT_LOG_DATA),{},{data:a}),this._send(this.ubcMergeUrl,e,n)}},{key:"_sendFlow",value:function(e,t){var n=Array.from(arguments).length>2&&void 0!==Array.from(arguments)[2]?Array.from(arguments)[2]:{},i=this._getFlowData(e,t);return this._send(this.ubcUrl,i,n)}},{key:"send",value:function(){var e,t=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:{},n=Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1]?Array.from(arguments)[1]:{};if(!this.logInited)throw"UBC SDK serverId can not be empty!";return n=_objectSpread2({useSendBeacon:this.options.useSendBeacon,useXhr:this.options.useXhr,sendMethod:this.options.sendMethod},n),null!==(e=this.options)&&void 0!==e&&null!==(e=e.logMergeOpt)&&void 0!==e&&e.ifAutoMerge&&this.mergeLogger?(this.mergeLogger.add(t),Promise.resolve()):this._sendNormal(t,n)}},{key:"sendMergeLog",value:function(){var e,t=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:{};if(!this.logInited)throw"UBC SDK serverId can not be empty!";return null===(e=this.mergeLogger)||void 0===e||e.add(t),Promise.resolve()}},{key:"_getFlowData",value:function(e,t){var n,i={},o=t.starttime,a=t.duration,r=t.endtime,s=Date.now();return i=merge(this.ubcParams,{actiondata:{content:"-"}}),merge(i,{actiondata:{timestamp:s,starttime:o,endtime:r,type:1,content:{duration:a,option:merge(null===(n=this.ubcParams)||void 0===n||null===(n=n.actiondata)||void 0===n?void 0:n.content,e)}}})}},{key:"startTimingLog",value:function(){var e=this,t=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:"default",n=Array.from(arguments).length>1&&void 0!==Array.from(arguments)[1]?Array.from(arguments)[1]:{},i=Array.from(arguments).length>2&&void 0!==Array.from(arguments)[2]?Array.from(arguments)[2]:{},o=this.timerMap.get(t);o||(o=new TimeLogger(_objectSpread2(_objectSpread2({ifHeartbeatTime:this.options.ifHeartbeatTime,duration:this.options.duration},i),{},{logFn:function(t){return e._sendFlow(n,t,_objectSpread2({useSendBeacon:e.options.useSendBeacon},i))}})),this.timerMap.set(t,o)),"RUNNING"!==o.flag?o.start():console.warn("timeLogger[".concat(t,"] is running"))}},{key:"pauseTimingLog",value:function(){var e=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:"default",t=this.timerMap.get(e);t&&t.stop()}},{key:"stopTimingLog",value:function(){var e=Array.from(arguments).length>0&&void 0!==Array.from(arguments)[0]?Array.from(arguments)[0]:"default",t=this.timerMap.get(e);t&&(t.stop(),this.timerMap.delete(e))}},{key:"_registerPageVisibility",value:function(){var e=this;registerPageVisibilityEvent((function(t){t?(e.timerMap.forEach((function(e){e&&"RUNNING"===e.flag&&e.autoStop()})),e.mergeLogger&&e.mergeLogger.clearAll()):e.timerMap.forEach((function(e){e&&"AUTO_STOP"===e.flag&&e.start()}))}))}},{key:"getVersion",value:function(){return version}},{key:"_registerBeta",value:function(){var e=this;isBox()&&!isSwan()&&isBeta().then((function(t){null!=t&&t.isBeta&&(e.isBeta=!0,e.set())})).catch((function(){}))}}]),e}();new UbcLogger;var sendLog=function(e){var t={serverId:e.ubcId,queryParams:{appname:e.appname}};new UbcLogger(t).send(e)},_a$1;function request(e){var t=e.url,n=e.options,i=n.headers,o=n.method,a=n.data,r=n.credentials;return fetch(t,{headers:i,method:o,credentials:r||"include",body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return Promise.reject(e)}))}var context=null,defaultAPIs=(_a$1={},_a$1[SDK_HANDLER_KEY.link]=function(e){return linkHandle(e,context)},_a$1[SDK_HANDLER_KEY.assistantLog]=sendLog,_a$1[SDK_HANDLER_KEY.request]=request,_a$1[SDK_HANDLER_KEY.makePhoneCall]=function(e){window&&window.location&&(window.location.href="tel:".concat(e))},_a$1),sdkApis=_assign({},defaultAPIs),initApiContext=function(e){context=e},addAPIs=function(e){sdkApis=_assign(_assign({},sdkApis),e)},getSDKApis=function(){return sdkApis},getLinkApis=function(e,t,n){var i,o=((null===(i=getRoot(e))||void 0===i?void 0:i.data.get("_renderContext"))||{}).renderContextId||0;getSDKApis().link(n,{type:t,renderContextId:o})};function createEventEmitter(e,t,n){return function(i){if(t){var o={type:n,data:_assign({},i)};t===SDK_GLOBAL_EVENT[SDK_HANDLER_KEY.overlay]&&(o.open=i.open),t===SDK_GLOBAL_EVENT[SDK_HANDLER_KEY.error]&&(o.error=i.error),e.emit(t,o)}}}function unifiedAPI(e,t,n){var i=getSDKApis();if(Object.keys(i).includes(t))return getSDKApis()[t];var o=SDK_GLOBAL_EVENT[t]||"";return o?createEventEmitter(e,o,n.type):(console.error("cosmic-agent-ui, ",t),function(){})}function eventsProcessor(){var e=this.data.get("_emitter"),t=this.data.get();return{image:{"preview-image":function(n){var i=n.src;unifiedAPI(e,SDK_HANDLER_KEY.previewImage,{type:"image"})({$event:{src:i,urls:[i],current:i,currentIndex:0},$data:_assign({},t),src:i,urls:[i],current:i,currentIndex:0})},"image-load-error":function(t){unifiedAPI(e,SDK_HANDLER_KEY.error,{type:"image"})({src:t.src})}},"interactable-images":{"preview-image":function(n){var i,o=n,a=o.currentIndex,r=void 0===a?0:a,s=o.images,c=void 0===s?[]:s,l=o.interactions,d=void 0===l?[]:l,p=null===(i=c[r])||void 0===i?void 0:i.src,h=c.map((function(e){return e.src}));unifiedAPI(e,SDK_HANDLER_KEY.previewImage,{type:"interactable-images"})({$event:{src:p,images:c,urls:h,current:p,currentIndex:r,interactions:d},$data:_assign({},t),src:p,urls:h,current:p,images:c,currentIndex:r,interactions:d})}},markdown:{"preview-image":function(n){var i=n.src;unifiedAPI(e,SDK_HANDLER_KEY.previewImage,{type:"markdown"})({$event:{src:i,urls:[i],current:i,currentIndex:0},$data:_assign({},t),src:i,urls:[i],current:i,currentIndex:0})},"open-drawer":function(n){var i=n.data;unifiedAPI(e,SDK_HANDLER_KEY.openDrawer,{type:"markdown"})(_assign({$event:{},$data:_assign({},t)},i))},"markdown-cache":function(t){var n=t.action;unifiedAPI(e,SDK_HANDLER_KEY.markdownCache,{type:"markdown"})({action:n})},"video-load-error":function(t){unifiedAPI(e,SDK_HANDLER_KEY.error,{type:"video"})({src:t.src})}},upload:{"upload-error":function(t){unifiedAPI(e,SDK_HANDLER_KEY.error,{type:"upload"})({error:t.error})}},"base-clue-form":{overlay:function(t){unifiedAPI(e,SDK_HANDLER_KEY.overlay,{type:"base-clue-form"})({open:t.open})}},"reward-card":{reward:function(t){unifiedAPI(e,SDK_HANDLER_KEY.reward,{type:"reward-card"})({rewardData:t})}}}}var sendPrompt=function(e,t){try{var n=t||{},i=n.node,o=n.args,a=n.$data,r=n.$event,s=(o||{}).msg;unifiedAPI(e,SDK_HANDLER_KEY.prompt,{type:i})(_assign(_assign({$data:a,$event:r},o),{type:"text",value:{msg:s},msg:s}))}catch(e){throw e}},link=function(e,t){try{var n=(t||{}).args,i=n||{},o=i.url,a=void 0===o?"":o,r=i.pcUrl,s=void 0===r?"":r,c=i.h5JumpType,l=i.swan;getSDKApis().link(_assign(_assign({},n),{url:a,pcUrl:s,swan:l,h5JumpType:c}))}catch(e){throw e}},dispose=function(e,t){try{var n=t||{},i=n.node,o=n.$data,a=n.$event;unifiedAPI(e,SDK_HANDLER_KEY.dispose,{type:i})({$data:o,$event:a})}catch(e){throw e}},disabled=function(e,t){try{var n=t||{},i=n.node,o=n.$data,a=n.$event;unifiedAPI(e,SDK_HANDLER_KEY.disabled,{type:i})({$data:o,$event:a})}catch(e){throw e}},openDrawer=function(e,t){try{var n=t||{},i=n.node,o=n.args,a=n.$data,r=n.$event,s=o||{},c=s.url,l=s.title,d=void 0===l?"":l,p=s.percent,h=void 0===p?"":p;unifiedAPI(e,SDK_HANDLER_KEY.openDrawer,{type:i})({$data:a,$event:r,url:c,title:d,percent:h})}catch(e){throw e}},closeDrawer=function(e,t){try{var n=t||{},i=n.node,o=n.$data,a=n.$event;unifiedAPI(e,SDK_HANDLER_KEY.closeDrawer,{type:i})({$data:o,$event:a})}catch(e){throw e}},actions={sendPrompt:sendPrompt,dispose:dispose,link:link,disabled:disabled,openDrawer:openDrawer,closeDrawer:closeDrawer},LogType;function handleAction(e,t,n){var i=actions[e];if(i)try{i(t,n)}catch(i){throw unifiedAPI(t,SDK_HANDLER_KEY.error,{type:n.node})({error:"action ".concat(e," error: ").concat(i.message)}),new Error("action ".concat(e," error: ").concat(i.message))}}!function(e){e.SHOW="show",e.CLICK="click",e.SLIDE="slide",e.RECALL="recall"}(LogType||(LogType={}));var Logger=function(){function e(e){this.EXPOSURE_DOM="data-agent-ui-exposure",this.EXPOSURE_DOM_EXT="data-agent-ui-exposure-ext",this.DISPLAY_TYPE="display",this.EXPOSURE_TYPE="exposure",this.FC_PROMO_EXPOSURE_DOM="data-agent-ui-fc-promo-exposure",this.FC_PROMO_EXPOSURE_URL="data-agent-ui-fc-promo-exposure-url",this.FC_PROMO_EXPOSURE_DONE="data-agent-ui-fc-promo-exposure-done",this.eventEmitter=e,this.agentUIDom=null,this.agentUIObserver=null,this.exposureDomObserver=null,this.exposureEleList=new WeakSet}return e.prototype.sendLog=function(e,t,n,i){var o=n||{},a=o.data,r=__rest(o,["data"]),s=_assign({type:t,data:_assign({$event:_assign({type:e},r)},a?{$data:a}:{})},e===LogType.SHOW?{show:i===this.EXPOSURE_TYPE?this.EXPOSURE_TYPE:this.DISPLAY_TYPE}:{});this.eventEmitter.emit(SDK_GLOBAL_EVENT[SDK_HANDLER_KEY.frameLog],s)},e.prototype.show=function(e,t){this.sendLog(LogType.SHOW,e,t)},e.prototype.exposure=function(e,t){this.sendLog(LogType.SHOW,e,t,this.EXPOSURE_TYPE)},e.prototype.fcPromoExposure=function(e){e&&(document.createElement("img").src=decodeURIComponent(e))},e.prototype.click=function(e,t){this.sendLog(LogType.CLICK,e,t)},e.prototype.slide=function(e,t){this.sendLog(LogType.SLIDE,e,t)},e.prototype.recall=function(e,t){this.sendLog(LogType.RECALL,e,t)},e.prototype.initExposureLog=function(e){this.agentUIDom=e,this.observeIntersection(),this.updateListenDom()},e.prototype.exposureProcessor=function(e){var t,n;if(null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.hasAttribute(this.EXPOSURE_DOM)){var i=null===(n=null==e?void 0:e.target)||void 0===n?void 0:n.getAttribute(this.EXPOSURE_DOM_EXT),o=JSON.parse(i);if(o){var a=o.type,r=void 0===a?"":a,s=__rest(o,["type"]),c=Object.assign({},{type:LogType.SHOW},_assign({},s));this.exposure(r,c)}}},e.prototype.fcExposureProcessor=function(e){var t,n,i,o;if((null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.hasAttribute(this.FC_PROMO_EXPOSURE_DOM))&&!(null===(n=null==e?void 0:e.target)||void 0===n?void 0:n.hasAttribute(this.FC_PROMO_EXPOSURE_DONE))){var a=null===(i=null==e?void 0:e.target)||void 0===i?void 0:i.getAttribute(this.FC_PROMO_EXPOSURE_URL);this.fcPromoExposure(a),null===(o=null==e?void 0:e.target)||void 0===o||o.setAttribute(this.FC_PROMO_EXPOSURE_DONE,"true")}},e.prototype.observeIntersection=function(){var e=this.exposureProcessor.bind(this),t=this.fcExposureProcessor.bind(this);this.exposureDomObserver=new IntersectionObserver((function(n){n.forEach((function(n){n.intersectionRatio>=.6&&(e(n),t(n))}))}),{threshold:[.4,.6]})},e.prototype.updateListenDom=function(){var e=this;this.agentUIObserver=new MutationObserver((function(t){var n,i,o,a,r,s;try{for(var c=__values(t),l=c.next();!l.done;l=c.next()){var d=l.value;if(d.removedNodes&&d.removedNodes.length>0&&d.removedNodes.forEach((function(t){var n;e.exposureEleList.has(t)&&(null===(n=e.exposureDomObserver)||void 0===n||n.unobserve(t),e.exposureEleList.delete(t))})),d.addedNodes&&d.addedNodes.length>0&&1===(null===(o=d.addedNodes[0])||void 0===o?void 0:o.nodeType)&&((null===(a=d.addedNodes[0])||void 0===a?void 0:a.hasAttribute(e.EXPOSURE_DOM))||(null===(r=d.addedNodes[0])||void 0===r?void 0:r.hasAttribute(e.FC_PROMO_EXPOSURE_DOM)))){var p=d.addedNodes[0];e.exposureEleList.has(p)||(null===(s=e.exposureDomObserver)||void 0===s||s.observe(p),e.exposureEleList.add(p))}}}catch(e){n={error:e}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}})),this.agentUIDom&&this.agentUIObserver.observe(this.agentUIDom,{childList:!0,subtree:!0})},e.prototype.disconnect=function(){var e,t;null===(e=this.agentUIObserver)||void 0===e||e.disconnect(),null===(t=this.exposureDomObserver)||void 0===t||t.disconnect(),this.exposureEleList=new WeakSet},e}(),css_248z$g=".agent-ui-progress{cursor:default}.agent-ui-progress .progress-lingjing .progress-block{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;height:18px;justify-content:start;line-height:18px;width:100%}.agent-ui-progress .progress-lingjing .progress-block .progress-icon{background-position:50%;background-repeat:no-repeat;background-size:cover;height:18px;width:18px}.agent-ui-progress .progress-lingjing .progress-block .progress-content{color:var(--cos-color-text);font-size:var(--cos-text-body-lg-higher);height:18px;line-height:18px;margin-left:var(--cos-space-xs)}.agent-ui-progress .progress-lingjing .progress-block .progress-loading-line{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;margin-left:var(--cos-space-xs);margin-top:var(--cos-space-none)}.agent-ui-progress .progress-lingjing .progress-loading-wrapper{border-radius:var(--cos-rounded-full);height:16px;margin-top:var(--cos-space-lg);overflow:hidden;position:relative;width:100%}@-webkit-keyframes loadingLine{0%{-webkit-transform:translate(-100%);transform:translate(-100%)}to{-webkit-transform:translate(60%);transform:translate(60%)}}@keyframes loadingLine{0%{-webkit-transform:translate(-100%);transform:translate(-100%)}to{-webkit-transform:translate(60%);transform:translate(60%)}}.agent-ui-progress .progress-lingjing .progress-loading-wrapper .loading-animation{-webkit-animation:loadingLine 2s linear infinite;animation:loadingLine 2s linear infinite;background-image:-webkit-gradient(linear,right top,left top,color-stop(.95%,var(--cosd-color-border-hover)),color-stop(99.46%,transparent));background-image:linear-gradient(270deg,var(--cosd-color-border-hover) .95%,transparent 99.46%);border-radius:var(--cos-rounded-full);bottom:0;height:16px;left:0;position:absolute;right:100%;top:0;-webkit-transform:translate(-100%);transform:translate(-100%);width:160%}.agent-ui-progress .progress-lingjing .progress-loading-wrapper .second-line{-webkit-animation-delay:.3s;animation-delay:.3s}.agent-ui-progress .progress-lingjing .progress-loading-wrapper .third-line{-webkit-animation-delay:.6s;animation-delay:.6s}.agent-ui-progress .title{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;background:rgba(225,229,250,.5);border-radius:var(--cos-rounded-xs);color:#05073b;font-size:var(--cos-text-subtitle-sm);height:40px;justify-content:space-between;letter-spacing:0;line-height:40px;padding:0 16px}.agent-ui-progress .title:hover{background:#f2f3fa;cursor:pointer}.agent-ui-progress .title:hover .title-arrow{background:#e1e5fa;border-radius:3px;color:#4955f5}.agent-ui-progress .title.collapse-title{margin-bottom:4px}.agent-ui-progress .title.loading-title,.agent-ui-progress .title.loading-title:hover{background:#dff7ee}.agent-ui-progress .title-plugin-name{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.agent-ui-progress .title-arrow{display:inline-block;height:20px;width:20px}.agent-ui-progress .title-arrow svg{-webkit-transform:scale(.5) translate(-12px,-12px);transform:scale(.5) translate(-12px,-12px)}.agent-ui-progress .title-arrow.arrow-top{-webkit-transform:rotate(-180deg);transform:rotate(-180deg)}.agent-ui-progress .title-action{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.agent-ui-progress .title-action-name{margin-right:var(--cos-space-sm)}.agent-ui-progress .title-action-content{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.agent-ui-progress .title-loading{background-image:url(https://psstatic.cdn.bcebos.com/basics/cosmic/loading_1733195032000.gif);background-size:cover;height:40px;width:60px}.agent-ui-progress .collapse{background:rgba(225,229,250,.5);border-radius:var(--cos-rounded-xs);overflow-y:scroll;padding:12px 16px}.agent-ui-progress .collapse-action{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:start;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start;font-size:13px;letter-spacing:0;line-height:24px}.agent-ui-progress .collapse-action:not(:last-of-type){margin-bottom:8px}.agent-ui-progress .collapse-action-name{-webkit-flex-shrink:0;-ms-flex-negative:0;color:#05073b;flex-shrink:0;margin-right:var(--cos-space-sm);text-align:justify}.agent-ui-progress .collapse-action-content{color:#676c90;word-wrap:break-word;display:inline-block;word-break:break-all}";styleInject(css_248z$g);var AgentUIProgress=san.defineComponent({template:'\n        <div class="agent-ui-progress">\n            <div s-if="{{theme === \'lingjing\'}}" class="progress-lingjing {{status === \'error\' ? \'error-status\' : (status === \'loading\' && actions[actions.length-1].actionType === \'default\') ? \'loading-status\' : \'plugin-status\'}}">\n                <div class="progress-block">\n                    <svg class="progress-icon" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path fill-rule="evenodd" clip-rule="evenodd" d="M15.2771 3C14.3772 3 13.606 3.64309 13.4442 4.52825C13.2822 5.41497 13.9633 6.23176 14.8647 6.23176H16.6042C16.6459 6.23176 16.6817 6.20193 16.6892 6.16087L16.9311 4.8373C17.1058 3.88094 16.3713 3 15.3991 3H15.2771ZM3.92454 12.1173C3.8766 12.2149 3.94765 12.3289 4.05639 12.3289H6.09786C6.52354 12.3289 6.80797 12.7675 6.63438 13.1561L5.96628 14.652C5.87174 14.8637 5.66159 15 5.42976 15H1.177C0.311416 15 -0.257147 14.0959 0.117782 13.3158L4.54114 4.11141C4.6879 3.80602 4.99673 3.61179 5.33555 3.61179H8.24856C8.65086 3.61179 9.0021 3.88419 9.10222 4.27383L11.6698 14.2662C11.7653 14.6379 11.4846 15 11.1007 15H9.15907C8.89316 15 8.66039 14.8214 8.59152 14.5646L6.62015 7.21261C6.58502 7.08157 6.40622 7.06413 6.34641 7.1859L3.92454 12.1173ZM13.4101 8.35677C13.4659 7.90409 13.8579 7.56879 14.3138 7.58376L15.5447 7.62421C16.0575 7.64106 16.4476 8.09076 16.3919 8.60087L15.7784 14.2144C15.7296 14.6614 15.352 15 14.9023 15H13.5874C13.0578 15 12.6478 14.5363 12.7126 14.0107L13.4101 8.35677Z" fill="#5240FF"/>\n                    </svg>\n                    <span class="progress-content">{{actions[actions.length - 1].actionName}}</span>\n\n                    <div s-if="{{status === \'loading\' && actions[actions.length-1].actionType === \'default\'}}" class="progress-loading-line  progress-loading-wrapper">\n                        <div class="loading-animation"></div>\n                    </div>\n                </div>\n                <div s-if="{{status === \'loading\' && actions[actions.length-1].actionType === \'default\'}}" class="progress-loading-wrapper">\n                    <div class="loading-animation second-line"></div>\n                </div>\n            </div>\n            <div s-else>\n                <div class="title {{status === \'loading\' ? \'loading-title\': \'\',}} {{isCollapse && actions && actions.length > 0 ? \'collapse-title\' : \'\'}}" on-click="toggleCollapse($event)">\n                    <div class="title-action" s-if="{{status === \'loading\' && actions && actions.length > 0}}">\n                        <span class="title-action-name">{{actions[actions.length-1].actionName}}</span>\n                        <span class="title-action-content">{{actions[actions.length-1].actionContent}}</span>\n                    </div>\n                    <div class="title-plugin-name" s-else>\n                        <span>: {{pluginName}}</span>\n                    </div>\n                    <span class="title-loading" s-if="{{status === \'loading\'}}">\n                    </span>\n                    <span class="title-arrow {{isCollapse ? \'\' : \'arrow-top\'}}" s-else>\n                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" stroke="none" viewBox="0 0 32 32">\n                            <path d="M25.7048298,9.67720763 C26.3730748,9.05185438 27.4217433,9.08662499 28.0470966,9.75486995 C28.6724498,10.4231149 28.6376792,11.4717834 27.9694343,12.0971367 L16.9832843,22.3781338 C16.3479793,22.9726614 15.3610646,22.9745964 14.7234331,22.3825645 L3.65057083,12.1015674 C2.97987885,11.4788393 2.94099643,10.4303152 3.56372451,9.75962321 C4.1864526,9.08893123 5.23497673,9.05004881 5.90566871,9.6727769 L15.8455483,18.9008864 L25.7048298,9.67720763 Z"/>\n                        </svg>\n                    </span>\n                </div>\n                <div class="collapse" s-if="{{isCollapse && actions && actions.length > 0}}">\n                    <div class="collapse-action" s-for="action in actions">\n                        <span class="collapse-action-name">{{action.actionName}}</span>\n                        <span class="collapse-action-content">{{action.actionContent}}</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    ',computed:{lingjingProgressIcon:function(){if("lingjing"!==this.data.get("theme"))return"";var e=this.data.get("actions");if(e.length){var t=e[e.length-1];if("error"===(null==t?void 0:t.status))return"https://vercel-static.bj.bcebos.com/stash/v1/9570292/lingjing-plugin-preview/95485f6/progress-error.png";switch(t.actionType){case"buildAgent":return"https://vercel-static.bj.bcebos.com/stash/v1/9570292/lingjing-plugin-preview/95485f6/progress-build.gif";case"updateAgent":return"https://vercel-static.bj.bcebos.com/stash/v1/9570292/lingjing-plugin-preview/95485f6/progress-update.gif";case"tool":return"https://vercel-static.bj.bcebos.com/stash/v1/9570292/lingjing-plugin-preview/95485f6/progress-tool.gif";case"plugin":return"https://vercel-static.bj.bcebos.com/stash/v1/9570292/lingjing-plugin-preview/95485f6/progress-plugin.gif"}return"https://vercel-static.bj.bcebos.com/stash/v1/9570292/lingjing-plugin-preview/95485f6/progress-default.gif"}}},initData:function(){return{pluginName:"",actions:[],isCollapse:!1,status:"finished",theme:""}},attached:function(){var e=this.data.get("actions");if(e.length>0){var t=e[e.length-1];this.data.set("status",t.status||"finished")}},setProgress:function(e){"lingjing"===this.data.get("theme")?e.actionType&&this.data.set("actions",__spreadArray(__spreadArray([],__read(this.data.get("actions")),!1),[e],!1)):e.actionContent&&e.actionName&&this.data.set("actions",__spreadArray(__spreadArray([],__read(this.data.get("actions")),!1),[e],!1)),this.data.set("status",e.status||"finished"),"loading"===e.status&&this.data.set("isCollapse",!1)},toggleCollapse:function(e){e.cancelBubble=!0,e.preventDefault(),e.stopPropagation(),"loading"!==this.data.get("status")&&this.data.set("isCollapse",!this.data.get("isCollapse"))}}),RenderState;!function(e){e.INITED="inited",e.RENDERING="rendering",e.RENDERED="rendered"}(RenderState||(RenderState={}));var ASYNC_NODES_RENDEREDKEY="rendering";function wrapCallBack(e,t){if(e)if("function"==typeof e)try{e(t)}catch(e){console.error("[cosmic-agent-ui]  ",e)}else console.error("[cosmic-agent-ui]  ".concat(cosmic._typeof(e),"  function"))}function createRootInstance(e){var t=e.uiMeta,n=e.data,i=e.apis,o=e.status,a=e.eventEmitter,r=e.logger,s=e.onAttach,c=e.onRenderCompleted,l=e.sdk,d=e.history,p=e.env,h=e.useRichVideoPlayer,u=e.markdownOptions,m=e.renderContext,f=e.disposeAfterSubmitClueForm,g=e.assistantList,y=void 0===g?[]:g,v=san.defineComponent({_uniqueId:ROOT_UNIQUE_ID,_target:null,_renderState:RenderState.INITED,_asyncComptRendered:!1,_uiDom:null,_allComps:[],onRenderedCB:void 0,_renderReadyCheck:!1,template:"\n            <div s-if=\"status === 'error'\">\n                <text name=\"\"></text>\n            </div>\n            <div s-else\n                s-ref=\"content\"\n                style=\"{{status === 'disabled'\n                    ? 'opacity: 40%;pointer-events: none;'\n                    : ''}}\"\n                class=\"agent-ui{{_hasChild ? '' : ' agent-ui-empty'}}\"\n            >\n            </div>\n        ",components:{text:AgentUIText},messages:{"UI:REMOVE_COMPONENT":function(e){var t=e.value.id;this._allComps=this._allComps.filter((function(e){return e.id!==t}))},"UI:ADD_COMPONENT":function(e){var t=e.value;this._allComps.push(t)},"UI:RENDER_FINISHED":function(){this._handleRendered()},"UI:IMAGE_LOAD":function(e){try{var t=e.value,n=null==t?void 0:t.el,i=function(e){var t,n;if((null==e?void 0:e.parentElement)&&(null==e?void 0:e.parentElement.classList.contains("cosdy-container"))){var o=e.parentElement,a=Array.prototype.slice.call(null==o?void 0:o.children)||[];a.length&&a.every((function(e){var t;return null===(t=null==e?void 0:e.classList)||void 0===t?void 0:t.contains("no-content")}))?null===(t=null==o?void 0:o.classList)||void 0===t||t.add("no-content"):null===(n=null==o?void 0:o.classList)||void 0===n||n.remove("no-content"),i(o)}};i(n)}catch(e){}}},initData:function(){return{status:o||"active",_hasChild:!0}},_handleRendered:function(e){if(this._renderState!==RenderState.RENDERED){var t=this._target;this._checkAsyncComptRendered()&&(this._setRenderState(RenderState.RENDERED),(e=e||this.onRenderedCB)&&wrapCallBack(e,{target:t,engine:l}))}},_checkAsyncComptRendered:function(){if(this._asyncComptRendered)return!0;for(var e=this._allComps.filter((function(e){return e.asyncNode})),t=e.length-1;t>=0;t--){var n=e[t];if(null==n?void 0:n[ASYNC_NODES_RENDEREDKEY])return this._asyncComptRendered=!1,!1}return!!this._renderReadyCheck&&(this._asyncComptRendered=!0,this._renderReadyCheck=!1,!0)},_setRenderState:function(e){e===RenderState.INITED&&(this._asyncComptRendered=!1),this._renderState=e},_setStatus:function(e){this.data.set("status",e),"disabled"===e||"error"===e?this.data.get("_emitter").off():"abort"!==e&&"finished"!==e||this._allComps.forEach((function(t){t.setStatus&&t.setStatus(e)}))},_setThemeMode:function(){this._allComps.forEach((function(e){var t;null===(t=e.setThemeMode)||void 0===t||t.call(e)}))},_setTarget:function(e){this._target=e},attached:function(){return __awaiter(this,void 0,void 0,(function(){var i,o,a=this;return __generator(this,(function(r){switch(r.label){case 0:return this.data.get("_logger").initExposureLog(this.el),[4,l.loadResourceOnDemand(y)];case 1:return r.sent(),i=U.compile({ui:t.component,components:l.uiComponents,dataExtends:t.dataExtends,nodes:nodesProcessor.call(this),actions:{sendPrompt:function(e){return handleAction("sendPrompt",a.data.get("_emitter"),e)},link:function(e){return handleAction("link",a.data.get("_emitter"),e)},dispose:function(e){return handleAction("dispose",a.data.get("_emitter"),e)},disabled:function(e){return handleAction("disabled",a.data.get("_emitter"),e)},openDrawer:function(e){return handleAction("openDrawer",a.data.get("_emitter"),e)},closeDrawer:function(e){return handleAction("closeDrawer",a.data.get("_emitter"),e)}},events:eventsProcessor.call(this),onError:function(t){e.onError&&"function"==typeof e.onError&&e.onError(t)}}),this._uiDom=new i({data:n,owner:this}),this._uiDom.attach(this.ref("content")),o=this._target,wrapCallBack(s,{target:o,engine:l}),this._renderReady(c),[2]}}))}))},_getSpeakMessage:function(){var e="";return this._allComps.forEach((function(t){t.canSpeak&&(e+=t.getSpeakText())})),e},_renderReady:function(e){var t=this;this._setContentClass(),e?(this.onRenderedCB=e,this._renderReadyCheck=!1,this.nextTick((function(){t._renderReadyCheck=!0,t._handleRendered(e)}))):this.onRenderedCB=void 0},_setContentClass:function(){var e=this;try{this.nextTick((function(){var t,n;if(!e.data.get("_hasChild")){var i=e.ref("content");e.data.set("_hasChild",!!(null===(t=null==i?void 0:i.children)||void 0===t?void 0:t.length))}((null===(n=e.el)||void 0===n?void 0:n.querySelectorAll(".cosdy-container"))||[]).forEach((function(e){var t,n,i=Array.prototype.slice.call(null==e?void 0:e.children)||[];!i.length||i.every((function(e){var t;return null===(t=null==e?void 0:e.classList)||void 0===t?void 0:t.contains("no-content")}))?null===(t=null==e?void 0:e.classList)||void 0===t||t.add("no-content"):null===(n=null==e?void 0:e.classList)||void 0===n||n.remove("no-content")}))}))}catch(e){}},detached:function(){this.data.get("_logger").disconnect()},error:function(){}}),b=void 0===(null==p?void 0:p.platform)?PLATFORM:null==p?void 0:p.platform;return new v({data:_assign(_assign({},n),{_dataExtends:t.dataExtends,_emitter:a,_logger:r,_apis:i,_history:!!d,_env:p||{},_platform:b,_envType:null==p?void 0:p.type,_useRichVideoPlayer:h,_markdownOptions:u,_renderContext:m,_disposeAfterSubmitClueForm:f})})}function render(e,t,n){var i,o,a=n.uiMeta,r=n.components,s=n.apis,c=n.pluginInfo,l=n.data,d=n.events,p=void 0===d?{}:d,h=n.status,u=n.dataChunks,m=n.onAttach,f=n.onRenderCompleted,g=n.onError,y=n.showProgress,v=n.progressOptions,b=n.history,x=n.env,_=n.globalEmitter,k=n.assistantList,w=n.useRichVideoPlayer,C=n.markdownOptions,S=n.renderContext,E=n.disposeAfterSubmitClueForm,T=new EventEmitter(t);try{for(var P=__values(Object.entries(p)),A=P.next();!A.done;A=P.next()){var I=__read(A.value,2),L=I[0],D=I[1];T.on(L,D),!_.events.has(L)&&_.on(L,D)}}catch(e){i={error:e}}finally{try{A&&!A.done&&(o=P.return)&&o.call(P)}finally{if(i)throw i.error}}var M=new Logger(T),F=createRootInstance({uiMeta:a,apis:s,components:r,data:(null==u?void 0:u.length)?u.reduce((function(e,t){return mergeObject(e,t)}),{}):l,status:h,eventEmitter:T,logger:M,onAttach:m,onRenderCompleted:f,onError:g,sdk:t,history:!!b,env:x,assistantList:k,useRichVideoPlayer:w,markdownOptions:C,renderContext:S,disposeAfterSubmitClueForm:E}),R=[];(null==v?void 0:v.actions)&&(R=Array.isArray(v.actions)?v.actions:[v.actions]);var O=y?new AgentUIProgress({data:{actions:R,pluginName:(null==c?void 0:c.pluginName)||"",theme:(null==v?void 0:v.theme)||""}}):null,N={id:generateId(),pluginInfo:c,setStatus:F._setStatus.bind(F),updateData:function(e,t,n){F._setRenderState(RenderState.INITED),F._uiDom.appendData(e||{}),t&&F._renderReady(t,n)},setThemeMode:function(){F._setThemeMode()},setProgress:function(e){null==O||O.setProgress(e)},dispose:function(){F.dispose(),null==O||O.dispose(),T.off()},speak:function(){return F._getSpeakMessage()}};return T.setTarget(N),F._setTarget(N),F.attach(e),(null==v?void 0:v.el)&&(null==O||O.attach(v.el)),N}var DEFAULT_FACTORY_PARAM=["require","exports","module"],ModuleStatus;!function(e){e[e.DEFINED=0]="DEFINED",e[e.REQUIRED=1]="REQUIRED"}(ModuleStatus||(ModuleStatus={}));var ModuleLoader=function(){function e(){this.modules={}}return e.prototype.define=function(e,t,n){var i=this.modules;i[e]||(void 0===n&&(n=t,t=DEFAULT_FACTORY_PARAM),i[e]=n&&"function"==typeof n?{factory:n,deps:t,module:{exports:{}},status:ModuleStatus.DEFINED}:{factory:void 0,deps:t,module:{exports:n},status:ModuleStatus.DEFINED})},e.prototype.require=function(e){var t=this,n=this.modules[e];if(!n)throw new Error("module ".concat(e," is not defined"));if(n.status===ModuleStatus.REQUIRED)return n.module.exports;n.status=ModuleStatus.REQUIRED;var i=n.factory;if(void 0===i)return n.module.exports;var o=n.deps.slice(0,i.length).map((function(e){switch(e){case"require":return t.require;case"exports":return n.module.exports;case"module":return n.module;default:return t.require(e)}})),a=null;try{a=i.apply(void 0,__spreadArray([],__read(o),!1))}catch(e){}return void 0!==a&&(n.module.exports=a),n.module.exports},e}(),cosmicComponents=Object.freeze({__proto__:null,Accordion:cosmic.accordion,AccordionPanel:cosmic.accordionPanel,AudioPlayer:cosmic.AudioPlayer$1,Avatar:cosmic.avatar,AvatarGroup:cosmic.avatarGroup,Badge:cosmic.badge,Button:cosmic.Button$1,Calendar:cosmic.calendar,Cascader:cosmic.cascader,Checkbox:cosmic.Checkbox$1,CheckboxGroup:cosmic.CheckboxGroup$1,Dialog:cosmic.dialog,Drawer:cosmic.drawer,Empty:cosmic.empty,Fold:cosmic.fold,FoldSwitch:cosmic.foldSwitch,Icon:cosmic.Icon$1,Image:cosmic.image,Input:cosmic.Input$1,Loading:cosmic.loading,MoreLink:cosmic.MoreLink$1,Popover:cosmic.popover,Price:cosmic.price,Radio:cosmic.Radio$1,RadioGroup:cosmic.RadioGroup$1,Rank:cosmic.rank,Score:cosmic.score,Select:cosmic.select,Swiper:cosmic.Swiper$1,SwiperItem:cosmic.SwiperItem$1,Switcher:cosmic.switcher,Tab:cosmic.Tab$1,TabPane:cosmic.TabPane$1,Table:cosmic.table,Tabs:cosmic.Tabs$1,Tag:cosmic.tag,Textarea:cosmic.Textarea$1,Toast:cosmic.toast,Tooltip:cosmic.tooltip,Vote:cosmic.vote}),Empty=san.defineComponent({template:"<div />"});function getBuiltinComponents(){var e={iframe:Empty,script:Empty,embed:Empty,style:Empty,link:Empty};try{Object.entries(cosmicComponents).forEach((function(t){var n=__read(t,2),i=n[0],o=n[1],a="cos".concat(i.replace(/([A-Z])/g,"-$1")).toLowerCase();e[a]=null==o?void 0:o.default}))}catch(e){console.error("cosmic-agent-ui")}return e}var baseComponents=getBuiltinComponents(),isAssistant=function(e){return e.startsWith("assistant://")},renameAssistant=function(e){return e.replace(/\/|:\/\//g,"-")},renameAndCollectAssistant=function(e){if(!e)return e;var t=e.component,n=[],i=function(e){var t,o;if(isAssistant(e.type)&&(!n.includes(e.type)&&n.push(e.type),e.type=renameAssistant(e.type)),e.children)try{for(var a=__values(e.children),r=a.next();!r.done;r=a.next()){var s=r.value;i(s)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(o=a.return)&&o.call(a)}finally{if(t)throw t.error}}};return i(t),n.length?n:[]},assistantAPICpmpat=function(e,t){return function(n){var i=t(n);e(i)}},sendPromptCompat=function(e){var t,n=_assign({},e);if("text"===e.type){var i=null===(t=null==e?void 0:e.value)||void 0===t?void 0:t.msg;n.msg=i,n.$event={msg:i}}return n},previewImageCompat=function(e){var t=e.current,n=void 0===t?"":t,i=e.urls,o=void 0===i?[]:i,a=e.images,r=e.interactions,s=void 0===r?[]:r,c=o.indexOf(n),l=_assign({},e);return l.$event={urls:o,images:a||o.map((function(e){return{src:e}})),current:n,src:n,currentIndex:c,interactions:s},l},baseOptions={components:baseComponents,inited:function(){var e=getRoot(this),t=null==e?void 0:e.data.get("_emitter"),n=this.source.tagName,i=unifiedAPI(t,SDK_HANDLER_KEY.prompt,{type:n});this.sendPrompt=assistantAPICpmpat(i,sendPromptCompat),this.sendLog=unifiedAPI(t,SDK_HANDLER_KEY.assistantLog,{type:n}),this.isHistory=function(){return(null==e?void 0:e.data.get("_history"))||!1}},error:function(e){console.error(e)}};function mergeOptions(e,t){var n,i,o=Object.assign({},e),a=Object.keys(o),r=function(n){switch(n){case"inited":case"error":o[n]=function(i){e[n]&&e[n].call(this,i),t[n]&&t[n].call(this,i)}}};try{for(var s=__values(a),c=s.next();!c.done;c=s.next())r(c.value)}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return o}function defineUI(e){return function(t,n){var i;try{var o=_assign(_assign({},baseOptions.components),null==t?void 0:t.components),a=e.uiComponents||{};Object.entries(a).forEach((function(e){var t=__read(e,2),n=t[0],i=t[1],a="cosd-".concat(n.replace(/([A-Z])/g,"-$1")).toLowerCase();o["".concat(a)]=i}));var r=mergeOptions(baseOptions,t),s=san.defineComponent(_assign(_assign(_assign({},t),r),{components:o})),c=(null==n?void 0:n.type)||"";if(c){var l=renameAssistant(c);e.registerComponents(((i={})["".concat(l)]=s,i))}return s}catch(e){return Empty}}}var _this=void 0,hackGlobalContext=function(e,t){var n,i,o=new ModuleLoader,a=null===(n=o.define)||void 0===n?void 0:n.bind(o),r=null===(i=o.require)||void 0===i?void 0:i.bind(o),s=t.emitter,c=e;c.__hacked={define:a,require:r};var l="assistant-event",d=unifiedAPI(s,SDK_HANDLER_KEY.previewImage,{type:l});c.Assistant={defineUI:defineUI({uiComponents:t.uiComponents,registerComponents:t.registerComponents}),link:unifiedAPI(s,SDK_HANDLER_KEY.link,{type:l}),request:unifiedAPI(s,SDK_HANDLER_KEY.request,{type:l}),showToast:unifiedAPI(s,SDK_HANDLER_KEY.showToast,{type:l}),previewImage:assistantAPICpmpat(d,previewImageCompat),openDrawer:unifiedAPI(s,SDK_HANDLER_KEY.openDrawer,{type:l}),closeDrawer:unifiedAPI(s,SDK_HANDLER_KEY.closeDrawer,{type:l}),makePhoneCall:function(e){if(null==e?void 0:e.phoneNumber)return unifiedAPI(s,SDK_HANDLER_KEY.makePhoneCall,{type:l}).call(_this,e.phoneNumber);console.error("[makePhoneCall Argument Error]phoneNumber is required")}}},requestHost="https://agent-proxy.baidu.com";try{process.env.ASSISTANT_HOST&&(requestHost=process.env.ASSISTANT_HOST)}catch(_a){}function getAssistantURL(e){return __awaiter(this,void 0,void 0,(function(){var t,n,i;return __generator(this,(function(o){switch(o.label){case 0:t=requestHost.endsWith("/")?"".concat(requestHost,"agent/call/get_assistants"):"".concat(requestHost,"/agent/call/get_assistants"),n=[],o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({assistants:e})}).then((function(e){return e.json()}))];case 2:return 0==+(i=o.sent()).status&&i.data.assistants?[2,i.data.assistants]:[3,4];case 3:return o.sent(),[3,4];case 4:return[2,Promise.resolve(n)]}}))}))}var css_248z$f='@font-face{font-family:cos-icon;font-weight:400;src:url(//ms.bdstatic.com/se/static/font/cosmic/wise/cos-icon_77a1248.eot);src:url(//ms.bdstatic.com/se/static/font/cosmic/wise/cos-icon_77a1248.eot#iefix) format("embedded-opentype"),url(//ms.bdstatic.com/se/static/font/cosmic/wise/cos-icon_1d17665.woff2) format("woff2"),url(//ms.bdstatic.com/se/static/font/cosmic/wise/cos-icon_85b621c.woff) format("woff"),url(//ms.bdstatic.com/se/static/font/cosmic/wise/cos-icon_4ce459e.ttf) format("truetype"),url(//ms.bdstatic.com/se/static/font/cosmic/wise/cos-icon_c4052aa.svg#cos-icon) format("svg")}.cos-icon{font-family:cos-icon!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.cos-icon-panorama:before{content:"\\e611"}.cos-icon-prohibition:before{content:"\\e60b"}.cos-icon-package:before{content:"\\e60a"}.cos-icon-volume-2:before{content:"\\e605"}.cos-icon-random:before{content:"\\e7e1"}.cos-icon-extand-3-4:before{content:"\\e7e0"}.cos-icon-revocation:before{content:"\\e7d9"}.cos-icon-contrast:before{content:"\\e7da"}.cos-icon-image-edit:before{content:"\\e7db"}.cos-icon-recover:before{content:"\\e7dc"}.cos-icon-extand-1-1:before{content:"\\e7dd"}.cos-icon-extand-16-9:before{content:"\\e7de"}.cos-icon-extand-4-3:before{content:"\\e7df"}.cos-icon-photo-gallery:before{content:"\\e7d0"}.cos-icon-cutout:before{content:"\\e7d1"}.cos-icon-electorate:before{content:"\\e7d2"}.cos-icon-liine-art:before{content:"\\e7d3"}.cos-icon-remove-watermark:before{content:"\\e7d4"}.cos-icon-smear:before{content:"\\e7d5"}.cos-icon-aiimage-edit:before{content:"\\e7d6"}.cos-icon-image-quality:before{content:"\\e7d7"}.cos-icon-local-modification:before{content:"\\e7d8"}.cos-icon-my-history:before{content:"\\e7cf"}.cos-icon-change:before{content:"\\e7ce"}.cos-icon-bin:before{content:"\\e7cd"}.cos-icon-eye-medical:before{content:"\\e7cc"}.cos-icon-authority:before{content:"\\e7cb"}.cos-icon-pause-dqa:before{content:"\\e7ca"}.cos-icon-mix:before{content:"\\e7c8"}.cos-icon-medical:before{content:"\\e7c9"}.cos-icon-camera-test:before{content:"\\e7c7"}.cos-icon-doubleheart:before{content:"\\e7c6"}.cos-icon-imagegroup:before{content:"\\e7c5"}.cos-icon-vs:before{content:"\\e7c4"}.cos-icon-feedback-new:before{content:"\\e7c3"}.cos-icon-downloaded:before{content:"\\e7c2"}.cos-icon-research:before{content:"\\e757"}.cos-icon-toggle-landscape:before{content:"\\e7c0"}.cos-icon-bell:before{content:"\\e7c1"}.cos-icon-qa:before{content:"\\e7bf"}.cos-icon-caret-down-circle-fill:before{content:"\\e7be"}.cos-icon-note:before{content:"\\e7bd"}.cos-icon-prompt:before{content:"\\e7bb"}.cos-icon-card:before{content:"\\e7bc"}.cos-icon-v-mark:before{content:"\\e7ba"}.cos-icon-brush:before{content:"\\e7b9"}.cos-icon-qa-fill:before{content:"\\e7b8"}.cos-icon-calendar-selected:before{content:"\\e7b7"}.cos-icon-loading:before{content:"\\e7b6"}.cos-icon-send:before{content:"\\e789"}.cos-icon-weibo:before{content:"\\e795"}.cos-icon-curtain:before{content:"\\e7b5"}.cos-icon-sad-fill:before{content:"\\e7b4"}.cos-icon-airticket-booking:before{content:"\\e72c"}.cos-icon-area:before{content:"\\e72d"}.cos-icon-bed:before{content:"\\e72e"}.cos-icon-baidu:before{content:"\\e72f"}.cos-icon-batch-line:before{content:"\\e730"}.cos-icon-daily-composition:before{content:"\\e731"}.cos-icon-composition-library:before{content:"\\e732"}.cos-icon-child:before{content:"\\e733"}.cos-icon-candle:before{content:"\\e734"}.cos-icon-comment-fill:before{content:"\\e735"}.cos-icon-close-window:before{content:"\\e736"}.cos-icon-computer:before{content:"\\e737"}.cos-icon-bao:before{content:"\\e738"}.cos-icon-cart:before{content:"\\e739"}.cos-icon-boarding:before{content:"\\e73a"}.cos-icon-comment:before{content:"\\e73b"}.cos-icon-correcting:before{content:"\\e73c"}.cos-icon-doctor:before{content:"\\e73d"}.cos-icon-close-barrage:before{content:"\\e73e"}.cos-icon-estimated-score:before{content:"\\e73f"}.cos-icon-bless:before{content:"\\e740"}.cos-icon-bless-fill:before{content:"\\e741"}.cos-icon-candle-fill:before{content:"\\e742"}.cos-icon-clock:before{content:"\\e743"}.cos-icon-bath:before{content:"\\e744"}.cos-icon-floor:before{content:"\\e745"}.cos-icon-diamond:before{content:"\\e746"}.cos-icon-edit:before{content:"\\e747"}.cos-icon-heart1:before{content:"\\e748"}.cos-icon-heart-fill1:before{content:"\\e749"}.cos-icon-image-fill:before{content:"\\e74a"}.cos-icon-express:before{content:"\\e74b"}.cos-icon-drag-window:before{content:"\\e74c"}.cos-icon-folder:before{content:"\\e74d"}.cos-icon-hotel:before{content:"\\e74e"}.cos-icon-mute-fill:before{content:"\\e74f"}.cos-icon-hot:before{content:"\\e750"}.cos-icon-interpretation:before{content:"\\e751"}.cos-icon-pan:before{content:"\\e752"}.cos-icon-pot:before{content:"\\e753"}.cos-icon-intelligent-answer:before{content:"\\e754"}.cos-icon-hot-fill:before{content:"\\e755"}.cos-icon-pause-circle:before{content:"\\e756"}.cos-icon-play-repeat:before{content:"\\e758"}.cos-icon-exchange:before{content:"\\e759"}.cos-icon-continuation:before{content:"\\e75a"}.cos-icon-destinations:before{content:"\\e75b"}.cos-icon-menu1:before{content:"\\e75c"}.cos-icon-input:before{content:"\\e75d"}.cos-icon-phone1:before{content:"\\e75e"}.cos-icon-menu-more:before{content:"\\e75f"}.cos-icon-illegal:before{content:"\\e760"}.cos-icon-refrigerator:before{content:"\\e761"}.cos-icon-magic:before{content:"\\e762"}.cos-icon-image:before{content:"\\e763"}.cos-icon-pause:before{content:"\\e764"}.cos-icon-red-envelope:before{content:"\\e765"}.cos-icon-expand:before{content:"\\e766"}.cos-icon-nosmoking:before{content:"\\e767"}.cos-icon-fine:before{content:"\\e768"}.cos-icon-open-window:before{content:"\\e769"}.cos-icon-medical-insurance:before{content:"\\e76a"}.cos-icon-play-circle:before{content:"\\e76b"}.cos-icon-clear-screen:before{content:"\\e76c"}.cos-icon-flight-status:before{content:"\\e76d"}.cos-icon-fastforward:before{content:"\\e76e"}.cos-icon-ranking-list:before{content:"\\e76f"}.cos-icon-headset1:before{content:"\\e770"}.cos-icon-open-barrage:before{content:"\\e771"}.cos-icon-full-screen:before{content:"\\e772"}.cos-icon-hotel-booking:before{content:"\\e773"}.cos-icon-play-circle-fill:before{content:"\\e774"}.cos-icon-help:before{content:"\\e775"}.cos-icon-living:before{content:"\\e776"}.cos-icon-music:before{content:"\\e777"}.cos-icon-illustration:before{content:"\\e778"}.cos-icon-refresh:before{content:"\\e779"}.cos-icon-lecture-hall:before{content:"\\e77a"}.cos-icon-major:before{content:"\\e77b"}.cos-icon-play:before{content:"\\e77c"}.cos-icon-heating:before{content:"\\e77d"}.cos-icon-money-bag:before{content:"\\e77e"}.cos-icon-backward:before{content:"\\e77f"}.cos-icon-mute:before{content:"\\e780"}.cos-icon-parking:before{content:"\\e781"}.cos-icon-plane:before{content:"\\e782"}.cos-icon-share-fill:before{content:"\\e783"}.cos-icon-smile:before{content:"\\e784"}.cos-icon-share1:before{content:"\\e785"}.cos-icon-summarize:before{content:"\\e786"}.cos-icon-stethoscope:before{content:"\\e787"}.cos-icon-thumbs-down-fill:before{content:"\\e788"}.cos-icon-topic:before{content:"\\e78a"}.cos-icon-washer:before{content:"\\e78b"}.cos-icon-voice-med:before{content:"\\e78c"}.cos-icon-wardrobe:before{content:"\\e78d"}.cos-icon-thumbs-down:before{content:"\\e78e"}.cos-icon-score-time:before{content:"\\e78f"}.cos-icon-star1:before{content:"\\e790"}.cos-icon-a-speed-15x:before{content:"\\e791"}.cos-icon-volume-fill:before{content:"\\e792"}.cos-icon-volume:before{content:"\\e793"}.cos-icon-ticket-change:before{content:"\\e794"}.cos-icon-toilet:before{content:"\\e796"}.cos-icon-spapp:before{content:"\\e797"}.cos-icon-reserve:before{content:"\\e798"}.cos-icon-speed-1x:before{content:"\\e799"}.cos-icon-speed-2x:before{content:"\\e79a"}.cos-icon-rewrite:before{content:"\\e79b"}.cos-icon-a-speed-05x:before{content:"\\e79c"}.cos-icon-seat:before{content:"\\e79d"}.cos-icon-thumbs-up:before{content:"\\e79e"}.cos-icon-social-security:before{content:"\\e79f"}.cos-icon-train:before{content:"\\e7a0"}.cos-icon-video-fill:before{content:"\\e7a1"}.cos-icon-walk:before{content:"\\e7a2"}.cos-icon-video:before{content:"\\e7a3"}.cos-icon-window:before{content:"\\e7a4"}.cos-icon-sad:before{content:"\\e7a5"}.cos-icon-wifi1:before{content:"\\e7a6"}.cos-icon-thumbs-up-fill:before{content:"\\e7a7"}.cos-icon-vocational-test:before{content:"\\e7a8"}.cos-icon-volunteer:before{content:"\\e7a9"}.cos-icon-shop:before{content:"\\e7aa"}.cos-icon-star-fill1:before{content:"\\e7ab"}.cos-icon-taxi:before{content:"\\e7ac"}.cos-icon-translate:before{content:"\\e7ad"}.cos-icon-smile-fill:before{content:"\\e7ae"}.cos-icon-song:before{content:"\\e7af"}.cos-icon-vr:before{content:"\\e7b0"}.cos-icon-trend:before{content:"\\e7b1"}.cos-icon-uninterested:before{content:"\\e7b2"}.cos-icon-delivery:before{content:"\\e7b3"}.cos-icon-acceptance-rate:before{content:"\\e724"}.cos-icon-airconditioner:before{content:"\\e725"}.cos-icon-abbreviation:before{content:"\\e726"}.cos-icon-a-3d:before{content:"\\e727"}.cos-icon-ai:before{content:"\\e728"}.cos-icon-attractions:before{content:"\\e729"}.cos-icon-baidu-logo:before{content:"\\e72a"}.cos-icon-bus:before{content:"\\e72b"}.cos-icon-calendar-fill:before{content:"\\e71f"}.cos-icon-clock-circle:before{content:"\\e720"}.cos-icon-clock-circle-fill:before{content:"\\e721"}.cos-icon-download:before{content:"\\e722"}.cos-icon-camera-fill:before{content:"\\e723"}.cos-icon-eye-fill:before{content:"\\e71c"}.cos-icon-man:before{content:"\\e71e"}.cos-icon-link:before{content:"\\e70c"}.cos-icon-setting-fill:before{content:"\\e70d"}.cos-icon-mappin-fill:before{content:"\\e70e"}.cos-icon-location:before{content:"\\e70f"}.cos-icon-headset:before{content:"\\e710"}.cos-icon-camera:before{content:"\\e711"}.cos-icon-subscribe:before{content:"\\e712"}.cos-icon-copy:before{content:"\\e713"}.cos-icon-email-fill:before{content:"\\e714"}.cos-icon-lock:before{content:"\\e715"}.cos-icon-navigation-fill:before{content:"\\e716"}.cos-icon-menu:before{content:"\\e717"}.cos-icon-similar:before{content:"\\e718"}.cos-icon-calendar:before{content:"\\e719"}.cos-icon-errors:before{content:"\\e71a"}.cos-icon-email:before{content:"\\e71b"}.cos-icon-navigation:before{content:"\\e6fa"}.cos-icon-mappin:before{content:"\\e6fb"}.cos-icon-feedback:before{content:"\\e6fd"}.cos-icon-scan:before{content:"\\e6fe"}.cos-icon-hide:before{content:"\\e6ff"}.cos-icon-user-fill:before{content:"\\e700"}.cos-icon-wifi:before{content:"\\e701"}.cos-icon-phone-fill:before{content:"\\e702"}.cos-icon-direction:before{content:"\\e704"}.cos-icon-original:before{content:"\\e705"}.cos-icon-voice:before{content:"\\e706"}.cos-icon-setting:before{content:"\\e707"}.cos-icon-search:before{content:"\\e708"}.cos-icon-open:before{content:"\\e709"}.cos-icon-voice-fill:before{content:"\\e70b"}.cos-icon-star:before{content:"\\e6f0"}.cos-icon-phone:before{content:"\\e6f1"}.cos-icon-map:before{content:"\\e6f2"}.cos-icon-star-fill:before{content:"\\e6f3"}.cos-icon-lock-fill:before{content:"\\e6f4"}.cos-icon-errors-fill:before{content:"\\e6f5"}.cos-icon-woman:before{content:"\\e6f6"}.cos-icon-user:before{content:"\\e6f7"}.cos-icon-eye:before{content:"\\e6f8"}.cos-icon-subscribe-fill:before{content:"\\e6f9"}.cos-icon-half-check-square-fill:before{content:"\\e6cd"}.cos-icon-check-square-fill:before{content:"\\e6d0"}.cos-icon-plus-circle:before{content:"\\e6d1"}.cos-icon-plus:before{content:"\\e6d2"}.cos-icon-plus-circle-fill:before{content:"\\e6d3"}.cos-icon-close-circle-fill:before{content:"\\e6d5"}.cos-icon-close:before{content:"\\e6d7"}.cos-icon-minus:before{content:"\\e6e1"}.cos-icon-check-circle-fill:before{content:"\\e6e2"}.cos-icon-info-circle-fill:before{content:"\\e6e5"}.cos-icon-info:before{content:"\\e6e7"}.cos-icon-minus-circle-fill:before{content:"\\e6e8"}.cos-icon-minus-circle:before{content:"\\e6ea"}.cos-icon-check:before{content:"\\e6eb"}.cos-icon-info-circle:before{content:"\\e6bf"}.cos-icon-question-circle:before{content:"\\e6c0"}.cos-icon-question:before{content:"\\e6c2"}.cos-icon-close-circle:before{content:"\\e6c3"}.cos-icon-check-square:before{content:"\\e6c4"}.cos-icon-question-circle-fill:before{content:"\\e6c5"}.cos-icon-check-circle:before{content:"\\e6c9"}.cos-icon-down-circle:before{content:"\\e6ee"}.cos-icon-arrow-up-circle-fill:before{content:"\\e6ef"}.cos-icon-arrow-right:before{content:"\\e6d8"}.cos-icon-caret-left:before{content:"\\e6d9"}.cos-icon-arrow-up-circle:before{content:"\\e6da"}.cos-icon-arrow-down-circle-fill:before{content:"\\e6db"}.cos-icon-right:before{content:"\\e6dc"}.cos-icon-arrow-right-down:before{content:"\\e6dd"}.cos-icon-arrow-left:before{content:"\\e6de"}.cos-icon-arrow-left-up:before{content:"\\e6df"}.cos-icon-caret-right:before{content:"\\e6e0"}.cos-icon-left:before{content:"\\e6e3"}.cos-icon-arrow-right-circle:before{content:"\\e6e4"}.cos-icon-caret-down:before{content:"\\e6e6"}.cos-icon-arrow-right-circle-fill:before{content:"\\e6e9"}.cos-icon-arrow-down-circle:before{content:"\\e6ec"}.cos-icon-arrow-left-down:before{content:"\\e6ed"}.cos-icon-stop:before{content:"\\e6c1"}.cos-icon-uncheck-square:before{content:"\\e6c6"}.cos-icon-to-down:before{content:"\\e6c7"}.cos-icon-arrow-right-up:before{content:"\\e6c8"}.cos-icon-down-circle-fill:before{content:"\\e6ca"}.cos-icon-up-circle-fill:before{content:"\\e6cb"}.cos-icon-arrow-up:before{content:"\\e6cc"}.cos-icon-arrow-left-circle:before{content:"\\e6ce"}.cos-icon-arrow-down:before{content:"\\e6cf"}.cos-icon-to-left:before{content:"\\e6d4"}.cos-icon-arrow-left-circle-fill:before{content:"\\e6d6"}.cos-icon-up:before{content:"\\e6b7"}.cos-icon-right-circle-fill:before{content:"\\e6b5"}.cos-icon-left-circle:before{content:"\\e6b6"}.cos-icon-down:before{content:"\\e6b4"}.cos-icon-right-circle:before{content:"\\e6ba"}.cos-icon-left-circle-fill:before{content:"\\e6bb"}.cos-icon-to-up:before{content:"\\e6bc"}.cos-icon-to-right:before{content:"\\e6bd"}.cos-icon-up-circle:before{content:"\\e6be"}.cos-icon-caret-up:before{content:"\\e6b3"}';styleInject(css_248z$f);var css_248z$e=".agent-ui{height:100%;width:100%}.agent-ui svg{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.agent-ui .cos-tabs .cos-tab,.agent-ui svg{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.agent-ui .cos-tabs .cos-tab{font-size:var(--cos-text-subtitle-sm);height:32px;line-height:var(--cos-leading-body)}.agent-ui .cos-tabs .cos-tab.cos-tab-active,.agent-ui .cos-tabs .cos-tab.cos-tab-active .agent-ui-text{color:var(--cosd-color-text-primary);font-weight:var(--cos-font-medium)}.agent-ui .cos-tabs .cos-tabs-header .agent-ui-text{margin-bottom:var(--cos-space-none);padding-bottom:var(--cos-space-none)}.agent-ui .cos-row .cos-col .agent-ui-image{line-height:1}.agent-ui .cos-col .agent-ui-image-wrapper{max-height:unset!important}.agent-ui .cos-col .agent-ui-image-wrapper img{max-height:unset!important;max-width:unset!important;width:100%!important}.agent-ui .cosd-location-card,.agent-ui .cosd-note-card{cursor:pointer}.agent-ui .agent-ui-mt-space.cos-space-mt-3xl{margin-top:var(--cos-space-3xl)}.agent-ui .agent-ui-mt-space.cos-space-mt-xxl{margin-top:var(--cos-space-xxl)}.agent-ui .agent-ui-mt-space.cos-space-mt-xl{margin-top:var(--cos-space-xl)}.agent-ui .agent-ui-mt-space.cos-space-mt-md{margin-top:var(--cos-space-md)}.agent-ui .agent-ui-mt-space.cos-space-mt-sm{margin-top:var(--cos-space-sm)}.agent-ui .agent-ui-mt-space.cos-space-mt-xs{margin-top:var(--cos-space-xs)}.agent-ui .agent-ui-mt-space.cos-space-mt-xxs{margin-top:var(--cos-space-xxs)}.agent-ui .agent-ui-mt-space.cos-space-mt-3xs{margin-top:var(--cos-space-3xs)}.agent-ui .agent-ui-mt-space.cos-space-mt-none{margin-top:var(--cos-space-none)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):not(.no-content){margin-top:var(--cos-space-lg)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):not(.no-content).cos-space-mt-3xl{margin-top:var(--cos-space-3xl)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):not(.no-content).cos-space-mt-xxl{margin-top:var(--cos-space-xxl)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):not(.no-content).cos-space-mt-xl{margin-top:var(--cos-space-xl)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):not(.no-content).cos-space-mt-md{margin-top:var(--cos-space-md)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):not(.no-content).cos-space-mt-sm{margin-top:var(--cos-space-sm)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):not(.no-content).cos-space-mt-xs{margin-top:var(--cos-space-xs)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):not(.no-content).cos-space-mt-xxs{margin-top:var(--cos-space-xxs)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):not(.no-content).cos-space-mt-3xs{margin-top:var(--cos-space-3xs)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):not(.no-content).cos-space-mt-none{margin-top:var(--cos-space-none)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md:not(.no-content){margin-top:var(--cos-space-md)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container) .cosdy-container>.cosdy-ui:first-child,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md .cosdy-container>.cosdy-ui:first-child,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md:first-child,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):first-child{margin-top:var(--cos-space-none)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container) .cosdy-container>.cosdy-ui:first-child.cos-space-mt-3xl,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md .cosdy-container>.cosdy-ui:first-child.cos-space-mt-3xl,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md:first-child.cos-space-mt-3xl,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):first-child.cos-space-mt-3xl{margin-top:var(--cos-space-3xl)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container) .cosdy-container>.cosdy-ui:first-child.cos-space-mt-xxl,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md .cosdy-container>.cosdy-ui:first-child.cos-space-mt-xxl,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md:first-child.cos-space-mt-xxl,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):first-child.cos-space-mt-xxl{margin-top:var(--cos-space-xxl)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container) .cosdy-container>.cosdy-ui:first-child.cos-space-mt-xl,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md .cosdy-container>.cosdy-ui:first-child.cos-space-mt-xl,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md:first-child.cos-space-mt-xl,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):first-child.cos-space-mt-xl{margin-top:var(--cos-space-xl)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container) .cosdy-container>.cosdy-ui:first-child.cos-space-mt-md,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md .cosdy-container>.cosdy-ui:first-child.cos-space-mt-md,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md:first-child.cos-space-mt-md,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):first-child.cos-space-mt-md{margin-top:var(--cos-space-md)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container) .cosdy-container>.cosdy-ui:first-child.cos-space-mt-sm,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md .cosdy-container>.cosdy-ui:first-child.cos-space-mt-sm,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md:first-child.cos-space-mt-sm,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):first-child.cos-space-mt-sm{margin-top:var(--cos-space-sm)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container) .cosdy-container>.cosdy-ui:first-child.cos-space-mt-xs,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md .cosdy-container>.cosdy-ui:first-child.cos-space-mt-xs,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md:first-child.cos-space-mt-xs,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):first-child.cos-space-mt-xs{margin-top:var(--cos-space-xs)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container) .cosdy-container>.cosdy-ui:first-child.cos-space-mt-xxs,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md .cosdy-container>.cosdy-ui:first-child.cos-space-mt-xxs,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md:first-child.cos-space-mt-xxs,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):first-child.cos-space-mt-xxs{margin-top:var(--cos-space-xxs)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container) .cosdy-container>.cosdy-ui:first-child.cos-space-mt-3xs,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md .cosdy-container>.cosdy-ui:first-child.cos-space-mt-3xs,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md:first-child.cos-space-mt-3xs,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):first-child.cos-space-mt-3xs{margin-top:var(--cos-space-3xs)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container) .cosdy-container>.cosdy-ui:first-child.cos-space-mt-none,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md .cosdy-container>.cosdy-ui:first-child.cos-space-mt-none,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md:first-child.cos-space-mt-none,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):first-child.cos-space-mt-none{margin-top:var(--cos-space-none)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container) .cosdy-container>.cosdy-ui:first-child:is(.no-content)+.cosdy-ui,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md .cosdy-container>.cosdy-ui:first-child:is(.no-content)+.cosdy-ui,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md:first-child:is(.no-content)+.cosdy-ui,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):first-child:is(.no-content)+.cosdy-ui{margin-top:var(--cos-space-none)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container) .cosdy-container>.cosdy-ui:first-child:is(.no-content)+.cosdy-ui.cos-space-mt-3xl,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md .cosdy-container>.cosdy-ui:first-child:is(.no-content)+.cosdy-ui.cos-space-mt-3xl,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md:first-child:is(.no-content)+.cosdy-ui.cos-space-mt-3xl,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):first-child:is(.no-content)+.cosdy-ui.cos-space-mt-3xl{margin-top:var(--cos-space-3xl)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container) .cosdy-container>.cosdy-ui:first-child:is(.no-content)+.cosdy-ui.cos-space-mt-xxl,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md .cosdy-container>.cosdy-ui:first-child:is(.no-content)+.cosdy-ui.cos-space-mt-xxl,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md:first-child:is(.no-content)+.cosdy-ui.cos-space-mt-xxl,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):first-child:is(.no-content)+.cosdy-ui.cos-space-mt-xxl{margin-top:var(--cos-space-xxl)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container) .cosdy-container>.cosdy-ui:first-child:is(.no-content)+.cosdy-ui.cos-space-mt-xl,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md .cosdy-container>.cosdy-ui:first-child:is(.no-content)+.cosdy-ui.cos-space-mt-xl,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md:first-child:is(.no-content)+.cosdy-ui.cos-space-mt-xl,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):first-child:is(.no-content)+.cosdy-ui.cos-space-mt-xl{margin-top:var(--cos-space-xl)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container) .cosdy-container>.cosdy-ui:first-child:is(.no-content)+.cosdy-ui.cos-space-mt-md,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md .cosdy-container>.cosdy-ui:first-child:is(.no-content)+.cosdy-ui.cos-space-mt-md,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md:first-child:is(.no-content)+.cosdy-ui.cos-space-mt-md,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):first-child:is(.no-content)+.cosdy-ui.cos-space-mt-md{margin-top:var(--cos-space-md)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container) .cosdy-container>.cosdy-ui:first-child:is(.no-content)+.cosdy-ui.cos-space-mt-sm,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md .cosdy-container>.cosdy-ui:first-child:is(.no-content)+.cosdy-ui.cos-space-mt-sm,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md:first-child:is(.no-content)+.cosdy-ui.cos-space-mt-sm,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):first-child:is(.no-content)+.cosdy-ui.cos-space-mt-sm{margin-top:var(--cos-space-sm)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container) .cosdy-container>.cosdy-ui:first-child:is(.no-content)+.cosdy-ui.cos-space-mt-xs,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md .cosdy-container>.cosdy-ui:first-child:is(.no-content)+.cosdy-ui.cos-space-mt-xs,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md:first-child:is(.no-content)+.cosdy-ui.cos-space-mt-xs,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):first-child:is(.no-content)+.cosdy-ui.cos-space-mt-xs{margin-top:var(--cos-space-xs)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container) .cosdy-container>.cosdy-ui:first-child:is(.no-content)+.cosdy-ui.cos-space-mt-xxs,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md .cosdy-container>.cosdy-ui:first-child:is(.no-content)+.cosdy-ui.cos-space-mt-xxs,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md:first-child:is(.no-content)+.cosdy-ui.cos-space-mt-xxs,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):first-child:is(.no-content)+.cosdy-ui.cos-space-mt-xxs{margin-top:var(--cos-space-xxs)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container) .cosdy-container>.cosdy-ui:first-child:is(.no-content)+.cosdy-ui.cos-space-mt-3xs,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md .cosdy-container>.cosdy-ui:first-child:is(.no-content)+.cosdy-ui.cos-space-mt-3xs,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md:first-child:is(.no-content)+.cosdy-ui.cos-space-mt-3xs,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):first-child:is(.no-content)+.cosdy-ui.cos-space-mt-3xs{margin-top:var(--cos-space-3xs)}.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container) .cosdy-container>.cosdy-ui:first-child:is(.no-content)+.cosdy-ui.cos-space-mt-none,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md .cosdy-container>.cosdy-ui:first-child:is(.no-content)+.cosdy-ui.cos-space-mt-none,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container).cosdy-ui-mt-md:first-child:is(.no-content)+.cosdy-ui.cos-space-mt-none,.agent-ui .cosdy-ui:not(.cosdy-container.cosdy-flex-item):not(.cosdy-container.cos-col):not(.cosdy-container.cos-tab):not(.cosdy-container.cos-tab-pane):not(.cosdy-container.cos-swiper-item):not(.agent-ui-list-layout .cosdy-container):first-child:is(.no-content)+.cosdy-ui.cos-space-mt-none{margin-top:var(--cos-space-none)}.agent-ui .cosdy-container.cos-swiper-item .cosdy-ui:first-child{margin-top:var(--cos-space-none)}.agent-ui .cosdy-container.cos-swiper-item .cosdy-ui:first-child.cos-space-mt-3xl{margin-top:var(--cos-space-3xl)}.agent-ui .cosdy-container.cos-swiper-item .cosdy-ui:first-child.cos-space-mt-xxl{margin-top:var(--cos-space-xxl)}.agent-ui .cosdy-container.cos-swiper-item .cosdy-ui:first-child.cos-space-mt-xl{margin-top:var(--cos-space-xl)}.agent-ui .cosdy-container.cos-swiper-item .cosdy-ui:first-child.cos-space-mt-md{margin-top:var(--cos-space-md)}.agent-ui .cosdy-container.cos-swiper-item .cosdy-ui:first-child.cos-space-mt-sm{margin-top:var(--cos-space-sm)}.agent-ui .cosdy-container.cos-swiper-item .cosdy-ui:first-child.cos-space-mt-xs{margin-top:var(--cos-space-xs)}.agent-ui .cosdy-container.cos-swiper-item .cosdy-ui:first-child.cos-space-mt-xxs{margin-top:var(--cos-space-xxs)}.agent-ui .cosdy-container.cos-swiper-item .cosdy-ui:first-child.cos-space-mt-3xs{margin-top:var(--cos-space-3xs)}.agent-ui .cosdy-container.cos-swiper-item .cosdy-ui:first-child.cos-space-mt-none,.agent-ui-empty{margin-top:var(--cos-space-none)}.agent-ui-empty.cos-space-mt-3xl{margin-top:var(--cos-space-3xl)}.agent-ui-empty.cos-space-mt-xxl{margin-top:var(--cos-space-xxl)}.agent-ui-empty.cos-space-mt-xl{margin-top:var(--cos-space-xl)}.agent-ui-empty.cos-space-mt-md{margin-top:var(--cos-space-md)}.agent-ui-empty.cos-space-mt-sm{margin-top:var(--cos-space-sm)}.agent-ui-empty.cos-space-mt-xs{margin-top:var(--cos-space-xs)}.agent-ui-empty.cos-space-mt-xxs{margin-top:var(--cos-space-xxs)}.agent-ui-empty.cos-space-mt-3xs{margin-top:var(--cos-space-3xs)}.agent-ui-empty.cos-space-mt-none{margin-top:var(--cos-space-none)}";function retry(e,t){return function(){for(var n=[],i=0;i<Array.from(arguments).length;i++)n[i]=Array.from(arguments)[i];var o=0;return new Promise((function(i,a){var r=function(n){e(n).then((function(e){return i(e)})).catch((function(){o++,t>o?r(n):a()}))};r(n)}))}}styleInject(css_248z$e);var ResourceManager=function(){function e(){this.loadCache={},this.loadCache={}}return e.prototype.load=function(e,t){var n=this;void 0===t&&(t={retryNum:0});var i=this.loadCache[e];if(i)return i;var o=retry("css"===this.getFileTypeFromPath(e)?this.loadCss:this.loadJsAsync,t.retryNum)(e).catch((function(t){throw n.loadCache[e]=void 0,new Error("".concat(e," load failed: ").concat(t))}));return this.loadCache[e]=o,o},e.prototype.loadCss=function(e){return new Promise((function(t,n){var i=document.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=e,i.onload=function(){t()},i.onerror=function(e){return n(e)},document.head.appendChild(i)}))},e.prototype.loadJsAsync=function(e){return new Promise((function(t,n){var i=document.createElement("script");i.type="text/javascript",i.src=e,i.onload=function(){t()},i.onerror=function(e){n(e)},document.head.appendChild(i)}))},e.prototype.getFileTypeFromPath=function(e){return e.split("?")[0].slice(e.lastIndexOf(".")+1).toLowerCase()},e}(),ASSISTANT_LOAD_STATUS;!function(e){e[e.WAITING=0]="WAITING",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e[e.FAILED=3]="FAILED"}(ASSISTANT_LOAD_STATUS||(ASSISTANT_LOAD_STATUS={}));var AssistantLoadManager=function(){function e(){this.resourceManager=new ResourceManager,this.assistantQueue=[],this.loadedAssistantMap=new Map,this.assistantMap=new Map,this.loadingCount=0}return e.prototype.load=function(e,t){var n=this;return new Promise((function(i){var o=0,a=null==t?void 0:t.immediate,r=Array.isArray(e)?e:[e],s=r.length,c=[],l=[],d=null==r?void 0:r.map((function(e){return n.setAssistant(e),{name:e.name,execute:function(){return n.updateAssistantStatus(e.name,ASSISTANT_LOAD_STATUS.LOADING),n.loadAssistantItem(e).then((function(){c.push(e),n.updateAssistantStatus(e.name,ASSISTANT_LOAD_STATUS.LOADED)})).catch((function(){l.push(e),n.updateAssistantStatus(e.name,ASSISTANT_LOAD_STATUS.FAILED)})).finally((function(){o++,s===o&&i({successfulAssistants:c,failedAssistants:l})}))}}}));n.assistantQueue=a?__spreadArray(__spreadArray([],__read(d),!1),__read(n.assistantQueue),!1):__spreadArray(__spreadArray([],__read(n.assistantQueue),!1),__read(d),!1),n.loadResource()}))},e.prototype.isLoaded=function(e){return this.loadedAssistantMap.has(e)},e.prototype.getAssistantResource=function(e){var t=this.assistantMap.get(e);return t?t.assistant:null},e.prototype.loadAssistantItem=function(e){var t=this;return new Promise((function(n,i){var o=t.getAssistantLoadFile(e);t.resourceManager.load(o.js,{retryNum:2}).then((function(){n(e)})).catch(i)}))},e.prototype.loadResource=function(){var t=this;if(!(this.loadingCount>=e.LOAD_ASSISTANT_MAX_NUM))for(var n=this.assistantQueue.length,i=function(){var e=t.assistantQueue.shift();e&&(t.loadingCount++,e.execute().then((function(){t.loadedAssistantMap.set(e.name,!0)})).finally((function(){t.loadingCount--,i()})))},o=e.LOAD_ASSISTANT_MAX_NUM-this.loadingCount,a=0;a<Math.min(o,n);a++)i()},e.prototype.getAssistantLoadFile=function(e){if(isPC()&&e.pc){var t=this.isJsPath(e.pc.js)?e.pc.js:"".concat(e.pc.js,".js"),n="".concat(e.resourceUrl,"/").concat(t);return{name:e.name,js:n}}var i=e.js&&this.isJsPath(e.js)?e.js:"".concat(e.js,".js"),o="".concat(e.resourceUrl,"/").concat(i);return{name:e.name,js:o}},e.prototype.setAssistant=function(e){this.assistantMap.get(e.name)||this.assistantMap.set(e.name,{status:ASSISTANT_LOAD_STATUS.WAITING,assistant:e})},e.prototype.updateAssistantStatus=function(e,t){var n=this.assistantMap.get(e);n&&this.assistantMap.set(e,_assign(_assign({},n),{status:t}))},e.prototype.isJsPath=function(e){return"js"===e.split(".").pop()},e.LOAD_ASSISTANT_MAX_NUM=6,e}(),instance=null,getAssistantLoadManager=function(){return instance||(instance=new AssistantLoadManager),instance},AgentUISDK=function(){function e(e,t){this.sdkConfig=e,this.uiInstanceMap=new Map,this.renderMap=new Map,this.uiComponents={},this.emitter=new EventEmitter(this),this.registerComponents(t)}return e.prototype.init=function(e){addAPIs((null==e?void 0:e.apis)||{}),this.sdkConfig=_assign(_assign({},this.sdkConfig),e),(null==e?void 0:e.components)&&Object.keys(e.components)&&this.replaceComponents(e.components),initApiContext(this.sdkConfig);try{hackGlobalContext(globalThis,{emitter:this.emitter,uiComponents:this.uiComponents,registerComponents:this.registerComponents.bind(this)})}catch(e){var t=e instanceof Error?e.message:String(e);console.error("[cosmic-agent-ui] assistant context mounted failed: ".concat(t))}(null==e?void 0:e.assistants)&&this.loadResource(e.assistants)},e.prototype.renderMessage=function(e,t){var n=this.sdkConfig,i=n.showProgress,o=n.env,a=renameAndCollectAssistant(t.uiMeta),r=render(e,this,_assign(_assign({},t),{components:this.uiComponents,assistantList:a,apis:_assign({},getSDKApis()),showProgress:i||!1,env:o,globalEmitter:this.emitter}));return this.uiInstanceMap.set(r.id,r),r},e.prototype.setThemeMode=function(){this.uiInstanceMap.forEach((function(e){e.setThemeMode()}))},e.prototype.registerComponents=function(e){var t=this;if(e&&Object.keys(e)){var n="";if(Object.keys(e).forEach((function(i){if(t.renderMap.has(i))n+=" ".concat(i," /n");else{var o=renameAssistant(i);t.renderMap.set(o,e[i])}})),this.uiComponents=Object.fromEntries(this.renderMap),n)throw new Error(n)}},e.prototype.replaceComponents=function(e){var t=this;Object.keys(e).forEach((function(n){var i=e[n];t.renderMap.set(n,i)})),this.uiComponents=Object.fromEntries(this.renderMap)},e.prototype.unRegisterComponents=function(e){if(!e)return this.renderMap.clear(),void(this.uiComponents={});this.renderMap.delete(e),this.uiComponents=Object.fromEntries(this.renderMap)},e.prototype.loadResource=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){if(!e||Array.isArray(e)&&!e.length)throw new Error("assistants cannot be empty");return[2,getAssistantLoadManager().load(e)]}))}))},e.prototype.loadResourceOnDemand=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,i,o,a,r,s,c,l,d,p=this;return __generator(this,(function(h){switch(h.label){case 0:if(!(null==e?void 0:e.length))return[2];if(0===(t=e.filter((function(e){return!p.renderMap.has(renameAssistant(e))}))).length)return[2];n=[],i=[],o=getAssistantLoadManager();try{for(a=__values(t),r=a.next();!r.done;r=a.next())(s=r.value)&&(o.getAssistantResource(s)?n.push(o.getAssistantResource(s)):i.push(s))}catch(e){l={error:e}}finally{try{r&&!r.done&&(d=a.return)&&d.call(a)}finally{if(l)throw l.error}}if(0===i.length&&0===(null==n?void 0:n.length))return[2];h.label=1;case 1:return h.trys.push([1,3,,4]),c=[],(null==n?void 0:n.length)&&c.push(o.load(n,{immediate:!0})),i&&c.push(__awaiter(p,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,getAssistantURL(i)];case 1:return e=t.sent(),[4,this.loadResource(e)];case 2:return t.sent(),[2]}}))}))),[4,Promise.all(c)];case 2:case 3:return h.sent(),[3,4];case 4:return[2]}}))}))},e}(),css_248z$d=".agent-ui-button{display:inline-block;width:100%}.agent-ui-button.cos-button{background-color:var(--cosd-color-bg-secondary-light);color:var(--cosd-color-text-on-secondary-light)}.agent-ui-button.cos-button-secondary{background-color:var(--cos-color-bg-dent);color:var(--cos-color-text)}";styleInject(css_248z$d);var AgentUIButton=san.defineComponent({template:'\n        <cos-button\n            class="agent-ui-button"\n            size="{{size}}"\n            disabled="{{disabledBool}}"\n            appearance="{{appearance || level}}"\n            on-click="handleClick"\n        >\n            {{text}}\n        </cos-button>\n    ',components:{"cos-button":cosmic.Button},computed:{isShow:function(){return this.data.get("text")},disabledBool:function(){var e=this.data.get("disabled");return!!e&&("boolean"==typeof e?e:"false"!==e)}},initData:function(){return{size:"sm",disabled:!1,appearance:"",text:""}},attached:function(){var e=this,t=!1;this.data.get("isShow")?(t=!0,this.sendLog(LogType.SHOW)):this.watch("isShow",(function(n){!t&&n&&(t=!0,e.sendLog(LogType.SHOW))}))},handleClick:function(){this.sendLog(LogType.CLICK),this.fire("click")},sendLog:function(e){var t,n;null===(n=null===(t=getRoot(this))||void 0===t?void 0:t.data.get("_logger"))||void 0===n||n.sendLog(e,"button",{cs_value:"button_cpt",ext:{button_text:this.data.get("text"),action_type:this.data.get("__agentUIActionType"),valueInfo:[{component_name:"button"}]}})}}),css_248z$c=".agent-ui-video .plyr .plyr__controls{padding-bottom:var(--cos-space-xs);padding-right:var(--cos-space-xs)}.agent-ui-video-pc{width:66.67%}.agent-ui-video .agent-ui-video-wrapper.hidden{display:none}.agent-ui-video-wrapper .plyr--video .plyr__controls{background:none!important}.agent-ui-video-wrapper .plyr__control.plyr__control--overlaid{background:none}.agent-ui-video-wrapper .plyr__control.plyr__control--overlaid svg{height:31px;width:27px}.agent-ui-video-wrapper .plyr__control.plyr__control--overlaid:hover{background:none}.agent-ui-video-wrapper .plyr--video .plyr__control:hover,.agent-ui-video-wrapper .plyr__control:hover{background:none!important}.agent-ui-video-wrapper .plyr__controls__item.plyr__control{display:none}.agent-ui-video-wrapper .plyr__controls .plyr__controls__item.plyr__volume{margin-left:var(--cos-space-none)}.agent-ui-video-wrapper .plyr__controls .plyr__controls__item.plyr__volume button{padding:var(--cos-space-none)}.agent-ui-video-wrapper .plyr__controls__item .plyr__control svg{height:24px;width:24px}.agent-ui-video-wrapper .plyr__controls__item.plyr__progress__container{bottom:-.5px;margin-left:var(--cos-space-none);padding-left:var(--cos-space-none);position:absolute;width:100%}.agent-ui-video-wrapper .plyr__controls__item.plyr__progress__container .plyr__progress input{color:var(--cos-color-text-minor-inverse);height:4px;margin-left:var(--cos-space-none)}.agent-ui-video-wrapper .plyr__controls__item.plyr__progress__container input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;background:transparent;border:none;height:0;width:0}.agent-ui-video-wrapper .seeking .plyr__controls__item.plyr__progress__container .plyr__progress input{height:6px}.agent-ui-video-wrapper .seeking .plyr__controls__item.plyr__progress__container input[type=range]::-webkit-slider-thumb{background:var(--cos-color-bg);border-radius:10px;-webkit-box-shadow:0 .667px 1.333px 0 var(--cos-color-bg-inverse-disabled);box-shadow:0 .667px 1.333px 0 var(--cos-color-bg-inverse-disabled);height:12px;width:6px}.agent-ui-video-wrapper .plyr__control,.agent-ui-video-wrapper .plyr__controls{padding-right:var(--cos-space-none)}.agent-ui-video-wrapper .plyr .plyr__controls{opacity:1!important;pointer-events:none!important;-webkit-transform:none!important;transform:none!important}.agent-ui-video-wrapper .plyr .plyr__controls>*{pointer-events:auto!important}.agent-ui-video-wrapper .plyr .plyr__controls .plyr__time{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding-right:var(--cos-space-md);-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;pointer-events:none!important}.agent-ui-video-wrapper .pause .plyr__controls .plyr__control,.agent-ui-video-wrapper .pause .plyr__controls .plyr__volume{display:none}.agent-ui-video-wrapper .plyr{border-radius:var(--cos-rounded-md);-webkit-tap-highlight-color:transparent}.agent-ui-video-wrapper .plyr--full-ui.plyr--video .plyr__control--overlaid{pointer-events:none!important}";styleInject(css_248z$c);var videoCustomIcons="https://now.bdstatic.com/stash/v1/6f672d5/lingjing-fe/07ccbd4/lingjing-sdk/video-coustom-icons.svg",initOption={controls:["play-large","play","progress","current-time","mute"],iconUrl:videoCustomIcons,fullscreen:{enabled:!1}},AgentUIVideo$1=san.defineComponent({template:'\n        <div class="agent-ui-video cos-rich-video-player{{_isPcComp ? \' agent-ui-video-pc\' : \'\'}}">\n            <div\n                class="agent-ui-video-wrapper {{wrapperClass}}"\n            >\n                <video\n                    class="agent-ui-video-player"\n                    src="{{src}}"\n                    s-ref="chatVideo"\n                    webkit-playsinline\n                    playsinline\n                    t7-video-player-type="inline"\n                    x-webkit-airplay="true"\n                    style="--plyr-video-control-background-hover: #4a5464;"\n                >\n                </video>\n            </div>\n        </div>\n    ',initData:function(){var e;return{isPause:!0,isSeeking:!1,isSeeked:!1,_isPcComp:"pc"===(null===(e=getRoot(this))||void 0===e?void 0:e.data.get("_platform"))}},attached:function(){var e,t=this,n=this.ref("chatVideo"),i=new Plyr(n,initOption);this.player=i,i.poster=this.data.get("poster");var o=n.closest(".agent-ui-video-wrapper");null===(e=i.elements.controls)||void 0===e||e.addEventListener("click",(function(e){e.stopPropagation(),e.preventDefault()})),isPC()?null==o||o.addEventListener("click",(function(e){e.stopPropagation(),e.preventDefault();var n=i.elements.buttons.play;if(n){var o=Array.isArray(n)?n[0]:n;(null==o?void 0:o.className.includes("plyr__control--pressed"))?(i.pause(),t.sendLog(LogType.CLICK,"component_pause"),t.fire("video-pause")):(i.play(),t.sendLog(LogType.CLICK,"component_play"),t.fire("video-play"))}})):null==o||o.addEventListener("click",(function(e){e.stopPropagation(),e.preventDefault(),i.playing?(i.pause(),t.sendLog(LogType.CLICK,"component_pause"),t.fire("video-pause")):(i.play(),t.sendLog(LogType.CLICK,"component_play"),t.fire("video-play"))}));var a=function(e){"seeking"===e.type?t.data.set("isSeeking",!0):"seeked"===e.type&&t.data.set("isSeeked",!0);var n=i.currentTime,o=i.duration,a=formatTimeDuration(o-n),r=i.elements.display.currentTime;r&&(r.innerText=a)};i.on("timeupdate",a),i.on("seeking",a),i.on("seeking",(function(){t.sendLog(LogType.SLIDE,"component_progress"),t.fire("video-seek")})),i.on("seeked",a),i.on("volumechange",(function(){i.muted?(t.sendLog(LogType.CLICK,"component_mute"),t.fire("video-muted")):(t.sendLog(LogType.CLICK,"component_sound"),t.fire("video-volume"))})),i.on("pause",(function(){t.data.set("isPause",!0)})),i.on("play",(function(){isAndroid()&&(i.muted||(i.volume=.3,i.muted=!1)),t.data.set("isPause",!1),t.data.set("isSeeking",!1),t.data.set("isSeeked",!1),t.handleVideoPlay(i),t.handleAudioPlay()})),i.on("error",(function(){t.fire("video-error",{})})),this.watch("poster",(function(e){e&&(i.poster=e)})),null===document||void 0===document||document.addEventListener("visibilitychange",(function(){document.hidden&&i.pause()})),this.sendLog(LogType.SHOW,"component"),this.sendLog(LogType.SHOW,"answer"),this.fire("video-show")},detached:function(){try{var e=this.player;e&&e.destroy(),null===document||void 0===document||document.removeEventListener("visibilitychange",(function(){}))}catch(e){console.error(e)}},handleVideoPlay:function(e){Plyr.setup(".agent-ui-video-player").forEach((function(t){try{t.media.plyr.id!==e.id&&t.media.plyr.pause()}catch(e){console.error(e)}}))},handleAudioPlay:function(){var e,t,n=Array.from((null===document||void 0===document?void 0:document.querySelectorAll("audio"))||[]);try{for(var i=__values(n),o=i.next();!o.done;o=i.next()){var a=o.value;null==a||a.pause()}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},computed:{wrapperClass:function(){var e=[];return!this.data.get("isPause")||this.data.get("isSeeking")&&this.data.get("isSeeked")||e.push("pause"),this.data.get("isSeeking")&&e.push("seeking"),e.join(" ")}},sendLog:function(e,t,n){var i;null===(i=getRoot(this))||void 0===i||i.data.get("_logger").sendLog(e,"video",{value:t,ext:_assign({component_name:"video"},n)})}});function getProps(e){var t=e.properties||{};return{src:t.src,poster:t.poster}}var mlVideo={directive:"ml-video",csr:function(e){var t=this,n=document.createElement("span");n.setAttribute("disable-audio",""),n.setAttribute("disable-copy",""),n.className="cosd-markdown-video-wrapper agent-ui-markdown-video-wrapper";var i=getProps(e),o=i.src,a=i.poster,r=new AgentUIVideo$1({data:{src:o,poster:a}});return r.on("video-show",(function(){t.fire("show",{directive:mlVideo.directive,target:r})})),r.on("video-play",(function(){t.fire("click",{directive:mlVideo.directive,target:r,action:"play"})})),r.on("video-pause",(function(){t.fire("click",{directive:mlVideo.directive,target:r,action:"pause"})})),r.on("video-muted",(function(){t.fire("click",{directive:mlVideo.directive,target:r,action:"muted"})})),r.on("video-volume",(function(){t.fire("click",{directive:mlVideo.directive,target:r,action:"volume"})})),r.on("video-seek",(function(){t.fire("click",{directive:mlVideo.directive,target:r,action:"seek"})})),r.on("video-error",(function(){t.fire("show",{directive:mlVideo.directive,target:r,action:"error"})})),r.attach(n),this.setDirectiveComponents(mlVideo.directive,r),n}},aTagRegex=/<a\s+(?:[^>]*?\s+)?href=["']([^"']*?)["'].*?>(.*?)<\/a>/gi,audioTagRegex=/<audio\s+(?:[^>]*?\s+)?(?:src=["']([^"']*?)["']|title=["']([^"']*?)["'])\s*(?:[^>]*?\s+)?(?:src=["']([^"']*?)["']|title=["']([^"']*?)["'])\s*.*?><\/audio>/gi,videoTagRegex=/<video\s+(?:[^>]*?\s+)?src=["']([^"']*?)["'].*?>([\s\S]*?)<\/video>/gi,imgTagRegex=/<img\s+(?:[^>]*?\s+)?src=["']([^"']*?)["']\s*(?:[^>]*?\s+)?.*?(?:\/>|>)/gi,normalizeContentFun=function(e){return e.replace(aTagRegex,(function(e,t,n){return"[".concat(n,"](").concat(t,")")})).replace(audioTagRegex,(function(e,t,n,i,o){var a=t||i;return'\n::ml-audio{title="'.concat(n||o,'" src="').concat(a,'"}\n')})).replace(videoTagRegex,(function(e,t){return'\n::ml-video{src="'.concat(t,'"}\n')})).replace(imgTagRegex,(function(e,t,n,i,o){var a=t||i;return"![".concat(n||o,"](").concat(a,")")}))},CacheContent=function(){function e(e,t){this.cachedContent="",this.appendContentToMarkdown=e,this.cacheEventCb=t}return e.prototype.cacheLink=function(e){var t=-1,n=["](","<img","<a"].some((function(n){return-1!==(t=e.indexOf(n))})),i=this.cachedContent+e,o=[")","/>","a>"].some((function(e){return i.includes(e)}))||aTagRegex.test(i)||imgTagRegex.test(i);return!!(n&&!o||this.cachedContent)&&(this.setTimer(),o?-1===t?(this.appendContentToMarkdown(i),this.setCachedContent("")):(this.appendContentToMarkdown(this.cachedContent+e.slice(0,t)),this.setCachedContent(e.slice(t))):this.setCachedContent(i),!0)},e.prototype.setTimer=function(){var e=this;this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout((function(){e.cachedContent&&(e.appendContentToMarkdown(e.cachedContent),e.setCachedContent(""))}),4e3)},e.prototype.destroy=function(){this.setCachedContent("",!1),this.timeoutId&&clearTimeout(this.timeoutId)},e.prototype.setCachedContent=function(e,t){void 0===t&&(t=!0);var n=this.cachedContent.length,i=e.length;this.cachedContent=e,t&&(0===n&&i>0&&this.cacheEventCb&&this.cacheEventCb("start"),n>0&&0===i&&this.cacheEventCb&&this.cacheEventCb("end"))},e}(),css_248z$b=".agent-ui-markdown .cosd-markdown .marklang,.agent-ui-markdown .cosd-markdown .marklang li,.agent-ui-markdown .cosd-markdown .marklang-paragraph,.agent-ui-markdown-container .cosd-markdown .marklang,.agent-ui-markdown-container .cosd-markdown .marklang li,.agent-ui-markdown-container .cosd-markdown .marklang-paragraph{font-weight:var(--cos-font-regular);-webkit-text-stroke:0;font-family:PingFang SC,Arial,sans-serif;font-size:var(--cos-text-body-lg-higher);line-height:var(--cos-leading-body-lg-higher)}.agent-ui-markdown .cosd-markdown .marklang .marklang-img,.agent-ui-markdown-container .cosd-markdown .marklang .marklang-img{border-radius:var(--cos-rounded-sm)}.agent-ui-markdown .cosd-markdown .marklang mark,.agent-ui-markdown-container .cosd-markdown .marklang mark{background:-webkit-gradient(linear,left top,right top,from(var(--cosd-color-border-primary-light)),to(var(--cosd-color-border-primary-light))) no-repeat bottom;background:linear-gradient(to right,var(--cosd-color-border-primary-light),var(--cosd-color-border-primary-light)) no-repeat bottom;background-size:100% 12px;color:var(--cos-color-text);padding-bottom:1px}.agent-ui-markdown .cosd-markdown .marklang mark mark,.agent-ui-markdown-container .cosd-markdown .marklang mark mark{background:none;font-weight:var(--cos-font-medium)}.agent-ui-markdown .cosd-markdown h1,.agent-ui-markdown .cosd-markdown h2,.agent-ui-markdown .cosd-markdown h3,.agent-ui-markdown-container .cosd-markdown h1,.agent-ui-markdown-container .cosd-markdown h2,.agent-ui-markdown-container .cosd-markdown h3{font-weight:var(--cos-font-medium);margin-bottom:var(--cos-space-xs);margin-top:var(--cos-space-xs)}.agent-ui-markdown .cosd-markdown h1,.agent-ui-markdown .cosd-markdown h2,.agent-ui-markdown-container .cosd-markdown h1,.agent-ui-markdown-container .cosd-markdown h2{font-size:var(--cos-text-headline);line-height:var(--cos-leading-headline)}.agent-ui-markdown .cosd-markdown h3,.agent-ui-markdown-container .cosd-markdown h3{font-size:var(--cos-text-headline-sm);line-height:var(--cos-leading-headline-sm)}.agent-ui-markdown .cosd-markdown h4,.agent-ui-markdown .cosd-markdown h5,.agent-ui-markdown .cosd-markdown h6,.agent-ui-markdown-container .cosd-markdown h4,.agent-ui-markdown-container .cosd-markdown h5,.agent-ui-markdown-container .cosd-markdown h6{font-size:var(--cos-text-subtitle);font-weight:var(--cos-font-medium)}.agent-ui-markdown-container-pc .marklang-paragraph img,.agent-ui-markdown-pc .marklang-paragraph img{max-width:320px!important}.agent-ui-markdown-container-pc .cosd-markdown-video-wrapper.agent-ui-markdown-video-wrapper,.agent-ui-markdown-pc .cosd-markdown-video-wrapper.agent-ui-markdown-video-wrapper{width:66.67%}.agent-ui-markdown-container-enable-img-placeholder .cosd-markdown .marklang .marklang-img,.agent-ui-markdown-enable-img-placeholder .cosd-markdown .marklang .marklang-img{background-color:var(--cos-color-bg-dent);min-height:100px}.agent-ui-markdown-container.no-content .cosd-markdown-content,.agent-ui-markdown.no-content .cosd-markdown-content{margin-bottom:var(--cos-space-none);margin-top:var(--cos-space-none)}@media (prefers-color-scheme:dark){.cos-android.cos-baiduapp .cosd-markdown .marklang table thead tr th,.cos-dark-android .cosd-markdown .marklang table thead tr th{background-color:#191919;color-scheme:dark}.cos-android.cos-baiduapp .cosd-markdown .marklang table tbody tr td,.cos-dark-android .cosd-markdown .marklang table tbody tr td{background-color:#222;color-scheme:dark}}",_a;styleInject(css_248z$b);var STATUS_KEY_MAP={init:"INIT",abort:"ABORT",finished:"FINISHED"},STATUS=(_a={},_a[STATUS_KEY_MAP.init]="init",_a[STATUS_KEY_MAP.abort]="abort",_a[STATUS_KEY_MAP.finished]="finished",_a),AgentUIMarkdown=san.defineComponent({template:'\n        <div class="agent-ui-markdown agent-ui-markdown-container{{\n            hasContent ? \'\' : \' no-content\'}}{{\n            _isPcComp ? \' agent-ui-markdown-container-pc\' : \'\'}}{{\n            enableImgPlaceholder ? \' agent-ui-markdown-container-enable-img-placeholder\' : \'\'}}"\n        >\n            <cosd-markdown\n                s-ref="markdown"\n                typing="{{_typing}}"\n                on-typing-finished="handleTypingFinished"\n                normalize-content="{{normalizeContent}}"\n                s-bind="{{!_useRichVideoPlayer ? {_directives: _directives} : {}}}"\n                on-click="handleClick"\n                on-show="handleShow"\n                content="{{source}}"\n            />\n        </div>\n    ',canSpeak:!0,asyncNode:!0,rendering:!1,status:STATUS.INIT,cacheContent:void 0,components:{"cosd-markdown":cosmic.Markdown},initData:function(){var e=getRoot(this),t=null==e?void 0:e.data.get("_logger"),n=!!(null==e?void 0:e.data.get("_history")),i=null==e?void 0:e.data.get("_platform"),o=(null==e?void 0:e.data.get("_markdownOptions"))||{},a=o.typingMode,r=o.enableCacheLink,s=o.enableImgPlaceholder,c=(null==e?void 0:e.data.get("_useRichVideoPlayer"))||!1;return{content:"",typing:void 0,_typing:void 0,isAppend:void 0,source:"",hasContent:!1,normalizeContent:normalizeContentFun,_directives:{"ml-video":mlVideo.csr},_history:n,_logger:t,_isPcComp:"pc"===i,_useRichVideoPlayer:c,_typingMode:a,enableCacheLink:r||!1,enableImgPlaceholder:s||!1}},parseTyping:function(){var e=this.data.get("typing");if(!e)return e;try{return JSON.parse(e)}catch(t){return e}},appendContentToMarkdown:function(e){this.ref("markdown").appendContent(e),this.data.get("_typing")||this.setRenderingFinished()},attached:function(){var e=this;this.dispatch("UI:ADD_COMPONENT",this);var t=this.data.get("content"),n=this.parseTyping(),i=this.data.get("isAppend");i=!0===i||"true"===i;var o=this.data.get("_history"),a=this.data.get("_typingMode");if(o)this.data.set("_typing",void 0);else if(i)if(n){var r=30;(null==n?void 0:n.speed)&&(r="number"==typeof(null==n?void 0:n.speed)?null==n?void 0:n.speed:parseInt(null==n?void 0:n.speed,10)),this.data.set("_typing",{cursor:!0===(null==n?void 0:n.cursor)||"true"===(null==n?void 0:n.cursor),speed:r,mode:"all"===(null==n?void 0:n.mode)?"all":"word"})}else this.data.set("_typing",{cursor:!0,speed:30,mode:"all"===a?"all":"word"});var s=this.ref("markdown");i?""!==t.trim()&&(this.rendering=!0,this.data.set("hasContent",!0),this.nextTick((function(){e.appendContentToMarkdown(t)}))):""!==t.trim()&&(this.rendering=!0,this.nextTick((function(){e.data.set("source",t.trim()),e.data.set("hasContent",!0),e.setRenderingFinished()}))),this.watchProps(s,i,o),this.cacheContent=new CacheContent(this.appendContentToMarkdown.bind(this),(function(t){e.data.get("enableCacheLink")&&e.fire("markdown-cache",{action:t})}))},watchProps:function(e,t,n){var i=this;this.watch("content",(function(e,o){var a,r=o.oldValue,s=o.newValue;if(i.status!==STATUS.FINISHED||n){if(i.status===STATUS.ABORT)return void i.setRenderingFinished();if(t)if(r=r||"",(s=s||"").length>=r.length){i.rendering=!0,i.data.set("hasContent",!0);var c=s.slice(r.length);i.data.get("enableCacheLink")&&(null===(a=i.cacheContent)||void 0===a?void 0:a.cacheLink(c))?i.setRenderingFinished():i.appendContentToMarkdown(c)}else i.setRenderingFinished();else"string"==typeof s&&(i.rendering=!0,i.data.set("source",s.trim()),i.data.set("hasContent",""!==s.trim()),i.setRenderingFinished())}}))},setStatus:function(e){var t=this.ref("markdown");e===STATUS.ABORT?(this.status=STATUS.ABORT,t.stop(),this.setRenderingFinished()):e===STATUS.FINISHED&&(this.status=STATUS.FINISHED,!1===this.rendering&&this.data.get("_typing")&&t.stop())},setRenderingFinished:function(){this.rendering=!1,this.dispatch("UI:RENDER_FINISHED",this)},handleTypingFinished:function(){var e=this.ref("markdown");this.status===STATUS.FINISHED&&e.stop(),this.setRenderingFinished()},handleShow:function(e){var t=e.directive,n=e.action,i=e.target;switch(t){case"ml-audio":this.sendLog(LogType.SHOW,"component",{component_name:"music"}),this.sendLog(LogType.SHOW,"answer",{component_name:"music"});break;case"ml-video":this.sendLog(LogType.SHOW,"component",{component_name:"video"}),this.sendLog(LogType.SHOW,"answer",{component_name:"video"}),"error"===n&&this.fire("video-load-error",{src:i.src})}},handleClick:function(e){var t=e.event,n=e.action,i=e.directive,o=e.target,a=e.data;if(t){var r=t.target;switch(r.tagName.toLowerCase()){case"img":r.src&&(this.fire("preview-image",{src:r.src}),this.sendLog("image","component"));break;case"a":t.preventDefault();var s=r.getAttribute("href");s&&getLinkApis(this,"markdown",{url:s})}}switch(i){case"ml-audio":"play"===n?(this.sendLog(LogType.CLICK,"component_play",{component_name:"music"}),this.stopOtherAudio(o.audio)):"pause"===n&&this.sendLog(LogType.CLICK,"component_pause",{component_name:"music"});break;case"ml-video":var c={component_name:"video"};"play"===n?this.sendLog(LogType.CLICK,"component_play",c):"pause"===n?this.sendLog(LogType.CLICK,"component_pause",c):"muted"===n?this.sendLog(LogType.CLICK,"component_mute",c):"volume"===n?this.sendLog(LogType.CLICK,"component_sound",c):"seek"===n&&this.sendLog(LogType.SLIDE,"component_progress",c);break;case"ml-citation-text":"_drawer"===(null==a?void 0:a.target)&&this.fire("open-drawer",{data:a})}},getSpeakText:function(){return this.ref("markdown").el.innerText},stopOtherAudio:function(e){for(var t,n=document.querySelectorAll("audio, video"),i=0;i<n.length;i++)n[i]!==e&&(null===(t=n[i])||void 0===t||t.pause())},sendLog:function(e,t,n){var i;null===(i=this.data.get("_logger"))||void 0===i||i.sendLog(e,"markdown",{value:t,ext:_assign({component_name:"markdown"},n)})},detached:function(){var e;this.dispatch("UI:REMOVE_COMPONENT",this),null===(e=this.cacheContent)||void 0===e||e.destroy()}});function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var lottie$1={exports:{}};(function(module,exports){var factory;"undefined"!=typeof navigator&&(factory=function factory(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(e){_useWebWorker=!!e},getWebWorker=function(){return _useWebWorker},setLocationHref=function(e){locationHref=e},getLocationHref=function(){return locationHref};function createTag(e){return document.createElement(e)}function extendPrototype(e,t){var n,i,o=e.length;for(n=0;n<o;n+=1)for(var a in i=e[n].prototype)Object.prototype.hasOwnProperty.call(i,a)&&(t.prototype[a]=i[a])}function getDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)}function createProxyFunction(e){function t(){}return t.prototype=e,t}var audioControllerFactory=function(){function e(e){this.audios=[],this.audioFactory=e,this._volume=1,this._isMuted=!1}return e.prototype={addAudio:function(e){this.audios.push(e)},pause:function(){var e,t=this.audios.length;for(e=0;e<t;e+=1)this.audios[e].pause()},resume:function(){var e,t=this.audios.length;for(e=0;e<t;e+=1)this.audios[e].resume()},setRate:function(e){var t,n=this.audios.length;for(t=0;t<n;t+=1)this.audios[t].setRate(e)},createAudio:function(e){return this.audioFactory?this.audioFactory(e):window.Howl?new window.Howl({src:[e]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(e){this.audioFactory=e},setVolume:function(e){this._volume=e,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var e,t=this.audios.length;for(e=0;e<t;e+=1)this.audios[e].volume(this._volume*(this._isMuted?0:1))}},function(){return new e}}(),createTypedArray=function(){function e(e,t){var n,i=0,o=[];switch(e){case"int16":case"uint8c":n=1;break;default:n=1.1}for(i=0;i<t;i+=1)o.push(n);return o}return"function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?function(t,n){return"float32"===t?new Float32Array(n):"int16"===t?new Int16Array(n):"uint8c"===t?new Uint8ClampedArray(n):e(t,n)}:e}();function createSizedArray(e){return Array.apply(null,{length:e})}function _typeof$6(e){return _typeof$6="function"==typeof Symbol&&"symbol"==cosmic._typeof(Symbol.iterator)?function(e){return cosmic._typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":cosmic._typeof(e)},_typeof$6(e)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};!function(){var e,t=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],n=t.length;for(e=0;e<n;e+=1)BMMath[t[e]]=Math[t[e]]}(),BMMath.random=Math.random,BMMath.abs=function(e){if("object"===_typeof$6(e)&&e.length){var t,n=createSizedArray(e.length),i=e.length;for(t=0;t<i;t+=1)n[t]=Math.abs(e[t]);return n}return Math.abs(e)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(e){e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.display="block",e.style.transformOrigin="0 0",e.style.webkitTransformOrigin="0 0",e.style.backfaceVisibility="visible",e.style.webkitBackfaceVisibility="visible",e.style.transformStyle="preserve-3d",e.style.webkitTransformStyle="preserve-3d",e.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(e,t,n,i){this.type=e,this.currentTime=t,this.totalTime=n,this.direction=i<0?-1:1}function BMCompleteEvent(e,t){this.type=e,this.direction=t<0?-1:1}function BMCompleteLoopEvent(e,t,n,i){this.type=e,this.currentLoop=n,this.totalLoops=t,this.direction=i<0?-1:1}function BMSegmentStartEvent(e,t,n){this.type=e,this.firstFrame=t,this.totalFrames=n}function BMDestroyEvent(e,t){this.type=e,this.target=t}function BMRenderFrameErrorEvent(e,t){this.type="renderFrameError",this.nativeError=e,this.currentTime=t}function BMConfigErrorEvent(e){this.type="configError",this.nativeError=e}var createElementID=(_count=0,function(){return idPrefix$1+"__lottie_element_"+(_count+=1)}),_count;function HSVtoRGB(e,t,n){var i,o,a,r,s,c,l,d;switch(c=n*(1-t),l=n*(1-(s=6*e-(r=Math.floor(6*e)))*t),d=n*(1-(1-s)*t),r%6){case 0:i=n,o=d,a=c;break;case 1:i=l,o=n,a=c;break;case 2:i=c,o=n,a=d;break;case 3:i=c,o=l,a=n;break;case 4:i=d,o=c,a=n;break;case 5:i=n,o=c,a=l}return[i,o,a]}function RGBtoHSV(e,t,n){var i,o=Math.max(e,t,n),a=Math.min(e,t,n),r=o-a,s=0===o?0:r/o,c=o/255;switch(o){case a:i=0;break;case e:i=t-n+r*(t<n?6:0),i/=6*r;break;case t:i=n-e+2*r,i/=6*r;break;case n:i=e-t+4*r,i/=6*r}return[i,s,c]}function addSaturationToRGB(e,t){var n=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return n[1]+=t,n[1]>1?n[1]=1:n[1]<=0&&(n[1]=0),HSVtoRGB(n[0],n[1],n[2])}function addBrightnessToRGB(e,t){var n=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return n[2]+=t,n[2]>1?n[2]=1:n[2]<0&&(n[2]=0),HSVtoRGB(n[0],n[1],n[2])}function addHueToRGB(e,t){var n=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return n[0]+=t/360,n[0]>1?n[0]-=1:n[0]<0&&(n[0]+=1),HSVtoRGB(n[0],n[1],n[2])}var rgbToHex=function(){var e,t,n=[];for(e=0;e<256;e+=1)t=e.toString(16),n[e]=1===t.length?"0"+t:t;return function(e,t,i){return e<0&&(e=0),t<0&&(t=0),i<0&&(i=0),"#"+n[e]+n[t]+n[i]}}(),setSubframeEnabled=function(e){subframeEnabled=!!e},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(e){expressionsPlugin=e},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(e){expressionsInterfaces=e},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(e){defaultCurveSegments=e},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(e){idPrefix$1=e};function createNS(e){return document.createElementNS(svgNS,e)}function _typeof$5(e){return _typeof$5="function"==typeof Symbol&&"symbol"==cosmic._typeof(Symbol.iterator)?function(e){return cosmic._typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":cosmic._typeof(e)},_typeof$5(e)}var dataManager=function(){var e,t,n=1,i=[],o={onmessage:function(){},postMessage:function(t){e({data:t})}},a={postMessage:function(e){o.onmessage({data:e})}};function r(){t||(t=function(t){if(window.Worker&&window.Blob&&getWebWorker()){var n=new Blob(["var _workerSelf = self; self.onmessage = ",t.toString()],{type:"text/javascript"}),i=URL.createObjectURL(n);return new Worker(i)}return e=t,o}((function(e){if(a.dataManager||(a.dataManager=function(){function e(o,a){var r,s,c,l,d,h,u=o.length;for(s=0;s<u;s+=1)if("ks"in(r=o[s])&&!r.completed){if(r.completed=!0,r.hasMask){var m=r.masksProperties;for(l=m.length,c=0;c<l;c+=1)if(m[c].pt.k.i)i(m[c].pt.k);else for(h=m[c].pt.k.length,d=0;d<h;d+=1)m[c].pt.k[d].s&&i(m[c].pt.k[d].s[0]),m[c].pt.k[d].e&&i(m[c].pt.k[d].e[0])}0===r.ty?(r.layers=t(r.refId,a),e(r.layers,a)):4===r.ty?n(r.shapes):5===r.ty&&p(r)}}function t(e,t){var n=function(e,t){for(var n=0,i=t.length;n<i;){if(t[n].id===e)return t[n];n+=1}return null}(e,t);return n?n.layers.__used?JSON.parse(JSON.stringify(n.layers)):(n.layers.__used=!0,n.layers):null}function n(e){var t,o,a;for(t=e.length-1;t>=0;t-=1)if("sh"===e[t].ty)if(e[t].ks.k.i)i(e[t].ks.k);else for(a=e[t].ks.k.length,o=0;o<a;o+=1)e[t].ks.k[o].s&&i(e[t].ks.k[o].s[0]),e[t].ks.k[o].e&&i(e[t].ks.k[o].e[0]);else"gr"===e[t].ty&&n(e[t].it)}function i(e){var t,n=e.i.length;for(t=0;t<n;t+=1)e.i[t][0]+=e.v[t][0],e.i[t][1]+=e.v[t][1],e.o[t][0]+=e.v[t][0],e.o[t][1]+=e.v[t][1]}function o(e,t){var n=t?t.split("."):[100,100,100];return e[0]>n[0]||!(n[0]>e[0])&&(e[1]>n[1]||!(n[1]>e[1])&&(e[2]>n[2]||!(n[2]>e[2])&&null))}var a,r=function(){var e=[4,4,14];function t(e){var t,n,i,o=e.length;for(t=0;t<o;t+=1)5===e[t].ty&&(void 0,i=(n=e[t]).t.d,n.t.d={k:[{s:i,t:0}]})}return function(n){if(o(e,n.v)&&(t(n.layers),n.assets)){var i,a=n.assets.length;for(i=0;i<a;i+=1)n.assets[i].layers&&t(n.assets[i].layers)}}}(),s=(a=[4,7,99],function(e){if(e.chars&&!o(a,e.v)){var t,i=e.chars.length;for(t=0;t<i;t+=1){var r=e.chars[t];r.data&&r.data.shapes&&(n(r.data.shapes),r.data.ip=0,r.data.op=99999,r.data.st=0,r.data.sr=1,r.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},e.chars[t].t||(r.data.shapes.push({ty:"no"}),r.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}),c=function(){var e=[5,7,15];function t(e){var t,n,i=e.length;for(t=0;t<i;t+=1)5===e[t].ty&&(n=void 0,"number"==typeof(n=e[t].t.p).a&&(n.a={a:0,k:n.a}),"number"==typeof n.p&&(n.p={a:0,k:n.p}),"number"==typeof n.r&&(n.r={a:0,k:n.r}))}return function(n){if(o(e,n.v)&&(t(n.layers),n.assets)){var i,a=n.assets.length;for(i=0;i<a;i+=1)n.assets[i].layers&&t(n.assets[i].layers)}}}(),l=function(){var e=[4,1,9];function t(e){var n,i,o,a=e.length;for(n=0;n<a;n+=1)if("gr"===e[n].ty)t(e[n].it);else if("fl"===e[n].ty||"st"===e[n].ty)if(e[n].c.k&&e[n].c.k[0].i)for(o=e[n].c.k.length,i=0;i<o;i+=1)e[n].c.k[i].s&&(e[n].c.k[i].s[0]/=255,e[n].c.k[i].s[1]/=255,e[n].c.k[i].s[2]/=255,e[n].c.k[i].s[3]/=255),e[n].c.k[i].e&&(e[n].c.k[i].e[0]/=255,e[n].c.k[i].e[1]/=255,e[n].c.k[i].e[2]/=255,e[n].c.k[i].e[3]/=255);else e[n].c.k[0]/=255,e[n].c.k[1]/=255,e[n].c.k[2]/=255,e[n].c.k[3]/=255}function n(e){var n,i=e.length;for(n=0;n<i;n+=1)4===e[n].ty&&t(e[n].shapes)}return function(t){if(o(e,t.v)&&(n(t.layers),t.assets)){var i,a=t.assets.length;for(i=0;i<a;i+=1)t.assets[i].layers&&n(t.assets[i].layers)}}}(),d=function(){var e=[4,4,18];function t(e){var n,i,o;for(n=e.length-1;n>=0;n-=1)if("sh"===e[n].ty)if(e[n].ks.k.i)e[n].ks.k.c=e[n].closed;else for(o=e[n].ks.k.length,i=0;i<o;i+=1)e[n].ks.k[i].s&&(e[n].ks.k[i].s[0].c=e[n].closed),e[n].ks.k[i].e&&(e[n].ks.k[i].e[0].c=e[n].closed);else"gr"===e[n].ty&&t(e[n].it)}function n(e){var n,i,o,a,r,s,c=e.length;for(i=0;i<c;i+=1){if((n=e[i]).hasMask){var l=n.masksProperties;for(a=l.length,o=0;o<a;o+=1)if(l[o].pt.k.i)l[o].pt.k.c=l[o].cl;else for(s=l[o].pt.k.length,r=0;r<s;r+=1)l[o].pt.k[r].s&&(l[o].pt.k[r].s[0].c=l[o].cl),l[o].pt.k[r].e&&(l[o].pt.k[r].e[0].c=l[o].cl)}4===n.ty&&t(n.shapes)}}return function(t){if(o(e,t.v)&&(n(t.layers),t.assets)){var i,a=t.assets.length;for(i=0;i<a;i+=1)t.assets[i].layers&&n(t.assets[i].layers)}}}();function p(e){0===e.t.a.length&&e.t.p}var h={completeData:function(n){n.__complete||(l(n),r(n),s(n),c(n),d(n),e(n.layers,n.assets),function(n,i){if(n){var o=0,a=n.length;for(o=0;o<a;o+=1)1===n[o].t&&(n[o].data.layers=t(n[o].data.refId,i),e(n[o].data.layers,i))}}(n.chars,n.assets),n.__complete=!0)}};return h.checkColors=l,h.checkChars=s,h.checkPathProperties=c,h.checkShapes=d,h.completeLayers=e,h}()),a.assetLoader||(a.assetLoader=function(){function e(e){var t=e.getResponseHeader("content-type");return t&&"json"===e.responseType&&-1!==t.indexOf("json")||e.response&&"object"===_typeof$5(e.response)?e.response:e.response&&"string"==typeof e.response?JSON.parse(e.response):e.responseText?JSON.parse(e.responseText):null}return{load:function(t,n,i,o){var a,r=new XMLHttpRequest;try{r.responseType="json"}catch(e){}r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status)a=e(r),i(a);else try{a=e(r),i(a)}catch(e){o&&o(e)}};try{r.open(["G","E","T"].join(""),t,!0)}catch(e){r.open(["G","E","T"].join(""),n+"/"+t,!0)}r.send()}}}()),"loadAnimation"===e.data.type)a.assetLoader.load(e.data.path,e.data.fullPath,(function(t){a.dataManager.completeData(t),a.postMessage({id:e.data.id,payload:t,status:"success"})}),(function(){a.postMessage({id:e.data.id,status:"error"})}));else if("complete"===e.data.type){var t=e.data.animation;a.dataManager.completeData(t),a.postMessage({id:e.data.id,payload:t,status:"success"})}else"loadData"===e.data.type&&a.assetLoader.load(e.data.path,e.data.fullPath,(function(t){a.postMessage({id:e.data.id,payload:t,status:"success"})}),(function(){a.postMessage({id:e.data.id,status:"error"})}))})),t.onmessage=function(e){var t=e.data,n=t.id,o=i[n];i[n]=null,"success"===t.status?o.onComplete(t.payload):o.onError&&o.onError()})}function s(e,t){var o="processId_"+(n+=1);return i[o]={onComplete:e,onError:t},o}return{loadAnimation:function(e,n,i){r();var o=s(n,i);t.postMessage({type:"loadAnimation",path:e,fullPath:window.location.origin+window.location.pathname,id:o})},loadData:function(e,n,i){r();var o=s(n,i);t.postMessage({type:"loadData",path:e,fullPath:window.location.origin+window.location.pathname,id:o})},completeAnimation:function(e,n,i){r();var o=s(n,i);t.postMessage({type:"complete",animation:e,id:o})}}}(),ImagePreloader=function(){var e=function(){var e=createTag("canvas");e.width=1,e.height=1;var t=e.getContext("2d");return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),e}();function t(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function n(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function i(e,t,n){var i="";if(e.e)i=e.p;else if(t){var o=e.p;-1!==o.indexOf("images/")&&(o=o.split("/")[1]),i=t+o}else i=n,i+=e.u?e.u:"",i+=e.p;return i}function o(e){var t=0,n=setInterval(function(){(e.getBBox().width||t>500)&&(this._imageLoaded(),clearInterval(n)),t+=1}.bind(this),50)}function a(e){var t={assetData:e},n=i(e,this.assetsPath,this.path);return dataManager.loadData(n,function(e){t.img=e,this._footageLoaded()}.bind(this),function(){t.img={},this._footageLoaded()}.bind(this)),t}function r(){this._imageLoaded=t.bind(this),this._footageLoaded=n.bind(this),this.testImageLoaded=o.bind(this),this.createFootageData=a.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return r.prototype={loadAssets:function(e,t){var n;this.imagesLoadedCb=t;var i=e.length;for(n=0;n<i;n+=1)e[n].layers||(e[n].t&&"seq"!==e[n].t?3===e[n].t&&(this.totalFootages+=1,this.images.push(this.createFootageData(e[n]))):(this.totalImages+=1,this.images.push(this._createImageData(e[n]))))},setAssetsPath:function(e){this.assetsPath=e||""},setPath:function(e){this.path=e||""},loadedImages:function(){return this.totalImages===this.loadedAssets},loadedFootages:function(){return this.totalFootages===this.loadedFootagesCount},destroy:function(){this.imagesLoadedCb=null,this.images.length=0},getAsset:function(e){for(var t=0,n=this.images.length;t<n;){if(this.images[t].assetData===e)return this.images[t].img;t+=1}return null},createImgData:function(t){var n=i(t,this.assetsPath,this.path),o=createTag("img");o.crossOrigin="anonymous",o.addEventListener("load",this._imageLoaded,!1),o.addEventListener("error",function(){a.img=e,this._imageLoaded()}.bind(this),!1),o.src=n;var a={img:o,assetData:t};return a},createImageData:function(t){var n=i(t,this.assetsPath,this.path),o=createNS("image");isSafari?this.testImageLoaded(o):o.addEventListener("load",this._imageLoaded,!1),o.addEventListener("error",function(){a.img=e,this._imageLoaded()}.bind(this),!1),o.setAttributeNS("http://www.w3.org/1999/xlink","href",n),this._elementHelper.append?this._elementHelper.append(o):this._elementHelper.appendChild(o);var a={img:o,assetData:t};return a},imageLoaded:t,footageLoaded:n,setCacheType:function(e,t){"svg"===e?(this._elementHelper=t,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}},r}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(e,t){if(this._cbs[e])for(var n=this._cbs[e],i=0;i<n.length;i+=1)n[i](t)},addEventListener:function(e,t){return this._cbs[e]||(this._cbs[e]=[]),this._cbs[e].push(t),function(){this.removeEventListener(e,t)}.bind(this)},removeEventListener:function(e,t){if(t){if(this._cbs[e]){for(var n=0,i=this._cbs[e].length;n<i;)this._cbs[e][n]===t&&(this._cbs[e].splice(n,1),n-=1,i-=1),n+=1;this._cbs[e].length||(this._cbs[e]=null)}}else this._cbs[e]=null}};var markerParser=function(){function e(e){for(var t,n=e.split("\r\n"),i={},o=0,a=0;a<n.length;a+=1)2===(t=n[a].split(":")).length&&(i[t[0]]=t[1].trim(),o+=1);if(0===o)throw new Error;return i}return function(t){for(var n=[],i=0;i<t.length;i+=1){var o=t[i],a={time:o.tm,duration:o.dr};try{a.payload=JSON.parse(t[i].cm)}catch(n){try{a.payload=e(t[i].cm)}catch(e){a.payload={name:t[i].cm}}}n.push(a)}return n}}(),ProjectInterface=function(){function e(e){this.compositions.push(e)}return function(){function t(e){for(var t=0,n=this.compositions.length;t<n;){if(this.compositions[t].data&&this.compositions[t].data.nm===e)return this.compositions[t].prepareFrame&&this.compositions[t].data.xt&&this.compositions[t].prepareFrame(this.currentFrame),this.compositions[t].compInterface;t+=1}return null}return t.compositions=[],t.currentFrame=0,t.registerComposition=e,t}}(),renderers={},registerRenderer=function(e,t){renderers[e]=t};function getRenderer(e){return renderers[e]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var e in renderers)if(renderers[e])return e;return""}function _typeof$4(e){return _typeof$4="function"==typeof Symbol&&"symbol"==cosmic._typeof(Symbol.iterator)?function(e){return cosmic._typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":cosmic._typeof(e)},_typeof$4(e)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(e){(e.wrapper||e.container)&&(this.wrapper=e.wrapper||e.container);var t="svg";e.animType?t=e.animType:e.renderer&&(t=e.renderer);var n=getRenderer(t);this.renderer=new n(this,e.rendererSettings),this.imagePreloader.setCacheType(t,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=t,""===e.loop||null===e.loop||void 0===e.loop||!0===e.loop?this.loop=!0:!1===e.loop?this.loop=!1:this.loop=parseInt(e.loop,10),this.autoplay=!("autoplay"in e)||e.autoplay,this.name=e.name?e.name:"",this.autoloadSegments=!Object.prototype.hasOwnProperty.call(e,"autoloadSegments")||e.autoloadSegments,this.assetsPath=e.assetsPath,this.initialSegment=e.initialSegment,e.audioFactory&&this.audioController.setAudioFactory(e.audioFactory),e.animationData?this.setupAnimation(e.animationData):e.path&&(-1!==e.path.lastIndexOf("\\")?this.path=e.path.substr(0,e.path.lastIndexOf("\\")+1):this.path=e.path.substr(0,e.path.lastIndexOf("/")+1),this.fileName=e.path.substr(e.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(e.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(e){dataManager.completeAnimation(e,this.configAnimation)},AnimationItem.prototype.setData=function(e,t){t&&"object"!==_typeof$4(t)&&(t=JSON.parse(t));var n={wrapper:e,animationData:t},i=e.attributes;n.path=i.getNamedItem("data-animation-path")?i.getNamedItem("data-animation-path").value:i.getNamedItem("data-bm-path")?i.getNamedItem("data-bm-path").value:i.getNamedItem("bm-path")?i.getNamedItem("bm-path").value:"",n.animType=i.getNamedItem("data-anim-type")?i.getNamedItem("data-anim-type").value:i.getNamedItem("data-bm-type")?i.getNamedItem("data-bm-type").value:i.getNamedItem("bm-type")?i.getNamedItem("bm-type").value:i.getNamedItem("data-bm-renderer")?i.getNamedItem("data-bm-renderer").value:i.getNamedItem("bm-renderer")?i.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var o=i.getNamedItem("data-anim-loop")?i.getNamedItem("data-anim-loop").value:i.getNamedItem("data-bm-loop")?i.getNamedItem("data-bm-loop").value:i.getNamedItem("bm-loop")?i.getNamedItem("bm-loop").value:"";"false"===o?n.loop=!1:"true"===o?n.loop=!0:""!==o&&(n.loop=parseInt(o,10));var a=i.getNamedItem("data-anim-autoplay")?i.getNamedItem("data-anim-autoplay").value:i.getNamedItem("data-bm-autoplay")?i.getNamedItem("data-bm-autoplay").value:!i.getNamedItem("bm-autoplay")||i.getNamedItem("bm-autoplay").value;n.autoplay="false"!==a,n.name=i.getNamedItem("data-name")?i.getNamedItem("data-name").value:i.getNamedItem("data-bm-name")?i.getNamedItem("data-bm-name").value:i.getNamedItem("bm-name")?i.getNamedItem("bm-name").value:"","false"===(i.getNamedItem("data-anim-prerender")?i.getNamedItem("data-anim-prerender").value:i.getNamedItem("data-bm-prerender")?i.getNamedItem("data-bm-prerender").value:i.getNamedItem("bm-prerender")?i.getNamedItem("bm-prerender").value:"")&&(n.prerender=!1),n.path?this.setParams(n):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(e){e.op>this.animationData.op&&(this.animationData.op=e.op,this.totalFrames=Math.floor(e.op-this.animationData.ip));var t,n,i=this.animationData.layers,o=i.length,a=e.layers,r=a.length;for(n=0;n<r;n+=1)for(t=0;t<o;){if(i[t].id===a[n].id){i[t]=a[n];break}t+=1}if((e.chars||e.fonts)&&(this.renderer.globalData.fontManager.addChars(e.chars),this.renderer.globalData.fontManager.addFonts(e.fonts,this.renderer.globalData.defs)),e.assets)for(o=e.assets.length,t=0;t<o;t+=1)this.animationData.assets.push(e.assets[t]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(e){this.animationData=e;var t=getExpressionsPlugin();t&&t.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var e=this.animationData.segments;if(!e||0===e.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var t=e.shift();this.timeCompleted=t.time*this.frameRate;var n=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(n,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(e){if(this.renderer)try{this.animationData=e,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(e),e.assets||(e.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(e.assets),this.markers=markerParser(e.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(e){this.triggerConfigError(e)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||"canvas"!==this.renderer.rendererType)&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var e=getExpressionsPlugin();e&&e.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(e,t){var n="number"==typeof e?e:void 0,i="number"==typeof t?t:void 0;this.renderer.updateContainerSize(n,i)},AnimationItem.prototype.setSubframe=function(e){this.isSubframeEnabled=!!e},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!1!==this.isLoaded&&this.renderer)try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(e){this.triggerRenderFrameError(e)}},AnimationItem.prototype.play=function(e){e&&this.name!==e||!0===this.isPaused&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(e){e&&this.name!==e||!1===this.isPaused&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(e){e&&this.name!==e||(!0===this.isPaused?this.play():this.pause())},AnimationItem.prototype.stop=function(e){e&&this.name!==e||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(e){for(var t,n=0;n<this.markers.length;n+=1)if((t=this.markers[n]).payload&&t.payload.name===e)return t;return null},AnimationItem.prototype.goToAndStop=function(e,t,n){if(!n||this.name===n){var i=Number(e);if(isNaN(i)){var o=this.getMarkerData(e);o&&this.goToAndStop(o.time,!0)}else t?this.setCurrentRawFrameValue(e):this.setCurrentRawFrameValue(e*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(e,t,n){if(!n||this.name===n){var i=Number(e);if(isNaN(i)){var o=this.getMarkerData(e);o&&(o.duration?this.playSegments([o.time,o.time+o.duration],!0):this.goToAndStop(o.time,!0))}else this.goToAndStop(i,t,n);this.play()}},AnimationItem.prototype.advanceTime=function(e){if(!0!==this.isPaused&&!1!==this.isLoaded){var t=this.currentRawFrame+e*this.frameModifier,n=!1;t>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?t>=this.totalFrames?(this.playCount+=1,this.checkSegments(t%this.totalFrames)||(this.setCurrentRawFrameValue(t%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(t):this.checkSegments(t>this.totalFrames?t%this.totalFrames:0)||(n=!0,t=this.totalFrames-1):t<0?this.checkSegments(t%this.totalFrames)||(!this.loop||this.playCount--<=0&&!0!==this.loop?(n=!0,t=0):(this.setCurrentRawFrameValue(this.totalFrames+t%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(t),n&&(this.setCurrentRawFrameValue(t),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(e,t){this.playCount=0,e[1]<e[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=e[0]-e[1],this.timeCompleted=this.totalFrames,this.firstFrame=e[1],this.setCurrentRawFrameValue(this.totalFrames-.001-t)):e[1]>e[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=e[1]-e[0],this.timeCompleted=this.totalFrames,this.firstFrame=e[0],this.setCurrentRawFrameValue(.001+t)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(e,t){var n=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<e?n=e:this.currentRawFrame+this.firstFrame>t&&(n=t-e)),this.firstFrame=e,this.totalFrames=t-e,this.timeCompleted=this.totalFrames,-1!==n&&this.goToAndStop(n,!0)},AnimationItem.prototype.playSegments=function(e,t){if(t&&(this.segments.length=0),"object"===_typeof$4(e[0])){var n,i=e.length;for(n=0;n<i;n+=1)this.segments.push(e[n])}else this.segments.push(e);this.segments.length&&t&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(e){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),e&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(e){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),e),!0)},AnimationItem.prototype.destroy=function(e){e&&this.name!==e||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(e){this.currentRawFrame=e,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(e){this.playSpeed=e,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(e){this.playDirection=e<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(e){this.loop=e},AnimationItem.prototype.setVolume=function(e,t){t&&this.name!==t||this.audioController.setVolume(e)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(e){e&&this.name!==e||this.audioController.mute()},AnimationItem.prototype.unmute=function(e){e&&this.name!==e||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(e){var t="";if(e.e)t=e.p;else if(this.assetsPath){var n=e.p;-1!==n.indexOf("images/")&&(n=n.split("/")[1]),t=this.assetsPath+n}else t=this.path,t+=e.u?e.u:"",t+=e.p;return t},AnimationItem.prototype.getAssetData=function(e){for(var t=0,n=this.assets.length;t<n;){if(e===this.assets[t].id)return this.assets[t];t+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(e){return e?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(e,t,n){try{this.renderer.getElementByPath(e).updateDocumentData(t,n)}catch(e){}},AnimationItem.prototype.trigger=function(e){if(this._cbs&&this._cbs[e])switch(e){case"enterFrame":this.triggerEvent(e,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(e,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(e,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(e,new BMCompleteEvent(e,this.frameMult));break;case"segmentStart":this.triggerEvent(e,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(e,new BMDestroyEvent(e,this));break;default:this.triggerEvent(e)}"enterFrame"===e&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===e&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult)),"complete"===e&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(e,this.frameMult)),"segmentStart"===e&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames)),"destroy"===e&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(e,this))},AnimationItem.prototype.triggerRenderFrameError=function(e){var t=new BMRenderFrameErrorEvent(e,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)},AnimationItem.prototype.triggerConfigError=function(e){var t=new BMConfigErrorEvent(e,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)};var animationManager=function(){var e={},t=[],n=0,i=0,o=0,a=!0,r=!1;function s(e){for(var n=0,o=e.target;n<i;)t[n].animation===o&&(t.splice(n,1),n-=1,i-=1,o.isPaused||d()),n+=1}function c(e,n){if(!e)return null;for(var o=0;o<i;){if(t[o].elem===e&&null!==t[o].elem)return t[o].animation;o+=1}var a=new AnimationItem;return p(a,e),a.setData(e,n),a}function l(){o+=1,m()}function d(){o-=1}function p(e,n){e.addEventListener("destroy",s),e.addEventListener("_active",l),e.addEventListener("_idle",d),t.push({elem:n,animation:e}),i+=1}function h(e){var s,c=e-n;for(s=0;s<i;s+=1)t[s].animation.advanceTime(c);n=e,o&&!r?window.requestAnimationFrame(h):a=!0}function u(e){n=e,window.requestAnimationFrame(h)}function m(){!r&&o&&a&&(window.requestAnimationFrame(u),a=!1)}return e.registerAnimation=c,e.loadAnimation=function(e){var t=new AnimationItem;return p(t,null),t.setParams(e),t},e.setSpeed=function(e,n){var o;for(o=0;o<i;o+=1)t[o].animation.setSpeed(e,n)},e.setDirection=function(e,n){var o;for(o=0;o<i;o+=1)t[o].animation.setDirection(e,n)},e.play=function(e){var n;for(n=0;n<i;n+=1)t[n].animation.play(e)},e.pause=function(e){var n;for(n=0;n<i;n+=1)t[n].animation.pause(e)},e.stop=function(e){var n;for(n=0;n<i;n+=1)t[n].animation.stop(e)},e.togglePause=function(e){var n;for(n=0;n<i;n+=1)t[n].animation.togglePause(e)},e.searchAnimations=function(e,t,n){var i,o=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),a=o.length;for(i=0;i<a;i+=1)n&&o[i].setAttribute("data-bm-type",n),c(o[i],e);if(t&&0===a){n||(n="svg");var r=document.getElementsByTagName("body")[0];r.innerText="";var s=createTag("div");s.style.width="100%",s.style.height="100%",s.setAttribute("data-bm-type",n),r.appendChild(s),c(s,e)}},e.resize=function(){var e;for(e=0;e<i;e+=1)t[e].animation.resize()},e.goToAndStop=function(e,n,o){var a;for(a=0;a<i;a+=1)t[a].animation.goToAndStop(e,n,o)},e.destroy=function(e){var n;for(n=i-1;n>=0;n-=1)t[n].animation.destroy(e)},e.freeze=function(){r=!0},e.unfreeze=function(){r=!1,m()},e.setVolume=function(e,n){var o;for(o=0;o<i;o+=1)t[o].animation.setVolume(e,n)},e.mute=function(e){var n;for(n=0;n<i;n+=1)t[n].animation.mute(e)},e.unmute=function(e){var n;for(n=0;n<i;n+=1)t[n].animation.unmute(e)},e.getRegisteredAnimations=function(){var e,n=t.length,i=[];for(e=0;e<n;e+=1)i.push(t[e].animation);return i},e}(),BezierFactory=function(){var e={getBezierEasing:function(e,n,i,o,a){var r=a||("bez_"+e+"_"+n+"_"+i+"_"+o).replace(/\./g,"p");if(t[r])return t[r];var s=new d([e,n,i,o]);return t[r]=s,s}},t={},n=11,i=1/(n-1),o="function"==typeof Float32Array;function a(e,t){return 1-3*t+3*e}function r(e,t){return 3*t-6*e}function s(e){return 3*e}function c(e,t,n){return((a(t,n)*e+r(t,n))*e+s(t))*e}function l(e,t,n){return 3*a(t,n)*e*e+2*r(t,n)*e+s(t)}function d(e){this._p=e,this._mSampleValues=o?new Float32Array(n):new Array(n),this._precomputed=!1,this.get=this.get.bind(this)}return d.prototype={get:function(e){var t=this._p[0],n=this._p[1],i=this._p[2],o=this._p[3];return this._precomputed||this._precompute(),t===n&&i===o?e:0===e?0:1===e?1:c(this._getTForX(e),n,o)},_precompute:function(){var e=this._p[0],t=this._p[1],n=this._p[2],i=this._p[3];this._precomputed=!0,e===t&&n===i||this._calcSampleValues()},_calcSampleValues:function(){for(var e=this._p[0],t=this._p[2],o=0;o<n;++o)this._mSampleValues[o]=c(o*i,e,t)},_getTForX:function(e){for(var t=this._p[0],o=this._p[2],a=this._mSampleValues,r=0,s=1,d=n-1;s!==d&&a[s]<=e;++s)r+=i;var p=r+(e-a[--s])/(a[s+1]-a[s])*i,h=l(p,t,o);return h>=.001?function(e,t,n,i){for(var o=0;o<4;++o){var a=l(t,n,i);if(0===a)return t;t-=(c(t,n,i)-e)/a}return t}(e,p,t,o):0===h?p:function(e,t,n,i,o){var a,r,s=0;do{(a=c(r=t+(n-t)/2,i,o)-e)>0?n=r:t=r}while(Math.abs(a)>1e-7&&++s<10);return r}(e,r,r+i,t,o)}},e}(),pooling={double:function(e){return e.concat(createSizedArray(e.length))}},poolFactory=function(e,t,n){var i=0,o=e,a=createSizedArray(o);return{newElement:function(){return i?a[i-=1]:t()},release:function(e){i===o&&(a=pooling.double(a),o*=2),n&&n(e),a[i]=e,i+=1}}},bezierLengthPool=poolFactory(8,(function(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}})),segmentsLengthPool=poolFactory(8,(function(){return{lengths:[],totalLength:0}}),(function(e){var t,n=e.lengths.length;for(t=0;t<n;t+=1)bezierLengthPool.release(e.lengths[t]);e.lengths.length=0}));function bezFunction(){var e=Math;function t(e,t,n,i,o,a){var r=e*i+t*o+n*a-o*i-a*e-n*t;return r>-.001&&r<.001}var n=function(e,t,n,i){var o,a,r,s,c,l,d=getDefaultCurveSegments(),p=0,h=[],u=[],m=bezierLengthPool.newElement();for(r=n.length,o=0;o<d;o+=1){for(c=o/(d-1),l=0,a=0;a<r;a+=1)s=bmPow(1-c,3)*e[a]+3*bmPow(1-c,2)*c*n[a]+3*(1-c)*bmPow(c,2)*i[a]+bmPow(c,3)*t[a],h[a]=s,null!==u[a]&&(l+=bmPow(h[a]-u[a],2)),u[a]=h[a];l&&(p+=l=bmSqrt(l)),m.percents[o]=c,m.lengths[o]=p}return m.addedLength=p,m};function i(e){this.segmentLength=0,this.points=new Array(e)}function o(e,t){this.partialLength=e,this.point=t}var a,r=(a={},function(e,n,r,s){var c=(e[0]+"_"+e[1]+"_"+n[0]+"_"+n[1]+"_"+r[0]+"_"+r[1]+"_"+s[0]+"_"+s[1]).replace(/\./g,"p");if(!a[c]){var l,d,p,h,u,m,f,g=getDefaultCurveSegments(),y=0,v=null;2===e.length&&(e[0]!==n[0]||e[1]!==n[1])&&t(e[0],e[1],n[0],n[1],e[0]+r[0],e[1]+r[1])&&t(e[0],e[1],n[0],n[1],n[0]+s[0],n[1]+s[1])&&(g=2);var b=new i(g);for(p=r.length,l=0;l<g;l+=1){for(f=createSizedArray(p),u=l/(g-1),m=0,d=0;d<p;d+=1)h=bmPow(1-u,3)*e[d]+3*bmPow(1-u,2)*u*(e[d]+r[d])+3*(1-u)*bmPow(u,2)*(n[d]+s[d])+bmPow(u,3)*n[d],f[d]=h,null!==v&&(m+=bmPow(f[d]-v[d],2));y+=m=bmSqrt(m),b.points[l]=new o(m,f),v=f}b.segmentLength=y,a[c]=b}return a[c]});function s(e,t){var n=t.percents,i=t.lengths,o=n.length,a=bmFloor((o-1)*e),r=e*t.addedLength,s=0;if(a===o-1||0===a||r===i[a])return n[a];for(var c=i[a]>r?-1:1,l=!0;l;)if(i[a]<=r&&i[a+1]>r?(s=(r-i[a])/(i[a+1]-i[a]),l=!1):a+=c,a<0||a>=o-1){if(a===o-1)return n[a];l=!1}return n[a]+(n[a+1]-n[a])*s}var c=createTypedArray("float32",8);return{getSegmentsLength:function(e){var t,i=segmentsLengthPool.newElement(),o=e.c,a=e.v,r=e.o,s=e.i,c=e._length,l=i.lengths,d=0;for(t=0;t<c-1;t+=1)l[t]=n(a[t],a[t+1],r[t],s[t+1]),d+=l[t].addedLength;return o&&c&&(l[t]=n(a[t],a[0],r[t],s[0]),d+=l[t].addedLength),i.totalLength=d,i},getNewSegment:function(t,n,i,o,a,r,l){a<0?a=0:a>1&&(a=1);var d,p=s(a,l),h=s(r=r>1?1:r,l),u=t.length,m=1-p,f=1-h,g=m*m*m,y=p*m*m*3,v=p*p*m*3,b=p*p*p,x=m*m*f,_=p*m*f+m*p*f+m*m*h,k=p*p*f+m*p*h+p*m*h,w=p*p*h,C=m*f*f,S=p*f*f+m*h*f+m*f*h,E=p*h*f+m*h*h+p*f*h,T=p*h*h,P=f*f*f,A=h*f*f+f*h*f+f*f*h,I=h*h*f+f*h*h+h*f*h,L=h*h*h;for(d=0;d<u;d+=1)c[4*d]=e.round(1e3*(g*t[d]+y*i[d]+v*o[d]+b*n[d]))/1e3,c[4*d+1]=e.round(1e3*(x*t[d]+_*i[d]+k*o[d]+w*n[d]))/1e3,c[4*d+2]=e.round(1e3*(C*t[d]+S*i[d]+E*o[d]+T*n[d]))/1e3,c[4*d+3]=e.round(1e3*(P*t[d]+A*i[d]+I*o[d]+L*n[d]))/1e3;return c},getPointInSegment:function(t,n,i,o,a,r){var c=s(a,r),l=1-c;return[e.round(1e3*(l*l*l*t[0]+(c*l*l+l*c*l+l*l*c)*i[0]+(c*c*l+l*c*c+c*l*c)*o[0]+c*c*c*n[0]))/1e3,e.round(1e3*(l*l*l*t[1]+(c*l*l+l*c*l+l*l*c)*i[1]+(c*c*l+l*c*c+c*l*c)*o[1]+c*c*c*n[1]))/1e3]},buildBezierData:r,pointOnLine2D:t,pointOnLine3D:function(n,i,o,a,r,s,c,l,d){if(0===o&&0===s&&0===d)return t(n,i,a,r,c,l);var p,h=e.sqrt(e.pow(a-n,2)+e.pow(r-i,2)+e.pow(s-o,2)),u=e.sqrt(e.pow(c-n,2)+e.pow(l-i,2)+e.pow(d-o,2)),m=e.sqrt(e.pow(c-a,2)+e.pow(l-r,2)+e.pow(d-s,2));return(p=h>u?h>m?h-u-m:m-u-h:m>u?m-u-h:u-h-m)>-1e-4&&p<1e-4}}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(e,t){var n,i=this.offsetTime;"multidimensional"===this.propType&&(n=createTypedArray("float32",this.pv.length));for(var o,a,r,s,c,l,d,p,h,u=t.lastIndex,m=u,f=this.keyframes.length-1,g=!0;g;){if(o=this.keyframes[m],a=this.keyframes[m+1],m===f-1&&e>=a.t-i){o.h&&(o=a),u=0;break}if(a.t-i>e){u=m;break}m<f-1?m+=1:(u=0,g=!1)}r=this.keyframesMetadata[m]||{};var y,v=a.t-i,b=o.t-i;if(o.to){r.bezierData||(r.bezierData=bez.buildBezierData(o.s,a.s||o.e,o.to,o.ti));var x=r.bezierData;if(e>=v||e<b){var _=e>=v?x.points.length-1:0;for(c=x.points[_].point.length,s=0;s<c;s+=1)n[s]=x.points[_].point[s]}else{r.__fnct?h=r.__fnct:(h=BezierFactory.getBezierEasing(o.o.x,o.o.y,o.i.x,o.i.y,o.n).get,r.__fnct=h),l=h((e-b)/(v-b));var k,w=x.segmentLength*l,C=t.lastFrame<e&&t._lastKeyframeIndex===m?t._lastAddedLength:0;for(p=t.lastFrame<e&&t._lastKeyframeIndex===m?t._lastPoint:0,g=!0,d=x.points.length;g;){if(C+=x.points[p].partialLength,0===w||0===l||p===x.points.length-1){for(c=x.points[p].point.length,s=0;s<c;s+=1)n[s]=x.points[p].point[s];break}if(w>=C&&w<C+x.points[p+1].partialLength){for(k=(w-C)/x.points[p+1].partialLength,c=x.points[p].point.length,s=0;s<c;s+=1)n[s]=x.points[p].point[s]+(x.points[p+1].point[s]-x.points[p].point[s])*k;break}p<d-1?p+=1:g=!1}t._lastPoint=p,t._lastAddedLength=C-x.points[p].partialLength,t._lastKeyframeIndex=m}}else{var S,E,T,P,A;if(f=o.s.length,y=a.s||o.e,this.sh&&1!==o.h)e>=v?(n[0]=y[0],n[1]=y[1],n[2]=y[2]):e<=b?(n[0]=o.s[0],n[1]=o.s[1],n[2]=o.s[2]):quaternionToEuler(n,slerp(createQuaternion(o.s),createQuaternion(y),(e-b)/(v-b)));else for(m=0;m<f;m+=1)1!==o.h&&(e>=v?l=1:e<b?l=0:(o.o.x.constructor===Array?(r.__fnct||(r.__fnct=[]),r.__fnct[m]?h=r.__fnct[m]:(S=void 0===o.o.x[m]?o.o.x[0]:o.o.x[m],E=void 0===o.o.y[m]?o.o.y[0]:o.o.y[m],T=void 0===o.i.x[m]?o.i.x[0]:o.i.x[m],P=void 0===o.i.y[m]?o.i.y[0]:o.i.y[m],h=BezierFactory.getBezierEasing(S,E,T,P).get,r.__fnct[m]=h)):r.__fnct?h=r.__fnct:(S=o.o.x,E=o.o.y,T=o.i.x,P=o.i.y,h=BezierFactory.getBezierEasing(S,E,T,P).get,o.keyframeMetadata=h),l=h((e-b)/(v-b)))),y=a.s||o.e,A=1===o.h?o.s[m]:o.s[m]+(y[m]-o.s[m])*l,"multidimensional"===this.propType?n[m]=A:n=A}return t.lastIndex=u,n}function slerp(e,t,n){var i,o,a,r,s,c=[],l=e[0],d=e[1],p=e[2],h=e[3],u=t[0],m=t[1],f=t[2],g=t[3];return(o=l*u+d*m+p*f+h*g)<0&&(o=-o,u=-u,m=-m,f=-f,g=-g),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),r=Math.sin((1-n)*i)/a,s=Math.sin(n*i)/a):(r=1-n,s=n),c[0]=r*l+s*u,c[1]=r*d+s*m,c[2]=r*p+s*f,c[3]=r*h+s*g,c}function quaternionToEuler(e,t){var n=t[0],i=t[1],o=t[2],a=t[3],r=Math.atan2(2*i*a-2*n*o,1-2*i*i-2*o*o),s=Math.asin(2*n*i+2*o*a),c=Math.atan2(2*n*a-2*i*o,1-2*n*n-2*o*o);e[0]=r/degToRads,e[1]=s/degToRads,e[2]=c/degToRads}function createQuaternion(e){var t=e[0]*degToRads,n=e[1]*degToRads,i=e[2]*degToRads,o=Math.cos(t/2),a=Math.cos(n/2),r=Math.cos(i/2),s=Math.sin(t/2),c=Math.sin(n/2),l=Math.sin(i/2);return[s*c*r+o*a*l,s*a*r+o*c*l,o*c*r-s*a*l,o*a*r-s*c*l]}function getValueAtCurrentTime(){var e=this.comp.renderedFrame-this.offsetTime,t=this.keyframes[0].t-this.offsetTime,n=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(e===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=n&&e>=n||this._caching.lastFrame<t&&e<t))){this._caching.lastFrame>=e&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var i=this.interpolateValue(e,this._caching);this.pv=i}return this._caching.lastFrame=e,this.pv}function setVValue(e){var t;if("unidimensional"===this.propType)t=e*this.mult,mathAbs(this.v-t)>1e-5&&(this.v=t,this._mdf=!0);else for(var n=0,i=this.v.length;n<i;)t=e[n]*this.mult,mathAbs(this.v[n]-t)>1e-5&&(this.v[n]=t,this._mdf=!0),n+=1}function processEffectsSequence(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var e;this.lock=!0,this._mdf=this._isFirstFrame;var t=this.effectsSequence.length,n=this.kf?this.pv:this.data.k;for(e=0;e<t;e+=1)n=this.effectsSequence[e](n);this.setVValue(n),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function ValueProperty(e,t,n,i){this.propType="unidimensional",this.mult=n||1,this.data=t,this.v=n?t.k*n:t.k,this.pv=t.k,this._mdf=!1,this.elem=e,this.container=i,this.comp=e.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(e,t,n,i){var o;this.propType="multidimensional",this.mult=n||1,this.data=t,this._mdf=!1,this.elem=e,this.container=i,this.comp=e.comp,this.k=!1,this.kf=!1,this.frameId=-1;var a=t.k.length;for(this.v=createTypedArray("float32",a),this.pv=createTypedArray("float32",a),this.vel=createTypedArray("float32",a),o=0;o<a;o+=1)this.v[o]=t.k[o]*this.mult,this.pv[o]=t.k[o];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(e,t,n,i){this.propType="unidimensional",this.keyframes=t.k,this.keyframesMetadata=[],this.offsetTime=e.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=t,this.mult=n||1,this.elem=e,this.container=i,this.comp=e.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(e,t,n,i){var o;this.propType="multidimensional";var a,r,s,c,l=t.k.length;for(o=0;o<l-1;o+=1)t.k[o].to&&t.k[o].s&&t.k[o+1]&&t.k[o+1].s&&(a=t.k[o].s,r=t.k[o+1].s,s=t.k[o].to,c=t.k[o].ti,(2===a.length&&(a[0]!==r[0]||a[1]!==r[1])&&bez.pointOnLine2D(a[0],a[1],r[0],r[1],a[0]+s[0],a[1]+s[1])&&bez.pointOnLine2D(a[0],a[1],r[0],r[1],r[0]+c[0],r[1]+c[1])||3===a.length&&(a[0]!==r[0]||a[1]!==r[1]||a[2]!==r[2])&&bez.pointOnLine3D(a[0],a[1],a[2],r[0],r[1],r[2],a[0]+s[0],a[1]+s[1],a[2]+s[2])&&bez.pointOnLine3D(a[0],a[1],a[2],r[0],r[1],r[2],r[0]+c[0],r[1]+c[1],r[2]+c[2]))&&(t.k[o].to=null,t.k[o].ti=null),a[0]===r[0]&&a[1]===r[1]&&0===s[0]&&0===s[1]&&0===c[0]&&0===c[1]&&(2===a.length||a[2]===r[2]&&0===s[2]&&0===c[2])&&(t.k[o].to=null,t.k[o].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=t,this.keyframes=t.k,this.keyframesMetadata=[],this.offsetTime=e.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=n||1,this.elem=e,this.container=i,this.comp=e.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var d=t.k[0].s.length;for(this.v=createTypedArray("float32",d),this.pv=createTypedArray("float32",d),o=0;o<d;o+=1)this.v[o]=initFrame,this.pv[o]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",d)},this.addEffect=addEffect}var PropertyFactory=(ob={getProp:function(e,t,n,i,o){var a;if(t.sid&&(t=e.globalData.slotManager.getProp(t)),t.k.length)if("number"==typeof t.k[0])a=new MultiDimensionalProperty(e,t,i,o);else switch(n){case 0:a=new KeyframedValueProperty(e,t,i,o);break;case 1:a=new KeyframedMultidimensionalProperty(e,t,i,o)}else a=new ValueProperty(e,t,i,o);return a.effectsSequence.length&&o.addDynamicProperty(a),a}},ob),ob;function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(e){-1===this.dynamicProperties.indexOf(e)&&(this.dynamicProperties.push(e),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){var e;this._mdf=!1;var t=this.dynamicProperties.length;for(e=0;e<t;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(e){this.container=e,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=poolFactory(8,(function(){return createTypedArray("float32",2)}));function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(e,t){this.c=e,this.setLength(t);for(var n=0;n<t;)this.v[n]=pointPool.newElement(),this.o[n]=pointPool.newElement(),this.i[n]=pointPool.newElement(),n+=1},ShapePath.prototype.setLength=function(e){for(;this._maxLength<e;)this.doubleArrayLength();this._length=e},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(e,t,n,i,o){var a;switch(this._length=Math.max(this._length,i+1),this._length>=this._maxLength&&this.doubleArrayLength(),n){case"v":a=this.v;break;case"i":a=this.i;break;case"o":a=this.o;break;default:a=[]}(!a[i]||a[i]&&!o)&&(a[i]=pointPool.newElement()),a[i][0]=e,a[i][1]=t},ShapePath.prototype.setTripleAt=function(e,t,n,i,o,a,r,s){this.setXYAt(e,t,"v",r,s),this.setXYAt(n,i,"o",r,s),this.setXYAt(o,a,"i",r,s)},ShapePath.prototype.reverse=function(){var e=new ShapePath;e.setPathData(this.c,this._length);var t=this.v,n=this.o,i=this.i,o=0;this.c&&(e.setTripleAt(t[0][0],t[0][1],i[0][0],i[0][1],n[0][0],n[0][1],0,!1),o=1);var a,r=this._length-1,s=this._length;for(a=o;a<s;a+=1)e.setTripleAt(t[r][0],t[r][1],i[r][0],i[r][1],n[r][0],n[r][1],a,!1),r-=1;return e},ShapePath.prototype.length=function(){return this._length};var shapePool=(factory=poolFactory(4,(function(){return new ShapePath}),(function(e){var t,n=e._length;for(t=0;t<n;t+=1)pointPool.release(e.v[t]),pointPool.release(e.i[t]),pointPool.release(e.o[t]),e.v[t]=null,e.i[t]=null,e.o[t]=null;e._length=0,e.c=!1})),factory.clone=function(e){var t,n=factory.newElement(),i=void 0===e._length?e.v.length:e._length;for(n.setLength(i),n.c=e.c,t=0;t<i;t+=1)n.setTripleAt(e.v[t][0],e.v[t][1],e.o[t][0],e.o[t][1],e.i[t][0],e.i[t][1],t);return n},factory),factory;function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(e){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=e,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var e;for(e=0;e<this._length;e+=1)shapePool.release(this.shapes[e]);this._length=0};var shapeCollectionPool=function(){var e={newShapeCollection:function(){return t?i[t-=1]:new ShapeCollection},release:function(e){var o,a=e._length;for(o=0;o<a;o+=1)shapePool.release(e.shapes[o]);e._length=0,t===n&&(i=pooling.double(i),n*=2),i[t]=e,t+=1}},t=0,n=4,i=createSizedArray(n);return e}(),ShapePropertyFactory=function(){var e=-999999;function t(e,t,n){var i,o,a,r,s,c,l,d,p,h=n.lastIndex,u=this.keyframes;if(e<u[0].t-this.offsetTime)i=u[0].s[0],a=!0,h=0;else if(e>=u[u.length-1].t-this.offsetTime)i=u[u.length-1].s?u[u.length-1].s[0]:u[u.length-2].e[0],a=!0;else{for(var m,f,g,y=h,v=u.length-1,b=!0;b&&(m=u[y],!((f=u[y+1]).t-this.offsetTime>e));)y<v-1?y+=1:b=!1;if(g=this.keyframesMetadata[y]||{},h=y,!(a=1===m.h)){if(e>=f.t-this.offsetTime)d=1;else if(e<m.t-this.offsetTime)d=0;else{var x;g.__fnct?x=g.__fnct:(x=BezierFactory.getBezierEasing(m.o.x,m.o.y,m.i.x,m.i.y).get,g.__fnct=x),d=x((e-(m.t-this.offsetTime))/(f.t-this.offsetTime-(m.t-this.offsetTime)))}o=f.s?f.s[0]:m.e[0]}i=m.s[0]}for(c=t._length,l=i.i[0].length,n.lastIndex=h,r=0;r<c;r+=1)for(s=0;s<l;s+=1)p=a?i.i[r][s]:i.i[r][s]+(o.i[r][s]-i.i[r][s])*d,t.i[r][s]=p,p=a?i.o[r][s]:i.o[r][s]+(o.o[r][s]-i.o[r][s])*d,t.o[r][s]=p,p=a?i.v[r][s]:i.v[r][s]+(o.v[r][s]-i.v[r][s])*d,t.v[r][s]=p}function n(){var t=this.comp.renderedFrame-this.offsetTime,n=this.keyframes[0].t-this.offsetTime,i=this.keyframes[this.keyframes.length-1].t-this.offsetTime,o=this._caching.lastFrame;return o!==e&&(o<n&&t<n||o>i&&t>i)||(this._caching.lastIndex=o<t?this._caching.lastIndex:0,this.interpolateShape(t,this.pv,this._caching)),this._caching.lastFrame=t,this.pv}function i(){this.paths=this.localShapeCollection}function o(e){(function(e,t){if(e._length!==t._length||e.c!==t.c)return!1;var n,i=e._length;for(n=0;n<i;n+=1)if(e.v[n][0]!==t.v[n][0]||e.v[n][1]!==t.v[n][1]||e.o[n][0]!==t.o[n][0]||e.o[n][1]!==t.o[n][1]||e.i[n][0]!==t.i[n][0]||e.i[n][1]!==t.i[n][1])return!1;return!0})(this.v,e)||(this.v=shapePool.clone(e),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function a(){if(this.elem.globalData.frameId!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var e,t;this.lock=!0,this._mdf=!1,e=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k;var n=this.effectsSequence.length;for(t=0;t<n;t+=1)e=this.effectsSequence[t](e);this.setVValue(e),this.lock=!1,this.frameId=this.elem.globalData.frameId}else this._mdf=!1}function r(e,t,n){this.propType="shape",this.comp=e.comp,this.container=e,this.elem=e,this.data=t,this.k=!1,this.kf=!1,this._mdf=!1;var o=3===n?t.pt.k:t.ks.k;this.v=shapePool.clone(o),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=i,this.effectsSequence=[]}function s(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function c(t,o,a){this.propType="shape",this.comp=t.comp,this.elem=t,this.container=t,this.offsetTime=t.data.st,this.keyframes=3===a?o.pt.k:o.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var r=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,r),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=e,this.reset=i,this._caching={lastFrame:e,lastIndex:0},this.effectsSequence=[n.bind(this)]}r.prototype.interpolateShape=t,r.prototype.getValue=a,r.prototype.setVValue=o,r.prototype.addEffect=s,c.prototype.getValue=a,c.prototype.interpolateShape=t,c.prototype.setVValue=o,c.prototype.addEffect=s;var l=function(){var e=roundCorner;function t(e,t){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=t.d,this.elem=e,this.comp=e.comp,this.frameId=-1,this.initDynamicPropertyContainer(e),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.s=PropertyFactory.getProp(e,t.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return t.prototype={reset:i,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var t=this.p.v[0],n=this.p.v[1],i=this.s.v[0]/2,o=this.s.v[1]/2,a=3!==this.d,r=this.v;r.v[0][0]=t,r.v[0][1]=n-o,r.v[1][0]=a?t+i:t-i,r.v[1][1]=n,r.v[2][0]=t,r.v[2][1]=n+o,r.v[3][0]=a?t-i:t+i,r.v[3][1]=n,r.i[0][0]=a?t-i*e:t+i*e,r.i[0][1]=n-o,r.i[1][0]=a?t+i:t-i,r.i[1][1]=n-o*e,r.i[2][0]=a?t+i*e:t-i*e,r.i[2][1]=n+o,r.i[3][0]=a?t-i:t+i,r.i[3][1]=n+o*e,r.o[0][0]=a?t+i*e:t-i*e,r.o[0][1]=n-o,r.o[1][0]=a?t+i:t-i,r.o[1][1]=n+o*e,r.o[2][0]=a?t-i*e:t+i*e,r.o[2][1]=n+o,r.o[3][0]=a?t-i:t+i,r.o[3][1]=n-o*e}},extendPrototype([DynamicPropertyContainer],t),t}(),d=function(){function e(e,t){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=e,this.comp=e.comp,this.data=t,this.frameId=-1,this.d=t.d,this.initDynamicPropertyContainer(e),1===t.sy?(this.ir=PropertyFactory.getProp(e,t.ir,0,0,this),this.is=PropertyFactory.getProp(e,t.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(e,t.pt,0,0,this),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.r=PropertyFactory.getProp(e,t.r,0,degToRads,this),this.or=PropertyFactory.getProp(e,t.or,0,0,this),this.os=PropertyFactory.getProp(e,t.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return e.prototype={reset:i,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var e,t,n,i,o=2*Math.floor(this.pt.v),a=2*Math.PI/o,r=!0,s=this.or.v,c=this.ir.v,l=this.os.v,d=this.is.v,p=2*Math.PI*s/(2*o),h=2*Math.PI*c/(2*o),u=-Math.PI/2;u+=this.r.v;var m=3===this.data.d?-1:1;for(this.v._length=0,e=0;e<o;e+=1){n=r?l:d,i=r?p:h;var f=(t=r?s:c)*Math.cos(u),g=t*Math.sin(u),y=0===f&&0===g?0:g/Math.sqrt(f*f+g*g),v=0===f&&0===g?0:-f/Math.sqrt(f*f+g*g);f+=+this.p.v[0],g+=+this.p.v[1],this.v.setTripleAt(f,g,f-y*i*n*m,g-v*i*n*m,f+y*i*n*m,g+v*i*n*m,e,!0),r=!r,u+=a*m}},convertPolygonToPath:function(){var e,t=Math.floor(this.pt.v),n=2*Math.PI/t,i=this.or.v,o=this.os.v,a=2*Math.PI*i/(4*t),r=.5*-Math.PI,s=3===this.data.d?-1:1;for(r+=this.r.v,this.v._length=0,e=0;e<t;e+=1){var c=i*Math.cos(r),l=i*Math.sin(r),d=0===c&&0===l?0:l/Math.sqrt(c*c+l*l),p=0===c&&0===l?0:-c/Math.sqrt(c*c+l*l);c+=+this.p.v[0],l+=+this.p.v[1],this.v.setTripleAt(c,l,c-d*a*o*s,l-p*a*o*s,c+d*a*o*s,l+p*a*o*s,e,!0),r+=n*s}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],e),e}(),p=function(){function e(e,t){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=e,this.comp=e.comp,this.frameId=-1,this.d=t.d,this.initDynamicPropertyContainer(e),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.s=PropertyFactory.getProp(e,t.s,1,0,this),this.r=PropertyFactory.getProp(e,t.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return e.prototype={convertRectToPath:function(){var e=this.p.v[0],t=this.p.v[1],n=this.s.v[0]/2,i=this.s.v[1]/2,o=bmMin(n,i,this.r.v),a=o*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(e+n,t-i+o,e+n,t-i+o,e+n,t-i+a,0,!0),this.v.setTripleAt(e+n,t+i-o,e+n,t+i-a,e+n,t+i-o,1,!0),0!==o?(this.v.setTripleAt(e+n-o,t+i,e+n-o,t+i,e+n-a,t+i,2,!0),this.v.setTripleAt(e-n+o,t+i,e-n+a,t+i,e-n+o,t+i,3,!0),this.v.setTripleAt(e-n,t+i-o,e-n,t+i-o,e-n,t+i-a,4,!0),this.v.setTripleAt(e-n,t-i+o,e-n,t-i+a,e-n,t-i+o,5,!0),this.v.setTripleAt(e-n+o,t-i,e-n+o,t-i,e-n+a,t-i,6,!0),this.v.setTripleAt(e+n-o,t-i,e+n-a,t-i,e+n-o,t-i,7,!0)):(this.v.setTripleAt(e-n,t+i,e-n+a,t+i,e-n,t+i,2),this.v.setTripleAt(e-n,t-i,e-n,t-i+a,e-n,t-i,3))):(this.v.setTripleAt(e+n,t-i+o,e+n,t-i+a,e+n,t-i+o,0,!0),0!==o?(this.v.setTripleAt(e+n-o,t-i,e+n-o,t-i,e+n-a,t-i,1,!0),this.v.setTripleAt(e-n+o,t-i,e-n+a,t-i,e-n+o,t-i,2,!0),this.v.setTripleAt(e-n,t-i+o,e-n,t-i+o,e-n,t-i+a,3,!0),this.v.setTripleAt(e-n,t+i-o,e-n,t+i-a,e-n,t+i-o,4,!0),this.v.setTripleAt(e-n+o,t+i,e-n+o,t+i,e-n+a,t+i,5,!0),this.v.setTripleAt(e+n-o,t+i,e+n-a,t+i,e+n-o,t+i,6,!0),this.v.setTripleAt(e+n,t+i-o,e+n,t+i-o,e+n,t+i-a,7,!0)):(this.v.setTripleAt(e-n,t-i,e-n+a,t-i,e-n,t-i,1,!0),this.v.setTripleAt(e-n,t+i,e-n,t+i-a,e-n,t+i,2,!0),this.v.setTripleAt(e+n,t+i,e+n-a,t+i,e+n,t+i,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:i},extendPrototype([DynamicPropertyContainer],e),e}(),h={getShapeProp:function(e,t,n){var i;return 3===n||4===n?i=(3===n?t.pt:t.ks).k.length?new c(e,t,n):new r(e,t,n):5===n?i=new p(e,t):6===n?i=new l(e,t):7===n&&(i=new d(e,t)),i.k&&e.addDynamicProperty(i),i},getConstructorFunction:function(){return r},getKeyframedConstructorFunction:function(){return c}};return h}(),Matrix=function(){var e=Math.cos,t=Math.sin,n=Math.tan,i=Math.round;function o(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function a(n){if(0===n)return this;var i=e(n),o=t(n);return this._t(i,-o,0,0,o,i,0,0,0,0,1,0,0,0,0,1)}function r(n){if(0===n)return this;var i=e(n),o=t(n);return this._t(1,0,0,0,0,i,-o,0,0,o,i,0,0,0,0,1)}function s(n){if(0===n)return this;var i=e(n),o=t(n);return this._t(i,0,o,0,0,1,0,0,-o,0,i,0,0,0,0,1)}function c(n){if(0===n)return this;var i=e(n),o=t(n);return this._t(i,-o,0,0,o,i,0,0,0,0,1,0,0,0,0,1)}function l(e,t){return this._t(1,t,e,1,0,0)}function d(e,t){return this.shear(n(e),n(t))}function p(i,o){var a=e(o),r=t(o);return this._t(a,r,0,0,-r,a,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,n(i),1,0,0,0,0,1,0,0,0,0,1)._t(a,-r,0,0,r,a,0,0,0,0,1,0,0,0,0,1)}function h(e,t,n){return n||0===n||(n=1),1===e&&1===t&&1===n?this:this._t(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1)}function u(e,t,n,i,o,a,r,s,c,l,d,p,h,u,m,f){return this.props[0]=e,this.props[1]=t,this.props[2]=n,this.props[3]=i,this.props[4]=o,this.props[5]=a,this.props[6]=r,this.props[7]=s,this.props[8]=c,this.props[9]=l,this.props[10]=d,this.props[11]=p,this.props[12]=h,this.props[13]=u,this.props[14]=m,this.props[15]=f,this}function m(e,t,n){return n=n||0,0!==e||0!==t||0!==n?this._t(1,0,0,0,0,1,0,0,0,0,1,0,e,t,n,1):this}function f(e,t,n,i,o,a,r,s,c,l,d,p,h,u,m,f){var g=this.props;if(1===e&&0===t&&0===n&&0===i&&0===o&&1===a&&0===r&&0===s&&0===c&&0===l&&1===d&&0===p)return g[12]=g[12]*e+g[15]*h,g[13]=g[13]*a+g[15]*u,g[14]=g[14]*d+g[15]*m,g[15]*=f,this._identityCalculated=!1,this;var y=g[0],v=g[1],b=g[2],x=g[3],_=g[4],k=g[5],w=g[6],C=g[7],S=g[8],E=g[9],T=g[10],P=g[11],A=g[12],I=g[13],L=g[14],D=g[15];return g[0]=y*e+v*o+b*c+x*h,g[1]=y*t+v*a+b*l+x*u,g[2]=y*n+v*r+b*d+x*m,g[3]=y*i+v*s+b*p+x*f,g[4]=_*e+k*o+w*c+C*h,g[5]=_*t+k*a+w*l+C*u,g[6]=_*n+k*r+w*d+C*m,g[7]=_*i+k*s+w*p+C*f,g[8]=S*e+E*o+T*c+P*h,g[9]=S*t+E*a+T*l+P*u,g[10]=S*n+E*r+T*d+P*m,g[11]=S*i+E*s+T*p+P*f,g[12]=A*e+I*o+L*c+D*h,g[13]=A*t+I*a+L*l+D*u,g[14]=A*n+I*r+L*d+D*m,g[15]=A*i+I*s+L*p+D*f,this._identityCalculated=!1,this}function g(e){var t=e.props;return this.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function y(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function v(e){for(var t=0;t<16;){if(e.props[t]!==this.props[t])return!1;t+=1}return!0}function b(e){var t;for(t=0;t<16;t+=1)e.props[t]=this.props[t];return e}function x(e){var t;for(t=0;t<16;t+=1)this.props[t]=e[t]}function _(e,t,n){return{x:e*this.props[0]+t*this.props[4]+n*this.props[8]+this.props[12],y:e*this.props[1]+t*this.props[5]+n*this.props[9]+this.props[13],z:e*this.props[2]+t*this.props[6]+n*this.props[10]+this.props[14]}}function k(e,t,n){return e*this.props[0]+t*this.props[4]+n*this.props[8]+this.props[12]}function w(e,t,n){return e*this.props[1]+t*this.props[5]+n*this.props[9]+this.props[13]}function C(e,t,n){return e*this.props[2]+t*this.props[6]+n*this.props[10]+this.props[14]}function S(){var e=this.props[0]*this.props[5]-this.props[1]*this.props[4],t=this.props[5]/e,n=-this.props[1]/e,i=-this.props[4]/e,o=this.props[0]/e,a=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/e,r=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/e,s=new Matrix;return s.props[0]=t,s.props[1]=n,s.props[4]=i,s.props[5]=o,s.props[12]=a,s.props[13]=r,s}function E(e){return this.getInverseMatrix().applyToPointArray(e[0],e[1],e[2]||0)}function T(e){var t,n=e.length,i=[];for(t=0;t<n;t+=1)i[t]=E(e[t]);return i}function P(e,t,n){var i=createTypedArray("float32",6);if(this.isIdentity())i[0]=e[0],i[1]=e[1],i[2]=t[0],i[3]=t[1],i[4]=n[0],i[5]=n[1];else{var o=this.props[0],a=this.props[1],r=this.props[4],s=this.props[5],c=this.props[12],l=this.props[13];i[0]=e[0]*o+e[1]*r+c,i[1]=e[0]*a+e[1]*s+l,i[2]=t[0]*o+t[1]*r+c,i[3]=t[0]*a+t[1]*s+l,i[4]=n[0]*o+n[1]*r+c,i[5]=n[0]*a+n[1]*s+l}return i}function A(e,t,n){return this.isIdentity()?[e,t,n]:[e*this.props[0]+t*this.props[4]+n*this.props[8]+this.props[12],e*this.props[1]+t*this.props[5]+n*this.props[9]+this.props[13],e*this.props[2]+t*this.props[6]+n*this.props[10]+this.props[14]]}function I(e,t){if(this.isIdentity())return e+","+t;var n=this.props;return Math.round(100*(e*n[0]+t*n[4]+n[12]))/100+","+Math.round(100*(e*n[1]+t*n[5]+n[13]))/100}function L(){for(var e=0,t=this.props,n="matrix3d(";e<16;)n+=i(1e4*t[e])/1e4,n+=15===e?")":",",e+=1;return n}function D(e){return e<1e-6&&e>0||e>-1e-6&&e<0?i(1e4*e)/1e4:e}function M(){var e=this.props;return"matrix("+D(e[0])+","+D(e[1])+","+D(e[4])+","+D(e[5])+","+D(e[12])+","+D(e[13])+")"}return function(){this.reset=o,this.rotate=a,this.rotateX=r,this.rotateY=s,this.rotateZ=c,this.skew=d,this.skewFromAxis=p,this.shear=l,this.scale=h,this.setTransform=u,this.translate=m,this.transform=f,this.multiply=g,this.applyToPoint=_,this.applyToX=k,this.applyToY=w,this.applyToZ=C,this.applyToPointArray=A,this.applyToTriplePoints=P,this.applyToPointStringified=I,this.toCSS=L,this.to2dCSS=M,this.clone=b,this.cloneFromProps=x,this.equals=v,this.inversePoints=T,this.inversePoint=E,this.getInverseMatrix=S,this._t=this.transform,this.isIdentity=y,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(e){return _typeof$3="function"==typeof Symbol&&"symbol"==cosmic._typeof(Symbol.iterator)?function(e){return cosmic._typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":cosmic._typeof(e)},_typeof$3(e)}var lottie={};function setLocation(e){setLocationHref(e)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(e){setSubframeEnabled(e)}function setPrefix(e){setIdPrefix(e)}function loadAnimation(e){return animationManager.loadAnimation(e)}function setQuality(e){if("string"==typeof e)switch(e){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10)}else!isNaN(e)&&e>1&&setDefaultCurveSegments(e)}function inBrowser(){return"undefined"!=typeof navigator}function installPlugin(e,t){"expressions"===e&&setExpressionsPlugin(t)}function getFactory(e){switch(e){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(e){for(var t=queryString.split("&"),n=0;n<t.length;n+=1){var i=t[n].split("=");if(decodeURIComponent(i[0])==e)return decodeURIComponent(i[1])}return null}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";var queryString="",scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer");var readyStateCheckInterval=setInterval(checkReady,100);try{"object"!==_typeof$3(exports)&&(window.bodymovin=lottie)}catch(e){}var ShapeModifiers=function(){var e={},t={};return e.registerModifier=function(e,n){t[e]||(t[e]=n)},e.getModifier=function(e,n,i){return new t[e](n,i)},e}();function ShapeModifier(){}function TrimModifier(){}function PuckerAndBloatModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(e){if(!this.closed){e.sh.container.addDynamicProperty(e.sh);var t={shape:e.sh,data:e,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(t),this.addShapeToModifier(t),this._isAnimated&&e.setAsAnimated()}},ShapeModifier.prototype.init=function(e,t){this.shapes=[],this.elem=e,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,t),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(e,t){this.s=PropertyFactory.getProp(e,t.s,0,.01,this),this.e=PropertyFactory.getProp(e,t.e,0,.01,this),this.o=PropertyFactory.getProp(e,t.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=t.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(e){e.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(e,t,n,i,o){var a=[];t<=1?a.push({s:e,e:t}):e>=1?a.push({s:e-1,e:t-1}):(a.push({s:e,e:1}),a.push({s:0,e:t-1}));var r,s,c=[],l=a.length;for(r=0;r<l;r+=1){var d,p;(s=a[r]).e*o<i||s.s*o>i+n||(d=s.s*o<=i?0:(s.s*o-i)/n,p=s.e*o>=i+n?1:(s.e*o-i)/n,c.push([d,p]))}return c.length||c.push([0,0]),c},TrimModifier.prototype.releasePathsData=function(e){var t,n=e.length;for(t=0;t<n;t+=1)segmentsLengthPool.release(e[t]);return e.length=0,e},TrimModifier.prototype.processShapes=function(e){var t,n,i,o;if(this._mdf||e){var a=this.o.v%360/360;if(a<0&&(a+=1),(t=this.s.v>1?1+a:this.s.v<0?0+a:this.s.v+a)>(n=this.e.v>1?1+a:this.e.v<0?0+a:this.e.v+a)){var r=t;t=n,n=r}t=1e-4*Math.round(1e4*t),n=1e-4*Math.round(1e4*n),this.sValue=t,this.eValue=n}else t=this.sValue,n=this.eValue;var s,c,l,d,p,h=this.shapes.length,u=0;if(n===t)for(o=0;o<h;o+=1)this.shapes[o].localShapeCollection.releaseShapes(),this.shapes[o].shape._mdf=!0,this.shapes[o].shape.paths=this.shapes[o].localShapeCollection,this._mdf&&(this.shapes[o].pathsData.length=0);else if(1===n&&0===t||0===n&&1===t){if(this._mdf)for(o=0;o<h;o+=1)this.shapes[o].pathsData.length=0,this.shapes[o].shape._mdf=!0}else{var m,f,g=[];for(o=0;o<h;o+=1)if((m=this.shapes[o]).shape._mdf||this._mdf||e||2===this.m){if(c=(i=m.shape.paths)._length,p=0,!m.shape._mdf&&m.pathsData.length)p=m.totalShapeLength;else{for(l=this.releasePathsData(m.pathsData),s=0;s<c;s+=1)d=bez.getSegmentsLength(i.shapes[s]),l.push(d),p+=d.totalLength;m.totalShapeLength=p,m.pathsData=l}u+=p,m.shape._mdf=!0}else m.shape.paths=m.localShapeCollection;var y,v=t,b=n,x=0;for(o=h-1;o>=0;o-=1)if((m=this.shapes[o]).shape._mdf){for((f=m.localShapeCollection).releaseShapes(),2===this.m&&h>1?(y=this.calculateShapeEdges(t,n,m.totalShapeLength,x,u),x+=m.totalShapeLength):y=[[v,b]],c=y.length,s=0;s<c;s+=1){v=y[s][0],b=y[s][1],g.length=0,b<=1?g.push({s:m.totalShapeLength*v,e:m.totalShapeLength*b}):v>=1?g.push({s:m.totalShapeLength*(v-1),e:m.totalShapeLength*(b-1)}):(g.push({s:m.totalShapeLength*v,e:m.totalShapeLength}),g.push({s:0,e:m.totalShapeLength*(b-1)}));var _=this.addShapes(m,g[0]);if(g[0].s!==g[0].e){if(g.length>1)if(m.shape.paths.shapes[m.shape.paths._length-1].c){var k=_.pop();this.addPaths(_,f),_=this.addShapes(m,g[1],k)}else this.addPaths(_,f),_=this.addShapes(m,g[1]);this.addPaths(_,f)}}m.shape.paths=f}}},TrimModifier.prototype.addPaths=function(e,t){var n,i=e.length;for(n=0;n<i;n+=1)t.addShape(e[n])},TrimModifier.prototype.addSegment=function(e,t,n,i,o,a,r){o.setXYAt(t[0],t[1],"o",a),o.setXYAt(n[0],n[1],"i",a+1),r&&o.setXYAt(e[0],e[1],"v",a),o.setXYAt(i[0],i[1],"v",a+1)},TrimModifier.prototype.addSegmentFromArray=function(e,t,n,i){t.setXYAt(e[1],e[5],"o",n),t.setXYAt(e[2],e[6],"i",n+1),i&&t.setXYAt(e[0],e[4],"v",n),t.setXYAt(e[3],e[7],"v",n+1)},TrimModifier.prototype.addShapes=function(e,t,n){var i,o,a,r,s,c,l,d,p=e.pathsData,h=e.shape.paths.shapes,u=e.shape.paths._length,m=0,f=[],g=!0;for(n?(s=n._length,d=n._length):(n=shapePool.newElement(),s=0,d=0),f.push(n),i=0;i<u;i+=1){for(c=p[i].lengths,n.c=h[i].c,a=h[i].c?c.length:c.length+1,o=1;o<a;o+=1)if(m+(r=c[o-1]).addedLength<t.s)m+=r.addedLength,n.c=!1;else{if(m>t.e){n.c=!1;break}t.s<=m&&t.e>=m+r.addedLength?(this.addSegment(h[i].v[o-1],h[i].o[o-1],h[i].i[o],h[i].v[o],n,s,g),g=!1):(l=bez.getNewSegment(h[i].v[o-1],h[i].v[o],h[i].o[o-1],h[i].i[o],(t.s-m)/r.addedLength,(t.e-m)/r.addedLength,c[o-1]),this.addSegmentFromArray(l,n,s,g),g=!1,n.c=!1),m+=r.addedLength,s+=1}if(h[i].c&&c.length){if(r=c[o-1],m<=t.e){var y=c[o-1].addedLength;t.s<=m&&t.e>=m+y?(this.addSegment(h[i].v[o-1],h[i].o[o-1],h[i].i[0],h[i].v[0],n,s,g),g=!1):(l=bez.getNewSegment(h[i].v[o-1],h[i].v[0],h[i].o[o-1],h[i].i[0],(t.s-m)/y,(t.e-m)/y,c[o-1]),this.addSegmentFromArray(l,n,s,g),g=!1,n.c=!1)}else n.c=!1;m+=r.addedLength,s+=1}if(n._length&&(n.setXYAt(n.v[d][0],n.v[d][1],"i",d),n.setXYAt(n.v[n._length-1][0],n.v[n._length-1][1],"o",n._length-1)),m>t.e)break;i<u-1&&(n=shapePool.newElement(),g=!0,f.push(n),s=0)}return f},extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(e,t.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(e,t){var n=t/100,i=[0,0],o=e._length,a=0;for(a=0;a<o;a+=1)i[0]+=e.v[a][0],i[1]+=e.v[a][1];i[0]/=o,i[1]/=o;var r,s,c,l,d,p,h=shapePool.newElement();for(h.c=e.c,a=0;a<o;a+=1)r=e.v[a][0]+(i[0]-e.v[a][0])*n,s=e.v[a][1]+(i[1]-e.v[a][1])*n,c=e.o[a][0]+(i[0]-e.o[a][0])*-n,l=e.o[a][1]+(i[1]-e.o[a][1])*-n,d=e.i[a][0]+(i[0]-e.i[a][0])*-n,p=e.i[a][1]+(i[1]-e.i[a][1])*-n,h.setTripleAt(r,s,c,l,d,p,a);return h},PuckerAndBloatModifier.prototype.processShapes=function(e){var t,n,i,o,a,r,s=this.shapes.length,c=this.amount.v;if(0!==c)for(n=0;n<s;n+=1){if(r=(a=this.shapes[n]).localShapeCollection,a.shape._mdf||this._mdf||e)for(r.releaseShapes(),a.shape._mdf=!0,t=a.shape.paths.shapes,o=a.shape.paths._length,i=0;i<o;i+=1)r.addShape(this.processPath(t[i],c));a.shape.paths=a.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var e=[0,0];function t(e,t,n){if(this.elem=e,this.frameId=-1,this.propType="transform",this.data=t,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(n||e),t.p&&t.p.s?(this.px=PropertyFactory.getProp(e,t.p.x,0,0,this),this.py=PropertyFactory.getProp(e,t.p.y,0,0,this),t.p.z&&(this.pz=PropertyFactory.getProp(e,t.p.z,0,0,this))):this.p=PropertyFactory.getProp(e,t.p||{k:[0,0,0]},1,0,this),t.rx){if(this.rx=PropertyFactory.getProp(e,t.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(e,t.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(e,t.rz,0,degToRads,this),t.or.k[0].ti){var i,o=t.or.k.length;for(i=0;i<o;i+=1)t.or.k[i].to=null,t.or.k[i].ti=null}this.or=PropertyFactory.getProp(e,t.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(e,t.r||{k:0},0,degToRads,this);t.sk&&(this.sk=PropertyFactory.getProp(e,t.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(e,t.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(e,t.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(e,t.s||{k:[100,100,100]},1,.01,this),t.o?this.o=PropertyFactory.getProp(e,t.o,0,.01,e):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}return t.prototype={applyToMatrix:function(e){var t=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||t,this.a&&e.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&e.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&e.skewFromAxis(-this.sk.v,this.sa.v),this.r?e.rotate(-this.r.v):e.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?e.translate(this.px.v,this.py.v,-this.pz.v):e.translate(this.px.v,this.py.v,0):e.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(t){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||t){var n;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var i,o;if(n=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(i=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/n,0),o=this.p.getValueAtTime(this.p.keyframes[0].t/n,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(i=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/n,0),o=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/n,0)):(i=this.p.pv,o=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/n,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){i=[],o=[];var a=this.px,r=this.py;a._caching.lastFrame+a.offsetTime<=a.keyframes[0].t?(i[0]=a.getValueAtTime((a.keyframes[0].t+.01)/n,0),i[1]=r.getValueAtTime((r.keyframes[0].t+.01)/n,0),o[0]=a.getValueAtTime(a.keyframes[0].t/n,0),o[1]=r.getValueAtTime(r.keyframes[0].t/n,0)):a._caching.lastFrame+a.offsetTime>=a.keyframes[a.keyframes.length-1].t?(i[0]=a.getValueAtTime(a.keyframes[a.keyframes.length-1].t/n,0),i[1]=r.getValueAtTime(r.keyframes[r.keyframes.length-1].t/n,0),o[0]=a.getValueAtTime((a.keyframes[a.keyframes.length-1].t-.01)/n,0),o[1]=r.getValueAtTime((r.keyframes[r.keyframes.length-1].t-.01)/n,0)):(i=[a.pv,r.pv],o[0]=a.getValueAtTime((a._caching.lastFrame+a.offsetTime-.01)/n,a.offsetTime),o[1]=r.getValueAtTime((r._caching.lastFrame+r.offsetTime-.01)/n,r.offsetTime))}else i=o=e;this.v.rotate(-Math.atan2(i[1]-o[1],i[0]-o[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}},precalculateMatrix:function(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],t),t.prototype.addDynamicProperty=function(e){this._addDynamicProperty(e),this.elem.addDynamicProperty(e),this._isDirty=!0},t.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(e,n,i){return new t(e,n,i)}}}();function RepeaterModifier(){}function RoundCornersModifier(){}function floatEqual(e,t){return 1e5*Math.abs(e-t)<=Math.min(Math.abs(e),Math.abs(t))}function floatZero(e){return Math.abs(e)<=1e-5}function lerp(e,t,n){return e*(1-n)+t*n}function lerpPoint(e,t,n){return[lerp(e[0],t[0],n),lerp(e[1],t[1],n)]}function quadRoots(e,t,n){if(0===e)return[];var i=t*t-4*e*n;if(i<0)return[];var o=-t/(2*e);if(0===i)return[o];var a=Math.sqrt(i)/(2*e);return[o-a,o+a]}function polynomialCoefficients(e,t,n,i){return[3*t-e-3*n+i,3*e-6*t+3*n,-3*e+3*t,e]}function singlePoint(e){return new PolynomialBezier(e,e,e,e,!1)}function PolynomialBezier(e,t,n,i,o){o&&pointEqual(e,t)&&(t=lerpPoint(e,i,1/3)),o&&pointEqual(n,i)&&(n=lerpPoint(e,i,2/3));var a=polynomialCoefficients(e[0],t[0],n[0],i[0]),r=polynomialCoefficients(e[1],t[1],n[1],i[1]);this.a=[a[0],r[0]],this.b=[a[1],r[1]],this.c=[a[2],r[2]],this.d=[a[3],r[3]],this.points=[e,t,n,i]}function extrema(e,t){var n=e.points[0][t],i=e.points[e.points.length-1][t];if(n>i){var o=i;i=n,n=o}for(var a=quadRoots(3*e.a[t],2*e.b[t],e.c[t]),r=0;r<a.length;r+=1)if(a[r]>0&&a[r]<1){var s=e.point(a[r])[t];s<n?n=s:s>i&&(i=s)}return{min:n,max:i}}function intersectData(e,t,n){var i=e.boundingBox();return{cx:i.cx,cy:i.cy,width:i.width,height:i.height,bez:e,t:(t+n)/2,t1:t,t2:n}}function splitData(e){var t=e.bez.split(.5);return[intersectData(t[0],e.t1,e.t),intersectData(t[1],e.t,e.t2)]}function boxIntersect(e,t){return 2*Math.abs(e.cx-t.cx)<e.width+t.width&&2*Math.abs(e.cy-t.cy)<e.height+t.height}function intersectsImpl(e,t,n,i,o,a){if(boxIntersect(e,t))if(n>=a||e.width<=i&&e.height<=i&&t.width<=i&&t.height<=i)o.push([e.t,t.t]);else{var r=splitData(e),s=splitData(t);intersectsImpl(r[0],s[0],n+1,i,o,a),intersectsImpl(r[0],s[1],n+1,i,o,a),intersectsImpl(r[1],s[0],n+1,i,o,a),intersectsImpl(r[1],s[1],n+1,i,o,a)}}function crossProduct(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function lineIntersection(e,t,n,i){var o=[e[0],e[1],1],a=[t[0],t[1],1],r=[n[0],n[1],1],s=[i[0],i[1],1],c=crossProduct(crossProduct(o,a),crossProduct(r,s));return floatZero(c[2])?null:[c[0]/c[2],c[1]/c[2]]}function polarOffset(e,t,n){return[e[0]+Math.cos(t)*n,e[1]-Math.sin(t)*n]}function pointDistance(e,t){return Math.hypot(e[0]-t[0],e[1]-t[1])}function pointEqual(e,t){return floatEqual(e[0],t[0])&&floatEqual(e[1],t[1])}function ZigZagModifier(){}function setPoint(e,t,n,i,o,a,r){var s=n-Math.PI/2,c=n+Math.PI/2,l=t[0]+Math.cos(n)*i*o,d=t[1]-Math.sin(n)*i*o;e.setTripleAt(l,d,l+Math.cos(s)*a,d-Math.sin(s)*a,l+Math.cos(c)*r,d-Math.sin(c)*r,e.length())}function getPerpendicularVector(e,t){var n=[t[0]-e[0],t[1]-e[1]],i=.5*-Math.PI;return[Math.cos(i)*n[0]-Math.sin(i)*n[1],Math.sin(i)*n[0]+Math.cos(i)*n[1]]}function getProjectingAngle(e,t){var n=0===t?e.length()-1:t-1,i=(t+1)%e.length(),o=getPerpendicularVector(e.v[n],e.v[i]);return Math.atan2(0,1)-Math.atan2(o[1],o[0])}function zigZagCorner(e,t,n,i,o,a,r){var s=getProjectingAngle(t,n),c=t.v[n%t._length],l=t.v[0===n?t._length-1:n-1],d=t.v[(n+1)%t._length],p=2===a?Math.sqrt(Math.pow(c[0]-l[0],2)+Math.pow(c[1]-l[1],2)):0,h=2===a?Math.sqrt(Math.pow(c[0]-d[0],2)+Math.pow(c[1]-d[1],2)):0;setPoint(e,t.v[n%t._length],s,r,i,h/(2*(o+1)),p/(2*(o+1)))}function zigZagSegment(e,t,n,i,o,a){for(var r=0;r<i;r+=1){var s=(r+1)/(i+1),c=2===o?Math.sqrt(Math.pow(t.points[3][0]-t.points[0][0],2)+Math.pow(t.points[3][1]-t.points[0][1],2)):0,l=t.normalAngle(s);setPoint(e,t.point(s),l,a,n,c/(2*(i+1)),c/(2*(i+1))),a=-a}return a}function linearOffset(e,t,n){var i=Math.atan2(t[0]-e[0],t[1]-e[1]);return[polarOffset(e,i,n),polarOffset(t,i,n)]}function offsetSegment(e,t){var n,i,o,a,r,s,c;n=(c=linearOffset(e.points[0],e.points[1],t))[0],i=c[1],o=(c=linearOffset(e.points[1],e.points[2],t))[0],a=c[1],r=(c=linearOffset(e.points[2],e.points[3],t))[0],s=c[1];var l=lineIntersection(n,i,o,a);null===l&&(l=i);var d=lineIntersection(r,s,o,a);return null===d&&(d=r),new PolynomialBezier(n,l,d,s)}function joinLines(e,t,n,i,o){var a=t.points[3],r=n.points[0];if(3===i)return a;if(pointEqual(a,r))return a;if(2===i){var s=-t.tangentAngle(1),c=-n.tangentAngle(0)+Math.PI,l=lineIntersection(a,polarOffset(a,s+Math.PI/2,100),r,polarOffset(r,s+Math.PI/2,100)),d=l?pointDistance(l,a):pointDistance(a,r)/2,p=polarOffset(a,s,2*d*roundCorner);return e.setXYAt(p[0],p[1],"o",e.length()-1),p=polarOffset(r,c,2*d*roundCorner),e.setTripleAt(r[0],r[1],r[0],r[1],p[0],p[1],e.length()),r}var h=lineIntersection(pointEqual(a,t.points[2])?t.points[0]:t.points[2],a,r,pointEqual(r,n.points[1])?n.points[3]:n.points[1]);return h&&pointDistance(h,a)<o?(e.setTripleAt(h[0],h[1],h[0],h[1],h[0],h[1],e.length()),h):a}function getIntersection(e,t){var n=e.intersections(t);return n.length&&floatEqual(n[0][0],1)&&n.shift(),n.length?n[0]:null}function pruneSegmentIntersection(e,t){var n=e.slice(),i=t.slice(),o=getIntersection(e[e.length-1],t[0]);return o&&(n[e.length-1]=e[e.length-1].split(o[0])[0],i[0]=t[0].split(o[1])[1]),e.length>1&&t.length>1&&(o=getIntersection(e[0],t[t.length-1]))?[[e[0].split(o[0])[0]],[t[t.length-1].split(o[1])[1]]]:[n,i]}function pruneIntersections(e){for(var t,n=1;n<e.length;n+=1)t=pruneSegmentIntersection(e[n-1],e[n]),e[n-1]=t[0],e[n]=t[1];return e.length>1&&(t=pruneSegmentIntersection(e[e.length-1],e[0]),e[e.length-1]=t[0],e[0]=t[1]),e}function offsetSegmentSplit(e,t){var n,i,o,a,r=e.inflectionPoints();if(0===r.length)return[offsetSegment(e,t)];if(1===r.length||floatEqual(r[1],1))return n=(o=e.split(r[0]))[0],i=o[1],[offsetSegment(n,t),offsetSegment(i,t)];n=(o=e.split(r[0]))[0];var s=(r[1]-r[0])/(1-r[0]);return a=(o=o[1].split(s))[0],i=o[1],[offsetSegment(n,t),offsetSegment(a,t),offsetSegment(i,t)]}function OffsetPathModifier(){}function getFontProperties(e){for(var t=e.fStyle?e.fStyle.split(" "):[],n="normal",i="normal",o=t.length,a=0;a<o;a+=1)switch(t[a].toLowerCase()){case"italic":i="italic";break;case"bold":n="700";break;case"black":n="900";break;case"medium":n="500";break;case"regular":case"normal":n="400";break;case"light":case"thin":n="200"}return{style:i,weight:e.fWeight||n}}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(e,t.c,0,null,this),this.o=PropertyFactory.getProp(e,t.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(e,t.tr,this),this.so=PropertyFactory.getProp(e,t.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(e,t.tr.eo,0,.01,this),this.data=t,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(e,t,n,i,o,a){var r=a?-1:1,s=i.s.v[0]+(1-i.s.v[0])*(1-o),c=i.s.v[1]+(1-i.s.v[1])*(1-o);e.translate(i.p.v[0]*r*o,i.p.v[1]*r*o,i.p.v[2]),t.translate(-i.a.v[0],-i.a.v[1],i.a.v[2]),t.rotate(-i.r.v*r*o),t.translate(i.a.v[0],i.a.v[1],i.a.v[2]),n.translate(-i.a.v[0],-i.a.v[1],i.a.v[2]),n.scale(a?1/s:s,a?1/c:c),n.translate(i.a.v[0],i.a.v[1],i.a.v[2])},RepeaterModifier.prototype.init=function(e,t,n,i){for(this.elem=e,this.arr=t,this.pos=n,this.elemsData=i,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,t[n]);n>0;)n-=1,this._elements.unshift(t[n]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(e){var t,n=e.length;for(t=0;t<n;t+=1)e[t]._processed=!1,"gr"===e[t].ty&&this.resetElements(e[t].it)},RepeaterModifier.prototype.cloneElements=function(e){var t=JSON.parse(JSON.stringify(e));return this.resetElements(t),t},RepeaterModifier.prototype.changeGroupRender=function(e,t){var n,i=e.length;for(n=0;n<i;n+=1)e[n]._render=t,"gr"===e[n].ty&&this.changeGroupRender(e[n].it,t)},RepeaterModifier.prototype.processShapes=function(e){var t,n,i,o,a,r=!1;if(this._mdf||e){var s,c=Math.ceil(this.c.v);if(this._groups.length<c){for(;this._groups.length<c;){var l={it:this.cloneElements(this._elements),ty:"gr"};l.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,l),this._groups.splice(0,0,l),this._currentCopies+=1}this.elem.reloadShapes(),r=!0}for(a=0,i=0;i<=this._groups.length-1;i+=1){if(s=a<c,this._groups[i]._render=s,this.changeGroupRender(this._groups[i].it,s),!s){var d=this.elemsData[i].it,p=d[d.length-1];0!==p.transform.op.v?(p.transform.op._mdf=!0,p.transform.op.v=0):p.transform.op._mdf=!1}a+=1}this._currentCopies=c;var h=this.o.v,u=h%1,m=h>0?Math.floor(h):Math.ceil(h),f=this.pMatrix.props,g=this.rMatrix.props,y=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var v,b,x=0;if(h>0){for(;x<m;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),x+=1;u&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,u,!1),x+=u)}else if(h<0){for(;x>m;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),x-=1;u&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-u,!0),x-=u)}for(i=1===this.data.m?0:this._currentCopies-1,o=1===this.data.m?1:-1,a=this._currentCopies;a;){if(b=(n=(t=this.elemsData[i].it)[t.length-1].transform.mProps.v.props).length,t[t.length-1].transform.mProps._mdf=!0,t[t.length-1].transform.op._mdf=!0,t[t.length-1].transform.op.v=1===this._currentCopies?this.so.v:this.so.v+(this.eo.v-this.so.v)*(i/(this._currentCopies-1)),0!==x){for((0!==i&&1===o||i!==this._currentCopies-1&&-1===o)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],g[8],g[9],g[10],g[11],g[12],g[13],g[14],g[15]),this.matrix.transform(y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],y[8],y[9],y[10],y[11],y[12],y[13],y[14],y[15]),this.matrix.transform(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15]),v=0;v<b;v+=1)n[v]=this.matrix.props[v];this.matrix.reset()}else for(this.matrix.reset(),v=0;v<b;v+=1)n[v]=this.matrix.props[v];x+=1,a-=1,i+=o}}else for(a=this._currentCopies,i=0,o=1;a;)n=(t=this.elemsData[i].it)[t.length-1].transform.mProps.v.props,t[t.length-1].transform.mProps._mdf=!1,t[t.length-1].transform.op._mdf=!1,a-=1,i+=o;return r},RepeaterModifier.prototype.addShape=function(){},extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(e,t.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(e,t){var n,i=shapePool.newElement();i.c=e.c;var o,a,r,s,c,l,d,p,h,u,m,f,g=e._length,y=0;for(n=0;n<g;n+=1)o=e.v[n],r=e.o[n],a=e.i[n],o[0]===r[0]&&o[1]===r[1]&&o[0]===a[0]&&o[1]===a[1]?0!==n&&n!==g-1||e.c?(s=0===n?e.v[g-1]:e.v[n-1],l=(c=Math.sqrt(Math.pow(o[0]-s[0],2)+Math.pow(o[1]-s[1],2)))?Math.min(c/2,t)/c:0,d=m=o[0]+(s[0]-o[0])*l,p=f=o[1]-(o[1]-s[1])*l,h=d-(d-o[0])*roundCorner,u=p-(p-o[1])*roundCorner,i.setTripleAt(d,p,h,u,m,f,y),y+=1,s=n===g-1?e.v[0]:e.v[n+1],l=(c=Math.sqrt(Math.pow(o[0]-s[0],2)+Math.pow(o[1]-s[1],2)))?Math.min(c/2,t)/c:0,d=h=o[0]+(s[0]-o[0])*l,p=u=o[1]+(s[1]-o[1])*l,m=d-(d-o[0])*roundCorner,f=p-(p-o[1])*roundCorner,i.setTripleAt(d,p,h,u,m,f,y),y+=1):(i.setTripleAt(o[0],o[1],r[0],r[1],a[0],a[1],y),y+=1):(i.setTripleAt(e.v[n][0],e.v[n][1],e.o[n][0],e.o[n][1],e.i[n][0],e.i[n][1],y),y+=1);return i},RoundCornersModifier.prototype.processShapes=function(e){var t,n,i,o,a,r,s=this.shapes.length,c=this.rd.v;if(0!==c)for(n=0;n<s;n+=1){if(r=(a=this.shapes[n]).localShapeCollection,a.shape._mdf||this._mdf||e)for(r.releaseShapes(),a.shape._mdf=!0,t=a.shape.paths.shapes,o=a.shape.paths._length,i=0;i<o;i+=1)r.addShape(this.processPath(t[i],c));a.shape.paths=a.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},PolynomialBezier.prototype.point=function(e){return[((this.a[0]*e+this.b[0])*e+this.c[0])*e+this.d[0],((this.a[1]*e+this.b[1])*e+this.c[1])*e+this.d[1]]},PolynomialBezier.prototype.derivative=function(e){return[(3*e*this.a[0]+2*this.b[0])*e+this.c[0],(3*e*this.a[1]+2*this.b[1])*e+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(e){var t=this.derivative(e);return Math.atan2(t[1],t[0])},PolynomialBezier.prototype.normalAngle=function(e){var t=this.derivative(e);return Math.atan2(t[0],t[1])},PolynomialBezier.prototype.inflectionPoints=function(){var e=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(e))return[];var t=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/e,n=t*t-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/e;if(n<0)return[];var i=Math.sqrt(n);return floatZero(i)?i>0&&i<1?[t]:[]:[t-i,t+i].filter((function(e){return e>0&&e<1}))},PolynomialBezier.prototype.split=function(e){if(e<=0)return[singlePoint(this.points[0]),this];if(e>=1)return[this,singlePoint(this.points[this.points.length-1])];var t=lerpPoint(this.points[0],this.points[1],e),n=lerpPoint(this.points[1],this.points[2],e),i=lerpPoint(this.points[2],this.points[3],e),o=lerpPoint(t,n,e),a=lerpPoint(n,i,e),r=lerpPoint(o,a,e);return[new PolynomialBezier(this.points[0],t,o,r,!0),new PolynomialBezier(r,a,i,this.points[3],!0)]},PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var e=this.bounds();return{left:e.x.min,right:e.x.max,top:e.y.min,bottom:e.y.max,width:e.x.max-e.x.min,height:e.y.max-e.y.min,cx:(e.x.max+e.x.min)/2,cy:(e.y.max+e.y.min)/2}},PolynomialBezier.prototype.intersections=function(e,t,n){void 0===t&&(t=2),void 0===n&&(n=7);var i=[];return intersectsImpl(intersectData(this,0,1),intersectData(e,0,1),0,t,i,n),i},PolynomialBezier.shapeSegment=function(e,t){var n=(t+1)%e.length();return new PolynomialBezier(e.v[t],e.o[t],e.i[n],e.v[n],!0)},PolynomialBezier.shapeSegmentInverted=function(e,t){var n=(t+1)%e.length();return new PolynomialBezier(e.v[n],e.i[n],e.o[t],e.v[t],!0)},extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(e,t.s,0,null,this),this.frequency=PropertyFactory.getProp(e,t.r,0,null,this),this.pointsType=PropertyFactory.getProp(e,t.pt,0,null,this),this._isAnimated=0!==this.amplitude.effectsSequence.length||0!==this.frequency.effectsSequence.length||0!==this.pointsType.effectsSequence.length},ZigZagModifier.prototype.processPath=function(e,t,n,i){var o=e._length,a=shapePool.newElement();if(a.c=e.c,e.c||(o-=1),0===o)return a;var r=-1,s=PolynomialBezier.shapeSegment(e,0);zigZagCorner(a,e,0,t,n,i,r);for(var c=0;c<o;c+=1)r=zigZagSegment(a,s,t,n,i,-r),s=c!==o-1||e.c?PolynomialBezier.shapeSegment(e,(c+1)%o):null,zigZagCorner(a,e,c+1,t,n,i,r);return a},ZigZagModifier.prototype.processShapes=function(e){var t,n,i,o,a,r,s=this.shapes.length,c=this.amplitude.v,l=Math.max(0,Math.round(this.frequency.v)),d=this.pointsType.v;if(0!==c)for(n=0;n<s;n+=1){if(r=(a=this.shapes[n]).localShapeCollection,a.shape._mdf||this._mdf||e)for(r.releaseShapes(),a.shape._mdf=!0,t=a.shape.paths.shapes,o=a.shape.paths._length,i=0;i<o;i+=1)r.addShape(this.processPath(t[i],c,l,d));a.shape.paths=a.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(e,t.a,0,null,this),this.miterLimit=PropertyFactory.getProp(e,t.ml,0,null,this),this.lineJoin=t.lj,this._isAnimated=0!==this.amount.effectsSequence.length},OffsetPathModifier.prototype.processPath=function(e,t,n,i){var o=shapePool.newElement();o.c=e.c;var a,r,s,c=e.length();e.c||(c-=1);var l=[];for(a=0;a<c;a+=1)s=PolynomialBezier.shapeSegment(e,a),l.push(offsetSegmentSplit(s,t));if(!e.c)for(a=c-1;a>=0;a-=1)s=PolynomialBezier.shapeSegmentInverted(e,a),l.push(offsetSegmentSplit(s,t));l=pruneIntersections(l);var d=null,p=null;for(a=0;a<l.length;a+=1){var h=l[a];for(p&&(d=joinLines(o,p,h[0],n,i)),p=h[h.length-1],r=0;r<h.length;r+=1)s=h[r],d&&pointEqual(s.points[0],d)?o.setXYAt(s.points[1][0],s.points[1][1],"o",o.length()-1):o.setTripleAt(s.points[0][0],s.points[0][1],s.points[1][0],s.points[1][1],s.points[0][0],s.points[0][1],o.length()),o.setTripleAt(s.points[3][0],s.points[3][1],s.points[3][0],s.points[3][1],s.points[2][0],s.points[2][1],o.length()),d=s.points[3]}return l.length&&joinLines(o,p,l[0][0],n,i),o},OffsetPathModifier.prototype.processShapes=function(e){var t,n,i,o,a,r,s=this.shapes.length,c=this.amount.v,l=this.miterLimit.v,d=this.lineJoin;if(0!==c)for(n=0;n<s;n+=1){if(r=(a=this.shapes[n]).localShapeCollection,a.shape._mdf||this._mdf||e)for(r.releaseShapes(),a.shape._mdf=!0,t=a.shape.paths.shapes,o=a.shape.paths._length,i=0;i<o;i+=1)r.addShape(this.processPath(t[i],c,d,l));a.shape.paths=a.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var FontManager=function(){var e={w:0,size:0,shapes:[],data:{shapes:[]}},t=[];t=t.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var n=127988,i=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function o(e,t){var n=createTag("span");n.setAttribute("aria-hidden",!0),n.style.fontFamily=t;var i=createTag("span");i.innerText="giItT1WQy@!-/#",n.style.position="absolute",n.style.left="-10000px",n.style.top="-10000px",n.style.fontSize="300px",n.style.fontVariant="normal",n.style.fontStyle="normal",n.style.fontWeight="normal",n.style.letterSpacing="0",n.appendChild(i),document.body.appendChild(n);var o=i.offsetWidth;return i.style.fontFamily=function(e){var t,n=e.split(","),i=n.length,o=[];for(t=0;t<i;t+=1)"sans-serif"!==n[t]&&"monospace"!==n[t]&&o.push(n[t]);return o.join(",")}(e)+", "+t,{node:i,w:o,parent:n}}function a(e,t){var n,i=document.body&&t?"svg":"canvas",o=getFontProperties(e);if("svg"===i){var a=createNS("text");a.style.fontSize="100px",a.setAttribute("font-family",e.fFamily),a.setAttribute("font-style",o.style),a.setAttribute("font-weight",o.weight),a.textContent="1",e.fClass?(a.style.fontFamily="inherit",a.setAttribute("class",e.fClass)):a.style.fontFamily=e.fFamily,t.appendChild(a),n=a}else{var r=new OffscreenCanvas(500,500).getContext("2d");r.font=o.style+" "+o.weight+" 100px "+e.fFamily,n=r}return{measureText:function(e){return"svg"===i?(n.textContent=e,n.getComputedTextLength()):n.measureText(e).width}}}function r(e){var t=0,n=e.charCodeAt(0);if(n>=55296&&n<=56319){var i=e.charCodeAt(1);i>=56320&&i<=57343&&(t=1024*(n-55296)+i-56320+65536)}return t}function s(e){var t=r(e);return t>=127462&&t<=127487}var c=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};c.isModifier=function(e,t){var n=e.toString(16)+t.toString(16);return-1!==i.indexOf(n)},c.isZeroWidthJoiner=function(e){return 8205===e},c.isFlagEmoji=function(e){return s(e.substr(0,2))&&s(e.substr(2,2))},c.isRegionalCode=s,c.isCombinedCharacter=function(e){return-1!==t.indexOf(e)},c.isRegionalFlag=function(e,t){var i=r(e.substr(t,2));if(i!==n)return!1;var o=0;for(t+=2;o<5;){if((i=r(e.substr(t,2)))<917601||i>917626)return!1;o+=1,t+=2}return 917631===r(e.substr(t,2))},c.isVariationSelector=function(e){return 65039===e},c.BLACK_FLAG_CODE_POINT=n;var l={addChars:function(e){if(e){var t;this.chars||(this.chars=[]);var n,i,o=e.length,a=this.chars.length;for(t=0;t<o;t+=1){for(n=0,i=!1;n<a;)this.chars[n].style===e[t].style&&this.chars[n].fFamily===e[t].fFamily&&this.chars[n].ch===e[t].ch&&(i=!0),n+=1;i||(this.chars.push(e[t]),a+=1)}}},addFonts:function(e,t){if(e){if(this.chars)return this.isLoaded=!0,void(this.fonts=e.list);if(!document.body)return this.isLoaded=!0,e.list.forEach((function(e){e.helper=a(e),e.cache={}})),void(this.fonts=e.list);var n,i=e.list,r=i.length,s=r;for(n=0;n<r;n+=1){var c,l,d=!0;if(i[n].loaded=!1,i[n].monoCase=o(i[n].fFamily,"monospace"),i[n].sansCase=o(i[n].fFamily,"sans-serif"),i[n].fPath){if("p"===i[n].fOrigin||3===i[n].origin){if((c=document.querySelectorAll('style[f-forigin="p"][f-family="'+i[n].fFamily+'"], style[f-origin="3"][f-family="'+i[n].fFamily+'"]')).length>0&&(d=!1),d){var p=createTag("style");p.setAttribute("f-forigin",i[n].fOrigin),p.setAttribute("f-origin",i[n].origin),p.setAttribute("f-family",i[n].fFamily),p.type="text/css",p.innerText="@font-face {font-family: "+i[n].fFamily+"; font-style: normal; src: url('"+i[n].fPath+"');}",t.appendChild(p)}}else if("g"===i[n].fOrigin||1===i[n].origin){for(c=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),l=0;l<c.length;l+=1)-1!==c[l].href.indexOf(i[n].fPath)&&(d=!1);if(d){var h=createTag("link");h.setAttribute("f-forigin",i[n].fOrigin),h.setAttribute("f-origin",i[n].origin),h.type="text/css",h.rel="stylesheet",h.href=i[n].fPath,document.body.appendChild(h)}}else if("t"===i[n].fOrigin||2===i[n].origin){for(c=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),l=0;l<c.length;l+=1)i[n].fPath===c[l].src&&(d=!1);if(d){var u=createTag("link");u.setAttribute("f-forigin",i[n].fOrigin),u.setAttribute("f-origin",i[n].origin),u.setAttribute("rel","stylesheet"),u.setAttribute("href",i[n].fPath),t.appendChild(u)}}}else i[n].loaded=!0,s-=1;i[n].helper=a(i[n],t),i[n].cache={},this.fonts.push(i[n])}0===s?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},getCharData:function(t,n,i){for(var o=0,a=this.chars.length;o<a;){if(this.chars[o].ch===t&&this.chars[o].style===n&&this.chars[o].fFamily===i)return this.chars[o];o+=1}return("string"==typeof t&&13!==t.charCodeAt(0)||!t)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",t,n,i)),e},getFontByName:function(e){for(var t=0,n=this.fonts.length;t<n;){if(this.fonts[t].fName===e)return this.fonts[t];t+=1}return this.fonts[0]},measureText:function(e,t,n){var i=this.getFontByName(t),o=e;if(!i.cache[o]){var a=i.helper;if(" "===e){var r=a.measureText("|"+e+"|"),s=a.measureText("||");i.cache[o]=(r-s)/100}else i.cache[o]=a.measureText(e)/100}return i.cache[o]*n},checkLoadedFonts:function(){var e,t,n,i=this.fonts.length,o=i;for(e=0;e<i;e+=1)this.fonts[e].loaded?o-=1:"n"===this.fonts[e].fOrigin||0===this.fonts[e].origin?this.fonts[e].loaded=!0:(t=this.fonts[e].monoCase.node,n=this.fonts[e].monoCase.w,t.offsetWidth!==n?(o-=1,this.fonts[e].loaded=!0):(t=this.fonts[e].sansCase.node,n=this.fonts[e].sansCase.w,t.offsetWidth!==n&&(o-=1,this.fonts[e].loaded=!0)),this.fonts[e].loaded&&(this.fonts[e].sansCase.parent.parentNode.removeChild(this.fonts[e].sansCase.parent),this.fonts[e].monoCase.parent.parentNode.removeChild(this.fonts[e].monoCase.parent)));0!==o&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)},setIsLoaded:function(){this.isLoaded=!0}};return c.prototype=l,c}();function SlotManager(e){this.animationData=e}function slotFactory(e){return new SlotManager(e)}function RenderableElement(){}SlotManager.prototype.getProp=function(e){return this.animationData.slots&&this.animationData.slots[e.sid]?Object.assign(e,this.animationData.slots[e.sid].p):e},RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(e){-1===this.renderableComponents.indexOf(e)&&this.renderableComponents.push(e)},removeRenderableComponent:function(e){-1!==this.renderableComponents.indexOf(e)&&this.renderableComponents.splice(this.renderableComponents.indexOf(e),1)},prepareRenderableFrame:function(e){this.checkLayerLimits(e)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(e){this.data.ip-this.data.st<=e&&this.data.op-this.data.st>e?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var e,t=this.renderableComponents.length;for(e=0;e<t;e+=1)this.renderableComponents[e].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=(blendModeEnums={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"},function(e){return blendModeEnums[e]||""}),blendModeEnums;function SliderEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function AngleEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function ColorEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,1,0,n)}function PointEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,1,0,n)}function LayerIndexEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function MaskIndexEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function CheckboxEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function NoValueEffect(){this.p={}}function EffectsManager(e,t){var n,i=e.ef||[];this.effectElements=[];var o,a=i.length;for(n=0;n<a;n+=1)o=new GroupEffect(i[n],t),this.effectElements.push(o)}function GroupEffect(e,t){this.init(e,t)}function BaseElement(){}function FrameElement(){}function FootageElement(e,t,n){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(e.refId),this.footageData=t.imageLoader.getAsset(this.assetData),this.initBaseData(e,t,n)}function AudioElement(e,t,n){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(e.refId),this.initBaseData(e,t,n),this._isPlaying=!1,this._canPlay=!1;var i=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(i),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,e.au&&e.au.lv?e.au.lv:{k:[100]},1,.01,this)}function BaseRenderer(){}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(e,t){var n;this.data=e,this.effectElements=[],this.initDynamicPropertyContainer(t);var i,o=this.data.ef.length,a=this.data.ef;for(n=0;n<o;n+=1){switch(i=null,a[n].ty){case 0:i=new SliderEffect(a[n],t,this);break;case 1:i=new AngleEffect(a[n],t,this);break;case 2:i=new ColorEffect(a[n],t,this);break;case 3:i=new PointEffect(a[n],t,this);break;case 4:case 7:i=new CheckboxEffect(a[n],t,this);break;case 10:i=new LayerIndexEffect(a[n],t,this);break;case 11:i=new MaskIndexEffect(a[n],t,this);break;case 5:i=new EffectsManager(a[n],t);break;default:i=new NoValueEffect(a[n])}i&&this.effectElements.push(i)}},BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var e=0,t=this.data.masksProperties.length;e<t;){if("n"!==this.data.masksProperties[e].mode&&!1!==this.data.masksProperties[e].cl)return!0;e+=1}return!1},initExpressions:function(){var e=getExpressionInterfaces();if(e){var t=e("layer"),n=e("effects"),i=e("shape"),o=e("text"),a=e("comp");this.layerInterface=t(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var r=n.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(r),0===this.data.ty||this.data.xt?this.compInterface=a(this):4===this.data.ty?(this.layerInterface.shapeInterface=i(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=o(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var e=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=e},initBaseData:function(e,t,n){this.globalData=t,this.comp=n,this.data=e,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(e,t){var n,i=this.dynamicProperties.length;for(n=0;n<i;n+=1)(t||this._isParent&&"transform"===this.dynamicProperties[n].propType)&&(this.dynamicProperties[n].getValue(),this.dynamicProperties[n]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(e){-1===this.dynamicProperties.indexOf(e)&&this.dynamicProperties.push(e)}},FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var e=getExpressionInterfaces();if(e){var t=e("footage");this.layerInterface=t(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData},AudioElement.prototype.prepareFrame=function(e){if(this.prepareRenderableFrame(e,!0),this.prepareProperties(e,!0),this.tm._placeholder)this._currentTime=e/this.data.sr;else{var t=this.tm.v;this._currentTime=t}this._volume=this.lv.v[0];var n=this._volume*this._volumeMultiplier;this._previousVolume!==n&&(this._previousVolume=n,this.audio.volume(n))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(e){this.audio.rate(e)},AudioElement.prototype.volume=function(e){this._volumeMultiplier=e,this._previousVolume=e*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},BaseRenderer.prototype.checkLayers=function(e){var t,n,i=this.layers.length;for(this.completeLayers=!0,t=i-1;t>=0;t-=1)this.elements[t]||(n=this.layers[t]).ip-n.st<=e-this.layers[t].st&&n.op-n.st>e-this.layers[t].st&&this.buildItem(t),this.completeLayers=!!this.elements[t]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(e){switch(e.ty){case 2:return this.createImage(e);case 0:return this.createComp(e);case 1:return this.createSolid(e);case 3:default:return this.createNull(e);case 4:return this.createShape(e);case 5:return this.createText(e);case 6:return this.createAudio(e);case 13:return this.createCamera(e);case 15:return this.createFootage(e)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(e){return new AudioElement(e,this.globalData,this)},BaseRenderer.prototype.createFootage=function(e){return new FootageElement(e,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)this.buildItem(e);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(e){var t;this.completeLayers=!1;var n,i=e.length,o=this.layers.length;for(t=0;t<i;t+=1)for(n=0;n<o;){if(this.layers[n].id===e[t].id){this.layers[n]=e[t];break}n+=1}},BaseRenderer.prototype.setProjectInterface=function(e){this.globalData.projectInterface=e},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(e,t,n){for(var i=this.elements,o=this.layers,a=0,r=o.length;a<r;)o[a].ind==t&&(i[a]&&!0!==i[a]?(n.push(i[a]),i[a].setAsParent(),void 0!==o[a].parent?this.buildElementParenting(e,o[a].parent,n):e.setHierarchy(n)):(this.buildItem(a),this.addPendingElement(e))),a+=1},BaseRenderer.prototype.addPendingElement=function(e){this.pendingElements.push(e)},BaseRenderer.prototype.searchExtraCompositions=function(e){var t,n=e.length;for(t=0;t<n;t+=1)if(e[t].xt){var i=this.createComp(e[t]);i.initExpressions(),this.globalData.projectInterface.registerComposition(i)}},BaseRenderer.prototype.getElementById=function(e){var t,n=this.elements.length;for(t=0;t<n;t+=1)if(this.elements[t].data.ind===e)return this.elements[t];return null},BaseRenderer.prototype.getElementByPath=function(e){var t,n=e.shift();if("number"==typeof n)t=this.elements[n];else{var i,o=this.elements.length;for(i=0;i<o;i+=1)if(this.elements[i].data.nm===n){t=this.elements[i];break}}return 0===e.length?t:t.getElementByPath(e)},BaseRenderer.prototype.setupGlobalData=function(e,t){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(e),this.globalData.fontManager.addChars(e.chars),this.globalData.fontManager.addFonts(e.fonts,t),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=e.fr,this.globalData.nm=e.nm,this.globalData.compSize={w:e.w,h:e.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}function MaskElement(e,t,n){this.data=e,this.element=t,this.globalData=n,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var i,o,a=this.globalData.defs,r=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(r),this.solidPath="";var s,c,l,d,p,h,u=this.masksProperties,m=0,f=[],g=createElementID(),y="clipPath",v="clip-path";for(i=0;i<r;i+=1)if(("a"!==u[i].mode&&"n"!==u[i].mode||u[i].inv||100!==u[i].o.k||u[i].o.x)&&(y="mask",v="mask"),"s"!==u[i].mode&&"i"!==u[i].mode||0!==m?l=null:((l=createNS("rect")).setAttribute("fill","#ffffff"),l.setAttribute("width",this.element.comp.data.w||0),l.setAttribute("height",this.element.comp.data.h||0),f.push(l)),o=createNS("path"),"n"===u[i].mode)this.viewData[i]={op:PropertyFactory.getProp(this.element,u[i].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,u[i],3),elem:o,lastPath:""},a.appendChild(o);else{var b;if(m+=1,o.setAttribute("fill","s"===u[i].mode?"#000000":"#ffffff"),o.setAttribute("clip-rule","nonzero"),0!==u[i].x.k?(y="mask",v="mask",h=PropertyFactory.getProp(this.element,u[i].x,0,null,this.element),b=createElementID(),(d=createNS("filter")).setAttribute("id",b),(p=createNS("feMorphology")).setAttribute("operator","erode"),p.setAttribute("in","SourceGraphic"),p.setAttribute("radius","0"),d.appendChild(p),a.appendChild(d),o.setAttribute("stroke","s"===u[i].mode?"#000000":"#ffffff")):(p=null,h=null),this.storedData[i]={elem:o,x:h,expan:p,lastPath:"",lastOperator:"",filterId:b,lastRadius:0},"i"===u[i].mode){c=f.length;var x=createNS("g");for(s=0;s<c;s+=1)x.appendChild(f[s]);var _=createNS("mask");_.setAttribute("mask-type","alpha"),_.setAttribute("id",g+"_"+m),_.appendChild(o),a.appendChild(_),x.setAttribute("mask","url("+getLocationHref()+"#"+g+"_"+m+")"),f.length=0,f.push(x)}else f.push(o);u[i].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[i]={elem:o,lastPath:"",op:PropertyFactory.getProp(this.element,u[i].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,u[i],3),invRect:l},this.viewData[i].prop.k||this.drawPath(u[i],this.viewData[i].prop.v,this.viewData[i])}for(this.maskElement=createNS(y),r=f.length,i=0;i<r;i+=1)this.maskElement.appendChild(f[i]);m>0&&(this.maskElement.setAttribute("id",g),this.element.maskedElement.setAttribute(v,"url("+getLocationHref()+"#"+g+")"),a.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}TransformElement.prototype={initTransform:function(){var e=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:e,localMat:e,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var e,t=this.finalTransform.mat,n=0,i=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;n<i;){if(this.hierarchy[n].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}n+=1}if(this.finalTransform._matMdf)for(e=this.finalTransform.mProp.v.props,t.cloneFromProps(e),n=0;n<i;n+=1)t.multiply(this.hierarchy[n].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var e=0,t=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;e<t;)this.localTransforms[e]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[e]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),e+=1;if(this.finalTransform._localMatMdf){var n=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(n),e=1;e<t;e+=1){var i=this.localTransforms[e].matrix;n.multiply(i)}n.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var o=this.finalTransform.localOpacity;for(e=0;e<t;e+=1)o*=.01*this.localTransforms[e].opacity;this.finalTransform.localOpacity=o}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var e=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(e.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var t=0,n=e.length;for(t=0;t<n;t+=1)this.localTransforms.push(e[t])}}},globalToLocal:function(e){var t=[];t.push(this.finalTransform);for(var n,i=!0,o=this.comp;i;)o.finalTransform?(o.data.hasMask&&t.splice(0,0,o.finalTransform),o=o.comp):i=!1;var a,r=t.length;for(n=0;n<r;n+=1)a=t[n].mat.applyToPointArray(0,0,0),e=[e[0]-a[0],e[1]-a[1],0];return e},mHelper:new Matrix},MaskElement.prototype.getMaskProperty=function(e){return this.viewData[e].prop},MaskElement.prototype.renderFrame=function(e){var t,n=this.element.finalTransform.mat,i=this.masksProperties.length;for(t=0;t<i;t+=1)if((this.viewData[t].prop._mdf||e)&&this.drawPath(this.masksProperties[t],this.viewData[t].prop.v,this.viewData[t]),(this.viewData[t].op._mdf||e)&&this.viewData[t].elem.setAttribute("fill-opacity",this.viewData[t].op.v),"n"!==this.masksProperties[t].mode&&(this.viewData[t].invRect&&(this.element.finalTransform.mProp._mdf||e)&&this.viewData[t].invRect.setAttribute("transform",n.getInverseMatrix().to2dCSS()),this.storedData[t].x&&(this.storedData[t].x._mdf||e))){var o=this.storedData[t].expan;this.storedData[t].x.v<0?("erode"!==this.storedData[t].lastOperator&&(this.storedData[t].lastOperator="erode",this.storedData[t].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[t].filterId+")")),o.setAttribute("radius",-this.storedData[t].x.v)):("dilate"!==this.storedData[t].lastOperator&&(this.storedData[t].lastOperator="dilate",this.storedData[t].elem.setAttribute("filter",null)),this.storedData[t].elem.setAttribute("stroke-width",2*this.storedData[t].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var e="M0,0 ";return e+=" h"+this.globalData.compSize.w,e+=" v"+this.globalData.compSize.h,(e+=" h-"+this.globalData.compSize.w)+" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(e,t,n){var i,o,a=" M"+t.v[0][0]+","+t.v[0][1];for(o=t._length,i=1;i<o;i+=1)a+=" C"+t.o[i-1][0]+","+t.o[i-1][1]+" "+t.i[i][0]+","+t.i[i][1]+" "+t.v[i][0]+","+t.v[i][1];if(t.c&&o>1&&(a+=" C"+t.o[i-1][0]+","+t.o[i-1][1]+" "+t.i[0][0]+","+t.i[0][1]+" "+t.v[0][0]+","+t.v[0][1]),n.lastPath!==a){var r="";n.elem&&(t.c&&(r=e.inv?this.solidPath+a:a),n.elem.setAttribute("d",r)),n.lastPath=a}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var e={createFilter:function(e,t){var n=createNS("filter");return n.setAttribute("id",e),!0!==t&&(n.setAttribute("filterUnits","objectBoundingBox"),n.setAttribute("x","0%"),n.setAttribute("y","0%"),n.setAttribute("width","100%"),n.setAttribute("height","100%")),n},createAlphaToLuminanceFilter:function(){var e=createNS("feColorMatrix");return e.setAttribute("type","matrix"),e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),e}};return e}(),featureSupport=function(){var e={maskType:!0,svgLumaHidden:!0,offscreenCanvas:"undefined"!=typeof OffscreenCanvas};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(e.maskType=!1),/firefox/i.test(navigator.userAgent)&&(e.svgLumaHidden=!1),e}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(e){var t,n,i="SourceGraphic",o=e.data.ef?e.data.ef.length:0,a=createElementID(),r=filtersFactory.createFilter(a,!0),s=0;for(this.filters=[],t=0;t<o;t+=1){n=null;var c=e.data.ef[t].ty;registeredEffects$1[c]&&(n=new registeredEffects$1[c].effect(r,e.effectsManager.effectElements[t],e,idPrefix+s,i),i=idPrefix+s,registeredEffects$1[c].countsAsEffect&&(s+=1)),n&&this.filters.push(n)}s&&(e.globalData.defs.appendChild(r),e.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+a+")")),this.filters.length&&e.addRenderableComponent(this)}function registerEffect$1(e,t,n){registeredEffects$1[e]={effect:t,countsAsEffect:n}}function SVGBaseElement(){}function HierarchyElement(){}function RenderableDOMElement(){}function IImageElement(e,t,n){this.assetData=t.getAssetData(e.refId),this.assetData&&this.assetData.sid&&(this.assetData=t.slotManager.getProp(this.assetData)),this.initElement(e,t,n),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ProcessedElement(e,t){this.elem=e,this.pos=t}function IShapeElement(){}SVGEffects.prototype.renderFrame=function(e){var t,n=this.filters.length;for(t=0;t<n;t+=1)this.filters[t].renderFrame(e)},SVGEffects.prototype.getEffects=function(e){var t,n=this.filters.length,i=[];for(t=0;t<n;t+=1)this.filters[t].type===e&&i.push(this.filters[t]);return i},SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var e=null;if(this.data.td){this.matteMasks={};var t=createNS("g");t.setAttribute("id",this.layerId),t.appendChild(this.layerElement),e=t,this.globalData.defs.appendChild(t)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),e=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0===this.data.ty&&!this.data.hd){var n=createNS("clipPath"),i=createNS("path");i.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var o=createElementID();if(n.setAttribute("id",o),n.appendChild(i),this.globalData.defs.appendChild(n),this.checkMasks()){var a=createNS("g");a.setAttribute("clip-path","url("+getLocationHref()+"#"+o+")"),a.appendChild(this.layerElement),this.transformedElement=a,e?e.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+o+")")}0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(e){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[e]){var t,n,i,o,a=this.layerId+"_"+e;if(1===e||3===e){var r=createNS("mask");r.setAttribute("id",a),r.setAttribute("mask-type",3===e?"luminance":"alpha"),(i=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),r.appendChild(i),this.globalData.defs.appendChild(r),featureSupport.maskType||1!==e||(r.setAttribute("mask-type","luminance"),t=createElementID(),n=filtersFactory.createFilter(t),this.globalData.defs.appendChild(n),n.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(o=createNS("g")).appendChild(i),r.appendChild(o),o.setAttribute("filter","url("+getLocationHref()+"#"+t+")"))}else if(2===e){var s=createNS("mask");s.setAttribute("id",a),s.setAttribute("mask-type","alpha");var c=createNS("g");s.appendChild(c),t=createElementID(),n=filtersFactory.createFilter(t);var l=createNS("feComponentTransfer");l.setAttribute("in","SourceGraphic"),n.appendChild(l);var d=createNS("feFuncA");d.setAttribute("type","table"),d.setAttribute("tableValues","1.0 0.0"),l.appendChild(d),this.globalData.defs.appendChild(n);var p=createNS("rect");p.setAttribute("width",this.comp.data.w),p.setAttribute("height",this.comp.data.h),p.setAttribute("x","0"),p.setAttribute("y","0"),p.setAttribute("fill","#ffffff"),p.setAttribute("opacity","0"),c.setAttribute("filter","url("+getLocationHref()+"#"+t+")"),c.appendChild(p),(i=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),c.appendChild(i),featureSupport.maskType||(s.setAttribute("mask-type","luminance"),n.appendChild(filtersFactory.createAlphaToLuminanceFilter()),o=createNS("g"),c.appendChild(p),o.appendChild(this.layerElement),c.appendChild(o)),this.globalData.defs.appendChild(s)}this.matteMasks[e]=a}return this.matteMasks[e]},setMatte:function(e){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+e+")")}},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(e){this.hierarchy=e},setAsParent:function(){this._isParent=!0},checkParenting:function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(e,t,n){this.initFrame(),this.initBaseData(e,t,n),this.initTransform(e,t,n),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},IShapeElement.prototype={addShapeToModifiers:function(e){var t,n=this.shapeModifiers.length;for(t=0;t<n;t+=1)this.shapeModifiers[t].addShape(e)},isShapeInAnimatedModifiers:function(e){for(var t=this.shapeModifiers.length;0<t;)if(this.shapeModifiers[0].isAnimatedWithShape(e))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var e,t=this.shapes.length;for(e=0;e<t;e+=1)this.shapes[e].sh.reset();for(e=(t=this.shapeModifiers.length)-1;e>=0&&!this.shapeModifiers[e].processShapes(this._isFirstFrame);e-=1);}},searchProcessedElement:function(e){for(var t=this.processedElements,n=0,i=t.length;n<i;){if(t[n].elem===e)return t[n].pos;n+=1}return 0},addProcessedElement:function(e,t){for(var n=this.processedElements,i=n.length;i;)if(n[i-=1].elem===e)return void(n[i].pos=t);n.push(new ProcessedElement(e,t))},prepareFrame:function(e){this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(e,t,n){this.caches=[],this.styles=[],this.transformers=e,this.lStr="",this.sh=n,this.lvl=t,this._isAnimated=!!n.k;for(var i=0,o=e.length;i<o;){if(e[i].mProps.dynamicProperties.length){this._isAnimated=!0;break}i+=1}}function SVGStyleData(e,t){this.data=e,this.type=e.ty,this.d="",this.lvl=t,this._mdf=!1,this.closed=!0===e.hd,this.pElem=createNS("path"),this.msElem=null}function DashProperty(e,t,n,i){var o;this.elem=e,this.frameId=-1,this.dataProps=createSizedArray(t.length),this.renderer=n,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",t.length?t.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(i);var a,r=t.length||0;for(o=0;o<r;o+=1)a=PropertyFactory.getProp(e,t[o].v,0,0,this),this.k=a.k||this.k,this.dataProps[o]={n:t[o].n,p:a};this.k||this.getValue(!0),this._isAnimated=this.k}function SVGStrokeStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.w=PropertyFactory.getProp(e,t.w,0,null,this),this.d=new DashProperty(e,t.d||{},"svg",this),this.c=PropertyFactory.getProp(e,t.c,1,255,this),this.style=n,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.c=PropertyFactory.getProp(e,t.c,1,255,this),this.style=n}function SVGNoStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.style=n}function GradientProperty(e,t,n){this.data=t,this.c=createTypedArray("uint8c",4*t.p);var i=t.k.k[0].s?t.k.k[0].s.length-4*t.p:t.k.k.length-4*t.p;this.o=createTypedArray("float32",i),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=i,this.initDynamicPropertyContainer(n),this.prop=PropertyFactory.getProp(e,t.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}function SVGGradientFillStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.initGradientData(e,t,n)}function SVGGradientStrokeStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(e,t.w,0,null,this),this.d=new DashProperty(e,t.d||{},"svg",this),this.initGradientData(e,t,n),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(e,t,n){this.transform={mProps:e,op:t,container:n},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},DashProperty.prototype.getValue=function(e){if((this.elem.globalData.frameId!==this.frameId||e)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||e,this._mdf)){var t=0,n=this.dataProps.length;for("svg"===this.renderer&&(this.dashStr=""),t=0;t<n;t+=1)"o"!==this.dataProps[t].n?"svg"===this.renderer?this.dashStr+=" "+this.dataProps[t].p.v:this.dashArray[t]=this.dataProps[t].p.v:this.dashoffset[0]=this.dataProps[t].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),extendPrototype([DynamicPropertyContainer],SVGNoStyleData),GradientProperty.prototype.comparePoints=function(e,t){for(var n=0,i=this.o.length/2;n<i;){if(Math.abs(e[4*n]-e[4*t+2*n])>.01)return!1;n+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var e=0,t=this.data.k.k.length;e<t;){if(!this.comparePoints(this.data.k.k[e].s,this.data.p))return!1;e+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(e){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||e){var t,n,i,o=4*this.data.p;for(t=0;t<o;t+=1)n=t%4==0?100:255,i=Math.round(this.prop.v[t]*n),this.c[t]!==i&&(this.c[t]=i,this._cmdf=!e);if(this.o.length)for(o=this.prop.v.length,t=4*this.data.p;t<o;t+=1)n=t%2==0?100:1,i=t%2==0?Math.round(100*this.prop.v[t]):this.prop.v[t],this.o[t-4*this.data.p]!==i&&(this.o[t-4*this.data.p]=i,this._omdf=!e);this._mdf=!e}},extendPrototype([DynamicPropertyContainer],GradientProperty),SVGGradientFillStyleData.prototype.initGradientData=function(e,t,n){this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.s=PropertyFactory.getProp(e,t.s,1,null,this),this.e=PropertyFactory.getProp(e,t.e,1,null,this),this.h=PropertyFactory.getProp(e,t.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(e,t.a||{k:0},0,degToRads,this),this.g=new GradientProperty(e,t.g,this),this.style=n,this.stops=[],this.setGradientData(n.pElem,t),this.setGradientOpacity(t,n),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(e,t){var n=createElementID(),i=createNS(1===t.t?"linearGradient":"radialGradient");i.setAttribute("id",n),i.setAttribute("spreadMethod","pad"),i.setAttribute("gradientUnits","userSpaceOnUse");var o,a,r,s=[];for(r=4*t.g.p,a=0;a<r;a+=4)o=createNS("stop"),i.appendChild(o),s.push(o);e.setAttribute("gf"===t.ty?"fill":"stroke","url("+getLocationHref()+"#"+n+")"),this.gf=i,this.cst=s},SVGGradientFillStyleData.prototype.setGradientOpacity=function(e,t){if(this.g._hasOpacity&&!this.g._collapsable){var n,i,o,a=createNS("mask"),r=createNS("path");a.appendChild(r);var s=createElementID(),c=createElementID();a.setAttribute("id",c);var l=createNS(1===e.t?"linearGradient":"radialGradient");l.setAttribute("id",s),l.setAttribute("spreadMethod","pad"),l.setAttribute("gradientUnits","userSpaceOnUse"),o=e.g.k.k[0].s?e.g.k.k[0].s.length:e.g.k.k.length;var d=this.stops;for(i=4*e.g.p;i<o;i+=2)(n=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),l.appendChild(n),d.push(n);r.setAttribute("gf"===e.ty?"fill":"stroke","url("+getLocationHref()+"#"+s+")"),"gs"===e.ty&&(r.setAttribute("stroke-linecap",lineCapEnum[e.lc||2]),r.setAttribute("stroke-linejoin",lineJoinEnum[e.lj||2]),1===e.lj&&r.setAttribute("stroke-miterlimit",e.ml)),this.of=l,this.ms=a,this.ost=d,this.maskId=c,t.msElem=r}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var buildShapeString=function(e,t,n,i){if(0===t)return"";var o,a=e.o,r=e.i,s=e.v,c=" M"+i.applyToPointStringified(s[0][0],s[0][1]);for(o=1;o<t;o+=1)c+=" C"+i.applyToPointStringified(a[o-1][0],a[o-1][1])+" "+i.applyToPointStringified(r[o][0],r[o][1])+" "+i.applyToPointStringified(s[o][0],s[o][1]);return n&&t&&(c+=" C"+i.applyToPointStringified(a[o-1][0],a[o-1][1])+" "+i.applyToPointStringified(r[0][0],r[0][1])+" "+i.applyToPointStringified(s[0][0],s[0][1]),c+="z"),c},SVGElementsRenderer=function(){var e=new Matrix,t=new Matrix;function n(e,t,n){(n||t.transform.op._mdf)&&t.transform.container.setAttribute("opacity",t.transform.op.v),(n||t.transform.mProps._mdf)&&t.transform.container.setAttribute("transform",t.transform.mProps.v.to2dCSS())}function i(){}function o(n,i,o){var a,r,s,c,l,d,p,h,u,m,f=i.styles.length,g=i.lvl;for(d=0;d<f;d+=1){if(c=i.sh._mdf||o,i.styles[d].lvl<g){for(h=t.reset(),u=g-i.styles[d].lvl,m=i.transformers.length-1;!c&&u>0;)c=i.transformers[m].mProps._mdf||c,u-=1,m-=1;if(c)for(u=g-i.styles[d].lvl,m=i.transformers.length-1;u>0;)h.multiply(i.transformers[m].mProps.v),u-=1,m-=1}else h=e;if(r=(p=i.sh.paths)._length,c){for(s="",a=0;a<r;a+=1)(l=p.shapes[a])&&l._length&&(s+=buildShapeString(l,l._length,l.c,h));i.caches[d]=s}else s=i.caches[d];i.styles[d].d+=!0===n.hd?"":s,i.styles[d]._mdf=c||i.styles[d]._mdf}}function a(e,t,n){var i=t.style;(t.c._mdf||n)&&i.pElem.setAttribute("fill","rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||n)&&i.pElem.setAttribute("fill-opacity",t.o.v)}function r(e,t,n){s(e,t,n),c(0,t,n)}function s(e,t,n){var i,o,a,r,s,c=t.gf,l=t.g._hasOpacity,d=t.s.v,p=t.e.v;if(t.o._mdf||n){var h="gf"===e.ty?"fill-opacity":"stroke-opacity";t.style.pElem.setAttribute(h,t.o.v)}if(t.s._mdf||n){var u=1===e.t?"x1":"cx",m="x1"===u?"y1":"cy";c.setAttribute(u,d[0]),c.setAttribute(m,d[1]),l&&!t.g._collapsable&&(t.of.setAttribute(u,d[0]),t.of.setAttribute(m,d[1]))}if(t.g._cmdf||n){i=t.cst;var f=t.g.c;for(a=i.length,o=0;o<a;o+=1)(r=i[o]).setAttribute("offset",f[4*o]+"%"),r.setAttribute("stop-color","rgb("+f[4*o+1]+","+f[4*o+2]+","+f[4*o+3]+")")}if(l&&(t.g._omdf||n)){var g=t.g.o;for(a=(i=t.g._collapsable?t.cst:t.ost).length,o=0;o<a;o+=1)r=i[o],t.g._collapsable||r.setAttribute("offset",g[2*o]+"%"),r.setAttribute("stop-opacity",g[2*o+1])}if(1===e.t)(t.e._mdf||n)&&(c.setAttribute("x2",p[0]),c.setAttribute("y2",p[1]),l&&!t.g._collapsable&&(t.of.setAttribute("x2",p[0]),t.of.setAttribute("y2",p[1])));else if((t.s._mdf||t.e._mdf||n)&&(s=Math.sqrt(Math.pow(d[0]-p[0],2)+Math.pow(d[1]-p[1],2)),c.setAttribute("r",s),l&&!t.g._collapsable&&t.of.setAttribute("r",s)),t.e._mdf||t.h._mdf||t.a._mdf||n){s||(s=Math.sqrt(Math.pow(d[0]-p[0],2)+Math.pow(d[1]-p[1],2)));var y=Math.atan2(p[1]-d[1],p[0]-d[0]),v=t.h.v;v>=1?v=.99:v<=-1&&(v=-.99);var b=s*v,x=Math.cos(y+t.a.v)*b+d[0],_=Math.sin(y+t.a.v)*b+d[1];c.setAttribute("fx",x),c.setAttribute("fy",_),l&&!t.g._collapsable&&(t.of.setAttribute("fx",x),t.of.setAttribute("fy",_))}}function c(e,t,n){var i=t.style,o=t.d;o&&(o._mdf||n)&&o.dashStr&&(i.pElem.setAttribute("stroke-dasharray",o.dashStr),i.pElem.setAttribute("stroke-dashoffset",o.dashoffset[0])),t.c&&(t.c._mdf||n)&&i.pElem.setAttribute("stroke","rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||n)&&i.pElem.setAttribute("stroke-opacity",t.o.v),(t.w._mdf||n)&&(i.pElem.setAttribute("stroke-width",t.w.v),i.msElem&&i.msElem.setAttribute("stroke-width",t.w.v))}return{createRenderFunction:function(e){switch(e.ty){case"fl":return a;case"gf":return s;case"gs":return r;case"st":return c;case"sh":case"el":case"rc":case"sr":return o;case"tr":return n;case"no":return i;default:return null}}}}();function SVGShapeElement(e,t,n){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(e,t,n),this.prevViewData=[]}function LetterProps(e,t,n,i,o,a){this.o=e,this.sw=t,this.sc=n,this.fc=i,this.m=o,this.p=a,this._mdf={o:!0,sw:!!t,sc:!!n,fc:!!i,m:!0,p:!0}}function TextProperty(e,t){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,t.d&&t.d.sid&&(t.d=e.globalData.slotManager.getProp(t.d)),this.data=t,this.elem=e,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var e,t,n,i,o=this.shapes.length,a=this.stylesList.length,r=[],s=!1;for(n=0;n<a;n+=1){for(i=this.stylesList[n],s=!1,r.length=0,e=0;e<o;e+=1)-1!==(t=this.shapes[e]).styles.indexOf(i)&&(r.push(t),s=t._isAnimated||s);r.length>1&&s&&this.setShapesAsAnimated(r)}},SVGShapeElement.prototype.setShapesAsAnimated=function(e){var t,n=e.length;for(t=0;t<n;t+=1)e[t].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(e,t){var n,i=new SVGStyleData(e,t),o=i.pElem;return"st"===e.ty?n=new SVGStrokeStyleData(this,e,i):"fl"===e.ty?n=new SVGFillStyleData(this,e,i):"gf"===e.ty||"gs"===e.ty?(n=new("gf"===e.ty?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,e,i),this.globalData.defs.appendChild(n.gf),n.maskId&&(this.globalData.defs.appendChild(n.ms),this.globalData.defs.appendChild(n.of),o.setAttribute("mask","url("+getLocationHref()+"#"+n.maskId+")"))):"no"===e.ty&&(n=new SVGNoStyleData(this,e,i)),"st"!==e.ty&&"gs"!==e.ty||(o.setAttribute("stroke-linecap",lineCapEnum[e.lc||2]),o.setAttribute("stroke-linejoin",lineJoinEnum[e.lj||2]),o.setAttribute("fill-opacity","0"),1===e.lj&&o.setAttribute("stroke-miterlimit",e.ml)),2===e.r&&o.setAttribute("fill-rule","evenodd"),e.ln&&o.setAttribute("id",e.ln),e.cl&&o.setAttribute("class",e.cl),e.bm&&(o.style["mix-blend-mode"]=getBlendMode(e.bm)),this.stylesList.push(i),this.addToAnimatedContents(e,n),n},SVGShapeElement.prototype.createGroupElement=function(e){var t=new ShapeGroupData;return e.ln&&t.gr.setAttribute("id",e.ln),e.cl&&t.gr.setAttribute("class",e.cl),e.bm&&(t.gr.style["mix-blend-mode"]=getBlendMode(e.bm)),t},SVGShapeElement.prototype.createTransformElement=function(e,t){var n=TransformPropertyFactory.getTransformProperty(this,e,this),i=new SVGTransformData(n,n.o,t);return this.addToAnimatedContents(e,i),i},SVGShapeElement.prototype.createShapeElement=function(e,t,n){var i=4;"rc"===e.ty?i=5:"el"===e.ty?i=6:"sr"===e.ty&&(i=7);var o=new SVGShapeData(t,n,ShapePropertyFactory.getShapeProp(this,e,i,this));return this.shapes.push(o),this.addShapeToModifiers(o),this.addToAnimatedContents(e,o),o},SVGShapeElement.prototype.addToAnimatedContents=function(e,t){for(var n=0,i=this.animatedContents.length;n<i;){if(this.animatedContents[n].element===t)return;n+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(e),element:t,data:e})},SVGShapeElement.prototype.setElementStyles=function(e){var t,n=e.styles,i=this.stylesList.length;for(t=0;t<i;t+=1)this.stylesList[t].closed||n.push(this.stylesList[t])},SVGShapeElement.prototype.reloadShapes=function(){var e;this._isFirstFrame=!0;var t=this.itemsData.length;for(e=0;e<t;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),t=this.dynamicProperties.length,e=0;e<t;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(e,t,n,i,o,a,r){var s,c,l,d,p,h,u=[].concat(a),m=e.length-1,f=[],g=[];for(s=m;s>=0;s-=1){if((h=this.searchProcessedElement(e[s]))?t[s]=n[h-1]:e[s]._render=r,"fl"===e[s].ty||"st"===e[s].ty||"gf"===e[s].ty||"gs"===e[s].ty||"no"===e[s].ty)h?t[s].style.closed=!1:t[s]=this.createStyleElement(e[s],o),e[s]._render&&t[s].style.pElem.parentNode!==i&&i.appendChild(t[s].style.pElem),f.push(t[s].style);else if("gr"===e[s].ty){if(h)for(l=t[s].it.length,c=0;c<l;c+=1)t[s].prevViewData[c]=t[s].it[c];else t[s]=this.createGroupElement(e[s]);this.searchShapes(e[s].it,t[s].it,t[s].prevViewData,t[s].gr,o+1,u,r),e[s]._render&&t[s].gr.parentNode!==i&&i.appendChild(t[s].gr)}else"tr"===e[s].ty?(h||(t[s]=this.createTransformElement(e[s],i)),d=t[s].transform,u.push(d)):"sh"===e[s].ty||"rc"===e[s].ty||"el"===e[s].ty||"sr"===e[s].ty?(h||(t[s]=this.createShapeElement(e[s],u,o)),this.setElementStyles(t[s])):"tm"===e[s].ty||"rd"===e[s].ty||"ms"===e[s].ty||"pb"===e[s].ty||"zz"===e[s].ty||"op"===e[s].ty?(h?(p=t[s]).closed=!1:((p=ShapeModifiers.getModifier(e[s].ty)).init(this,e[s]),t[s]=p,this.shapeModifiers.push(p)),g.push(p)):"rp"===e[s].ty&&(h?(p=t[s]).closed=!0:(p=ShapeModifiers.getModifier(e[s].ty),t[s]=p,p.init(this,e,s,t),this.shapeModifiers.push(p),r=!1),g.push(p));this.addProcessedElement(e[s],s+1)}for(m=f.length,s=0;s<m;s+=1)f[s].closed=!0;for(m=g.length,s=0;s<m;s+=1)g[s].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){var e;this.renderModifiers();var t=this.stylesList.length;for(e=0;e<t;e+=1)this.stylesList[e].reset();for(this.renderShape(),e=0;e<t;e+=1)(this.stylesList[e]._mdf||this._isFirstFrame)&&(this.stylesList[e].msElem&&(this.stylesList[e].msElem.setAttribute("d",this.stylesList[e].d),this.stylesList[e].d="M0 0"+this.stylesList[e].d),this.stylesList[e].pElem.setAttribute("d",this.stylesList[e].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var e,t,n=this.animatedContents.length;for(e=0;e<n;e+=1)t=this.animatedContents[e],(this._isFirstFrame||t.element._isAnimated)&&!0!==t.data&&t.fn(t.data,t.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},LetterProps.prototype.update=function(e,t,n,i,o,a){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var r=!1;return this.o!==e&&(this.o=e,this._mdf.o=!0,r=!0),this.sw!==t&&(this.sw=t,this._mdf.sw=!0,r=!0),this.sc!==n&&(this.sc=n,this._mdf.sc=!0,r=!0),this.fc!==i&&(this.fc=i,this._mdf.fc=!0,r=!0),this.m!==o&&(this.m=o,this._mdf.m=!0,r=!0),!a.length||this.p[0]===a[0]&&this.p[1]===a[1]&&this.p[4]===a[4]&&this.p[5]===a[5]&&this.p[12]===a[12]&&this.p[13]===a[13]||(this.p=a,this._mdf.p=!0,r=!0),r},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},TextProperty.prototype.setCurrentData=function(e){e.__complete||this.completeTextData(e),this.currentData=e,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(e){this.effectsSequence.push(e),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(e){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||e){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var t=this.currentData,n=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{var i;this.lock=!0,this._mdf=!1;var o=this.effectsSequence.length,a=e||this.data.d.k[this.keysIndex].s;for(i=0;i<o;i+=1)a=n!==this.keysIndex?this.effectsSequence[i](a,a.t):this.effectsSequence[i](this.currentData,a.t);t!==a&&this.setCurrentData(a),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var e=this.data.d.k,t=this.elem.comp.renderedFrame,n=0,i=e.length;n<=i-1&&!(n===i-1||e[n+1].t>t);)n+=1;return this.keysIndex!==n&&(this.keysIndex=n),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(e){for(var t,n,i=[],o=0,a=e.length,r=!1,s=!1,c="";o<a;)r=s,s=!1,t=e.charCodeAt(o),c=e.charAt(o),FontManager.isCombinedCharacter(t)?r=!0:t>=55296&&t<=56319?FontManager.isRegionalFlag(e,o)?c=e.substr(o,14):(n=e.charCodeAt(o+1))>=56320&&n<=57343&&(FontManager.isModifier(t,n)?(c=e.substr(o,2),r=!0):c=FontManager.isFlagEmoji(e.substr(o,4))?e.substr(o,4):e.substr(o,2)):t>56319?(n=e.charCodeAt(o+1),FontManager.isVariationSelector(t)&&(r=!0)):FontManager.isZeroWidthJoiner(t)&&(r=!0,s=!0),r?(i[i.length-1]+=c,r=!1):i.push(c),o+=c.length;return i},TextProperty.prototype.completeTextData=function(e){e.__complete=!0;var t,n,i,o,a,r,s,c=this.elem.globalData.fontManager,l=this.data,d=[],p=0,h=l.m.g,u=0,m=0,f=0,g=[],y=0,v=0,b=c.getFontByName(e.f),x=0,_=getFontProperties(b);e.fWeight=_.weight,e.fStyle=_.style,e.finalSize=e.s,e.finalText=this.buildFinalText(e.t),n=e.finalText.length,e.finalLineHeight=e.lh;var k,w=e.tr/1e3*e.finalSize;if(e.sz)for(var C,S,E=!0,T=e.sz[0],P=e.sz[1];E;){C=0,y=0,n=(S=this.buildFinalText(e.t)).length,w=e.tr/1e3*e.finalSize;var A=-1;for(t=0;t<n;t+=1)k=S[t].charCodeAt(0),i=!1," "===S[t]?A=t:13!==k&&3!==k||(y=0,i=!0,C+=e.finalLineHeight||1.2*e.finalSize),c.chars?(s=c.getCharData(S[t],b.fStyle,b.fFamily),x=i?0:s.w*e.finalSize/100):x=c.measureText(S[t],e.f,e.finalSize),y+x>T&&" "!==S[t]?(-1===A?n+=1:t=A,C+=e.finalLineHeight||1.2*e.finalSize,S.splice(t,A===t?1:0,"\r"),A=-1,y=0):(y+=x,y+=w);C+=b.ascent*e.finalSize/100,this.canResize&&e.finalSize>this.minimumFontSize&&P<C?(e.finalSize-=1,e.finalLineHeight=e.finalSize*e.lh/e.s):(e.finalText=S,n=e.finalText.length,E=!1)}y=-w,x=0;var I,L=0;for(t=0;t<n;t+=1)if(i=!1,13===(k=(I=e.finalText[t]).charCodeAt(0))||3===k?(L=0,g.push(y),v=y>v?y:v,y=-2*w,o="",i=!0,f+=1):o=I,c.chars?(s=c.getCharData(I,b.fStyle,c.getFontByName(e.f).fFamily),x=i?0:s.w*e.finalSize/100):x=c.measureText(o,e.f,e.finalSize)," "===I?L+=x+w:(y+=x+w+L,L=0),d.push({l:x,an:x,add:u,n:i,anIndexes:[],val:o,line:f,animatorJustifyOffset:0}),2==h){if(u+=x,""===o||" "===o||t===n-1){for(""!==o&&" "!==o||(u-=x);m<=t;)d[m].an=u,d[m].ind=p,d[m].extra=x,m+=1;p+=1,u=0}}else if(3==h){if(u+=x,""===o||t===n-1){for(""===o&&(u-=x);m<=t;)d[m].an=u,d[m].ind=p,d[m].extra=x,m+=1;u=0,p+=1}}else d[p].ind=p,d[p].extra=0,p+=1;if(e.l=d,v=y>v?y:v,g.push(y),e.sz)e.boxWidth=e.sz[0],e.justifyOffset=0;else switch(e.boxWidth=v,e.j){case 1:e.justifyOffset=-e.boxWidth;break;case 2:e.justifyOffset=-e.boxWidth/2;break;default:e.justifyOffset=0}e.lineWidths=g;var D,M,F,R,O=l.a;r=O.length;var N=[];for(a=0;a<r;a+=1){for((D=O[a]).a.sc&&(e.strokeColorAnim=!0),D.a.sw&&(e.strokeWidthAnim=!0),(D.a.fc||D.a.fh||D.a.fs||D.a.fb)&&(e.fillColorAnim=!0),R=0,F=D.s.b,t=0;t<n;t+=1)(M=d[t]).anIndexes[a]=R,(1==F&&""!==M.val||2==F&&""!==M.val&&" "!==M.val||3==F&&(M.n||" "==M.val||t==n-1)||4==F&&(M.n||t==n-1))&&(1===D.s.rn&&N.push(R),R+=1);l.a[a].s.totalChars=R;var B,V=-1;if(1===D.s.rn)for(t=0;t<n;t+=1)V!=(M=d[t]).anIndexes[a]&&(V=M.anIndexes[a],B=N.splice(Math.floor(Math.random()*N.length),1)[0]),M.anIndexes[a]=B}e.yOffset=e.finalLineHeight||1.2*e.finalSize,e.ls=e.ls||0,e.ascent=b.ascent*e.finalSize/100},TextProperty.prototype.updateDocumentData=function(e,t){t=void 0===t?this.keysIndex:t;var n=this.copyData({},this.data.d.k[t].s);n=this.copyData(n,e),this.data.d.k[t].s=n,this.recalculate(t),this.setCurrentData(n),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(e){var t=this.data.d.k[e].s;t.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(t)},TextProperty.prototype.canResizeFont=function(e){this.canResize=e,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(e){this.minimumFontSize=Math.floor(e)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var e=Math.max,t=Math.min,n=Math.floor;function i(e,t){this._currentTextLength=-1,this.k=!1,this.data=t,this.elem=e,this.comp=e.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(e),this.s=PropertyFactory.getProp(e,t.s||{k:0},0,0,this),this.e="e"in t?PropertyFactory.getProp(e,t.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(e,t.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(e,t.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(e,t.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(e,t.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(e,t.a,0,.01,this),this.dynamicProperties.length||this.getValue()}return i.prototype={getMult:function(i){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var o=0,a=0,r=1,s=1;this.ne.v>0?o=this.ne.v/100:a=-this.ne.v/100,this.xe.v>0?r=1-this.xe.v/100:s=1+this.xe.v/100;var c=BezierFactory.getBezierEasing(o,a,r,s).get,l=0,d=this.finalS,p=this.finalE,h=this.data.sh;if(2===h)l=c(l=p===d?i>=p?1:0:e(0,t(.5/(p-d)+(i-d)/(p-d),1)));else if(3===h)l=c(l=p===d?i>=p?0:1:1-e(0,t(.5/(p-d)+(i-d)/(p-d),1)));else if(4===h)p===d?l=0:(l=e(0,t(.5/(p-d)+(i-d)/(p-d),1)))<.5?l*=2:l=1-2*(l-.5),l=c(l);else if(5===h){if(p===d)l=0;else{var u=p-d,m=-u/2+(i=t(e(0,i+.5-d),p-d)),f=u/2;l=Math.sqrt(1-m*m/(f*f))}l=c(l)}else 6===h?(p===d?l=0:(i=t(e(0,i+.5-d),p-d),l=(1+Math.cos(Math.PI+2*Math.PI*i/(p-d)))/2),l=c(l)):(i>=n(d)&&(l=e(0,t(i-d<0?t(p,1)-(d-i):p-i,1))),l=c(l));if(100!==this.sm.v){var g=.01*this.sm.v;0===g&&(g=1e-8);var y=.5-.5*g;l<y?l=0:(l=(l-y)/g)>1&&(l=1)}return l*this.a.v},getValue:function(e){this.iterateDynamicProperties(),this._mdf=e||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,e&&2===this.data.r&&(this.e.v=this._currentTextLength);var t=2===this.data.r?1:100/this.data.totalChars,n=this.o.v/t,i=this.s.v/t+n,o=this.e.v/t+n;if(i>o){var a=i;i=o,o=a}this.finalS=i,this.finalE=o}},extendPrototype([DynamicPropertyContainer],i),{getTextSelectorProp:function(e,t,n){return new i(e,t)}}}();function TextAnimatorDataProperty(e,t,n){var i={propType:!1},o=PropertyFactory.getProp,a=t.a;this.a={r:a.r?o(e,a.r,0,degToRads,n):i,rx:a.rx?o(e,a.rx,0,degToRads,n):i,ry:a.ry?o(e,a.ry,0,degToRads,n):i,sk:a.sk?o(e,a.sk,0,degToRads,n):i,sa:a.sa?o(e,a.sa,0,degToRads,n):i,s:a.s?o(e,a.s,1,.01,n):i,a:a.a?o(e,a.a,1,0,n):i,o:a.o?o(e,a.o,0,.01,n):i,p:a.p?o(e,a.p,1,0,n):i,sw:a.sw?o(e,a.sw,0,0,n):i,sc:a.sc?o(e,a.sc,1,0,n):i,fc:a.fc?o(e,a.fc,1,0,n):i,fh:a.fh?o(e,a.fh,0,0,n):i,fs:a.fs?o(e,a.fs,0,.01,n):i,fb:a.fb?o(e,a.fb,0,.01,n):i,t:a.t?o(e,a.t,0,0,n):i},this.s=TextSelectorProp.getTextSelectorProp(e,t.s,n),this.s.t=t.s.t}function TextAnimatorProperty(e,t,n){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=e,this._renderType=t,this._elem=n,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(n)}function ITextElement(){}TextAnimatorProperty.prototype.searchProperties=function(){var e,t,n=this._textData.a.length,i=PropertyFactory.getProp;for(e=0;e<n;e+=1)t=this._textData.a[e],this._animatorsData[e]=new TextAnimatorDataProperty(this._elem,t,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:i(this._elem,this._textData.p.a,0,0,this),f:i(this._elem,this._textData.p.f,0,0,this),l:i(this._elem,this._textData.p.l,0,0,this),r:i(this._elem,this._textData.p.r,0,0,this),p:i(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=i(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(e,t){if(this.lettersChangedFlag=t,this._mdf||this._isFirstFrame||t||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var n,i,o,a,r,s,c,l,d,p,h,u,m,f,g,y,v,b,x,_=this._moreOptions.alignment.v,k=this._animatorsData,w=this._textData,C=this.mHelper,S=this._renderType,E=this.renderedLetters.length,T=e.l;if(this._hasMaskedPath){if(x=this._pathData.m,!this._pathData.n||this._pathData._mdf){var P,A=x.v;for(this._pathData.r.v&&(A=A.reverse()),r={tLength:0,segments:[]},a=A._length-1,y=0,o=0;o<a;o+=1)P=bez.buildBezierData(A.v[o],A.v[o+1],[A.o[o][0]-A.v[o][0],A.o[o][1]-A.v[o][1]],[A.i[o+1][0]-A.v[o+1][0],A.i[o+1][1]-A.v[o+1][1]]),r.tLength+=P.segmentLength,r.segments.push(P),y+=P.segmentLength;o=a,x.v.c&&(P=bez.buildBezierData(A.v[o],A.v[0],[A.o[o][0]-A.v[o][0],A.o[o][1]-A.v[o][1]],[A.i[0][0]-A.v[0][0],A.i[0][1]-A.v[0][1]]),r.tLength+=P.segmentLength,r.segments.push(P),y+=P.segmentLength),this._pathData.pi=r}if(r=this._pathData.pi,s=this._pathData.f.v,h=0,p=1,l=0,d=!0,f=r.segments,s<0&&x.v.c)for(r.tLength<Math.abs(s)&&(s=-Math.abs(s)%r.tLength),p=(m=f[h=f.length-1].points).length-1;s<0;)s+=m[p].partialLength,(p-=1)<0&&(p=(m=f[h-=1].points).length-1);u=(m=f[h].points)[p-1],g=(c=m[p]).partialLength}a=T.length,n=0,i=0;var I,L,D,M,F,R=1.2*e.finalSize*.714,O=!0;D=k.length;var N,B,V,j,z,H,G,U,$,q,W,K,Y=-1,J=s,X=h,Q=p,Z=-1,ee="",te=this.defaultPropsArray;if(2===e.j||1===e.j){var ne=0,ie=0,oe=2===e.j?-.5:-1,ae=0,re=!0;for(o=0;o<a;o+=1)if(T[o].n){for(ne&&(ne+=ie);ae<o;)T[ae].animatorJustifyOffset=ne,ae+=1;ne=0,re=!0}else{for(L=0;L<D;L+=1)(I=k[L].a).t.propType&&(re&&2===e.j&&(ie+=I.t.v*oe),(F=k[L].s.getMult(T[o].anIndexes[L],w.a[L].s.totalChars)).length?ne+=I.t.v*F[0]*oe:ne+=I.t.v*F*oe);re=!1}for(ne&&(ne+=ie);ae<o;)T[ae].animatorJustifyOffset=ne,ae+=1}for(o=0;o<a;o+=1){if(C.reset(),j=1,T[o].n)n=0,i+=e.yOffset,i+=O?1:0,s=J,O=!1,this._hasMaskedPath&&(p=Q,u=(m=f[h=X].points)[p-1],g=(c=m[p]).partialLength,l=0),ee="",W="",$="",K="",te=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Z!==T[o].line){switch(e.j){case 1:s+=y-e.lineWidths[T[o].line];break;case 2:s+=(y-e.lineWidths[T[o].line])/2}Z=T[o].line}Y!==T[o].ind&&(T[Y]&&(s+=T[Y].extra),s+=T[o].an/2,Y=T[o].ind),s+=_[0]*T[o].an*.005;var se=0;for(L=0;L<D;L+=1)(I=k[L].a).p.propType&&((F=k[L].s.getMult(T[o].anIndexes[L],w.a[L].s.totalChars)).length?se+=I.p.v[0]*F[0]:se+=I.p.v[0]*F),I.a.propType&&((F=k[L].s.getMult(T[o].anIndexes[L],w.a[L].s.totalChars)).length?se+=I.a.v[0]*F[0]:se+=I.a.v[0]*F);for(d=!0,this._pathData.a.v&&(s=.5*T[0].an+(y-this._pathData.f.v-.5*T[0].an-.5*T[T.length-1].an)*Y/(a-1),s+=this._pathData.f.v);d;)l+g>=s+se||!m?(v=(s+se-l)/c.partialLength,B=u.point[0]+(c.point[0]-u.point[0])*v,V=u.point[1]+(c.point[1]-u.point[1])*v,C.translate(-_[0]*T[o].an*.005,-_[1]*R*.01),d=!1):m&&(l+=c.partialLength,(p+=1)>=m.length&&(p=0,f[h+=1]?m=f[h].points:x.v.c?(p=0,m=f[h=0].points):(l-=c.partialLength,m=null)),m&&(u=c,g=(c=m[p]).partialLength));N=T[o].an/2-T[o].add,C.translate(-N,0,0)}else N=T[o].an/2-T[o].add,C.translate(-N,0,0),C.translate(-_[0]*T[o].an*.005,-_[1]*R*.01,0);for(L=0;L<D;L+=1)(I=k[L].a).t.propType&&(F=k[L].s.getMult(T[o].anIndexes[L],w.a[L].s.totalChars),0===n&&0===e.j||(this._hasMaskedPath?F.length?s+=I.t.v*F[0]:s+=I.t.v*F:F.length?n+=I.t.v*F[0]:n+=I.t.v*F));for(e.strokeWidthAnim&&(H=e.sw||0),e.strokeColorAnim&&(z=e.sc?[e.sc[0],e.sc[1],e.sc[2]]:[0,0,0]),e.fillColorAnim&&e.fc&&(G=[e.fc[0],e.fc[1],e.fc[2]]),L=0;L<D;L+=1)(I=k[L].a).a.propType&&((F=k[L].s.getMult(T[o].anIndexes[L],w.a[L].s.totalChars)).length?C.translate(-I.a.v[0]*F[0],-I.a.v[1]*F[1],I.a.v[2]*F[2]):C.translate(-I.a.v[0]*F,-I.a.v[1]*F,I.a.v[2]*F));for(L=0;L<D;L+=1)(I=k[L].a).s.propType&&((F=k[L].s.getMult(T[o].anIndexes[L],w.a[L].s.totalChars)).length?C.scale(1+(I.s.v[0]-1)*F[0],1+(I.s.v[1]-1)*F[1],1):C.scale(1+(I.s.v[0]-1)*F,1+(I.s.v[1]-1)*F,1));for(L=0;L<D;L+=1){if(I=k[L].a,F=k[L].s.getMult(T[o].anIndexes[L],w.a[L].s.totalChars),I.sk.propType&&(F.length?C.skewFromAxis(-I.sk.v*F[0],I.sa.v*F[1]):C.skewFromAxis(-I.sk.v*F,I.sa.v*F)),I.r.propType&&(F.length?C.rotateZ(-I.r.v*F[2]):C.rotateZ(-I.r.v*F)),I.ry.propType&&(F.length?C.rotateY(I.ry.v*F[1]):C.rotateY(I.ry.v*F)),I.rx.propType&&(F.length?C.rotateX(I.rx.v*F[0]):C.rotateX(I.rx.v*F)),I.o.propType&&(F.length?j+=(I.o.v*F[0]-j)*F[0]:j+=(I.o.v*F-j)*F),e.strokeWidthAnim&&I.sw.propType&&(F.length?H+=I.sw.v*F[0]:H+=I.sw.v*F),e.strokeColorAnim&&I.sc.propType)for(U=0;U<3;U+=1)F.length?z[U]+=(I.sc.v[U]-z[U])*F[0]:z[U]+=(I.sc.v[U]-z[U])*F;if(e.fillColorAnim&&e.fc){if(I.fc.propType)for(U=0;U<3;U+=1)F.length?G[U]+=(I.fc.v[U]-G[U])*F[0]:G[U]+=(I.fc.v[U]-G[U])*F;I.fh.propType&&(G=F.length?addHueToRGB(G,I.fh.v*F[0]):addHueToRGB(G,I.fh.v*F)),I.fs.propType&&(G=F.length?addSaturationToRGB(G,I.fs.v*F[0]):addSaturationToRGB(G,I.fs.v*F)),I.fb.propType&&(G=F.length?addBrightnessToRGB(G,I.fb.v*F[0]):addBrightnessToRGB(G,I.fb.v*F))}}for(L=0;L<D;L+=1)(I=k[L].a).p.propType&&(F=k[L].s.getMult(T[o].anIndexes[L],w.a[L].s.totalChars),this._hasMaskedPath?F.length?C.translate(0,I.p.v[1]*F[0],-I.p.v[2]*F[1]):C.translate(0,I.p.v[1]*F,-I.p.v[2]*F):F.length?C.translate(I.p.v[0]*F[0],I.p.v[1]*F[1],-I.p.v[2]*F[2]):C.translate(I.p.v[0]*F,I.p.v[1]*F,-I.p.v[2]*F));if(e.strokeWidthAnim&&($=H<0?0:H),e.strokeColorAnim&&(q="rgb("+Math.round(255*z[0])+","+Math.round(255*z[1])+","+Math.round(255*z[2])+")"),e.fillColorAnim&&e.fc&&(W="rgb("+Math.round(255*G[0])+","+Math.round(255*G[1])+","+Math.round(255*G[2])+")"),this._hasMaskedPath){if(C.translate(0,-e.ls),C.translate(0,_[1]*R*.01+i,0),this._pathData.p.v){b=(c.point[1]-u.point[1])/(c.point[0]-u.point[0]);var ce=180*Math.atan(b)/Math.PI;c.point[0]<u.point[0]&&(ce+=180),C.rotate(-ce*Math.PI/180)}C.translate(B,V,0),s-=_[0]*T[o].an*.005,T[o+1]&&Y!==T[o+1].ind&&(s+=T[o].an/2,s+=.001*e.tr*e.finalSize)}else{switch(C.translate(n,i,0),e.ps&&C.translate(e.ps[0],e.ps[1]+e.ascent,0),e.j){case 1:C.translate(T[o].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[T[o].line]),0,0);break;case 2:C.translate(T[o].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[T[o].line])/2,0,0)}C.translate(0,-e.ls),C.translate(N,0,0),C.translate(_[0]*T[o].an*.005,_[1]*R*.01,0),n+=T[o].l+.001*e.tr*e.finalSize}"html"===S?ee=C.toCSS():"svg"===S?ee=C.to2dCSS():te=[C.props[0],C.props[1],C.props[2],C.props[3],C.props[4],C.props[5],C.props[6],C.props[7],C.props[8],C.props[9],C.props[10],C.props[11],C.props[12],C.props[13],C.props[14],C.props[15]],K=j}E<=o?(M=new LetterProps(K,$,q,W,ee,te),this.renderedLetters.push(M),E+=1,this.lettersChangedFlag=!0):(M=this.renderedLetters[o],this.lettersChangedFlag=M.update(K,$,q,W,ee,te)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),ITextElement.prototype.initElement=function(e,t,n){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(e,t,n),this.textProperty=new TextProperty(this,e.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(e.t,this.renderType,this),this.initTransform(e,t,n),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)},ITextElement.prototype.createPathShape=function(e,t){var n,i,o=t.length,a="";for(n=0;n<o;n+=1)"sh"===t[n].ty&&(i=t[n].ks.k,a+=buildShapeString(i,i.i.length,!0,e));return a},ITextElement.prototype.updateDocumentData=function(e,t){this.textProperty.updateDocumentData(e,t)},ITextElement.prototype.canResizeFont=function(e){this.textProperty.canResizeFont(e)},ITextElement.prototype.setMinimumFontSize=function(e){this.textProperty.setMinimumFontSize(e)},ITextElement.prototype.applyTextPropertiesToMatrix=function(e,t,n,i,o){switch(e.ps&&t.translate(e.ps[0],e.ps[1]+e.ascent,0),t.translate(0,-e.ls,0),e.j){case 1:t.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[n]),0,0);break;case 2:t.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[n])/2,0,0)}t.translate(i,o,0)},ITextElement.prototype.buildColor=function(e){return"rgb("+Math.round(255*e[0])+","+Math.round(255*e[1])+","+Math.round(255*e[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(e,t,n){this.textSpans=[],this.renderType="svg",this.initElement(e,t,n)}function ISolidElement(e,t,n){this.initElement(e,t,n)}function NullElement(e,t,n){this.initFrame(),this.initBaseData(e,t,n),this.initFrame(),this.initTransform(e,t,n),this.initHierarchy()}function SVGRendererBase(){}function ICompElement(){}function SVGCompElement(e,t,n){this.layers=e.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,t,n),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function SVGRenderer(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var n="";if(t&&t.title){var i=createNS("title"),o=createElementID();i.setAttribute("id",o),i.textContent=t.title,this.svgElement.appendChild(i),n+=o}if(t&&t.description){var a=createNS("desc"),r=createElementID();a.setAttribute("id",r),a.textContent=t.description,this.svgElement.appendChild(a),n+=" "+r}n&&this.svgElement.setAttribute("aria-labelledby",n);var s=createNS("defs");this.svgElement.appendChild(s);var c=createNS("g");this.svgElement.appendChild(c),this.layerElement=c,this.renderConfig={preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:t&&t.contentVisibility||"visible",progressiveLoad:t&&t.progressiveLoad||!1,hideOnTransparent:!(t&&!1===t.hideOnTransparent),viewBoxOnly:t&&t.viewBoxOnly||!1,viewBoxSize:t&&t.viewBoxSize||!1,className:t&&t.className||"",id:t&&t.id||"",focusable:t&&t.focusable,filterSize:{width:t&&t.filterSize&&t.filterSize.width||"100%",height:t&&t.filterSize&&t.filterSize.height||"100%",x:t&&t.filterSize&&t.filterSize.x||"0%",y:t&&t.filterSize&&t.filterSize.y||"0%"},width:t&&t.width,height:t&&t.height,runExpressions:!t||void 0===t.runExpressions||t.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:s,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(e){for(var t=0,n=e.length,i=[],o="";t<n;)e[t]===String.fromCharCode(13)||e[t]===String.fromCharCode(3)?(i.push(o),o=""):o+=e[t],t+=1;return i.push(o),i},SVGTextLottieElement.prototype.buildShapeData=function(e,t){if(e.shapes&&e.shapes.length){var n=e.shapes[0];if(n.it){var i=n.it[n.it.length-1];i.s&&(i.s.k[0]=t,i.s.k[1]=t)}}return e},SVGTextLottieElement.prototype.buildNewText=function(){var e,t;this.addDynamicProperty(this);var n=this.textProperty.currentData;this.renderedLetters=createSizedArray(n?n.l.length:0),n.fc?this.layerElement.setAttribute("fill",this.buildColor(n.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),n.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(n.sc)),this.layerElement.setAttribute("stroke-width",n.sw)),this.layerElement.setAttribute("font-size",n.finalSize);var i=this.globalData.fontManager.getFontByName(n.f);if(i.fClass)this.layerElement.setAttribute("class",i.fClass);else{this.layerElement.setAttribute("font-family",i.fFamily);var o=n.fWeight,a=n.fStyle;this.layerElement.setAttribute("font-style",a),this.layerElement.setAttribute("font-weight",o)}this.layerElement.setAttribute("aria-label",n.t);var r,s=n.l||[],c=!!this.globalData.fontManager.chars;t=s.length;var l=this.mHelper,d=this.data.singleShape,p=0,h=0,u=!0,m=.001*n.tr*n.finalSize;if(!d||c||n.sz){var f,g=this.textSpans.length;for(e=0;e<t;e+=1){if(this.textSpans[e]||(this.textSpans[e]={span:null,childSpan:null,glyph:null}),!c||!d||0===e){if(r=g>e?this.textSpans[e].span:createNS(c?"g":"text"),g<=e){if(r.setAttribute("stroke-linecap","butt"),r.setAttribute("stroke-linejoin","round"),r.setAttribute("stroke-miterlimit","4"),this.textSpans[e].span=r,c){var y=createNS("g");r.appendChild(y),this.textSpans[e].childSpan=y}this.textSpans[e].span=r,this.layerElement.appendChild(r)}r.style.display="inherit"}if(l.reset(),d&&(s[e].n&&(p=-m,h+=n.yOffset,h+=u?1:0,u=!1),this.applyTextPropertiesToMatrix(n,l,s[e].line,p,h),p+=s[e].l||0,p+=m),c){var v;if(1===(f=this.globalData.fontManager.getCharData(n.finalText[e],i.fStyle,this.globalData.fontManager.getFontByName(n.f).fFamily)).t)v=new SVGCompElement(f.data,this.globalData,this);else{var b=emptyShapeData;f.data&&f.data.shapes&&(b=this.buildShapeData(f.data,n.finalSize)),v=new SVGShapeElement(b,this.globalData,this)}if(this.textSpans[e].glyph){var x=this.textSpans[e].glyph;this.textSpans[e].childSpan.removeChild(x.layerElement),x.destroy()}this.textSpans[e].glyph=v,v._debug=!0,v.prepareFrame(0),v.renderFrame(),this.textSpans[e].childSpan.appendChild(v.layerElement),1===f.t&&this.textSpans[e].childSpan.setAttribute("transform","scale("+n.finalSize/100+","+n.finalSize/100+")")}else d&&r.setAttribute("transform","translate("+l.props[12]+","+l.props[13]+")"),r.textContent=s[e].val,r.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}d&&r&&r.setAttribute("d","")}else{var _=this.textContainer,k="start";switch(n.j){case 1:k="end";break;case 2:k="middle";break;default:k="start"}_.setAttribute("text-anchor",k),_.setAttribute("letter-spacing",m);var w=this.buildTextContents(n.finalText);for(t=w.length,h=n.ps?n.ps[1]+n.ascent:0,e=0;e<t;e+=1)(r=this.textSpans[e].span||createNS("tspan")).textContent=w[e],r.setAttribute("x",0),r.setAttribute("y",h),r.style.display="inherit",_.appendChild(r),this.textSpans[e]||(this.textSpans[e]={span:null,glyph:null}),this.textSpans[e].span=r,h+=n.finalLineHeight;this.layerElement.appendChild(_)}for(;e<this.textSpans.length;)this.textSpans[e].span.style.display="none",e+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var e=this.layerElement.getBBox();this.bbox={top:e.y,left:e.x,width:e.width,height:e.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var e,t,n=this.textSpans.length;for(this.renderedFrame=this.comp.renderedFrame,e=0;e<n;e+=1)(t=this.textSpans[e].glyph)&&(t.prepareFrame(this.comp.renderedFrame-this.data.st),t._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){var e,t;this._sizeChanged=!0;var n,i,o,a=this.textAnimator.renderedLetters,r=this.textProperty.currentData.l;for(t=r.length,e=0;e<t;e+=1)r[e].n||(n=a[e],i=this.textSpans[e].span,(o=this.textSpans[e].glyph)&&o.renderFrame(),n._mdf.m&&i.setAttribute("transform",n.m),n._mdf.o&&i.setAttribute("opacity",n.o),n._mdf.sw&&i.setAttribute("stroke-width",n.sw),n._mdf.sc&&i.setAttribute("stroke",n.sc),n._mdf.fc&&i.setAttribute("fill",n.fc))}},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var e=createNS("rect");e.setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.layerElement.appendChild(e)},NullElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(e){return new NullElement(e,this.globalData,this)},SVGRendererBase.prototype.createShape=function(e){return new SVGShapeElement(e,this.globalData,this)},SVGRendererBase.prototype.createText=function(e){return new SVGTextLottieElement(e,this.globalData,this)},SVGRendererBase.prototype.createImage=function(e){return new IImageElement(e,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(e){return new ISolidElement(e,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(e){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+e.w+" "+e.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",e.w),this.svgElement.setAttribute("height",e.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),void 0!==this.renderConfig.focusable&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var t=this.globalData.defs;this.setupGlobalData(e,t),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=e;var n=createNS("clipPath"),i=createNS("rect");i.setAttribute("width",e.w),i.setAttribute("height",e.h),i.setAttribute("x",0),i.setAttribute("y",0);var o=createElementID();n.setAttribute("id",o),n.appendChild(i),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+o+")"),t.appendChild(n),this.layers=e.layers,this.elements=createSizedArray(e.layers.length)},SVGRendererBase.prototype.destroy=function(){var e;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var t=this.layers?this.layers.length:0;for(e=0;e<t;e+=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(e){var t=0,n=this.layers.length;for(t=0;t<n;t+=1)if(this.layers[t].ind===e)return t;return-1},SVGRendererBase.prototype.buildItem=function(e){var t=this.elements;if(!t[e]&&99!==this.layers[e].ty){t[e]=!0;var n=this.createItem(this.layers[e]);if(t[e]=n,getExpressionsPlugin()&&(0===this.layers[e].ty&&this.globalData.projectInterface.registerComposition(n),n.initExpressions()),this.appendElementInPos(n,e),this.layers[e].tt){var i="tp"in this.layers[e]?this.findIndexByInd(this.layers[e].tp):e-1;if(-1===i)return;if(this.elements[i]&&!0!==this.elements[i]){var o=t[i].getMatte(this.layers[e].tt);n.setMatte(o)}else this.buildItem(i),this.addPendingElement(n)}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var e=this.pendingElements.pop();if(e.checkParenting(),e.data.tt)for(var t=0,n=this.elements.length;t<n;){if(this.elements[t]===e){var i="tp"in e.data?this.findIndexByInd(e.data.tp):t-1,o=this.elements[i].getMatte(this.layers[t].tt);e.setMatte(o);break}t+=1}}},SVGRendererBase.prototype.renderFrame=function(e){if(this.renderedFrame!==e&&!this.destroyed){var t;null===e?e=this.renderedFrame:this.renderedFrame=e,this.globalData.frameNum=e,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=e,this.globalData._mdf=!1;var n=this.layers.length;for(this.completeLayers||this.checkLayers(e),t=n-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].prepareFrame(e-this.layers[t].st);if(this.globalData._mdf)for(t=0;t<n;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(e,t){var n=e.getBaseElement();if(n){for(var i,o=0;o<t;)this.elements[o]&&!0!==this.elements[o]&&this.elements[o].getBaseElement()&&(i=this.elements[o].getBaseElement()),o+=1;i?this.layerElement.insertBefore(n,i):this.layerElement.appendChild(n)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(e,t,n){this.initFrame(),this.initBaseData(e,t,n),this.initTransform(e,t,n),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&t.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(e){if(this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=e/this.data.sr;else{var t=this.tm.v;t===this.data.op&&(t=this.data.op-1),this.renderedFrame=t}var n,i=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),n=i-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&(this.elements[n].prepareFrame(this.renderedFrame-this.layers[n].st),this.elements[n]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},ICompElement.prototype.setElements=function(e){this.elements=e},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)this.elements[e]&&this.elements[e].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(e){return new SVGCompElement(e,this.globalData,this)},extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(e){return new SVGCompElement(e,this.globalData,this)},ShapeTransformManager.prototype={addTransformSequence:function(e){var t,n=e.length,i="_";for(t=0;t<n;t+=1)i+=e[t].transform.key+"_";var o=this.sequences[i];return o||(o={transforms:[].concat(e),finalTransform:new Matrix,_mdf:!1},this.sequences[i]=o,this.sequenceList.push(o)),o},processSequence:function(e,t){for(var n=0,i=e.transforms.length,o=t;n<i&&!t;){if(e.transforms[n].transform.mProps._mdf){o=!0;break}n+=1}if(o)for(e.finalTransform.reset(),n=i-1;n>=0;n-=1)e.finalTransform.multiply(e.transforms[n].transform.mProps.v);e._mdf=o},processSequences:function(e){var t,n=this.sequenceList.length;for(t=0;t<n;t+=1)this.processSequence(this.sequenceList[t],e)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var e="__lottie_element_luma_buffer",t=null,n=null,i=null;function o(){var o,a,r;t||(o=createNS("svg"),a=createNS("filter"),r=createNS("feColorMatrix"),a.setAttribute("id",e),r.setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),a.appendChild(r),o.appendChild(a),o.setAttribute("id",e+"_svg"),featureSupport.svgLumaHidden&&(o.style.display="none"),i=o,document.body.appendChild(i),t=createTag("canvas"),(n=t.getContext("2d")).filter="url(#"+e+")",n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1))}return{load:o,get:function(i){return t||o(),t.width=i.width,t.height=i.height,n.filter="url(#"+e+")",t}}};function createCanvas(e,t){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(e,t);var n=createTag("canvas");return n.width=e,n.height=t,n}var assetLoader={loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas:createCanvas},registeredEffects={};function CVEffects(e){var t,n,i=e.data.ef?e.data.ef.length:0;for(this.filters=[],t=0;t<i;t+=1){n=null;var o=e.data.ef[t].ty;registeredEffects[o]&&(n=new registeredEffects[o].effect(e.effectsManager.effectElements[t],e)),n&&this.filters.push(n)}this.filters.length&&e.addRenderableComponent(this)}function registerEffect(e,t){registeredEffects[e]={effect:t}}function CVMaskElement(e,t){var n;this.data=e,this.element=t,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var i=this.masksProperties.length,o=!1;for(n=0;n<i;n+=1)"n"!==this.masksProperties[n].mode&&(o=!0),this.viewData[n]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[n],3);this.hasMasks=o,o&&this.element.addRenderableComponent(this)}function CVBaseElement(){}CVEffects.prototype.renderFrame=function(e){var t,n=this.filters.length;for(t=0;t<n;t+=1)this.filters[t].renderFrame(e)},CVEffects.prototype.getEffects=function(e){var t,n=this.filters.length,i=[];for(t=0;t<n;t+=1)this.filters[t].type===e&&i.push(this.filters[t]);return i},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var e,t,n,i,o=this.element.finalTransform.mat,a=this.element.canvasContext,r=this.masksProperties.length;for(a.beginPath(),e=0;e<r;e+=1)if("n"!==this.masksProperties[e].mode){var s;this.masksProperties[e].inv&&(a.moveTo(0,0),a.lineTo(this.element.globalData.compSize.w,0),a.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),a.lineTo(0,this.element.globalData.compSize.h),a.lineTo(0,0)),i=this.viewData[e].v,t=o.applyToPointArray(i.v[0][0],i.v[0][1],0),a.moveTo(t[0],t[1]);var c=i._length;for(s=1;s<c;s+=1)n=o.applyToTriplePoints(i.o[s-1],i.i[s],i.v[s]),a.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);n=o.applyToTriplePoints(i.o[s-1],i.i[0],i.v[0]),a.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5])}this.element.globalData.renderer.save(!0),a.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};function CVShapeData(e,t,n,i){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var o,a=4;"rc"===t.ty?a=5:"el"===t.ty?a=6:"sr"===t.ty&&(a=7),this.sh=ShapePropertyFactory.getShapeProp(e,t,a,e);var r,s=n.length;for(o=0;o<s;o+=1)n[o].closed||(r={transforms:i.addTransformSequence(n[o].transforms),trNodes:[]},this.styledShapes.push(r),n[o].elements.push(r))}function CVShapeElement(e,t,n){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(e,t,n)}function CVTextElement(e,t,n){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(e,t,n)}function CVImageElement(e,t,n){this.assetData=t.getAssetData(e.refId),this.img=t.imageLoader.getAsset(this.assetData),this.initElement(e,t,n)}function CVSolidElement(e,t,n){this.initElement(e,t,n)}function CanvasRendererBase(){}function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){var e;for(this.stack=[],this.cArrPos=0,this.cTr=new Matrix,e=0;e<15;e+=1){var t=new CanvasContext;this.stack[e]=t}this._length=15,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}function CVCompElement(e,t,n){this.completeLayers=!1,this.layers=e.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(e,t,n),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function CanvasRenderer(e,t){this.animationItem=e,this.renderConfig={clearCanvas:!t||void 0===t.clearCanvas||t.clearCanvas,context:t&&t.context||null,progressiveLoad:t&&t.progressiveLoad||!1,preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:t&&t.contentVisibility||"visible",className:t&&t.className||"",id:t&&t.id||"",runExpressions:!t||void 0===t.runExpressions||t.runExpressions},this.renderConfig.dpr=t&&t.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=t&&t.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}function HBaseElement(){}function HSolidElement(e,t,n){this.initElement(e,t,n)}function HShapeElement(e,t,n){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(e,t,n),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(e,t,n){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(e,t,n)}function HCameraElement(e,t,n){this.initFrame(),this.initBaseData(e,t,n),this.initHierarchy();var i=PropertyFactory.getProp;if(this.pe=i(this,e.pe,0,0,this),e.ks.p.s?(this.px=i(this,e.ks.p.x,1,0,this),this.py=i(this,e.ks.p.y,1,0,this),this.pz=i(this,e.ks.p.z,1,0,this)):this.p=i(this,e.ks.p,1,0,this),e.ks.a&&(this.a=i(this,e.ks.a,1,0,this)),e.ks.or.k.length&&e.ks.or.k[0].to){var o,a=e.ks.or.k.length;for(o=0;o<a;o+=1)e.ks.or.k[o].to=null,e.ks.or.k[o].ti=null}this.or=i(this,e.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=i(this,e.ks.rx,0,degToRads,this),this.ry=i(this,e.ks.ry,0,degToRads,this),this.rz=i(this,e.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HImageElement(e,t,n){this.assetData=t.getAssetData(e.refId),this.initElement(e,t,n)}function HybridRendererBase(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:t&&t.className||"",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(t&&!1===t.hideOnTransparent),filterSize:{width:t&&t.filterSize&&t.filterSize.width||"400%",height:t&&t.filterSize&&t.filterSize.height||"400%",x:t&&t.filterSize&&t.filterSize.x||"-100%",y:t&&t.filterSize&&t.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function HCompElement(e,t,n){this.layers=e.layers,this.supports3d=!e.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,t,n),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function HybridRenderer(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:t&&t.className||"",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(t&&!1===t.hideOnTransparent),filterSize:{width:t&&t.filterSize&&t.filterSize.width||"400%",height:t&&t.filterSize&&t.filterSize.height||"400%",x:t&&t.filterSize&&t.filterSize.x||"-100%",y:t&&t.filterSize&&t.filterSize.y||"-100%"},runExpressions:!t||void 0===t.runExpressions||t.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var e=this.globalData.canvasContext,t=assetLoader.createCanvas(e.canvas.width,e.canvas.height);this.buffers.push(t);var n=assetLoader.createCanvas(e.canvas.width,e.canvas.height);this.buffers.push(n),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var e=this.globalData;if(e.blendMode!==this.data.bm){e.blendMode=this.data.bm;var t=getBlendMode(this.data.bm);e.canvasContext.globalCompositeOperation=t}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(e){e.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var e=this.buffers[0].getContext("2d");this.clearCanvas(e),e.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var e=this.buffers[1],t=e.getContext("2d");if(this.clearCanvas(t),t.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform),this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1).renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var n=assetLoader.getLumaCanvas(this.canvasContext.canvas);n.getContext("2d").drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(n,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(e,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(e){if(!this.hidden&&!this.data.hd&&(1!==this.data.td||e)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var t=0===this.data.ty;this.prepareLayer(),this.globalData.renderer.save(t),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(t),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(e,t){var n={data:e,type:e.ty,preTransforms:this.transformsManager.addTransformSequence(t),transforms:[],elements:[],closed:!0===e.hd},i={};if("fl"===e.ty||"st"===e.ty?(i.c=PropertyFactory.getProp(this,e.c,1,255,this),i.c.k||(n.co="rgb("+bmFloor(i.c.v[0])+","+bmFloor(i.c.v[1])+","+bmFloor(i.c.v[2])+")")):"gf"!==e.ty&&"gs"!==e.ty||(i.s=PropertyFactory.getProp(this,e.s,1,null,this),i.e=PropertyFactory.getProp(this,e.e,1,null,this),i.h=PropertyFactory.getProp(this,e.h||{k:0},0,.01,this),i.a=PropertyFactory.getProp(this,e.a||{k:0},0,degToRads,this),i.g=new GradientProperty(this,e.g,this)),i.o=PropertyFactory.getProp(this,e.o,0,.01,this),"st"===e.ty||"gs"===e.ty){if(n.lc=lineCapEnum[e.lc||2],n.lj=lineJoinEnum[e.lj||2],1==e.lj&&(n.ml=e.ml),i.w=PropertyFactory.getProp(this,e.w,0,null,this),i.w.k||(n.wi=i.w.v),e.d){var o=new DashProperty(this,e.d,"canvas",this);i.d=o,i.d.k||(n.da=i.d.dashArray,n.do=i.d.dashoffset[0])}}else n.r=2===e.r?"evenodd":"nonzero";return this.stylesList.push(n),i.style=n,i},CVShapeElement.prototype.createGroupElement=function(){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(e){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,e.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,e,this)}}},CVShapeElement.prototype.createShapeElement=function(e){var t=new CVShapeData(this,e,this.stylesList,this.transformsManager);return this.shapes.push(t),this.addShapeToModifiers(t),t},CVShapeElement.prototype.reloadShapes=function(){var e;this._isFirstFrame=!0;var t=this.itemsData.length;for(e=0;e<t;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),t=this.dynamicProperties.length,e=0;e<t;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(e){var t,n=this.stylesList.length;for(t=0;t<n;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.push(e)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var e,t=this.stylesList.length;for(e=0;e<t;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.pop()},CVShapeElement.prototype.closeStyles=function(e){var t,n=e.length;for(t=0;t<n;t+=1)e[t].closed=!0},CVShapeElement.prototype.searchShapes=function(e,t,n,i,o){var a,r,s,c,l,d,p=e.length-1,h=[],u=[],m=[].concat(o);for(a=p;a>=0;a-=1){if((c=this.searchProcessedElement(e[a]))?t[a]=n[c-1]:e[a]._shouldRender=i,"fl"===e[a].ty||"st"===e[a].ty||"gf"===e[a].ty||"gs"===e[a].ty)c?t[a].style.closed=!1:t[a]=this.createStyleElement(e[a],m),h.push(t[a].style);else if("gr"===e[a].ty){if(c)for(s=t[a].it.length,r=0;r<s;r+=1)t[a].prevViewData[r]=t[a].it[r];else t[a]=this.createGroupElement(e[a]);this.searchShapes(e[a].it,t[a].it,t[a].prevViewData,i,m)}else"tr"===e[a].ty?(c||(d=this.createTransformElement(e[a]),t[a]=d),m.push(t[a]),this.addTransformToStyleList(t[a])):"sh"===e[a].ty||"rc"===e[a].ty||"el"===e[a].ty||"sr"===e[a].ty?c||(t[a]=this.createShapeElement(e[a])):"tm"===e[a].ty||"rd"===e[a].ty||"pb"===e[a].ty||"zz"===e[a].ty||"op"===e[a].ty?(c?(l=t[a]).closed=!1:((l=ShapeModifiers.getModifier(e[a].ty)).init(this,e[a]),t[a]=l,this.shapeModifiers.push(l)),u.push(l)):"rp"===e[a].ty&&(c?(l=t[a]).closed=!0:(l=ShapeModifiers.getModifier(e[a].ty),t[a]=l,l.init(this,e,a,t),this.shapeModifiers.push(l),i=!1),u.push(l));this.addProcessedElement(e[a],a+1)}for(this.removeTransformFromStyleList(),this.closeStyles(h),p=u.length,a=0;a<p;a+=1)u[a].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(e,t){(e._opMdf||t.op._mdf||this._isFirstFrame)&&(t.opacity=e.opacity,t.opacity*=t.op.v,t._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var e,t,n,i,o,a,r,s,c,l=this.stylesList.length,d=this.globalData.renderer,p=this.globalData.canvasContext;for(e=0;e<l;e+=1)if(("st"!==(s=(c=this.stylesList[e]).type)&&"gs"!==s||0!==c.wi)&&c.data._shouldRender&&0!==c.coOp&&0!==this.globalData.currentGlobalAlpha){for(d.save(),a=c.elements,"st"===s||"gs"===s?(d.ctxStrokeStyle("st"===s?c.co:c.grd),d.ctxLineWidth(c.wi),d.ctxLineCap(c.lc),d.ctxLineJoin(c.lj),d.ctxMiterLimit(c.ml||0)):d.ctxFillStyle("fl"===s?c.co:c.grd),d.ctxOpacity(c.coOp),"st"!==s&&"gs"!==s&&p.beginPath(),d.ctxTransform(c.preTransforms.finalTransform.props),n=a.length,t=0;t<n;t+=1){for("st"!==s&&"gs"!==s||(p.beginPath(),c.da&&(p.setLineDash(c.da),p.lineDashOffset=c.do)),o=(r=a[t].trNodes).length,i=0;i<o;i+=1)"m"===r[i].t?p.moveTo(r[i].p[0],r[i].p[1]):"c"===r[i].t?p.bezierCurveTo(r[i].pts[0],r[i].pts[1],r[i].pts[2],r[i].pts[3],r[i].pts[4],r[i].pts[5]):p.closePath();"st"!==s&&"gs"!==s||(d.ctxStroke(),c.da&&p.setLineDash(this.dashResetter))}"st"!==s&&"gs"!==s&&this.globalData.renderer.ctxFill(c.r),d.restore()}},CVShapeElement.prototype.renderShape=function(e,t,n,i){var o,a;for(a=e,o=t.length-1;o>=0;o-=1)"tr"===t[o].ty?(a=n[o].transform,this.renderShapeTransform(e,a)):"sh"===t[o].ty||"el"===t[o].ty||"rc"===t[o].ty||"sr"===t[o].ty?this.renderPath(t[o],n[o]):"fl"===t[o].ty?this.renderFill(t[o],n[o],a):"st"===t[o].ty?this.renderStroke(t[o],n[o],a):"gf"===t[o].ty||"gs"===t[o].ty?this.renderGradientFill(t[o],n[o],a):"gr"===t[o].ty?this.renderShape(a,t[o].it,n[o].it):t[o].ty;i&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(e,t){if(this._isFirstFrame||t._mdf||e.transforms._mdf){var n,i,o,a=e.trNodes,r=t.paths,s=r._length;a.length=0;var c=e.transforms.finalTransform;for(o=0;o<s;o+=1){var l=r.shapes[o];if(l&&l.v){for(i=l._length,n=1;n<i;n+=1)1===n&&a.push({t:"m",p:c.applyToPointArray(l.v[0][0],l.v[0][1],0)}),a.push({t:"c",pts:c.applyToTriplePoints(l.o[n-1],l.i[n],l.v[n])});1===i&&a.push({t:"m",p:c.applyToPointArray(l.v[0][0],l.v[0][1],0)}),l.c&&i&&(a.push({t:"c",pts:c.applyToTriplePoints(l.o[n-1],l.i[0],l.v[0])}),a.push({t:"z"}))}}e.trNodes=a}},CVShapeElement.prototype.renderPath=function(e,t){if(!0!==e.hd&&e._shouldRender){var n,i=t.styledShapes.length;for(n=0;n<i;n+=1)this.renderStyledShape(t.styledShapes[n],t.sh)}},CVShapeElement.prototype.renderFill=function(e,t,n){var i=t.style;(t.c._mdf||this._isFirstFrame)&&(i.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||n._opMdf||this._isFirstFrame)&&(i.coOp=t.o.v*n.opacity)},CVShapeElement.prototype.renderGradientFill=function(e,t,n){var i,o=t.style;if(!o.grd||t.g._mdf||t.s._mdf||t.e._mdf||1!==e.t&&(t.h._mdf||t.a._mdf)){var a,r=this.globalData.canvasContext,s=t.s.v,c=t.e.v;if(1===e.t)i=r.createLinearGradient(s[0],s[1],c[0],c[1]);else{var l=Math.sqrt(Math.pow(s[0]-c[0],2)+Math.pow(s[1]-c[1],2)),d=Math.atan2(c[1]-s[1],c[0]-s[0]),p=t.h.v;p>=1?p=.99:p<=-1&&(p=-.99);var h=l*p,u=Math.cos(d+t.a.v)*h+s[0],m=Math.sin(d+t.a.v)*h+s[1];i=r.createRadialGradient(u,m,0,s[0],s[1],l)}var f=e.g.p,g=t.g.c,y=1;for(a=0;a<f;a+=1)t.g._hasOpacity&&t.g._collapsable&&(y=t.g.o[2*a+1]),i.addColorStop(g[4*a]/100,"rgba("+g[4*a+1]+","+g[4*a+2]+","+g[4*a+3]+","+y+")");o.grd=i}o.coOp=t.o.v*n.opacity},CVShapeElement.prototype.renderStroke=function(e,t,n){var i=t.style,o=t.d;o&&(o._mdf||this._isFirstFrame)&&(i.da=o.dashArray,i.do=o.dashoffset[0]),(t.c._mdf||this._isFirstFrame)&&(i.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||n._opMdf||this._isFirstFrame)&&(i.coOp=t.o.v*n.opacity),(t.w._mdf||this._isFirstFrame)&&(i.wi=t.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e.l?e.l.length:0);var t=!1;e.fc?(t=!0,this.values.fill=this.buildColor(e.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=t;var n=!1;e.sc&&(n=!0,this.values.stroke=this.buildColor(e.sc),this.values.sWidth=e.sw);var i,o,a,r,s,c,l,d,p,h,u,m,f=this.globalData.fontManager.getFontByName(e.f),g=e.l,y=this.mHelper;this.stroke=n,this.values.fValue=e.finalSize+"px "+this.globalData.fontManager.getFontByName(e.f).fFamily,o=e.finalText.length;var v=this.data.singleShape,b=.001*e.tr*e.finalSize,x=0,_=0,k=!0,w=0;for(i=0;i<o;i+=1){r=(a=this.globalData.fontManager.getCharData(e.finalText[i],f.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily))&&a.data||{},y.reset(),v&&g[i].n&&(x=-b,_+=e.yOffset,_+=k?1:0,k=!1),p=(l=r.shapes?r.shapes[0].it:[]).length,y.scale(e.finalSize/100,e.finalSize/100),v&&this.applyTextPropertiesToMatrix(e,y,g[i].line,x,_),u=createSizedArray(p-1);var C=0;for(d=0;d<p;d+=1)if("sh"===l[d].ty){for(c=l[d].ks.k.i.length,h=l[d].ks.k,m=[],s=1;s<c;s+=1)1===s&&m.push(y.applyToX(h.v[0][0],h.v[0][1],0),y.applyToY(h.v[0][0],h.v[0][1],0)),m.push(y.applyToX(h.o[s-1][0],h.o[s-1][1],0),y.applyToY(h.o[s-1][0],h.o[s-1][1],0),y.applyToX(h.i[s][0],h.i[s][1],0),y.applyToY(h.i[s][0],h.i[s][1],0),y.applyToX(h.v[s][0],h.v[s][1],0),y.applyToY(h.v[s][0],h.v[s][1],0));m.push(y.applyToX(h.o[s-1][0],h.o[s-1][1],0),y.applyToY(h.o[s-1][0],h.o[s-1][1],0),y.applyToX(h.i[0][0],h.i[0][1],0),y.applyToY(h.i[0][0],h.i[0][1],0),y.applyToX(h.v[0][0],h.v[0][1],0),y.applyToY(h.v[0][0],h.v[0][1],0)),u[C]=m,C+=1}v&&(x+=g[i].l,x+=b),this.textSpans[w]?this.textSpans[w].elem=u:this.textSpans[w]={elem:u},w+=1}},CVTextElement.prototype.renderInnerContent=function(){var e,t,n,i,o,a;this.validateText(),this.canvasContext.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var r,s=this.textAnimator.renderedLetters,c=this.textProperty.currentData.l;t=c.length;var l,d,p=null,h=null,u=null,m=this.globalData.renderer;for(e=0;e<t;e+=1)if(!c[e].n){if((r=s[e])&&(m.save(),m.ctxTransform(r.p),m.ctxOpacity(r.o)),this.fill){for(r&&r.fc?p!==r.fc&&(m.ctxFillStyle(r.fc),p=r.fc):p!==this.values.fill&&(p=this.values.fill,m.ctxFillStyle(this.values.fill)),i=(l=this.textSpans[e].elem).length,this.globalData.canvasContext.beginPath(),n=0;n<i;n+=1)for(a=(d=l[n]).length,this.globalData.canvasContext.moveTo(d[0],d[1]),o=2;o<a;o+=6)this.globalData.canvasContext.bezierCurveTo(d[o],d[o+1],d[o+2],d[o+3],d[o+4],d[o+5]);this.globalData.canvasContext.closePath(),m.ctxFill()}if(this.stroke){for(r&&r.sw?u!==r.sw&&(u=r.sw,m.ctxLineWidth(r.sw)):u!==this.values.sWidth&&(u=this.values.sWidth,m.ctxLineWidth(this.values.sWidth)),r&&r.sc?h!==r.sc&&(h=r.sc,m.ctxStrokeStyle(r.sc)):h!==this.values.stroke&&(h=this.values.stroke,m.ctxStrokeStyle(this.values.stroke)),i=(l=this.textSpans[e].elem).length,this.globalData.canvasContext.beginPath(),n=0;n<i;n+=1)for(a=(d=l[n]).length,this.globalData.canvasContext.moveTo(d[0],d[1]),o=2;o<a;o+=6)this.globalData.canvasContext.bezierCurveTo(d[o],d[o+1],d[o+2],d[o+3],d[o+4],d[o+5]);this.globalData.canvasContext.closePath(),m.ctxStroke()}r&&this.globalData.renderer.restore()}},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var e=createTag("canvas");e.width=this.assetData.w,e.height=this.assetData.h;var t,n,i=e.getContext("2d"),o=this.img.width,a=this.img.height,r=o/a,s=this.assetData.w/this.assetData.h,c=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;r>s&&"xMidYMid slice"===c||r<s&&"xMidYMid slice"!==c?t=(n=a)*s:n=(t=o)/s,i.drawImage(this.img,(o-t)/2,(a-n)/2,t,n,0,0,this.assetData.w,this.assetData.h),this.img=e}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(e){return new CVShapeElement(e,this.globalData,this)},CanvasRendererBase.prototype.createText=function(e){return new CVTextElement(e,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(e){return new CVImageElement(e,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(e){return new CVSolidElement(e,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(e){1===e[0]&&0===e[1]&&0===e[4]&&1===e[5]&&0===e[12]&&0===e[13]||this.canvasContext.transform(e[0],e[1],e[4],e[5],e[12],e[13])},CanvasRendererBase.prototype.ctxOpacity=function(e){this.canvasContext.globalAlpha*=e<0?0:e},CanvasRendererBase.prototype.ctxFillStyle=function(e){this.canvasContext.fillStyle=e},CanvasRendererBase.prototype.ctxStrokeStyle=function(e){this.canvasContext.strokeStyle=e},CanvasRendererBase.prototype.ctxLineWidth=function(e){this.canvasContext.lineWidth=e},CanvasRendererBase.prototype.ctxLineCap=function(e){this.canvasContext.lineCap=e},CanvasRendererBase.prototype.ctxLineJoin=function(e){this.canvasContext.lineJoin=e},CanvasRendererBase.prototype.ctxMiterLimit=function(e){this.canvasContext.miterLimit=e},CanvasRendererBase.prototype.ctxFill=function(e){this.canvasContext.fill(e)},CanvasRendererBase.prototype.ctxFillRect=function(e,t,n,i){this.canvasContext.fillRect(e,t,n,i)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(e){this.renderConfig.clearCanvas?(e&&(this.globalData.blendMode="source-over"),this.contextData.restore(e)):this.canvasContext.restore()},CanvasRendererBase.prototype.configAnimation=function(e){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var t=this.animationItem.container.style;t.width="100%",t.height="100%";var n="0px 0px 0px";t.transformOrigin=n,t.mozTransformOrigin=n,t.webkitTransformOrigin=n,t["-webkit-transform"]=n,t.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=e,this.layers=e.layers,this.transformCanvas={w:e.w,h:e.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(e,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(e.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(e,t){var n,i,o,a;if(this.reset(),e?(n=e,i=t,this.canvasContext.canvas.width=n,this.canvasContext.canvas.height=i):(this.animationItem.wrapper&&this.animationItem.container?(n=this.animationItem.wrapper.offsetWidth,i=this.animationItem.wrapper.offsetHeight):(n=this.canvasContext.canvas.width,i=this.canvasContext.canvas.height),this.canvasContext.canvas.width=n*this.renderConfig.dpr,this.canvasContext.canvas.height=i*this.renderConfig.dpr),-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")){var r=this.renderConfig.preserveAspectRatio.split(" "),s=r[1]||"meet",c=r[0]||"xMidYMid",l=c.substr(0,4),d=c.substr(4);o=n/i,(a=this.transformCanvas.w/this.transformCanvas.h)>o&&"meet"===s||a<o&&"slice"===s?(this.transformCanvas.sx=n/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=n/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=i/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=i/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx="xMid"===l&&(a<o&&"meet"===s||a>o&&"slice"===s)?(n-this.transformCanvas.w*(i/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===l&&(a<o&&"meet"===s||a>o&&"slice"===s)?(n-this.transformCanvas.w*(i/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty="YMid"===d&&(a>o&&"meet"===s||a<o&&"slice"===s)?(i-this.transformCanvas.h*(n/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===d&&(a>o&&"meet"===s||a<o&&"slice"===s)?(i-this.transformCanvas.h*(n/this.transformCanvas.w))*this.renderConfig.dpr:0}else"none"===this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=n/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=i/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){var e;for(this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),e=(this.layers?this.layers.length:0)-1;e>=0;e-=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(e,t){if((this.renderedFrame!==e||!0!==this.renderConfig.clearCanvas||t)&&!this.destroyed&&-1!==e){var n;this.renderedFrame=e,this.globalData.frameNum=e-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||t,this.globalData.projectInterface.currentFrame=e;var i=this.layers.length;for(this.completeLayers||this.checkLayers(e),n=i-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&this.elements[n].prepareFrame(e-this.layers[n].st);if(this.globalData._mdf){for(!0===this.renderConfig.clearCanvas?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),n=i-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&this.elements[n].renderFrame();!0!==this.renderConfig.clearCanvas&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(e){var t=this.elements;if(!t[e]&&99!==this.layers[e].ty){var n=this.createItem(this.layers[e],this,this.globalData);t[e]=n,n.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"},CVContextData.prototype.duplicate=function(){var e=2*this._length,t=0;for(t=this._length;t<e;t+=1)this.stack[t]=new CanvasContext;this._length=e},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(e){this.cArrPos-=1;var t,n=this.stack[this.cArrPos],i=n.transform,o=this.cTr.props;for(t=0;t<16;t+=1)o[t]=i[t];if(e){this.nativeContext.restore();var a=this.stack[this.cArrPos+1];this.appliedFillStyle=a.fillStyle,this.appliedStrokeStyle=a.strokeStyle,this.appliedLineWidth=a.lineWidth,this.appliedLineCap=a.lineCap,this.appliedLineJoin=a.lineJoin,this.appliedMiterLimit=a.miterLimit}this.nativeContext.setTransform(i[0],i[1],i[4],i[5],i[12],i[13]),(e||-1!==n.opacity&&this.currentOpacity!==n.opacity)&&(this.nativeContext.globalAlpha=n.opacity,this.currentOpacity=n.opacity),this.currentFillStyle=n.fillStyle,this.currentStrokeStyle=n.strokeStyle,this.currentLineWidth=n.lineWidth,this.currentLineCap=n.lineCap,this.currentLineJoin=n.lineJoin,this.currentMiterLimit=n.miterLimit},CVContextData.prototype.save=function(e){e&&this.nativeContext.save();var t=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var n,i=this.stack[this.cArrPos];for(n=0;n<16;n+=1)i.transform[n]=t[n];this.cArrPos+=1;var o=this.stack[this.cArrPos];o.opacity=i.opacity,o.fillStyle=i.fillStyle,o.strokeStyle=i.strokeStyle,o.lineWidth=i.lineWidth,o.lineCap=i.lineCap,o.lineJoin=i.lineJoin,o.miterLimit=i.miterLimit},CVContextData.prototype.setOpacity=function(e){this.stack[this.cArrPos].opacity=e},CVContextData.prototype.setContext=function(e){this.nativeContext=e},CVContextData.prototype.fillStyle=function(e){this.stack[this.cArrPos].fillStyle!==e&&(this.currentFillStyle=e,this.stack[this.cArrPos].fillStyle=e)},CVContextData.prototype.strokeStyle=function(e){this.stack[this.cArrPos].strokeStyle!==e&&(this.currentStrokeStyle=e,this.stack[this.cArrPos].strokeStyle=e)},CVContextData.prototype.lineWidth=function(e){this.stack[this.cArrPos].lineWidth!==e&&(this.currentLineWidth=e,this.stack[this.cArrPos].lineWidth=e)},CVContextData.prototype.lineCap=function(e){this.stack[this.cArrPos].lineCap!==e&&(this.currentLineCap=e,this.stack[this.cArrPos].lineCap=e)},CVContextData.prototype.lineJoin=function(e){this.stack[this.cArrPos].lineJoin!==e&&(this.currentLineJoin=e,this.stack[this.cArrPos].lineJoin=e)},CVContextData.prototype.miterLimit=function(e){this.stack[this.cArrPos].miterLimit!==e&&(this.currentMiterLimit=e,this.stack[this.cArrPos].miterLimit=e)},CVContextData.prototype.transform=function(e){this.transformMat.cloneFromProps(e);var t=this.cTr;this.transformMat.multiply(t),t.cloneFromProps(this.transformMat.props);var n=t.props;this.nativeContext.setTransform(n[0],n[1],n[4],n[5],n[12],n[13])},CVContextData.prototype.opacity=function(e){var t=this.stack[this.cArrPos].opacity;t*=e<0?0:e,this.stack[this.cArrPos].opacity!==t&&(this.currentOpacity!==e&&(this.nativeContext.globalAlpha=e,this.currentOpacity=e),this.stack[this.cArrPos].opacity=t)},CVContextData.prototype.fill=function(e){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(e)},CVContextData.prototype.fillRect=function(e,t,n,i){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(e,t,n,i)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()},extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var e,t=this.canvasContext;for(t.beginPath(),t.moveTo(0,0),t.lineTo(this.data.w,0),t.lineTo(this.data.w,this.data.h),t.lineTo(0,this.data.h),t.lineTo(0,0),t.clip(),e=this.layers.length-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},CVCompElement.prototype.destroy=function(){var e;for(e=this.layers.length-1;e>=0;e-=1)this.elements[e]&&this.elements[e].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(e){return new CVCompElement(e,this.globalData,this)},extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(e){return new CVCompElement(e,this.globalData,this)},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){var e=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var t=this.finalTransform.mat.toCSS();e.transform=t,e.webkitTransform=t}this.finalTransform._opMdf&&(e.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var e;this.data.hasMask?((e=createNS("rect")).setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((e=createTag("div")).style.width=this.data.sw+"px",e.style.height=this.data.sh+"px",e.style.backgroundColor=this.data.sc),this.layerElement.appendChild(e)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var e;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),e=this.svgElement;else{e=createNS("svg");var t=this.comp.data?this.comp.data:this.globalData.compSize;e.setAttribute("width",t.w),e.setAttribute("height",t.h),e.appendChild(this.shapesContainer),this.layerElement.appendChild(e)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=e},HShapeElement.prototype.getTransformedPoint=function(e,t){var n,i=e.length;for(n=0;n<i;n+=1)t=e[n].mProps.v.applyToPointArray(t[0],t[1],0);return t},HShapeElement.prototype.calculateShapeBoundingBox=function(e,t){var n,i,o,a,r,s=e.sh.v,c=e.transformers,l=s._length;if(!(l<=1)){for(n=0;n<l-1;n+=1)i=this.getTransformedPoint(c,s.v[n]),o=this.getTransformedPoint(c,s.o[n]),a=this.getTransformedPoint(c,s.i[n+1]),r=this.getTransformedPoint(c,s.v[n+1]),this.checkBounds(i,o,a,r,t);s.c&&(i=this.getTransformedPoint(c,s.v[n]),o=this.getTransformedPoint(c,s.o[n]),a=this.getTransformedPoint(c,s.i[0]),r=this.getTransformedPoint(c,s.v[0]),this.checkBounds(i,o,a,r,t))}},HShapeElement.prototype.checkBounds=function(e,t,n,i,o){this.getBoundsOfCurve(e,t,n,i);var a=this.shapeBoundingBox;o.x=bmMin(a.left,o.x),o.xMax=bmMax(a.right,o.xMax),o.y=bmMin(a.top,o.y),o.yMax=bmMax(a.bottom,o.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(e,t,n,i){for(var o,a,r,s,c,l,d,p=[[e[0],i[0]],[e[1],i[1]]],h=0;h<2;++h)a=6*e[h]-12*t[h]+6*n[h],o=-3*e[h]+9*t[h]-9*n[h]+3*i[h],r=3*t[h]-3*e[h],a|=0,r|=0,0==(o|=0)&&0===a||(0===o?(s=-r/a)>0&&s<1&&p[h].push(this.calculateF(s,e,t,n,i,h)):(c=a*a-4*r*o)>=0&&((l=(-a+bmSqrt(c))/(2*o))>0&&l<1&&p[h].push(this.calculateF(l,e,t,n,i,h)),(d=(-a-bmSqrt(c))/(2*o))>0&&d<1&&p[h].push(this.calculateF(d,e,t,n,i,h))));this.shapeBoundingBox.left=bmMin.apply(null,p[0]),this.shapeBoundingBox.top=bmMin.apply(null,p[1]),this.shapeBoundingBox.right=bmMax.apply(null,p[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,p[1])},HShapeElement.prototype.calculateF=function(e,t,n,i,o,a){return bmPow(1-e,3)*t[a]+3*bmPow(1-e,2)*e*n[a]+3*(1-e)*bmPow(e,2)*i[a]+bmPow(e,3)*o[a]},HShapeElement.prototype.calculateBoundingBox=function(e,t){var n,i=e.length;for(n=0;n<i;n+=1)e[n]&&e[n].sh?this.calculateShapeBoundingBox(e[n],t):e[n]&&e[n].it?this.calculateBoundingBox(e[n].it,t):e[n]&&e[n].style&&e[n].w&&this.expandStrokeBoundingBox(e[n].w,t)},HShapeElement.prototype.expandStrokeBoundingBox=function(e,t){var n=0;if(e.keyframes){for(var i=0;i<e.keyframes.length;i+=1){var o=e.keyframes[i].s;o>n&&(n=o)}n*=e.mult}else n=e.v*e.mult;t.x-=n,t.xMax+=n,t.y-=n,t.yMax+=n},HShapeElement.prototype.currentBoxContains=function(e){return this.currentBBox.x<=e.x&&this.currentBBox.y<=e.y&&this.currentBBox.width+this.currentBBox.x>=e.x+e.width&&this.currentBBox.height+this.currentBBox.y>=e.y+e.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var e=this.tempBoundingBox,t=999999;if(e.x=t,e.xMax=-t,e.y=t,e.yMax=-t,this.calculateBoundingBox(this.itemsData,e),e.width=e.xMax<e.x?0:e.xMax-e.x,e.height=e.yMax<e.y?0:e.yMax-e.y,this.currentBoxContains(e))return;var n=!1;if(this.currentBBox.w!==e.width&&(this.currentBBox.w=e.width,this.shapeCont.setAttribute("width",e.width),n=!0),this.currentBBox.h!==e.height&&(this.currentBBox.h=e.height,this.shapeCont.setAttribute("height",e.height),n=!0),n||this.currentBBox.x!==e.x||this.currentBBox.y!==e.y){this.currentBBox.w=e.width,this.currentBBox.h=e.height,this.currentBBox.x=e.x,this.currentBBox.y=e.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var i=this.shapeCont.style,o="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";i.transform=o,i.webkitTransform=o}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var e=createNS("g");this.maskedElement.appendChild(e),this.innerElem=e}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e.l?e.l.length:0);var t=this.innerElem.style,n=e.fc?this.buildColor(e.fc):"rgba(0,0,0,0)";t.fill=n,t.color=n,e.sc&&(t.stroke=this.buildColor(e.sc),t.strokeWidth=e.sw+"px");var i,o,a=this.globalData.fontManager.getFontByName(e.f);if(!this.globalData.fontManager.chars)if(t.fontSize=e.finalSize+"px",t.lineHeight=e.finalSize+"px",a.fClass)this.innerElem.className=a.fClass;else{t.fontFamily=a.fFamily;var r=e.fWeight,s=e.fStyle;t.fontStyle=s,t.fontWeight=r}var c,l,d,p=e.l;o=p.length;var h,u=this.mHelper,m="",f=0;for(i=0;i<o;i+=1){if(this.globalData.fontManager.chars?(this.textPaths[f]?c=this.textPaths[f]:((c=createNS("path")).setAttribute("stroke-linecap",lineCapEnum[1]),c.setAttribute("stroke-linejoin",lineJoinEnum[2]),c.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[f]?d=(l=this.textSpans[f]).children[0]:((l=createTag("div")).style.lineHeight=0,(d=createNS("svg")).appendChild(c),styleDiv(l)))):this.isMasked?c=this.textPaths[f]?this.textPaths[f]:createNS("text"):this.textSpans[f]?(l=this.textSpans[f],c=this.textPaths[f]):(styleDiv(l=createTag("span")),styleDiv(c=createTag("span")),l.appendChild(c)),this.globalData.fontManager.chars){var g,y=this.globalData.fontManager.getCharData(e.finalText[i],a.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily);if(g=y?y.data:null,u.reset(),g&&g.shapes&&g.shapes.length&&(h=g.shapes[0].it,u.scale(e.finalSize/100,e.finalSize/100),m=this.createPathShape(u,h),c.setAttribute("d",m)),this.isMasked)this.innerElem.appendChild(c);else{if(this.innerElem.appendChild(l),g&&g.shapes){document.body.appendChild(d);var v=d.getBBox();d.setAttribute("width",v.width+2),d.setAttribute("height",v.height+2),d.setAttribute("viewBox",v.x-1+" "+(v.y-1)+" "+(v.width+2)+" "+(v.height+2));var b=d.style,x="translate("+(v.x-1)+"px,"+(v.y-1)+"px)";b.transform=x,b.webkitTransform=x,p[i].yOffset=v.y-1}else d.setAttribute("width",1),d.setAttribute("height",1);l.appendChild(d)}}else if(c.textContent=p[i].val,c.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(c);else{this.innerElem.appendChild(l);var _=c.style,k="translate3d(0,"+-e.finalSize/1.2+"px,0)";_.transform=k,_.webkitTransform=k}this.isMasked?this.textSpans[f]=c:this.textSpans[f]=l,this.textSpans[f].style.display="block",this.textPaths[f]=c,f+=1}for(;f<this.textSpans.length;)this.textSpans[f].style.display="none",f+=1},HTextElement.prototype.renderInnerContent=function(){var e;if(this.validateText(),this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),e=this.svgElement.style;var t="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";e.transform=t,e.webkitTransform=t}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var n,i,o,a,r,s=0,c=this.textAnimator.renderedLetters,l=this.textProperty.currentData.l;for(i=l.length,n=0;n<i;n+=1)l[n].n?s+=1:(a=this.textSpans[n],r=this.textPaths[n],o=c[s],s+=1,o._mdf.m&&(this.isMasked?a.setAttribute("transform",o.m):(a.style.webkitTransform=o.m,a.style.transform=o.m)),a.style.opacity=o.o,o.sw&&o._mdf.sw&&r.setAttribute("stroke-width",o.sw),o.sc&&o._mdf.sc&&r.setAttribute("stroke",o.sc),o.fc&&o._mdf.fc&&(r.setAttribute("fill",o.fc),r.style.color=o.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var d=this.innerElem.getBBox();if(this.currentBBox.w!==d.width&&(this.currentBBox.w=d.width,this.svgElement.setAttribute("width",d.width)),this.currentBBox.h!==d.height&&(this.currentBBox.h=d.height,this.svgElement.setAttribute("height",d.height)),this.currentBBox.w!==d.width+2||this.currentBBox.h!==d.height+2||this.currentBBox.x!==d.x-1||this.currentBBox.y!==d.y-1){this.currentBBox.w=d.width+2,this.currentBBox.h=d.height+2,this.currentBBox.x=d.x-1,this.currentBBox.y=d.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),e=this.svgElement.style;var p="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";e.transform=p,e.webkitTransform=p}}}},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var e,t,n,i,o=this.comp.threeDElements.length;for(e=0;e<o;e+=1)if("3d"===(t=this.comp.threeDElements[e]).type){n=t.perspectiveElem.style,i=t.container.style;var a=this.pe.v+"px",r="0px 0px 0px",s="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";n.perspective=a,n.webkitPerspective=a,i.transformOrigin=r,i.mozTransformOrigin=r,i.webkitTransformOrigin=r,n.transform=s,n.webkitTransform=s}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var e,t,n=this._isFirstFrame;if(this.hierarchy)for(t=this.hierarchy.length,e=0;e<t;e+=1)n=this.hierarchy[e].finalTransform.mProp._mdf||n;if(n||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(e=t=this.hierarchy.length-1;e>=0;e-=1){var i=this.hierarchy[e].finalTransform.mProp;this.mat.translate(-i.p.v[0],-i.p.v[1],i.p.v[2]),this.mat.rotateX(-i.or.v[0]).rotateY(-i.or.v[1]).rotateZ(i.or.v[2]),this.mat.rotateX(-i.rx.v).rotateY(-i.ry.v).rotateZ(i.rz.v),this.mat.scale(1/i.s.v[0],1/i.s.v[1],1/i.s.v[2]),this.mat.translate(i.a.v[0],i.a.v[1],i.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var o;o=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var a=Math.sqrt(Math.pow(o[0],2)+Math.pow(o[1],2)+Math.pow(o[2],2)),r=[o[0]/a,o[1]/a,o[2]/a],s=Math.sqrt(r[2]*r[2]+r[0]*r[0]),c=Math.atan2(r[1],s),l=Math.atan2(r[0],-r[2]);this.mat.rotateY(l).rotateX(-c)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var d=!this._prevMat.equals(this.mat);if((d||this.pe._mdf)&&this.comp.threeDElements){var p,h,u;for(t=this.comp.threeDElements.length,e=0;e<t;e+=1)if("3d"===(p=this.comp.threeDElements[e]).type){if(d){var m=this.mat.toCSS();(u=p.container.style).transform=m,u.webkitTransform=m}this.pe._mdf&&((h=p.perspectiveElem.style).perspective=this.pe.v+"px",h.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData),t=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(t),t.crossOrigin="anonymous",t.src=e,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRendererBase.prototype.appendElementInPos=function(e,t){var n=e.getBaseElement();if(n){var i=this.layers[t];if(i.ddd&&this.supports3d)this.addTo3dContainer(n,t);else if(this.threeDElements)this.addTo3dContainer(n,t);else{for(var o,a,r=0;r<t;)this.elements[r]&&!0!==this.elements[r]&&this.elements[r].getBaseElement&&(a=this.elements[r],o=(this.layers[r].ddd?this.getThreeDContainerByPos(r):a.getBaseElement())||o),r+=1;o?i.ddd&&this.supports3d||this.layerElement.insertBefore(n,o):i.ddd&&this.supports3d||this.layerElement.appendChild(n)}}},HybridRendererBase.prototype.createShape=function(e){return this.supports3d?new HShapeElement(e,this.globalData,this):new SVGShapeElement(e,this.globalData,this)},HybridRendererBase.prototype.createText=function(e){return this.supports3d?new HTextElement(e,this.globalData,this):new SVGTextLottieElement(e,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(e){return this.camera=new HCameraElement(e,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(e){return this.supports3d?new HImageElement(e,this.globalData,this):new IImageElement(e,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(e){return this.supports3d?new HSolidElement(e,this.globalData,this):new ISolidElement(e,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(e){for(var t=0,n=this.threeDElements.length;t<n;){if(this.threeDElements[t].startPos<=e&&this.threeDElements[t].endPos>=e)return this.threeDElements[t].perspectiveElem;t+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(e,t){var n,i,o=createTag("div");styleDiv(o);var a=createTag("div");if(styleDiv(a),"3d"===t){(n=o.style).width=this.globalData.compSize.w+"px",n.height=this.globalData.compSize.h+"px";var r="50% 50%";n.webkitTransformOrigin=r,n.mozTransformOrigin=r,n.transformOrigin=r;var s="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(i=a.style).transform=s,i.webkitTransform=s}o.appendChild(a);var c={container:a,perspectiveElem:o,startPos:e,endPos:e,type:t};return this.threeDElements.push(c),c},HybridRendererBase.prototype.build3dContainers=function(){var e,t,n=this.layers.length,i="";for(e=0;e<n;e+=1)this.layers[e].ddd&&3!==this.layers[e].ty?("3d"!==i&&(i="3d",t=this.createThreeDContainer(e,"3d")),t.endPos=Math.max(t.endPos,e)):("2d"!==i&&(i="2d",t=this.createThreeDContainer(e,"2d")),t.endPos=Math.max(t.endPos,e));for(e=(n=this.threeDElements.length)-1;e>=0;e-=1)this.resizerElem.appendChild(this.threeDElements[e].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(e,t){for(var n=0,i=this.threeDElements.length;n<i;){if(t<=this.threeDElements[n].endPos){for(var o,a=this.threeDElements[n].startPos;a<t;)this.elements[a]&&this.elements[a].getBaseElement&&(o=this.elements[a].getBaseElement()),a+=1;o?this.threeDElements[n].container.insertBefore(e,o):this.threeDElements[n].container.appendChild(e);break}n+=1}},HybridRendererBase.prototype.configAnimation=function(e){var t=createTag("div"),n=this.animationItem.wrapper,i=t.style;i.width=e.w+"px",i.height=e.h+"px",this.resizerElem=t,styleDiv(t),i.transformStyle="flat",i.mozTransformStyle="flat",i.webkitTransformStyle="flat",this.renderConfig.className&&t.setAttribute("class",this.renderConfig.className),n.appendChild(t),i.overflow="hidden";var o=createNS("svg");o.setAttribute("width","1"),o.setAttribute("height","1"),styleDiv(o),this.resizerElem.appendChild(o);var a=createNS("defs");o.appendChild(a),this.data=e,this.setupGlobalData(e,o),this.globalData.defs=a,this.layers=e.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){var e;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var t=this.layers?this.layers.length:0;for(e=0;e<t;e+=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var e,t,n,i,o=this.animationItem.wrapper.offsetWidth,a=this.animationItem.wrapper.offsetHeight,r=o/a;this.globalData.compSize.w/this.globalData.compSize.h>r?(e=o/this.globalData.compSize.w,t=o/this.globalData.compSize.w,n=0,i=(a-this.globalData.compSize.h*(o/this.globalData.compSize.w))/2):(e=a/this.globalData.compSize.h,t=a/this.globalData.compSize.h,n=(o-this.globalData.compSize.w*(a/this.globalData.compSize.h))/2,i=0);var s=this.resizerElem.style;s.webkitTransform="matrix3d("+e+",0,0,0,0,"+t+",0,0,0,0,1,0,"+n+","+i+",0,1)",s.transform=s.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var e,t=this.globalData.compSize.w,n=this.globalData.compSize.h,i=this.threeDElements.length;for(e=0;e<i;e+=1){var o=this.threeDElements[e].perspectiveElem.style;o.webkitPerspective=Math.sqrt(Math.pow(t,2)+Math.pow(n,2))+"px",o.perspective=o.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(e){var t,n=e.length,i=createTag("div");for(t=0;t<n;t+=1)if(e[t].xt){var o=this.createComp(e[t],i,this.globalData.comp,null);o.initExpressions(),this.globalData.projectInterface.registerComposition(o)}},extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(e,t){for(var n,i=0;i<t;)this.elements[i]&&this.elements[i].getBaseElement&&(n=this.elements[i].getBaseElement()),i+=1;n?this.layerElement.insertBefore(e,n):this.layerElement.appendChild(e)},HCompElement.prototype.createComp=function(e){return this.supports3d?new HCompElement(e,this.globalData,this):new SVGCompElement(e,this.globalData,this)},extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(e){return this.supports3d?new HCompElement(e,this.globalData,this):new SVGCompElement(e,this.globalData,this)};var CompExpressionInterface=function(e){function t(t){for(var n=0,i=e.layers.length;n<i;){if(e.layers[n].nm===t||e.layers[n].ind===t)return e.elements[n].layerInterface;n+=1}return null}return Object.defineProperty(t,"_name",{value:e.data.nm}),t.layer=t,t.pixelAspect=1,t.height=e.data.h||e.globalData.compSize.h,t.width=e.data.w||e.globalData.compSize.w,t.pixelAspect=1,t.frameDuration=1/e.globalData.frameRate,t.displayStartTime=0,t.numLayers=e.layers.length,t};function _typeof$2(e){return _typeof$2="function"==typeof Symbol&&"symbol"==cosmic._typeof(Symbol.iterator)?function(e){return cosmic._typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":cosmic._typeof(e)},_typeof$2(e)}function seedRandom(e,t){var n=this,i=256,o="random",a=t.pow(i,6),r=t.pow(2,52),s=2*r,c=255;function l(e){var t,n=e.length,o=this,a=0,r=o.i=o.j=0,s=o.S=[];for(n||(e=[n++]);a<i;)s[a]=a++;for(a=0;a<i;a++)s[a]=s[r=c&r+e[a%n]+(t=s[a])],s[r]=t;o.g=function(e){for(var t,n=0,a=o.i,r=o.j,s=o.S;e--;)t=s[a=c&a+1],n=n*i+s[c&(s[a]=s[r=c&r+t])+(s[r]=t)];return o.i=a,o.j=r,n}}function d(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function p(e,t){var n,i=[],o=_typeof$2(e);if(t&&"object"==o)for(n in e)try{i.push(p(e[n],t-1))}catch(e){}return i.length?i:"string"==o?e:e+"\0"}function h(e,t){for(var n,i=e+"",o=0;o<i.length;)t[c&o]=c&(n^=19*t[c&o])+i.charCodeAt(o++);return u(t)}function u(e){return String.fromCharCode.apply(0,e)}t["seed"+o]=function(c,m,f){var g=[],y=h(p((m=!0===m?{entropy:!0}:m||{}).entropy?[c,u(e)]:null===c?function(){try{var t=new Uint8Array(i);return(n.crypto||n.msCrypto).getRandomValues(t),u(t)}catch(t){var o=n.navigator,a=o&&o.plugins;return[+new Date,n,a,n.screen,u(e)]}}():c,3),g),v=new l(g),b=function(){for(var e=v.g(6),t=a,n=0;e<r;)e=(e+n)*i,t*=i,n=v.g(1);for(;e>=s;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|v.g(4)},b.quick=function(){return v.g(4)/4294967296},b.double=b,h(u(v.S),e),(m.pass||f||function(e,n,i,a){return a&&(a.S&&d(a,v),e.state=function(){return d(v,{})}),i?(t[o]=e,n):e})(b,y,"global"in m?m.global:this==t,m.state)},h(t.random(),e)}function initialize$2(e){seedRandom([],e)}var propTypes={SHAPE:"shape"};function _typeof$1(e){return _typeof$1="function"==typeof Symbol&&"symbol"==cosmic._typeof(Symbol.iterator)?function(e){return cosmic._typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":cosmic._typeof(e)},_typeof$1(e)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(e){return e.constructor===Array||e.constructor===Float32Array}function isNumerable(e,t){return"number"===e||t instanceof Number||"boolean"===e||"string"===e}function $bm_neg(e){var t=_typeof$1(e);if("number"===t||e instanceof Number||"boolean"===t)return-e;if($bm_isInstanceOfArray(e)){var n,i=e.length,o=[];for(n=0;n<i;n+=1)o[n]=-e[n];return o}return e.propType?e.v:-e}initialize$2(BMMath);var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(e,t){var n=_typeof$1(e),i=_typeof$1(t);if(isNumerable(n,e)&&isNumerable(i,t)||"string"===n||"string"===i)return e+t;if($bm_isInstanceOfArray(e)&&isNumerable(i,t))return(e=e.slice(0))[0]+=t,e;if(isNumerable(n,e)&&$bm_isInstanceOfArray(t))return(t=t.slice(0))[0]=e+t[0],t;if($bm_isInstanceOfArray(e)&&$bm_isInstanceOfArray(t)){for(var o=0,a=e.length,r=t.length,s=[];o<a||o<r;)("number"==typeof e[o]||e[o]instanceof Number)&&("number"==typeof t[o]||t[o]instanceof Number)?s[o]=e[o]+t[o]:s[o]=void 0===t[o]?e[o]:e[o]||t[o],o+=1;return s}return 0}var add=sum;function sub(e,t){var n=_typeof$1(e),i=_typeof$1(t);if(isNumerable(n,e)&&isNumerable(i,t))return"string"===n&&(e=parseInt(e,10)),"string"===i&&(t=parseInt(t,10)),e-t;if($bm_isInstanceOfArray(e)&&isNumerable(i,t))return(e=e.slice(0))[0]-=t,e;if(isNumerable(n,e)&&$bm_isInstanceOfArray(t))return(t=t.slice(0))[0]=e-t[0],t;if($bm_isInstanceOfArray(e)&&$bm_isInstanceOfArray(t)){for(var o=0,a=e.length,r=t.length,s=[];o<a||o<r;)("number"==typeof e[o]||e[o]instanceof Number)&&("number"==typeof t[o]||t[o]instanceof Number)?s[o]=e[o]-t[o]:s[o]=void 0===t[o]?e[o]:e[o]||t[o],o+=1;return s}return 0}function mul(e,t){var n,i,o,a=_typeof$1(e),r=_typeof$1(t);if(isNumerable(a,e)&&isNumerable(r,t))return e*t;if($bm_isInstanceOfArray(e)&&isNumerable(r,t)){for(o=e.length,n=createTypedArray("float32",o),i=0;i<o;i+=1)n[i]=e[i]*t;return n}if(isNumerable(a,e)&&$bm_isInstanceOfArray(t)){for(o=t.length,n=createTypedArray("float32",o),i=0;i<o;i+=1)n[i]=e*t[i];return n}return 0}function div(e,t){var n,i,o,a=_typeof$1(e),r=_typeof$1(t);if(isNumerable(a,e)&&isNumerable(r,t))return e/t;if($bm_isInstanceOfArray(e)&&isNumerable(r,t)){for(o=e.length,n=createTypedArray("float32",o),i=0;i<o;i+=1)n[i]=e[i]/t;return n}if(isNumerable(a,e)&&$bm_isInstanceOfArray(t)){for(o=t.length,n=createTypedArray("float32",o),i=0;i<o;i+=1)n[i]=e/t[i];return n}return 0}function mod(e,t){return"string"==typeof e&&(e=parseInt(e,10)),"string"==typeof t&&(t=parseInt(t,10)),e%t}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(e,t,n){if(t>n){var i=n;n=t,t=i}return Math.min(Math.max(e,t),n)}function radiansToDegrees(e){return e/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(e){return e*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(e,t){if("number"==typeof e||e instanceof Number)return t=t||0,Math.abs(e-t);var n;t||(t=helperLengthArray);var i=Math.min(e.length,t.length),o=0;for(n=0;n<i;n+=1)o+=Math.pow(t[n]-e[n],2);return Math.sqrt(o)}function normalize(e){return div(e,length(e))}function rgbToHsl(e){var t,n,i=e[0],o=e[1],a=e[2],r=Math.max(i,o,a),s=Math.min(i,o,a),c=(r+s)/2;if(r===s)t=0,n=0;else{var l=r-s;switch(n=c>.5?l/(2-r-s):l/(r+s),r){case i:t=(o-a)/l+(o<a?6:0);break;case o:t=(a-i)/l+2;break;case a:t=(i-o)/l+4}t/=6}return[t,n,c,e[3]]}function hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function hslToRgb(e){var t,n,i,o=e[0],a=e[1],r=e[2];if(0===a)t=r,i=r,n=r;else{var s=r<.5?r*(1+a):r+a-r*a,c=2*r-s;t=hue2rgb(c,s,o+1/3),n=hue2rgb(c,s,o),i=hue2rgb(c,s,o-1/3)}return[t,n,i,e[3]]}function linear(e,t,n,i,o){if(void 0!==i&&void 0!==o||(i=t,o=n,t=0,n=1),n<t){var a=n;n=t,t=a}if(e<=t)return i;if(e>=n)return o;var r,s=n===t?0:(e-t)/(n-t);if(!i.length)return i+(o-i)*s;var c=i.length,l=createTypedArray("float32",c);for(r=0;r<c;r+=1)l[r]=i[r]+(o[r]-i[r])*s;return l}function random(e,t){if(void 0===t&&(void 0===e?(e=0,t=1):(t=e,e=void 0)),t.length){var n,i=t.length;e||(e=createTypedArray("float32",i));var o=createTypedArray("float32",i),a=BMMath.random();for(n=0;n<i;n+=1)o[n]=e[n]+a*(t[n]-e[n]);return o}return void 0===e&&(e=0),e+BMMath.random()*(t-e)}function createPath(e,t,n,i){var o,a=e.length,r=shapePool.newElement();r.setPathData(!!i,a);var s,c,l=[0,0];for(o=0;o<a;o+=1)s=t&&t[o]?t[o]:l,c=n&&n[o]?n[o]:l,r.setTripleAt(e[o][0],e[o][1],c[0]+e[o][0],c[1]+e[o][1],s[0]+e[o][0],s[1]+e[o][1],o,!0);return r}function initiateExpression(elem,data,property){function noOp(e){return e}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||!0!==this.data.hd,wiggle=function(e,t){var n,i,o=this.pv.length?this.pv.length:1,a=createTypedArray("float32",o),r=Math.floor(5*time);for(n=0,i=0;n<r;){for(i=0;i<o;i+=1)a[i]+=-t+2*t*BMMath.random();n+=1}var s=5*time,c=s-Math.floor(s),l=createTypedArray("float32",o);if(o>1){for(i=0;i<o;i+=1)l[i]=this.pv[i]+a[i]+(-t+2*t*BMMath.random())*c;return l}return this.pv+a[0]+(-t+2*t*BMMath.random())*c}.bind(this);function loopInDuration(e,t){return loopIn(e,t,!0)}function loopOutDuration(e,t){return loopOut(e,t,!0)}thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue;function lookAt(e,t){var n=[t[0]-e[0],t[1]-e[1],t[2]-e[2]],i=Math.atan2(n[0],Math.sqrt(n[1]*n[1]+n[2]*n[2]))/degToRads;return[-Math.atan2(n[1],n[2])/degToRads,i,0]}function easeOut(e,t,n,i,o){return applyEase(easeOutBez,e,t,n,i,o)}function easeIn(e,t,n,i,o){return applyEase(easeInBez,e,t,n,i,o)}function ease(e,t,n,i,o){return applyEase(easeInOutBez,e,t,n,i,o)}function applyEase(e,t,n,i,o,a){void 0===o?(o=n,a=i):t=(t-n)/(i-n),t>1?t=1:t<0&&(t=0);var r=e(t);if($bm_isInstanceOfArray(o)){var s,c=o.length,l=createTypedArray("float32",c);for(s=0;s<c;s+=1)l[s]=(a[s]-o[s])*r+o[s];return l}return(a-o)*r+o}function nearestKey(e){var t,n,i,o=data.k.length;if(data.k.length&&"number"!=typeof data.k[0])if(n=-1,(e*=elem.comp.globalData.frameRate)<data.k[0].t)n=1,i=data.k[0].t;else{for(t=0;t<o-1;t+=1){if(e===data.k[t].t){n=t+1,i=data.k[t].t;break}if(e>data.k[t].t&&e<data.k[t+1].t){e-data.k[t].t>data.k[t+1].t-e?(n=t+2,i=data.k[t+1].t):(n=t+1,i=data.k[t].t);break}}-1===n&&(n=t+1,i=data.k[t].t)}else n=0,i=0;var a={};return a.index=n,a.time=i/elem.comp.globalData.frameRate,a}function key(e){var t,n,i;if(!data.k.length||"number"==typeof data.k[0])throw new Error("The property has no keyframe at index "+e);e-=1,t={time:data.k[e].t/elem.comp.globalData.frameRate,value:[]};var o=Object.prototype.hasOwnProperty.call(data.k[e],"s")?data.k[e].s:data.k[e-1].e;for(i=o.length,n=0;n<i;n+=1)t[n]=o[n],t.value[n]=o[n];return t}function framesToTime(e,t){return t||(t=elem.comp.globalData.frameRate),e/t}function timeToFrames(e,t){return e||0===e||(e=time),t||(t=elem.comp.globalData.frameRate),e*t}function seedRandom(e){BMMath.seedrandom(randSeed+e)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(e,t){return"string"==typeof value?void 0===t?value.substring(e):value.substring(e,t):""}function substr(e,t){return"string"==typeof value?void 0===t?value.substr(e):value.substr(e,t):""}function posterizeTime(e){time=0===e?0:Math.floor(time*e)/e,value=valueAtTime(time)}var index=elem.data.ind;elem.hierarchy&&elem.hierarchy.length;var parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(e){return value=e,this.frameExpressionId===elem.globalData.frameId&&"textSelector"!==this.propType?value:("textSelector"===this.propType&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),!(!elem.hierarchy||!elem.hierarchy.length)&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var e={initExpressions:function(e){var t=0,n=[];e.renderer.compInterface=CompExpressionInterface(e.renderer),e.renderer.globalData.projectInterface.registerComposition(e.renderer),e.renderer.globalData.pushExpression=function(){t+=1},e.renderer.globalData.popExpression=function(){0==(t-=1)&&function(){var e,t=n.length;for(e=0;e<t;e+=1)n[e].release();n.length=0}()},e.renderer.globalData.registerExpressionProperty=function(e){-1===n.indexOf(e)&&n.push(e)}}};return e.resetFrame=ExpressionManager.resetFrame,e}(),MaskManagerInterface=function(){function e(e,t){this._mask=e,this._data=t}return Object.defineProperty(e.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(e.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}}),function(t){var n,i=createSizedArray(t.viewData.length),o=t.viewData.length;for(n=0;n<o;n+=1)i[n]=new e(t.viewData[n],t.masksProperties[n]);return function(e){for(n=0;n<o;){if(t.masksProperties[n].nm===e)return i[n];n+=1}return null}}}(),ExpressionPropertyInterface=function(){var e={pv:0,v:0,mult:1},t={pv:[0,0,0],v:[0,0,0],mult:1};function n(e,t,n){Object.defineProperty(e,"velocity",{get:function(){return t.getVelocityAtTime(t.comp.currentFrame)}}),e.numKeys=t.keyframes?t.keyframes.length:0,e.key=function(i){if(!e.numKeys)return 0;var o;o="s"in t.keyframes[i-1]?t.keyframes[i-1].s:"e"in t.keyframes[i-2]?t.keyframes[i-2].e:t.keyframes[i-2].s;var a="unidimensional"===n?new Number(o):Object.assign({},o);return a.time=t.keyframes[i-1].t/t.elem.comp.globalData.frameRate,a.value="unidimensional"===n?o[0]:o,a},e.valueAtTime=t.getValueAtTime,e.speedAtTime=t.getSpeedAtTime,e.velocityAtTime=t.getVelocityAtTime,e.propertyGroup=t.propertyGroup}function i(){return e}return function(o){return o?"unidimensional"===o.propType?function(t){t&&"pv"in t||(t=e);var i=1/t.mult,o=t.pv*i,a=new Number(o);return a.value=o,n(a,t,"unidimensional"),function(){return t.k&&t.getValue(),o=t.v*i,a.value!==o&&((a=new Number(o)).value=o,n(a,t,"unidimensional")),a}}(o):function(e){e&&"pv"in e||(e=t);var i=1/e.mult,o=e.data&&e.data.l||e.pv.length,a=createTypedArray("float32",o),r=createTypedArray("float32",o);return a.value=r,n(a,e,"multidimensional"),function(){e.k&&e.getValue();for(var t=0;t<o;t+=1)r[t]=e.v[t]*i,a[t]=r[t];return a}}(o):i}}(),TransformExpressionInterface=function(e){function t(e){switch(e){case"scale":case"Scale":case"ADBE Scale":case 6:return t.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return t.rotation;case"ADBE Rotate X":return t.xRotation;case"ADBE Rotate Y":return t.yRotation;case"position":case"Position":case"ADBE Position":case 2:return t.position;case"ADBE Position_0":return t.xPosition;case"ADBE Position_1":return t.yPosition;case"ADBE Position_2":return t.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return t.anchorPoint;case"opacity":case"Opacity":case 11:return t.opacity;default:return null}}var n,i,o,a;return Object.defineProperty(t,"rotation",{get:ExpressionPropertyInterface(e.r||e.rz)}),Object.defineProperty(t,"zRotation",{get:ExpressionPropertyInterface(e.rz||e.r)}),Object.defineProperty(t,"xRotation",{get:ExpressionPropertyInterface(e.rx)}),Object.defineProperty(t,"yRotation",{get:ExpressionPropertyInterface(e.ry)}),Object.defineProperty(t,"scale",{get:ExpressionPropertyInterface(e.s)}),e.p?a=ExpressionPropertyInterface(e.p):(n=ExpressionPropertyInterface(e.px),i=ExpressionPropertyInterface(e.py),e.pz&&(o=ExpressionPropertyInterface(e.pz))),Object.defineProperty(t,"position",{get:function(){return e.p?a():[n(),i(),o?o():0]}}),Object.defineProperty(t,"xPosition",{get:ExpressionPropertyInterface(e.px)}),Object.defineProperty(t,"yPosition",{get:ExpressionPropertyInterface(e.py)}),Object.defineProperty(t,"zPosition",{get:ExpressionPropertyInterface(e.pz)}),Object.defineProperty(t,"anchorPoint",{get:ExpressionPropertyInterface(e.a)}),Object.defineProperty(t,"opacity",{get:ExpressionPropertyInterface(e.o)}),Object.defineProperty(t,"skew",{get:ExpressionPropertyInterface(e.sk)}),Object.defineProperty(t,"skewAxis",{get:ExpressionPropertyInterface(e.sa)}),Object.defineProperty(t,"orientation",{get:ExpressionPropertyInterface(e.or)}),t},LayerExpressionInterface=function(){function e(e){var t=new Matrix;return void 0!==e?this._elem.finalTransform.mProp.getValueAtTime(e).clone(t):this._elem.finalTransform.mProp.applyToMatrix(t),t}function t(e,t){var n=this.getMatrix(t);return n.props[12]=0,n.props[13]=0,n.props[14]=0,this.applyPoint(n,e)}function n(e,t){var n=this.getMatrix(t);return this.applyPoint(n,e)}function i(e,t){var n=this.getMatrix(t);return n.props[12]=0,n.props[13]=0,n.props[14]=0,this.invertPoint(n,e)}function o(e,t){var n=this.getMatrix(t);return this.invertPoint(n,e)}function a(e,t){if(this._elem.hierarchy&&this._elem.hierarchy.length){var n,i=this._elem.hierarchy.length;for(n=0;n<i;n+=1)this._elem.hierarchy[n].finalTransform.mProp.applyToMatrix(e)}return e.applyToPointArray(t[0],t[1],t[2]||0)}function r(e,t){if(this._elem.hierarchy&&this._elem.hierarchy.length){var n,i=this._elem.hierarchy.length;for(n=0;n<i;n+=1)this._elem.hierarchy[n].finalTransform.mProp.applyToMatrix(e)}return e.inversePoint(t)}function s(e){var t=new Matrix;if(t.reset(),this._elem.finalTransform.mProp.applyToMatrix(t),this._elem.hierarchy&&this._elem.hierarchy.length){var n,i=this._elem.hierarchy.length;for(n=0;n<i;n+=1)this._elem.hierarchy[n].finalTransform.mProp.applyToMatrix(t);return t.inversePoint(e)}return t.inversePoint(e)}function c(){return[1,1,1,1]}return function(l){var d;function p(e){switch(e){case"ADBE Root Vectors Group":case"Contents":case 2:return p.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return d;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return p.effect;case"ADBE Text Properties":return p.textInterface;default:return null}}p.getMatrix=e,p.invertPoint=r,p.applyPoint=a,p.toWorld=n,p.toWorldVec=t,p.fromWorld=o,p.fromWorldVec=i,p.toComp=n,p.fromComp=s,p.sampleImage=c,p.sourceRectAtTime=l.sourceRectAtTime.bind(l),p._elem=l;var h=getDescriptor(d=TransformExpressionInterface(l.finalTransform.mProp),"anchorPoint");return Object.defineProperties(p,{hasParent:{get:function(){return l.hierarchy.length}},parent:{get:function(){return l.hierarchy[0].layerInterface}},rotation:getDescriptor(d,"rotation"),scale:getDescriptor(d,"scale"),position:getDescriptor(d,"position"),opacity:getDescriptor(d,"opacity"),anchorPoint:h,anchor_point:h,transform:{get:function(){return d}},active:{get:function(){return l.isInRange}}}),p.startTime=l.data.st,p.index=l.data.ind,p.source=l.data.refId,p.height=0===l.data.ty?l.data.h:100,p.width=0===l.data.ty?l.data.w:100,p.inPoint=l.data.ip/l.comp.globalData.frameRate,p.outPoint=l.data.op/l.comp.globalData.frameRate,p._name=l.data.nm,p.registerMaskInterface=function(e){p.mask=new MaskManagerInterface(e,l)},p.registerEffectsInterface=function(e){p.effect=e},p}}(),propertyGroupFactory=function(e,t){return function(n){return(n=void 0===n?1:n)<=0?e:t(n-1)}},PropertyInterface=function(e,t){var n={_name:e};return function(e){return(e=void 0===e?1:e)<=0?n:t(e-1)}},EffectsExpressionInterface=function(){var e={createEffectsInterface:function(e,n){if(e.effectsManager){var i,o=[],a=e.data.ef,r=e.effectsManager.effectElements.length;for(i=0;i<r;i+=1)o.push(t(a[i],e.effectsManager.effectElements[i],n,e));var s=e.data.ef||[],c=function(e){for(i=0,r=s.length;i<r;){if(e===s[i].nm||e===s[i].mn||e===s[i].ix)return o[i];i+=1}return null};return Object.defineProperty(c,"numProperties",{get:function(){return s.length}}),c}return null}};function t(e,i,o,a){function r(t){for(var n=e.ef,i=0,o=n.length;i<o;){if(t===n[i].nm||t===n[i].mn||t===n[i].ix)return 5===n[i].ty?l[i]:l[i]();i+=1}throw new Error}var s,c=propertyGroupFactory(r,o),l=[],d=e.ef.length;for(s=0;s<d;s+=1)5===e.ef[s].ty?l.push(t(e.ef[s],i.effectElements[s],i.effectElements[s].propertyGroup,a)):l.push(n(i.effectElements[s],e.ef[s].ty,a,c));return"ADBE Color Control"===e.mn&&Object.defineProperty(r,"color",{get:function(){return l[0]()}}),Object.defineProperties(r,{numProperties:{get:function(){return e.np}},_name:{value:e.nm},propertyGroup:{value:c}}),r.enabled=0!==e.en,r.active=r.enabled,r}function n(e,t,n,i){var o=ExpressionPropertyInterface(e.p);return e.p.setGroupProperty&&e.p.setGroupProperty(PropertyInterface("",i)),function(){return 10===t?n.comp.compInterface(e.p.v):o()}}return e}(),ShapePathInterface=function(e,t,n){var i=t.sh;function o(e){return"Shape"===e||"shape"===e||"Path"===e||"path"===e||"ADBE Vector Shape"===e||2===e?o.path:null}var a=propertyGroupFactory(o,n);return i.setGroupProperty(PropertyInterface("Path",a)),Object.defineProperties(o,{path:{get:function(){return i.k&&i.getValue(),i}},shape:{get:function(){return i.k&&i.getValue(),i}},_name:{value:e.nm},ix:{value:e.ix},propertyIndex:{value:e.ix},mn:{value:e.mn},propertyGroup:{value:n}}),o},ShapeExpressionInterface=function(){function e(e,r,h){var u,m=[],f=e?e.length:0;for(u=0;u<f;u+=1)"gr"===e[u].ty?m.push(t(e[u],r[u],h)):"fl"===e[u].ty?m.push(n(e[u],r[u],h)):"st"===e[u].ty?m.push(o(e[u],r[u],h)):"tm"===e[u].ty?m.push(a(e[u],r[u],h)):"tr"===e[u].ty||("el"===e[u].ty?m.push(s(e[u],r[u],h)):"sr"===e[u].ty?m.push(c(e[u],r[u],h)):"sh"===e[u].ty?m.push(ShapePathInterface(e[u],r[u],h)):"rc"===e[u].ty?m.push(l(e[u],r[u],h)):"rd"===e[u].ty?m.push(d(e[u],r[u],h)):"rp"===e[u].ty?m.push(p(e[u],r[u],h)):"gf"===e[u].ty?m.push(i(e[u],r[u],h)):m.push((e[u],r[u],function(){return null})));return m}function t(t,n,i){var o=function(e){switch(e){case"ADBE Vectors Group":case"Contents":case 2:return o.content;default:return o.transform}};o.propertyGroup=propertyGroupFactory(o,i);var a=function(t,n,i){var o,a=function(e){for(var t=0,n=o.length;t<n;){if(o[t]._name===e||o[t].mn===e||o[t].propertyIndex===e||o[t].ix===e||o[t].ind===e)return o[t];t+=1}return"number"==typeof e?o[e-1]:null};a.propertyGroup=propertyGroupFactory(a,i),o=e(t.it,n.it,a.propertyGroup),a.numProperties=o.length;var s=r(t.it[t.it.length-1],n.it[n.it.length-1],a.propertyGroup);return a.transform=s,a.propertyIndex=t.cix,a._name=t.nm,a}(t,n,o.propertyGroup),s=r(t.it[t.it.length-1],n.it[n.it.length-1],o.propertyGroup);return o.content=a,o.transform=s,Object.defineProperty(o,"_name",{get:function(){return t.nm}}),o.numProperties=t.np,o.propertyIndex=t.ix,o.nm=t.nm,o.mn=t.mn,o}function n(e,t,n){function i(e){return"Color"===e||"color"===e?i.color:"Opacity"===e||"opacity"===e?i.opacity:null}return Object.defineProperties(i,{color:{get:ExpressionPropertyInterface(t.c)},opacity:{get:ExpressionPropertyInterface(t.o)},_name:{value:e.nm},mn:{value:e.mn}}),t.c.setGroupProperty(PropertyInterface("Color",n)),t.o.setGroupProperty(PropertyInterface("Opacity",n)),i}function i(e,t,n){function i(e){return"Start Point"===e||"start point"===e?i.startPoint:"End Point"===e||"end point"===e?i.endPoint:"Opacity"===e||"opacity"===e?i.opacity:null}return Object.defineProperties(i,{startPoint:{get:ExpressionPropertyInterface(t.s)},endPoint:{get:ExpressionPropertyInterface(t.e)},opacity:{get:ExpressionPropertyInterface(t.o)},type:{get:function(){return"a"}},_name:{value:e.nm},mn:{value:e.mn}}),t.s.setGroupProperty(PropertyInterface("Start Point",n)),t.e.setGroupProperty(PropertyInterface("End Point",n)),t.o.setGroupProperty(PropertyInterface("Opacity",n)),i}function o(e,t,n){var i,o=propertyGroupFactory(l,n),a=propertyGroupFactory(c,o);function r(n){Object.defineProperty(c,e.d[n].nm,{get:ExpressionPropertyInterface(t.d.dataProps[n].p)})}var s=e.d?e.d.length:0,c={};for(i=0;i<s;i+=1)r(i),t.d.dataProps[i].p.setGroupProperty(a);function l(e){return"Color"===e||"color"===e?l.color:"Opacity"===e||"opacity"===e?l.opacity:"Stroke Width"===e||"stroke width"===e?l.strokeWidth:null}return Object.defineProperties(l,{color:{get:ExpressionPropertyInterface(t.c)},opacity:{get:ExpressionPropertyInterface(t.o)},strokeWidth:{get:ExpressionPropertyInterface(t.w)},dash:{get:function(){return c}},_name:{value:e.nm},mn:{value:e.mn}}),t.c.setGroupProperty(PropertyInterface("Color",o)),t.o.setGroupProperty(PropertyInterface("Opacity",o)),t.w.setGroupProperty(PropertyInterface("Stroke Width",o)),l}function a(e,t,n){function i(t){return t===e.e.ix||"End"===t||"end"===t?i.end:t===e.s.ix?i.start:t===e.o.ix?i.offset:null}var o=propertyGroupFactory(i,n);return i.propertyIndex=e.ix,t.s.setGroupProperty(PropertyInterface("Start",o)),t.e.setGroupProperty(PropertyInterface("End",o)),t.o.setGroupProperty(PropertyInterface("Offset",o)),i.propertyIndex=e.ix,i.propertyGroup=n,Object.defineProperties(i,{start:{get:ExpressionPropertyInterface(t.s)},end:{get:ExpressionPropertyInterface(t.e)},offset:{get:ExpressionPropertyInterface(t.o)},_name:{value:e.nm}}),i.mn=e.mn,i}function r(e,t,n){function i(t){return e.a.ix===t||"Anchor Point"===t?i.anchorPoint:e.o.ix===t||"Opacity"===t?i.opacity:e.p.ix===t||"Position"===t?i.position:e.r.ix===t||"Rotation"===t||"ADBE Vector Rotation"===t?i.rotation:e.s.ix===t||"Scale"===t?i.scale:e.sk&&e.sk.ix===t||"Skew"===t?i.skew:e.sa&&e.sa.ix===t||"Skew Axis"===t?i.skewAxis:null}var o=propertyGroupFactory(i,n);return t.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",o)),t.transform.mProps.p.setGroupProperty(PropertyInterface("Position",o)),t.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",o)),t.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",o)),t.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",o)),t.transform.mProps.sk&&(t.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",o)),t.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",o))),t.transform.op.setGroupProperty(PropertyInterface("Opacity",o)),Object.defineProperties(i,{opacity:{get:ExpressionPropertyInterface(t.transform.mProps.o)},position:{get:ExpressionPropertyInterface(t.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(t.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(t.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(t.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(t.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(t.transform.mProps.sa)},_name:{value:e.nm}}),i.ty="tr",i.mn=e.mn,i.propertyGroup=n,i}function s(e,t,n){function i(t){return e.p.ix===t?i.position:e.s.ix===t?i.size:null}var o=propertyGroupFactory(i,n);i.propertyIndex=e.ix;var a="tm"===t.sh.ty?t.sh.prop:t.sh;return a.s.setGroupProperty(PropertyInterface("Size",o)),a.p.setGroupProperty(PropertyInterface("Position",o)),Object.defineProperties(i,{size:{get:ExpressionPropertyInterface(a.s)},position:{get:ExpressionPropertyInterface(a.p)},_name:{value:e.nm}}),i.mn=e.mn,i}function c(e,t,n){function i(t){return e.p.ix===t?i.position:e.r.ix===t?i.rotation:e.pt.ix===t?i.points:e.or.ix===t||"ADBE Vector Star Outer Radius"===t?i.outerRadius:e.os.ix===t?i.outerRoundness:!e.ir||e.ir.ix!==t&&"ADBE Vector Star Inner Radius"!==t?e.is&&e.is.ix===t?i.innerRoundness:null:i.innerRadius}var o=propertyGroupFactory(i,n),a="tm"===t.sh.ty?t.sh.prop:t.sh;return i.propertyIndex=e.ix,a.or.setGroupProperty(PropertyInterface("Outer Radius",o)),a.os.setGroupProperty(PropertyInterface("Outer Roundness",o)),a.pt.setGroupProperty(PropertyInterface("Points",o)),a.p.setGroupProperty(PropertyInterface("Position",o)),a.r.setGroupProperty(PropertyInterface("Rotation",o)),e.ir&&(a.ir.setGroupProperty(PropertyInterface("Inner Radius",o)),a.is.setGroupProperty(PropertyInterface("Inner Roundness",o))),Object.defineProperties(i,{position:{get:ExpressionPropertyInterface(a.p)},rotation:{get:ExpressionPropertyInterface(a.r)},points:{get:ExpressionPropertyInterface(a.pt)},outerRadius:{get:ExpressionPropertyInterface(a.or)},outerRoundness:{get:ExpressionPropertyInterface(a.os)},innerRadius:{get:ExpressionPropertyInterface(a.ir)},innerRoundness:{get:ExpressionPropertyInterface(a.is)},_name:{value:e.nm}}),i.mn=e.mn,i}function l(e,t,n){function i(t){return e.p.ix===t?i.position:e.r.ix===t?i.roundness:e.s.ix===t||"Size"===t||"ADBE Vector Rect Size"===t?i.size:null}var o=propertyGroupFactory(i,n),a="tm"===t.sh.ty?t.sh.prop:t.sh;return i.propertyIndex=e.ix,a.p.setGroupProperty(PropertyInterface("Position",o)),a.s.setGroupProperty(PropertyInterface("Size",o)),a.r.setGroupProperty(PropertyInterface("Rotation",o)),Object.defineProperties(i,{position:{get:ExpressionPropertyInterface(a.p)},roundness:{get:ExpressionPropertyInterface(a.r)},size:{get:ExpressionPropertyInterface(a.s)},_name:{value:e.nm}}),i.mn=e.mn,i}function d(e,t,n){function i(t){return e.r.ix===t||"Round Corners 1"===t?i.radius:null}var o=propertyGroupFactory(i,n),a=t;return i.propertyIndex=e.ix,a.rd.setGroupProperty(PropertyInterface("Radius",o)),Object.defineProperties(i,{radius:{get:ExpressionPropertyInterface(a.rd)},_name:{value:e.nm}}),i.mn=e.mn,i}function p(e,t,n){function i(t){return e.c.ix===t||"Copies"===t?i.copies:e.o.ix===t||"Offset"===t?i.offset:null}var o=propertyGroupFactory(i,n),a=t;return i.propertyIndex=e.ix,a.c.setGroupProperty(PropertyInterface("Copies",o)),a.o.setGroupProperty(PropertyInterface("Offset",o)),Object.defineProperties(i,{copies:{get:ExpressionPropertyInterface(a.c)},offset:{get:ExpressionPropertyInterface(a.o)},_name:{value:e.nm}}),i.mn=e.mn,i}return function(t,n,i){var o;function a(e){if("number"==typeof e)return 0===(e=void 0===e?1:e)?i:o[e-1];for(var t=0,n=o.length;t<n;){if(o[t]._name===e)return o[t];t+=1}return null}return a.propertyGroup=propertyGroupFactory(a,(function(){return i})),o=e(t,n,a.propertyGroup),a.numProperties=o.length,a._name="Contents",a}}(),TextExpressionInterface=function(e){var t;function n(e){return"ADBE Text Document"===e?n.sourceText:null}return Object.defineProperty(n,"sourceText",{get:function(){e.textProperty.getValue();var n=e.textProperty.currentData.t;return t&&n===t.value||((t=new String(n)).value=n||new String(n),Object.defineProperty(t,"style",{get:function(){return{fillColor:e.textProperty.currentData.fc}}})),t}}),n};function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==cosmic._typeof(Symbol.iterator)?function(e){return cosmic._typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":cosmic._typeof(e)},_typeof(e)}var FootageInterface=(dataInterfaceFactory=function(e){function t(e){return"Outline"===e?t.outlineInterface():null}return t._name="Outline",t.outlineInterface=function(e){var t="",n=e.getFootageData();function i(e){if(n[e])return t=e,"object"===_typeof(n=n[e])?i:n;var o=e.indexOf(t);if(-1!==o){var a=parseInt(e.substr(o+t.length),10);return"object"===_typeof(n=n[a])?i:n}return""}return function(){return t="",n=e.getFootageData(),i}}(e),t},function(e){function t(e){return"Data"===e?t.dataInterface:null}return t._name="Data",t.dataInterface=dataInterfaceFactory(e),t}),dataInterfaceFactory,interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(e){return interfaces[e]||null}var expressionHelpers={searchExpressions:function(e,t,n){t.x&&(n.k=!0,n.x=!0,n.initiateExpression=ExpressionManager.initiateExpression,n.effectsSequence.push(n.initiateExpression(e,t,n).bind(n)))},getSpeedAtTime:function(e){var t=this.getValueAtTime(e),n=this.getValueAtTime(e+-.01),i=0;if(t.length){var o;for(o=0;o<t.length;o+=1)i+=Math.pow(n[o]-t[o],2);i=100*Math.sqrt(i)}else i=0;return i},getVelocityAtTime:function(e){if(void 0!==this.vel)return this.vel;var t,n,i=-.001,o=this.getValueAtTime(e),a=this.getValueAtTime(e+i);if(o.length)for(t=createTypedArray("float32",o.length),n=0;n<o.length;n+=1)t[n]=(a[n]-o[n])/i;else t=(a-o)/i;return t},getValueAtTime:function(e){return e*=this.elem.globalData.frameRate,(e-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<e?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(e,this._cachingAtTime),this._cachingAtTime.lastFrame=e),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(e){this.propertyGroup=e}};function addPropertyDecorator(){function e(e,t,n){if(!this.k||!this.keyframes)return this.pv;e=e?e.toLowerCase():"";var i,o,a,r,s,c=this.comp.renderedFrame,l=this.keyframes,d=l[l.length-1].t;if(c<=d)return this.pv;if(n?o=d-(i=t?Math.abs(d-this.elem.comp.globalData.frameRate*t):Math.max(0,d-this.elem.data.ip)):((!t||t>l.length-1)&&(t=l.length-1),i=d-(o=l[l.length-1-t].t)),"pingpong"===e){if(Math.floor((c-o)/i)%2!=0)return this.getValueAtTime((i-(c-o)%i+o)/this.comp.globalData.frameRate,0)}else{if("offset"===e){var p=this.getValueAtTime(o/this.comp.globalData.frameRate,0),h=this.getValueAtTime(d/this.comp.globalData.frameRate,0),u=this.getValueAtTime(((c-o)%i+o)/this.comp.globalData.frameRate,0),m=Math.floor((c-o)/i);if(this.pv.length){for(r=(s=new Array(p.length)).length,a=0;a<r;a+=1)s[a]=(h[a]-p[a])*m+u[a];return s}return(h-p)*m+u}if("continue"===e){var f=this.getValueAtTime(d/this.comp.globalData.frameRate,0),g=this.getValueAtTime((d-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(r=(s=new Array(f.length)).length,a=0;a<r;a+=1)s[a]=f[a]+(f[a]-g[a])*((c-d)/this.comp.globalData.frameRate)/5e-4;return s}return f+(c-d)/.001*(f-g)}}return this.getValueAtTime(((c-o)%i+o)/this.comp.globalData.frameRate,0)}function t(e,t,n){if(!this.k)return this.pv;e=e?e.toLowerCase():"";var i,o,a,r,s,c=this.comp.renderedFrame,l=this.keyframes,d=l[0].t;if(c>=d)return this.pv;if(n?o=d+(i=t?Math.abs(this.elem.comp.globalData.frameRate*t):Math.max(0,this.elem.data.op-d)):((!t||t>l.length-1)&&(t=l.length-1),i=(o=l[t].t)-d),"pingpong"===e){if(Math.floor((d-c)/i)%2==0)return this.getValueAtTime(((d-c)%i+d)/this.comp.globalData.frameRate,0)}else{if("offset"===e){var p=this.getValueAtTime(d/this.comp.globalData.frameRate,0),h=this.getValueAtTime(o/this.comp.globalData.frameRate,0),u=this.getValueAtTime((i-(d-c)%i+d)/this.comp.globalData.frameRate,0),m=Math.floor((d-c)/i)+1;if(this.pv.length){for(r=(s=new Array(p.length)).length,a=0;a<r;a+=1)s[a]=u[a]-(h[a]-p[a])*m;return s}return u-(h-p)*m}if("continue"===e){var f=this.getValueAtTime(d/this.comp.globalData.frameRate,0),g=this.getValueAtTime((d+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(r=(s=new Array(f.length)).length,a=0;a<r;a+=1)s[a]=f[a]+(f[a]-g[a])*(d-c)/.001;return s}return f+(f-g)*(d-c)/.001}}return this.getValueAtTime((i-((d-c)%i+d))/this.comp.globalData.frameRate,0)}function n(e,t){if(!this.k)return this.pv;if(e=.5*(e||.4),(t=Math.floor(t||5))<=1)return this.pv;var n,i,o=this.comp.renderedFrame/this.comp.globalData.frameRate,a=o-e,r=t>1?(o+e-a)/(t-1):1,s=0,c=0;for(n=this.pv.length?createTypedArray("float32",this.pv.length):0;s<t;){if(i=this.getValueAtTime(a+s*r),this.pv.length)for(c=0;c<this.pv.length;c+=1)n[c]+=i[c];else n+=i;s+=1}if(this.pv.length)for(c=0;c<this.pv.length;c+=1)n[c]/=t;else n/=t;return n}function i(e){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var t=this._transformCachingAtTime.v;if(t.cloneFromProps(this.pre.props),this.appliedTransformations<1){var n=this.a.getValueAtTime(e);t.translate(-n[0]*this.a.mult,-n[1]*this.a.mult,n[2]*this.a.mult)}if(this.appliedTransformations<2){var i=this.s.getValueAtTime(e);t.scale(i[0]*this.s.mult,i[1]*this.s.mult,i[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var o=this.sk.getValueAtTime(e),a=this.sa.getValueAtTime(e);t.skewFromAxis(-o*this.sk.mult,a*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var r=this.r.getValueAtTime(e);t.rotate(-r*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var s=this.rz.getValueAtTime(e),c=this.ry.getValueAtTime(e),l=this.rx.getValueAtTime(e),d=this.or.getValueAtTime(e);t.rotateZ(-s*this.rz.mult).rotateY(c*this.ry.mult).rotateX(l*this.rx.mult).rotateZ(-d[2]*this.or.mult).rotateY(d[1]*this.or.mult).rotateX(d[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var p=this.px.getValueAtTime(e),h=this.py.getValueAtTime(e);if(this.data.p.z){var u=this.pz.getValueAtTime(e);t.translate(p*this.px.mult,h*this.py.mult,-u*this.pz.mult)}else t.translate(p*this.px.mult,h*this.py.mult,0)}else{var m=this.p.getValueAtTime(e);t.translate(m[0]*this.p.mult,m[1]*this.p.mult,-m[2]*this.p.mult)}return t}function o(){return this.v.clone(new Matrix)}var a=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(e,t,n){var r=a(e,t,n);return r.dynamicProperties.length?r.getValueAtTime=i.bind(r):r.getValueAtTime=o.bind(r),r.setGroupProperty=expressionHelpers.setGroupProperty,r};var r=PropertyFactory.getProp;PropertyFactory.getProp=function(i,o,a,s,c){var l=r(i,o,a,s,c);l.kf?l.getValueAtTime=expressionHelpers.getValueAtTime.bind(l):l.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(l),l.setGroupProperty=expressionHelpers.setGroupProperty,l.loopOut=e,l.loopIn=t,l.smooth=n,l.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(l),l.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(l),l.numKeys=1===o.a?o.k.length:0,l.propertyIndex=o.ix;var d=0;return 0!==a&&(d=createTypedArray("float32",1===o.a?o.k[0].s.length:o.k.length)),l._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:d},expressionHelpers.searchExpressions(i,o,l),l.k&&c.addDynamicProperty(l),l};var s=ShapePropertyFactory.getConstructorFunction(),c=ShapePropertyFactory.getKeyframedConstructorFunction();function l(){}l.prototype={vertices:function(e,t){this.k&&this.getValue();var n,i=this.v;void 0!==t&&(i=this.getValueAtTime(t,0));var o=i._length,a=i[e],r=i.v,s=createSizedArray(o);for(n=0;n<o;n+=1)s[n]="i"===e||"o"===e?[a[n][0]-r[n][0],a[n][1]-r[n][1]]:[a[n][0],a[n][1]];return s},points:function(e){return this.vertices("v",e)},inTangents:function(e){return this.vertices("i",e)},outTangents:function(e){return this.vertices("o",e)},isClosed:function(){return this.v.c},pointOnPath:function(e,t){var n=this.v;void 0!==t&&(n=this.getValueAtTime(t,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(n));for(var i,o=this._segmentsLength,a=o.lengths,r=o.totalLength*e,s=0,c=a.length,l=0;s<c;){if(l+a[s].addedLength>r){var d=s,p=n.c&&s===c-1?0:s+1,h=(r-l)/a[s].addedLength;i=bez.getPointInSegment(n.v[d],n.v[p],n.o[d],n.i[p],h,a[s]);break}l+=a[s].addedLength,s+=1}return i||(i=n.c?[n.v[0][0],n.v[0][1]]:[n.v[n._length-1][0],n.v[n._length-1][1]]),i},vectorOnPath:function(e,t,n){1==e?e=this.v.c:0==e&&(e=.999);var i=this.pointOnPath(e,t),o=this.pointOnPath(e+.001,t),a=o[0]-i[0],r=o[1]-i[1],s=Math.sqrt(Math.pow(a,2)+Math.pow(r,2));return 0===s?[0,0]:"tangent"===n?[a/s,r/s]:[-r/s,a/s]},tangentOnPath:function(e,t){return this.vectorOnPath(e,t,"tangent")},normalOnPath:function(e,t){return this.vectorOnPath(e,t,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([l],s),extendPrototype([l],c),c.prototype.getValueAtTime=function(e){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),e*=this.elem.globalData.frameRate,(e-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<e?this._caching.lastIndex:0,this._cachingAtTime.lastTime=e,this.interpolateShape(e,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},c.prototype.initiateExpression=ExpressionManager.initiateExpression;var d=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(e,t,n,i,o){var a=d(e,t,n,i,o);return a.propertyIndex=t.ix,a.lock=!1,3===n?expressionHelpers.searchExpressions(e,t.pt,a):4===n&&expressionHelpers.searchExpressions(e,t.ks,a),a.k&&e.addDynamicProperty(a),a}}function initialize$1(){addPropertyDecorator()}function addDecorator(){TextProperty.prototype.getExpressionValue=function(e,t){var n=this.calculateExpression(t);if(e.t!==n){var i={};return this.copyData(i,e),i.t=n.toString(),i.__complete=!1,i}return e},TextProperty.prototype.searchProperty=function(){var e=this.searchKeyframes(),t=this.searchExpressions();return this.kf=e||t,this.kf},TextProperty.prototype.searchExpressions=function(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function(e,t){var n,i,o=createNS("feMerge");for(o.setAttribute("result",e),i=0;i<t.length;i+=1)(n=createNS("feMergeNode")).setAttribute("in",t[i]),o.appendChild(n),o.appendChild(n);return o}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(e,t,n,i,o){this.filterManager=t;var a=createNS("feColorMatrix");a.setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","linearRGB"),a.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=a,a.setAttribute("result",i+"_tint_1"),e.appendChild(a),(a=createNS("feColorMatrix")).setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),a.setAttribute("result",i+"_tint_2"),e.appendChild(a),this.matrixFilter=a;var r=this.createMergeNode(i,[o,i+"_tint_1",i+"_tint_2"]);e.appendChild(r)}function SVGFillFilter(e,t,n,i){this.filterManager=t;var o=createNS("feColorMatrix");o.setAttribute("type","matrix"),o.setAttribute("color-interpolation-filters","sRGB"),o.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),o.setAttribute("result",i),e.appendChild(o),this.matrixFilter=o}function SVGStrokeEffect(e,t,n){this.initialized=!1,this.filterManager=t,this.elem=n,this.paths=[]}function SVGTritoneFilter(e,t,n,i){this.filterManager=t;var o=createNS("feColorMatrix");o.setAttribute("type","matrix"),o.setAttribute("color-interpolation-filters","linearRGB"),o.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),e.appendChild(o);var a=createNS("feComponentTransfer");a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("result",i),this.matrixFilter=a;var r=createNS("feFuncR");r.setAttribute("type","table"),a.appendChild(r),this.feFuncR=r;var s=createNS("feFuncG");s.setAttribute("type","table"),a.appendChild(s),this.feFuncG=s;var c=createNS("feFuncB");c.setAttribute("type","table"),a.appendChild(c),this.feFuncB=c,e.appendChild(a)}function SVGProLevelsFilter(e,t,n,i){this.filterManager=t;var o=this.filterManager.effectElements,a=createNS("feComponentTransfer");(o[10].p.k||0!==o[10].p.v||o[11].p.k||1!==o[11].p.v||o[12].p.k||1!==o[12].p.v||o[13].p.k||0!==o[13].p.v||o[14].p.k||1!==o[14].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",a)),(o[17].p.k||0!==o[17].p.v||o[18].p.k||1!==o[18].p.v||o[19].p.k||1!==o[19].p.v||o[20].p.k||0!==o[20].p.v||o[21].p.k||1!==o[21].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",a)),(o[24].p.k||0!==o[24].p.v||o[25].p.k||1!==o[25].p.v||o[26].p.k||1!==o[26].p.v||o[27].p.k||0!==o[27].p.v||o[28].p.k||1!==o[28].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",a)),(o[31].p.k||0!==o[31].p.v||o[32].p.k||1!==o[32].p.v||o[33].p.k||1!==o[33].p.v||o[34].p.k||0!==o[34].p.v||o[35].p.k||1!==o[35].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",a)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(a.setAttribute("color-interpolation-filters","sRGB"),e.appendChild(a)),(o[3].p.k||0!==o[3].p.v||o[4].p.k||1!==o[4].p.v||o[5].p.k||1!==o[5].p.v||o[6].p.k||0!==o[6].p.v||o[7].p.k||1!==o[7].p.v)&&((a=createNS("feComponentTransfer")).setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("result",i),e.appendChild(a),this.feFuncRComposed=this.createFeFunc("feFuncR",a),this.feFuncGComposed=this.createFeFunc("feFuncG",a),this.feFuncBComposed=this.createFeFunc("feFuncB",a))}function SVGDropShadowEffect(e,t,n,i,o){var a=t.container.globalData.renderConfig.filterSize,r=t.data.fs||a;e.setAttribute("x",r.x||a.x),e.setAttribute("y",r.y||a.y),e.setAttribute("width",r.width||a.width),e.setAttribute("height",r.height||a.height),this.filterManager=t;var s=createNS("feGaussianBlur");s.setAttribute("in","SourceAlpha"),s.setAttribute("result",i+"_drop_shadow_1"),s.setAttribute("stdDeviation","0"),this.feGaussianBlur=s,e.appendChild(s);var c=createNS("feOffset");c.setAttribute("dx","25"),c.setAttribute("dy","0"),c.setAttribute("in",i+"_drop_shadow_1"),c.setAttribute("result",i+"_drop_shadow_2"),this.feOffset=c,e.appendChild(c);var l=createNS("feFlood");l.setAttribute("flood-color","#00ff00"),l.setAttribute("flood-opacity","1"),l.setAttribute("result",i+"_drop_shadow_3"),this.feFlood=l,e.appendChild(l);var d=createNS("feComposite");d.setAttribute("in",i+"_drop_shadow_3"),d.setAttribute("in2",i+"_drop_shadow_2"),d.setAttribute("operator","in"),d.setAttribute("result",i+"_drop_shadow_4"),e.appendChild(d);var p=this.createMergeNode(i,[i+"_drop_shadow_4",o]);e.appendChild(p)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,i=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+i+" 0"),this.matrixFilter.setAttribute("values",n[0]-t[0]+" 0 0 0 "+t[0]+" "+(n[1]-t[1])+" 0 0 0 "+t[1]+" "+(n[2]-t[2])+" 0 0 0 "+t[2]+" 0 0 0 1 0")}},SVGFillFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[2].p.v,n=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+t[0]+" 0 0 0 0 "+t[1]+" 0 0 0 0 "+t[2]+" 0 0 0 "+n+" 0")}},SVGStrokeEffect.prototype.initialize=function(){var e,t,n,i,o=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(i=this.elem.maskManager.masksProperties.length,n=0):i=1+(n=this.filterManager.effectElements[0].p.v-1),(t=createNS("g")).setAttribute("fill","none"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-dashoffset",1);n<i;n+=1)e=createNS("path"),t.appendChild(e),this.paths.push({p:e,m:n});if(3===this.filterManager.effectElements[10].p.v){var a=createNS("mask"),r=createElementID();a.setAttribute("id",r),a.setAttribute("mask-type","alpha"),a.appendChild(t),this.elem.globalData.defs.appendChild(a);var s=createNS("g");for(s.setAttribute("mask","url("+getLocationHref()+"#"+r+")");o[0];)s.appendChild(o[0]);this.elem.layerElement.appendChild(s),this.masker=a,t.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(o=this.elem.layerElement.children||this.elem.layerElement.childNodes;o.length;)this.elem.layerElement.removeChild(o[0]);this.elem.layerElement.appendChild(t),this.elem.layerElement.removeAttribute("mask"),t.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=t},SVGStrokeEffect.prototype.renderFrame=function(e){var t;this.initialized||this.initialize();var n,i,o=this.paths.length;for(t=0;t<o;t+=1)if(-1!==this.paths[t].m&&(n=this.elem.maskManager.viewData[this.paths[t].m],i=this.paths[t].p,(e||this.filterManager._mdf||n.prop._mdf)&&i.setAttribute("d",n.lastPath),e||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||n.prop._mdf)){var a;if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var r=.01*Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),s=.01*Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),c=i.getTotalLength();a="0 0 0 "+c*r+" ";var l,d=c*(s-r),p=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01,h=Math.floor(d/p);for(l=0;l<h;l+=1)a+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01+" ";a+="0 "+10*c+" 0 0"}else a="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01;i.setAttribute("stroke-dasharray",a)}if((e||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(e||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(e||this.filterManager.effectElements[3].p._mdf)){var u=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(255*u[0])+","+bmFloor(255*u[1])+","+bmFloor(255*u[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,i=this.filterManager.effectElements[2].p.v,o=i[0]+" "+n[0]+" "+t[0],a=i[1]+" "+n[1]+" "+t[1],r=i[2]+" "+n[2]+" "+t[2];this.feFuncR.setAttribute("tableValues",o),this.feFuncG.setAttribute("tableValues",a),this.feFuncB.setAttribute("tableValues",r)}},SVGProLevelsFilter.prototype.createFeFunc=function(e,t){var n=createNS(e);return n.setAttribute("type","table"),t.appendChild(n),n},SVGProLevelsFilter.prototype.getTableValue=function(e,t,n,i,o){for(var a,r,s=0,c=Math.min(e,t),l=Math.max(e,t),d=Array.call(null,{length:256}),p=0,h=o-i,u=t-e;s<=256;)r=(a=s/256)<=c?u<0?o:i:a>=l?u<0?i:o:i+h*Math.pow((a-e)/u,1/n),d[p]=r,p+=1,s+=256/255;return d.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t,n=this.filterManager.effectElements;this.feFuncRComposed&&(e||n[3].p._mdf||n[4].p._mdf||n[5].p._mdf||n[6].p._mdf||n[7].p._mdf)&&(t=this.getTableValue(n[3].p.v,n[4].p.v,n[5].p.v,n[6].p.v,n[7].p.v),this.feFuncRComposed.setAttribute("tableValues",t),this.feFuncGComposed.setAttribute("tableValues",t),this.feFuncBComposed.setAttribute("tableValues",t)),this.feFuncR&&(e||n[10].p._mdf||n[11].p._mdf||n[12].p._mdf||n[13].p._mdf||n[14].p._mdf)&&(t=this.getTableValue(n[10].p.v,n[11].p.v,n[12].p.v,n[13].p.v,n[14].p.v),this.feFuncR.setAttribute("tableValues",t)),this.feFuncG&&(e||n[17].p._mdf||n[18].p._mdf||n[19].p._mdf||n[20].p._mdf||n[21].p._mdf)&&(t=this.getTableValue(n[17].p.v,n[18].p.v,n[19].p.v,n[20].p.v,n[21].p.v),this.feFuncG.setAttribute("tableValues",t)),this.feFuncB&&(e||n[24].p._mdf||n[25].p._mdf||n[26].p._mdf||n[27].p._mdf||n[28].p._mdf)&&(t=this.getTableValue(n[24].p.v,n[25].p.v,n[26].p.v,n[27].p.v,n[28].p.v),this.feFuncB.setAttribute("tableValues",t)),this.feFuncA&&(e||n[31].p._mdf||n[32].p._mdf||n[33].p._mdf||n[34].p._mdf||n[35].p._mdf)&&(t=this.getTableValue(n[31].p.v,n[32].p.v,n[33].p.v,n[34].p.v,n[35].p.v),this.feFuncA.setAttribute("tableValues",t))}},extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){if((e||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),e||this.filterManager.effectElements[0].p._mdf){var t=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*t[0]),Math.round(255*t[1]),Math.round(255*t[2])))}if((e||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),e||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var n=this.filterManager.effectElements[3].p.v,i=(this.filterManager.effectElements[2].p.v-90)*degToRads,o=n*Math.cos(i),a=n*Math.sin(i);this.feOffset.setAttribute("dx",o),this.feOffset.setAttribute("dy",a)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(e,t,n){this.initialized=!1,this.filterManager=t,this.filterElem=e,this.elem=n,n.matteElement=createNS("g"),n.matteElement.appendChild(n.layerElement),n.matteElement.appendChild(n.transformedElement),n.baseElement=n.matteElement}function SVGGaussianBlurEffect(e,t,n,i){e.setAttribute("x","-100%"),e.setAttribute("y","-100%"),e.setAttribute("width","300%"),e.setAttribute("height","300%"),this.filterManager=t;var o=createNS("feGaussianBlur");o.setAttribute("result",i),e.appendChild(o),this.feGaussianBlur=o}function TransformEffect(){}function SVGTransformEffect(e,t){this.init(t)}function CVTransformEffect(e){this.init(e)}return SVGMatte3Effect.prototype.findSymbol=function(e){for(var t=0,n=_svgMatteSymbols.length;t<n;){if(_svgMatteSymbols[t]===e)return _svgMatteSymbols[t];t+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(e,t){var n=e.layerElement.parentNode;if(n){for(var i,o=n.children,a=0,r=o.length;a<r&&o[a]!==e.layerElement;)a+=1;a<=r-2&&(i=o[a+1]);var s=createNS("use");s.setAttribute("href","#"+t),i?n.insertBefore(s,i):n.appendChild(s)}},SVGMatte3Effect.prototype.setElementAsMask=function(e,t){if(!this.findSymbol(t)){var n=createElementID(),i=createNS("mask");i.setAttribute("id",t.layerId),i.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(t);var o=e.globalData.defs;o.appendChild(i);var a=createNS("symbol");a.setAttribute("id",n),this.replaceInParent(t,n),a.appendChild(t.layerElement),o.appendChild(a);var r=createNS("use");r.setAttribute("href","#"+n),i.appendChild(r),t.data.hd=!1,t.show()}e.setMatte(t.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var e=this.filterManager.effectElements[0].p.v,t=this.elem.comp.elements,n=0,i=t.length;n<i;)t[n]&&t[n].data.ind===e&&this.setElementAsMask(this.elem,t[n]),n+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGGaussianBlurEffect.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=.3*this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,i=3==n?0:t,o=2==n?0:t;this.feGaussianBlur.setAttribute("stdDeviation",i+" "+o);var a=1==this.filterManager.effectElements[2].p.v?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",a)}},TransformEffect.prototype.init=function(e){this.effectsManager=e,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(e){if(this._opMdf=!1,this._mdf=!1,e||this.effectsManager._mdf){var t=this.effectsManager.effectElements,n=t[0].p.v,i=t[1].p.v,o=1===t[2].p.v,a=t[3].p.v,r=o?a:t[4].p.v,s=t[5].p.v,c=t[6].p.v,l=t[7].p.v;this.matrix.reset(),this.matrix.translate(-n[0],-n[1],n[2]),this.matrix.scale(.01*r,.01*a,1),this.matrix.rotate(-l*degToRads),this.matrix.skewFromAxis(-s*degToRads,(c+90)*degToRads),this.matrix.translate(i[0],i[1],0),this._mdf=!0,this.opacity!==t[8].p.v&&(this.opacity=t[8].p.v,this._opMdf=!0)}},extendPrototype([TransformEffect],SVGTransformEffect),extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie},module.exports=factory())})(lottie$1,lottie$1.exports);var lottieExports=lottie$1.exports,lottie=getDefaultExportFromCjs(lottieExports),css_248z$a='.agent-ui .agent-ui-image{font-size:0;height:100%;line-height:0;position:relative;width:100%}.agent-ui .agent-ui-image-loading-wrapper{border-radius:var(--cos-rounded-sm);height:120px;opacity:var(--cos-opacity-0)}.agent-ui .agent-ui-image-visible-loading{-webkit-animation:showAni .26s linear forwards;animation:showAni .26s linear forwards}@-webkit-keyframes showAni{0%{opacity:var(--cos-opacity-0)}to{opacity:var(--cos-opacity-100)}}@keyframes showAni{0%{opacity:var(--cos-opacity-0)}to{opacity:var(--cos-opacity-100)}}.agent-ui .agent-ui-image-hidden-loading{-webkit-animation:hiddenAni .26s linear forwards;animation:hiddenAni .26s linear forwards}@-webkit-keyframes hiddenAni{0%{opacity:var(--cos-opacity-100)}to{opacity:var(--cos-opacity-0)}}@keyframes hiddenAni{0%{opacity:var(--cos-opacity-100)}to{opacity:var(--cos-opacity-0)}}.agent-ui .agent-ui-image .agent-ui-image-wrapper{-webkit-animation:visibilityAni .36s linear forwards;animation:visibilityAni .36s linear forwards;border-radius:var(--cos-rounded-sm);display:inline-block;opacity:var(--cos-opacity-0);position:relative;text-align:center;-webkit-transition:height .36s ease-out;transition:height .36s ease-out}@-webkit-keyframes visibilityAni{0%{opacity:var(--cos-opacity-0)}to{opacity:var(--cos-opacity-100)}}@keyframes visibilityAni{0%{opacity:var(--cos-opacity-0)}to{opacity:var(--cos-opacity-100)}}.agent-ui .agent-ui-image .agent-ui-image-wrapper .agent-ui-image-item{max-height:100%;max-width:100%;-o-object-fit:scale-down;object-fit:scale-down}.agent-ui .agent-ui-image .agent-ui-image-wrapper .agent-ui-image-btn-group{bottom:var(--cos-space-xs);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:absolute;right:0;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;letter-spacing:0;-webkit-tap-highlight-color:transparent}.agent-ui .agent-ui-image .agent-ui-image-wrapper .agent-ui-image-btn-group .agent-ui-image-btn{-webkit-backdrop-filter:blur(18px);backdrop-filter:blur(18px);background-color:var(--cos-color-bg-inverse);border-radius:var(--cos-rounded-full);color:var(--cos-color-text-inverse);cursor:pointer;font-size:var(--cos-text-subtitle-sm);height:var(--cos-text-headline-xl);margin-right:var(--cos-space-xs);max-width:88px;min-width:29px;padding:0 var(--cos-space-xs);position:relative;vertical-align:middle;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.agent-ui .agent-ui-image .agent-ui-image-wrapper .agent-ui-image-btn-group .agent-ui-image-btn .btn-content{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;line-height:var(--cos-text-headline-xl);overflow:hidden;text-decoration:none}.agent-ui .agent-ui-image .agent-ui-image-wrapper .agent-ui-image-btn-group .agent-ui-image-btn .btn-content .text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.agent-ui .agent-ui-image .agent-ui-image-wrapper .agent-ui-image-btn-group .agent-ui-image-btn.cos-button{position:relative}.agent-ui .agent-ui-image .agent-ui-image-wrapper .agent-ui-image-btn-group .agent-ui-image-btn.cos-button:hover{opacity:var(--cos-opacity-100)}.agent-ui .agent-ui-image .agent-ui-image-wrapper .agent-ui-image-btn-group .agent-ui-image-btn.cos-button:hover:before{background-color:rgba(0,0,0,.03);content:"";height:100%;left:0;position:absolute;top:0;width:100%}.agent-ui .agent-ui-image .agent-ui-image-wrapper .agent-ui-image-btn-group .agent-ui-image-btn.cos-button:active:before{background-color:rgba(0,0,0,.06);content:"";height:100%;left:0;position:absolute;top:0;width:100%}.agent-ui .agent-ui-image .yiyan .agent-ui-image-btn-group{bottom:8px}.agent-ui .agent-ui-image .yiyan .agent-ui-image-btn-group .agent-ui-image-btn{background:rgba(30,31,36,.5);border-radius:var(--cos-rounded-lg);font-weight:var(--cos-font-regular);margin-right:8px;padding:0 8px;width:64px;-webkit-text-stroke:0;font-family:PingFang SC,Arial,sans-serif}';function yiyanImageStyle(e,t){var n=360,i="max-height:".concat(n,"px;text-align:").concat("left",";overflow:hidden;");return t<n?{imageWrapperStyle:i,imageStyle:"object-fit: scale-down; max-width: 100%;"}:255/e*t>n?{imageWrapperStyle:i,imageStyle:"object-fit: scale-down; max-width: ".concat(255,"px;")}:{imageWrapperStyle:i,imageStyle:"object-fit: scale-down; max-height: ".concat(n,"px; max-width: 100%;")}}styleInject(css_248z$a);var PLACEHOLDER_IMAGE="https://now.bdstatic.com/stash/v1/0ad3d43/lingjing-sdk/7d82a42/lottie-animation/image-loading.json",AgentUIImage=san.defineComponent({loadAnimation:null,template:'\n        <div class="agent-ui-image{{!src || _loading ? \' no-content\' : \'\'}}">\n            <div\n                s-if="_loading"\n                s-ref="defaultImage"\n                class="agent-ui-image-loading-wrapper{{\n                    _loadingAnimation\n                        ? \' agent-ui-image-visible-loading\'\n                        : \' agent-ui-image-hidden-loading\'\n                }}"\n            >\n            </div>\n            <div\n                s-else\n                class="agent-ui-image-wrapper {{isYiyan ? \'yiyan\' : \'\'}}"\n                style="{{imageWrapperStyle}}"\n            >\n                <img\n                    style="{{imageStyle}}"\n                    class="agent-ui-image-item"\n                    src={{src}}\n                    on-click="previewImage"\n                />\n                <div class="agent-ui-image-btn-group">\n                    <cos-button\n                        s-for="item, index in parsedButtonGroup"\n                        class="agent-ui-image-btn {{item.icon ? \'\' : \'pure-btn\'}}"\n                        on-click="native:clickButton(index)"\n                    >\n                        <div class="btn-content">\n                            <cos-icon\n                                s-if="item.icon && !isYiyan"\n                                class="cos-space-mr-xxs"\n                                name="{{item.icon}}"\n                            />\n                            <span\n                                s-if="item.icon && isYiyan"\n                                style="margin-right: 4px;"\n                            >\n                                <svg\n                                    s-if="item.icon === \'download\'"\n                                    xmlns="http://www.w3.org/2000/svg"\n                                    width="16"\n                                    height="16"\n                                    fill="currentColor"\n                                    stroke="none"\n                                    viewBox="0 0 24 24"\n                                >\n                                    <g\n                                        fill-rule="evenodd"\n                                        fill="none"\n                                        stroke="currentColor"\n                                        stroke-linecap="round"\n                                        stroke-linejoin="round"\n                                        stroke-width="2"\n                                    >\n                                        <path d="M1 16v3a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-3M6 11l4 4 4-4M10 1v14"></path>\n                                    </g>\n                                </svg>\n                                <svg\n                                    s-if="item.icon === \'edit\'"\n                                    xmlns="http://www.w3.org/2000/svg"\n                                    width="16"\n                                    height="16"\n                                    fill="currentColor"\n                                    stroke="none"\n                                    viewBox="0 0 32 32"\n                                >\n                                    <path d="M3.99125,29.3420833 C3.25487033,29.3420833 2.65791667,28.7451297 2.65791667,28.00875 L2.66666667,21.3333333 C2.66705121,20.9802671 2.80745595,20.6417673 3.05708333,20.3920833 L17.7533333,5.69625 C18.2740093,5.17568521 19.118074,5.17568521 19.63875,5.69625 L26.3054167,12.3629167 C26.8259815,12.8835927 26.8259815,13.7276573 26.3054167,14.2483333 L11.6095833,28.9429167 C11.3594908,29.1929521 11.0203105,29.3333904 10.6666667,29.3333333 L3.99125,29.3420833 L3.99125,29.3420833 Z M5.33333333,21.88625 L5.32708333,26.67375 L10.1145833,26.6675 L23.4770833,13.30375 L18.69625,8.52291667 L5.33333333,21.88625 Z M30.285,10.2670833 C30.8055648,9.74640732 30.8055648,8.90234268 30.285,8.38166667 L23.6183333,1.715 C23.0955309,1.2072614 22.2619215,1.21335368 21.7465959,1.72867925 C21.2312703,2.24400481 21.2251781,3.07761423 21.7329167,3.60041667 L28.3995833,10.2670833 C28.9202593,10.7876481 29.764324,10.7876481 30.285,10.2670833 L30.285,10.2670833 Z"/>\n                                </svg>\n                            </span>\n                            <div class="text cos-line-clamp-1">{{item.text}}</div>\n                        </div>\n                    </cos-button>\n                </div>\n            </div>\n        </div>\n    ',components:{"cos-button":cosmic.Button,"cos-icon":cosmic.Icon},initData:function(){var e,t;return{src:"",buttonGroup:"",imageWrapperStyle:"",imageStyle:"",_loading:!0,_loadingAnimation:!0,_envType:null===(e=getRoot(this))||void 0===e?void 0:e.data.get("_envType"),_platform:null===(t=getRoot(this))||void 0===t?void 0:t.data.get("_platform")}},created:function(){var e=this;this.data.set("_loadingAnimation",!0),this.watch("_loading",(function(){e.nextTick((function(){e.dispatch("UI:IMAGE_LOAD",e)}))}));var t=this.data.get("src");this.preloadImage(t),this.watch("src",(function(t){e.preloadImage(t)}))},attached:function(){this.initAnimation(),this.dispatch("UI:IMAGE_LOAD",this)},computed:{parsedButtonGroup:function(){var e=this.data.get("buttonGroup");if(!e)return[];try{return"string"==typeof e&&(e=JSON.parse(e)),e.filter((function(e){var t;return null===(t=e.text)||void 0===t?void 0:t.trim()})).slice(0,3)}catch(t){return e}},isYiyan:function(){var e=this.data.get("_envType");return"yiyan-web"===e||"yiyan-h5"===e}},preloadImage:function(e){var t=this,n=new Image;n.src=e,n.onload=function(){t.data.set("_loading",!1),t.destroyAnimation(),t.nextTick((function(){var e=t.data.get("isYiyan")?yiyanImageStyle(n.width,n.height):t.getDefaultImageStyle(n.width,n.height),i=e.imageWrapperStyle,o=e.imageStyle;t.data.set("imageWrapperStyle",i),t.data.set("imageStyle",o)}))},n.onerror=function(){t.data.set("_loading",!1),t.fire("image-load-error",{src:e})}},getDefaultImageStyle:function(e,t){var n=this.el.clientWidth,i=1;"pc"===this.data.get("_platform")?e>=.17*n&&e<.42*n?i=1/3:e<.17*n?i=1/12:e>.42*n&&(i=2/3):e>=.25*n&&e<.58*n?i=.5:e<.25*n&&(i=1/6);var o=i*n*4/3,a=t/e*n*i;return{imageWrapperStyle:"max-height: ".concat(o<a?o:a,"px;\n            text-align: ").concat("left","; overflow: hidden;"),imageStyle:"\n            object-fit: fill;\n            width: ".concat(i*n,"px;\n            max-width: ").concat(i*n,"px;\n            max-height: ").concat(a,"px;")}},previewImage:function(){this.fire("preview-image",{src:this.data.get("src")})},clickButton:function(e){var t="click-".concat(e);this.fire(t)},initAnimation:function(){var e=this.ref("defaultImage");e&&(this.loadAnimation&&this.destroyAnimation(),this.loadAnimation=lottie.loadAnimation({container:e,renderer:"canvas",loop:!0,autoplay:!0,path:PLACEHOLDER_IMAGE}),this.loadAnimation.play())},destroyAnimation:function(){this.data.set("_loadingAnimation",!1),this.loadAnimation&&(this.loadAnimation.destroy(),this.loadAnimation=null)}}),css_248z$9=".agent-ui-audio-pc{width:66.67%}";styleInject(css_248z$9);var AgentUIAudio=san.defineComponent({template:'\n        <cos-audio-player\n            class="agent-ui-audio{{_isPcComp ? \' agent-ui-audio-pc\' : \'\'}}"\n            appearance="enhance"\n            preload="metadata"\n            src="{{src}}"\n            title="{{title}}"\n        />\n    ',components:{"cos-audio-player":cosmic.AudioPlayer},initData:function(){var e;return{src:"",title:"",_isPcComp:"pc"===(null===(e=getRoot(this))||void 0===e?void 0:e.data.get("_platform"))}}}),css_248z$8=".agent-ui-rich-video-player-pc{width:66.67%}";styleInject(css_248z$8);var DEFAULT_POSTER="https://gips2.baidu.com/it/u=2590552663,1638303207&fm=3028&app=3028&f=PNG&fmt=auto&q=75&size=f1138_640",AgentUIVideo=san.defineComponent({template:'\n        \x3c!-- Cosmic RichVideoPlayer attached  src  --\x3e\n        \x3c!--  attached  uiData  src  --\x3e\n        <div\n            s-if="src"\n            class="agent-ui-rich-video-player{{_isPcComp ? \' agent-ui-rich-video-player-pc\' : \'\'}}"\n        >\n            <cos-rich-video-player\n                poster="{{getPoster}}"\n                touchable-play-pause="{{!autoplay}}"\n                autoplay="{{autoplay}}"\n                player-options="{{playerOptions}}"\n                src="{{src}}"\n                on-created="playerCreated"\n            />\n        </div>\n    ',components:{"cos-rich-video-player":cosmic.RichVideoPlayer},computed:{playerOptions:function(){return{intersectionOption:{ratio:this.data.get("autoplay")?.3:0}}},getPoster:function(){return this.data.get("poster")||DEFAULT_POSTER}},initData:function(){var e;return{poster:"",src:"",autoplay:!1,_isPcComp:"pc"===(null===(e=getRoot(this))||void 0===e?void 0:e.data.get("_platform"))}},playerCreated:function(e){var t=this;this.sendLog(LogType.SHOW,"component"),this.sendLog(LogType.SHOW,"answer"),e.on("voiceBtnClicked",(function(){t.sendLog(LogType.CLICK,e.muted?"component_mute":"component_sound")})),e.on("volume",(function(){t.sendLog(LogType.CLICK,e.muted?"component_mute":"component_sound")})),e.on("playing",(function(){t.sendLog(LogType.CLICK,"component_play")})),e.on("pause",(function(){t.sendLog(LogType.CLICK,"component_pause")})),e.on("seeked",(function(){t.sendLog(LogType.CLICK,"component_progress")}))},sendLog:function(e,t,n){var i,o;null===(o=null===(i=getRoot(this))||void 0===i?void 0:i.data.get("_logger"))||void 0===o||o.sendLog(e,"video",{value:t,ext:_assign({component_name:"video"},n)})}}),theme={seriesCnt:"3",backgroundColor:"rgba(0,0,0,0)",titleColor:"#1e1f24",subtitleColor:"#848691",textColorShow:!1,textColor:"#333",markTextColor:"#ffffff",color:["#2553ff","#2cd8d8","#7365ff"],borderColor:"#edeef0",borderWidth:"0",visualMapColor:["#0335fe","#2cd8d8","#7365ff"],legendTextColor:"#848691",kColor:"#ff007a",kColor0:"#52c41c",kBorderColor:"#ff007a",kBorderColor0:"#52c41c",kBorderWidth:1,lineWidth:"3",symbolSize:"9",symbol:"emptyCircle",symbolBorderWidth:"3",lineSmooth:!0,graphLineWidth:1,graphLineColor:"#edeef0",mapLabelColor:"#000",mapLabelColorE:"rgb(100,0,0)",mapBorderColor:"#444",mapBorderColorE:"#444",mapBorderWidth:.5,mapBorderWidthE:1,mapAreaColor:"#eee",mapAreaColorE:"rgba(255,215,0,0.8)",axes:[{type:"all",name:"",axisLineShow:!0,axisLineColor:"#6E7079",axisTickShow:!0,axisTickColor:"#6E7079",axisLabelShow:!0,axisLabelColor:"#6E7079",splitLineShow:!0,splitLineColor:["#E0E6F1"],splitAreaShow:!1,splitAreaColor:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]},{type:"category",name:"",axisLineShow:!0,axisLineColor:"#edeef0",axisTickShow:!0,axisTickColor:"#edeef0",axisLabelShow:!0,axisLabelColor:"#848691",splitLineShow:!1,splitLineColor:["#E0E6F1"],splitAreaShow:!1,splitAreaColor:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]},{type:"value",name:"",axisLineShow:!1,axisLineColor:"#6E7079",axisTickShow:!1,axisTickColor:"#6E7079",axisLabelShow:!0,axisLabelColor:"#848691",splitLineShow:!0,splitLineColor:["#edeef0"],splitAreaShow:!1,splitAreaColor:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]},{type:"log",name:"",axisLineShow:!1,axisLineColor:"#6E7079",axisTickShow:!1,axisTickColor:"#6E7079",axisLabelShow:!0,axisLabelColor:"#848691",splitLineShow:!0,splitLineColor:["#edeef0"],splitAreaShow:!1,splitAreaColor:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]},{type:"time",name:"",axisLineShow:!0,axisLineColor:"#edeef0",axisTickShow:!0,axisTickColor:"#848691",axisLabelShow:!0,axisLabelColor:"#848691",splitLineShow:!1,splitLineColor:["#E0E6F1"],splitAreaShow:!1,splitAreaColor:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}],axisSeperateSetting:!0,toolboxColor:"#edeef0",toolboxEmphasisColor:"#edeef0",tooltipAxisColor:"#edeef0",tooltipAxisWidth:"1",timelineLineColor:"#edeef0",timelineLineWidth:"2",timelineItemColor:"#a4b1d7",timelineItemColorE:"#ffffff",timelineCheckColor:"#7365ff",timelineCheckBorderColor:"#edeef0",timelineItemBorderWidth:"0",timelineControlColor:"#edeef0",timelineControlBorderColor:"#edeef0",timelineControlBorderWidth:"1",timelineLabelColor:"#a4b1d7"};function forceTooltipRenderMode(e){var t,n,i,o,a;function r(e){e&&!Array.isArray(e)&&(e.renderMode="richText")}try{for(var s=__values(Object.keys(e)),c=s.next();!c.done;c=s.next()){var l=c.value,d=(a=e[l],Array.isArray(a)?a:a?[a]:[]);try{for(var p=(i=void 0,__values(d)),h=p.next();!h.done;h=p.next()){var u=h.value;"tooltip"===l?r(u):u&&u.tooltip&&r(u.tooltip)}}catch(e){i={error:e}}finally{try{h&&!h.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}}function resetSaveAsImage(e,t,n){e.toolbox||(e.toolbox={feature:{saveAsImage:{title:"",type:"png"}}}),n&&(e.toolbox={feature:{saveAsImage:{show:!1}}});var i=Array.isArray(e.toolbox)?e.toolbox:[e.toolbox];return!1===t?i.forEach((function(e){var t;(null===(t=null==e?void 0:e.feature)||void 0===t?void 0:t.saveAsImage)&&delete e.feature.saveAsImage})):void 0!==t&&i.forEach((function(e){var n;(null===(n=null==e?void 0:e.feature)||void 0===n?void 0:n.saveAsImage)&&(e.feature.saveAsImage.title="",e.feature.saveAsImage.type=t)})),e}function handleCommon(e){e.legend=_assign(_assign({},{type:"scroll"}),e.legend),forceTooltipRenderMode(e),e.title&&(Array.isArray(e.title)?e.title:[e.title]).forEach((function(e){e.link&&(e.link=""),e.sublink&&(e.sublink="")})),e.series&&(Array.isArray(e.series)?e.series:[e.series]).forEach((function(e){var t;"treemap"===e.type||"sunburst"===e.type?null===(t=e.data)||void 0===t||t.forEach((function(e){e.link&&(e.link="")})):"scatter"===e.type&&(e.clip=!1)}))}function shouldRenderChart(e){var t,n;return e.dataset?Array.isArray(e.dataset)?void 0!==(null===(t=e.dataset[0])||void 0===t?void 0:t.source):!!e.dataset.source:!!e.series&&(Array.isArray(e.series)?void 0!==(null===(n=e.series[0])||void 0===n?void 0:n.data):!!e.series.data)}function getDarkModeConfig(e){return{tooltip:{backgroundColor:getDesignTokenValue(e,"--cos-color-bg-active"),textStyle:{color:getDesignTokenValue(e,"--cos-color-text")},borderColor:getDesignTokenValue(e,"--cos-color-border"),axisPointer:{}},title:{textStyle:{color:getDesignTokenValue(e,"--cos-color-text")}},textStyle:{color:getDesignTokenValue(e,"--cos-color-text")}}}function mergeEchartsOption(e,t,n,i){var o=_assign({},t);Object.keys(n).forEach((function(e){o[e]&&(o[e]=_assign(_assign({},o[e]),n[e]))}));var a=getDesignTokenValue(e,i?"--cos-color-border":"--cos-color-border-minor");return o.xAxis&&(Array.isArray(o.xAxis)?o.xAxis=o.xAxis.map((function(e){return _assign(_assign({},e),{splitLine:_assign(_assign({},e.splitLine),{lineStyle:{color:a}})})})):o.xAxis.splitLine=_assign(_assign({},o.xAxis.splitLine),{lineStyle:{color:a}})),o.yAxis&&(Array.isArray(o.yAxis)?o.yAxis=o.yAxis.map((function(e){return _assign(_assign({},e),{splitLine:_assign(_assign({},e.splitLine),{lineStyle:{color:a}})})})):o.yAxis.splitLine=_assign(_assign({},o.yAxis.splitLine),{lineStyle:{color:a}})),o}var css_248z$7=".agent-ui-echarts-container{border-radius:var(--cos-rounded-xs);-webkit-box-sizing:border-box;box-sizing:border-box;width:100%}.agent-ui-echarts .bg-color-white{background-color:var(--cos-color-bg)}.agent-ui-echarts .bg-color-default{background-color:var(--cos-color-bg-dent)}";styleInject(css_248z$7);var waitP=function(e){return void 0===e&&(e=2e3),new Promise((function(t){return setTimeout(t,+e)}))},DEFAULT_CHART_CONFIG={download:"png",chartHeight:400,chartBgColor:"default",showChartLoading:!1},AgentUIECharts=san.defineComponent({framesQueued:[],framesPending:!1,template:'\n        <div\n            class="agent-ui-echarts"\n            on-touchstart="handleTouchEvent"\n            on-touchmove="handleTouchEvent"\n            on-touchend="handleTouchEvent"\n        >\n            <div\n                s-ref="echartsEl"\n                class="agent-ui-echarts-container bg-color-{{chartStyle.bgColor}}"\n                disable-copy\n                style="\n                    height: {{chartStyle.height}}px;\n                    -webkit-tap-highlight-color: transparent;\n                "\n            ></div>\n        </div>\n    ',initData:function(){var e=getRoot(this),t=null==e?void 0:e.data.get("_platform");return{loading:!0,chartOption:"{}",frames:"[]",config:"",chartStyle:{height:0,bgColor:"default"},unShowSaveAsImage:"chat-view"===(null==e?void 0:e.data.get("_envType"))&&"pc"!==t,actions:""}},computed:{parsedChartOption:function(){var e=this.data.get("chartOption");if(!e)return{};try{return JSON.parse(e)}catch(t){return e}},parsedFrames:function(){var e=this.data.get("frames");if(!e)return[];try{return JSON.parse(e)}catch(t){return e}},parsedConfig:function(){var e=this.data.get("config");if(!e)return DEFAULT_CHART_CONFIG;try{return"string"==typeof e?_assign(_assign({},DEFAULT_CHART_CONFIG),JSON.parse(e)):"object"==cosmic._typeof(e)?_assign(_assign({},DEFAULT_CHART_CONFIG),e):DEFAULT_CHART_CONFIG}catch(e){return DEFAULT_CHART_CONFIG}},parsedActions:function(){var e=this.data.get("actions");if(!e)return[];try{return JSON.parse(e)}catch(t){return e}}},renderChartOption:function(e){if(this.echartsInstance||shouldRenderChart(e)){var t=this.handleEchartData({chartOption:e,config:this.data.get("parsedConfig")});this.renderChart(t)}},attached:function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n,i,o,a=this;return __generator(this,(function(r){switch(r.label){case 0:return this.dispatch("UI:ADD_COMPONENT",this),e=this.data.get("parsedChartOption"),t=this.data.get("parsedFrames"),n=shouldRenderChart(e),i=null==t?void 0:t.some((function(e){return e.update&&shouldRenderChart(e.update)})),n||i?(o=this.handleEchartData({chartOption:e,config:this.data.get("parsedConfig")}),[4,this.renderChart(o)]):[3,2];case 1:r.sent(),r.label=2;case 2:return i&&this.renderFrames(t),this.watch("parsedChartOption",(function(e){a.renderChartOption(e)})),this.watch("parsedConfig",(function(e){var t={};resetSaveAsImage(t,e.download,a.data.get("unShowSaveAsImage")),a.renderChart(t)})),this.watch("parsedFrames",(function(e){a.renderFrames(e)})),window.addEventListener("resize",this.resizeListener=function(){var e;null===(e=a.echartsInstance)||void 0===e||e.resize()}),[2]}}))}))},handleEchartData:function(e){var t=e.chartOption||{},n=e.config||{download:"png"};return handleCommon(t),resetSaveAsImage(t,n.download,this.data.get("unShowSaveAsImage")),t},renderChart:function(e){return __awaiter(this,void 0,void 0,(function(){var t=this;return __generator(this,(function(n){return[2,new Promise((function(n){if(t.echartsInstance)t.setEchartsOption(e),t.dispatchActions(t.data.get("parsedActions")),n();else{var i=t.data.get("parsedConfig");t.data.set("chartStyle",{height:"number"==typeof i.chartHeight?i.chartHeight:isMobile()?i.chartHeight.mobile:i.chartHeight.pc,bgColor:i.chartBgColor});var o=t.ref("echartsEl");o.addEventListener("click",(function(e){e.stopPropagation()})),new Promise((function(e,t){require(["./echarts.pc.KGe0vDLl"],e,t)})).then((function(i){i.registerTheme("chartsTheme",theme),t.nextTick((function(){var a=i.init(o,"chartsTheme",{renderer:isMobile()?"svg":"canvas"});t.data.get("parsedConfig").showChartLoading&&a.showLoading(),t.echartsInstance=a,t.setEchartsOption(e),t.echartsInstance.hideLoading(),t.dispatchActions(t.data.get("parsedActions")),n()}))}))}}))]}))}))},renderFrames:function(e){return void 0===e&&(e=[]),__awaiter(this,void 0,void 0,(function(){var t,n,i=this;return __generator(this,(function(o){switch(o.label){case 0:return e.length?this.echartsInstance?[3,3]:(null==e?void 0:e.some((function(e){return e.update&&shouldRenderChart(e.update)})))?[3,1]:[2]:[2];case 1:return t=this.handleEchartData({chartOption:this.data.get("parsedChartOption"),config:this.data.get("parsedConfig")}),[4,this.renderChart(t)];case 2:o.sent(),o.label=3;case 3:return n=function(){return __awaiter(i,void 0,void 0,(function(){var t,n,i,o,a,r,s,c;return __generator(this,(function(l){switch(l.label){case 0:l.trys.push([0,5,6,7]),t=__values(e),n=t.next(),l.label=1;case 1:return n.done?[3,4]:(i=n.value,o=i.duration,(a=i.update)?[4,waitP(o)]:[3,3]);case 2:l.sent(),this.renderChart(a),l.label=3;case 3:return n=t.next(),[3,1];case 4:return[3,7];case 5:return r=l.sent(),s={error:r},[3,7];case 6:try{n&&!n.done&&(c=t.return)&&c.call(t)}finally{if(s)throw s.error}return[7];case 7:return[2]}}))}))},this.framesQueued.push(n),this.queueUpdate(),[2]}}))}))},queueUpdate:function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n,i,o,a,r;return __generator(this,(function(s){switch(s.label){case 0:if(!this.framesQueued.length||this.framesPending)return[3,10];this.framesPending=!0,e=__spreadArray([],__read(this.framesQueued),!1),this.framesQueued=[],s.label=1;case 1:s.trys.push([1,6,7,8]),t=__values(e),n=t.next(),s.label=2;case 2:return n.done?[3,5]:[4,null==(i=n.value)?void 0:i()];case 3:s.sent(),s.label=4;case 4:return n=t.next(),[3,2];case 5:return[3,8];case 6:return o=s.sent(),a={error:o},[3,8];case 7:try{n&&!n.done&&(r=t.return)&&r.call(t)}finally{if(a)throw a.error}return[7];case 8:return this.framesPending=!1,[4,this.queueUpdate()];case 9:s.sent(),s.label=10;case 10:return[2]}}))}))},dispatchActions:function(e){var t,n,i=this,o=0;try{var a=this.data.get("parsedChartOption"),r=a.series,s=a.dataset,c=Array.isArray(r)?null===(t=r[0])||void 0===t?void 0:t.data:null==r?void 0:r.data;if(c)o=c.length-1;else if(s){var l=Array.isArray(s)?null===(n=s[0])||void 0===n?void 0:n.source:s.source;if(Array.isArray(l))o=l.length-1;else if("object"==cosmic._typeof(l)){var d=Object.keys(l)[0];d&&l.hasOwnProperty(d)&&(o=(l[d]||[]).length-1)}}}catch(e){console.error("eCharts options ",e)}e.forEach((function(e){var t,n=void 0!==e.seriesIndex?e.seriesIndex:0,a=void 0!==e.dataIndex?e.dataIndex:o;null===(t=i.echartsInstance)||void 0===t||t.dispatchAction(_assign(_assign({},e),{dataIndex:a,seriesIndex:n}))}))},handleTouchEvent:function(e){e.stopPropagation()},detached:function(){this.resizeListener&&window.removeEventListener("resize",this.resizeListener),this.echartsInstance&&this.echartsInstance.dispose()},setThemeMode:function(){var e=this.data.get("parsedChartOption");this.setEchartsOption(e)},setEchartsOption:function(e){var t,n=this.data.get("chartStyle").bgColor===DEFAULT_CHART_CONFIG.chartBgColor,i=mergeEchartsOption(this.el,e,getDarkModeConfig(this.el),n);null===(t=this.echartsInstance)||void 0===t||t.setOption(i)}}),AgentUIComparison=san.defineComponent({template:'\n        <cosd-comparison\n            class="agent-ui-comparison"\n            delimiter="{{delimiter}}"\n            targets="{{targets}}"\n            bar="{{bar}}"\n            items="{{items}}"\n            on-click="native:jumpLink"\n        />\n    ',components:{"cosd-comparison":cosmic.Comparison},initData:function(){return{link:{},delimiter:{},targets:[],bar:[],items:[]}},jumpLink:function(){var e=this.data.get("link");e&&getLinkApis(this,"comparison",e)}}),AgentUIDoctorCard=san.defineComponent({template:'\n        <div on-click="handleCardClick">\n            <cos-doctor-card\n                class="agent-ui-doctor-card"\n                avatar="{{avatar}}"\n                online="{{online}}"\n                name="{{name}}"\n                professional-title="{{professionalTitle}}"\n                department="{{department}}"\n                location="{{location}}"\n                visited="{{visited}}"\n                link-info="{{linkInfo}}"\n                hospital="{{parsedHospital}}"\n                rank="{{parsedRank}}"\n                introduction="{{parsedIntroduction}}"\n                service-statistics="{{parsedServiceStatistics}}"\n                services="{{parsedServices}}"\n                on-rank-click="handleRankClick"\n                on-hospital-rank-click="handleHospitalRankClick"\n                on-service-button-click="handleServiceBtnClick"\n            />\n        </div>\n    ',initData:function(){return{avatar:"",online:!1,name:"",professionalTitle:"",department:"",location:"",visited:""}},components:{"cos-doctor-card":cosmic.DoctorCard},computed:{parsedHospital:function(){var e=this.data.get("hospital");if(e){if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(t){return e}}},parsedLink:function(){var e=this.data.get("link");if(e){if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(t){return e}}},parsedRank:function(){var e=this.data.get("rank");if(e){if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(t){return e}}},parsedIntroduction:function(){var e=this.data.get("introduction");if(e){if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(t){return e}}},parsedServiceStatistics:function(){var e=this.data.get("serviceStatistics");if(e){if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(t){return e}}},parsedServices:function(){var e=this.data.get("services");if(e){if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(t){return e}}}},attached:function(){var e=this;this.sendLog({type:LogType.SHOW,value:"component"});var t=this.data.get(),n=t.parsedHospital,i=t.parsedRank,o=t.parsedServices,a=!1;(null==n?void 0:n.name)||(null==n?void 0:n.rank)?this.sendLog({type:LogType.SHOW,value:"hospital_rank"}):this.watch("parsedHospital",(function(t){a||!(null==t?void 0:t.name)&&!(null==t?void 0:t.rank)||(a=!0,e.sendLog({type:LogType.SHOW,value:"hospital_rank"}))}));var r=!1;(null==i?void 0:i.text)?this.sendLog({type:LogType.SHOW,value:"review_rank"}):this.watch("parsedRank",(function(t){!r&&(null==t?void 0:t.text)&&(r=!0,e.sendLog({type:LogType.SHOW,value:"review_rank"}))}));var s=!1,c=function(t){null==t||t.forEach((function(t,n){t.text&&e.sendLog({type:LogType.SHOW,value:"component_button",ext:{button_text:t.text,button_order:n+1}})}))};(null==o?void 0:o.length)?c(o):this.watch("parsedServices",(function(e){!s&&(null==e?void 0:e.length)&&(s=!0,c(e))}))},handleCardClick:function(){this.sendLog({type:LogType.CLICK,value:"component"});var e=this.data.get("parsedLink");e&&getLinkApis(this,"doctor-card",e)},handleHospitalRankClick:function(){this.sendLog({type:LogType.CLICK,value:"hospital_rank"});var e=this.data.get("parsedHospital"),t=e&&e.link||this.data.get("parsedLink");t&&getLinkApis(this,"doctor-card",t)},handleServiceBtnClick:function(e){var t=e.index,n=this.data.get("parsedServices");this.sendLog({type:LogType.CLICK,value:"component_button",ext:{button_text:n[t].text,button_order:t+1}});var i=n[t].link||this.data.get("parsedLink");i&&getLinkApis(this,"doctor-card",i)},handleRankClick:function(){this.sendLog({type:LogType.CLICK,value:"review_rank"});var e=this.data.get("parsedRank"),t=e&&e.link||this.data.get("parsedLink");t&&getLinkApis(this,"doctor-card",t)},sendLog:function(e){var t,n,i=e.type,o=void 0===i?LogType.SHOW:i,a=e.value,r=void 0===a?"":a,s=e.ext,c=void 0===s?{}:s;null===(n=null===(t=getRoot(this))||void 0===t?void 0:t.data.get("_logger"))||void 0===n||n.sendLog(o,"doctor-card",{value:r,ext:_assign({component_name:"doctor",valueInfo:[{component_name:"doctor"}]},c)})}}),css_248z$6='.agent-ui .agent-ui-form{background-color:var(--cos-color-bg);color:var(--cos-color-text);height:100%;line-height:normal}.agent-ui .agent-ui-form.form-disabled{opacity:var(--cos-opacity-40);pointer-events:none}.agent-ui .agent-ui-form-title{font-weight:var(--cos-font-regular);margin-bottom:var(--cos-space-md);-webkit-text-stroke:0;font-family:PingFang SC,Arial,sans-serif;font-family:PingFang SC;font-size:var(--cos-text-body-lg-higher);line-height:var(--cos-leading-body-lg-higher)}.agent-ui .agent-ui-form-container .form-item{font-weight:var(--cos-font-regular);-webkit-text-stroke:0;font-family:PingFang SC,Arial,sans-serif}.agent-ui .agent-ui-form-container .form-item-label{font-size:var(--cos-text-body);line-height:var(--cos-text-body-lg)}.agent-ui .agent-ui-form-container .form-item .required:after{color:var(--cos-color-text-error);content:"*";display:inline-block;height:100%;width:8px}.agent-ui .agent-ui-form-container .form-item-value{position:relative}.agent-ui .agent-ui-form-container .form-item-value .form-item-error{bottom:0;color:var(--cos-color-text-error);left:0;text-align:left}.agent-ui .agent-ui-form-container .form-item .cos-checkbox,.agent-ui .agent-ui-form-container .form-item .cos-radio{background-color:var(--cos-color-bg-dent);border:1.5px solid transparent;-webkit-box-sizing:border-box;box-sizing:border-box;color:var(--cos-color-text);font-size:var(--cos-text-body);height:30px;-webkit-tap-highlight-color:transparent}.agent-ui .agent-ui-form-container .form-item .cos-checkbox.cos-checkbox-tag,.agent-ui .agent-ui-form-container .form-item .cos-checkbox.cos-radio-tag,.agent-ui .agent-ui-form-container .form-item .cos-radio.cos-checkbox-tag,.agent-ui .agent-ui-form-container .form-item .cos-radio.cos-radio-tag{margin-right:8px}.agent-ui .agent-ui-form-container .form-item .cos-checkbox-checked,.agent-ui .agent-ui-form-container .form-item .cos-radio-checked{background-color:var(--cosd-color-bg-primary-light,#6e4bfa0f);border:1.5px solid var(--cosd-color-border,#6e4bfa);color:var(--cosd-color-text-on-secondary-light,#201452);font-weight:var(--cos-font-medium);line-height:var(--cos-text-body-lg-higher);-webkit-text-stroke:var(--cos-font-medium-stroke);font-family:PingFang SC,Arial,sans-serif}.agent-ui .agent-ui-form-container .form-item .cos-textarea{padding:var(--cos-space-xxs) var(--cos-space-sm)}.agent-ui .agent-ui-form .form-operation{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.agent-ui .agent-ui-form .form-operation .cos-button{height:30px;padding:0 var(--cos-space-md)}.agent-ui .agent-ui-form .form-operation .cos-button-primary{background-color:var(--cosd-color-bg-secondary-light,#ddd9ff);color:var(--cosd-color-text-on-secondary-light,#201452)}.agent-ui .agent-ui-form .form-operation .cos-button-secondary{background-color:var(--cos-color-bg-dent);color:var(--cos-color-text)}.agent-ui .agent-ui-form .form-operation .form-grey{opacity:var(--cos-opacity-40);pointer-events:none}.agent-ui .agent-ui-form .form-operation .form-ungrey{cursor:pointer;-webkit-tap-highlight-color:transparent}.agent-ui .agent-ui-form .form-operation .form-ungrey.cos-button.cos-button-primary:hover{background-color:var(--cosd-color-bg-secondary-light-hover);opacity:var(--cos-opacity-100)}.agent-ui .agent-ui-form .form-operation .form-ungrey.cos-button.cos-button-primary:active{background-color:var(--cosd-color-bg-secondary-light-active)}.agent-ui .agent-ui-form .form-operation .cos-button.cos-button-secondary{position:relative}.agent-ui .agent-ui-form .form-operation .cos-button.cos-button-secondary:hover{opacity:var(--cos-opacity-100)}.agent-ui .agent-ui-form .form-operation .cos-button.cos-button-secondary:hover:before{background-color:rgba(0,0,0,.03);content:"";height:100%;left:0;position:absolute;top:0;width:100%}.agent-ui .agent-ui-form .form-operation .cos-button.cos-button-secondary:active:before{background-color:rgba(0,0,0,.06);content:"";height:100%;left:0;position:absolute;top:0;width:100%}.agent-ui .agent-ui-form .form-operation.pc-form{-webkit-box-pack:right;-webkit-justify-content:right;-ms-flex-pack:right;justify-content:right}.agent-ui .agent-ui-form .form-operation.pc-form .cos-button{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.c-dark .agent-ui .agent-ui-form .cos-checkbox-checked,.c-dark .agent-ui .agent-ui-form .cos-radio-checked,.c-darkmode .agent-ui .agent-ui-form .cos-checkbox-checked,.c-darkmode .agent-ui .agent-ui-form .cos-radio-checked,.cos-dark .agent-ui .agent-ui-form .cos-checkbox-checked,.cos-dark .agent-ui .agent-ui-form .cos-radio-checked{color:var(--cos-color-text)}@media (prefers-color-scheme:dark){.cos-android.cos-baiduapp .agent-ui .agent-ui-form .cos-checkbox,.cos-android.cos-baiduapp .agent-ui .agent-ui-form .cos-radio,.cos-dark-android .agent-ui .agent-ui-form .cos-checkbox,.cos-dark-android .agent-ui .agent-ui-form .cos-radio{background-color:#191919;color:#666;color-scheme:dark}.cos-android.cos-baiduapp .agent-ui .agent-ui-form .cos-checkbox-checked,.cos-android.cos-baiduapp .agent-ui .agent-ui-form .cos-radio-checked,.cos-dark-android .agent-ui .agent-ui-form .cos-checkbox-checked,.cos-dark-android .agent-ui .agent-ui-form .cos-radio-checked{background-color:#191919;border:1.5px solid #37267d99;color:#ffffff80;color-scheme:dark}.cos-android.cos-baiduapp .agent-ui .agent-ui-form .cos-input,.cos-dark-android .agent-ui .agent-ui-form .cos-input{border:1px solid #4d4d4d;color-scheme:dark}.cos-android.cos-baiduapp .agent-ui .agent-ui-form .form-operation .cos-button-secondary,.cos-dark-android .agent-ui .agent-ui-form .form-operation .cos-button-secondary{background-color:#191919;color:#666;color-scheme:dark}}';styleInject(css_248z$6);var AgentUIForm=san.defineComponent({template:'\n        <form\n            class="agent-ui-form {{disabled ? \'form-disabled\' : \'\'}}"\n            on-submit="handleSubmit" disabled="{{disabled}}"\n        >\n            <div s-if="title" class="agent-ui-form-title">\n                {{title}}\n            </div>\n            <div class="agent-ui-form-container">\n                <div s-for="item in processedItems" class="form-item cos-space-pb-xl">\n                    <label class="form-item-label {{item.required !== false && \'required\'}}">\n                        {{item.label}}\n                    </label>\n                    <div class="form-item-value">\n                        <cos-input\n                            s-if="item.type === \'input\'"\n                            class="cos-space-mt-xs"\n                            placeholder="{{item.placeholder || \'\'}}"\n                            disabled="{{item.disabled}}"\n                            value="{=formData[item.name]=}"\n                        />\n\n                        <cos-textarea\n                            s-if="item.type === \'textarea\'"\n                            class="cos-space-mt-xs"\n                            placeholder="{{item.placeholder || \'\'}}"\n                            disabled="{{item.disabled}}"\n                            value="{=formData[item.name]=}"\n                        />\n\n                        <cos-checkbox-group\n                            s-if="item.type === \'checkboxGroup\'"\n                            value="{=formData[item.name]=}"\n                            disabled="{{item.disabled}}"\n                        >\n                            <cos-checkbox\n                                s-for="option in item.options"\n                                class="cos-space-mt-xs cos-space-mr-xs"\n                                value="{{option.value}}"\n                                disabled="{{option.disabled}}"\n                                checked="{{formData[item.name].includes(option.value)}}"\n                            >\n                                {{option.label}}\n                            </cos-checkbox>\n                        </cos-checkbox-group>\n\n                        <cos-radio-group\n                            s-if="item.type === \'radio\'"\n                            value="{=formData[item.name]=}"\n                            disabled="{{item.disabled}}"\n                        >\n                            <cos-radio\n                                s-for="option in item.options"\n                                class="cos-space-mt-xs cos-space-mr-xs"\n                                value="{{option.value}}"\n                                disabled="{{option.disabled}}"\n                                checked="{{formData[item.name] === option.value}}"\n                            >\n                                {{option.label}}\n                            </cos-radio>\n                        </cos-radio-group>\n\n                        <div class="form-item-error" s-if="validate(item.required, item.value)">{{item.error}}</div>\n                    </div>\n                </div>\n            </div>\n            <div class="form-operation{{_isPcComp ? \' pc-form\' : \'\'}}">\n                <cos-button\n                    s-if="showResetBool"\n                    appearance="secondary"\n                    on-click="native:handleReset"\n                >\n                    \n                </cos-button>\n                <cos-button\n                    appearance="primary"\n                    type="submit"\n                    class="{{showResetBool ? \'cos-space-ml-xs\' : \'\'}}{{\n                        judgeDisabled ? \' form-grey\' : \' form-ungrey\'}}{{\n                        showResetBool ? \'\' : \' flex-button-alone\'}}"\n                >\n                    {{submitText}}\n                </cos-button>\n            </div>\n        </form>\n    ',components:{"cos-checkbox-group":cosmic.CheckboxGroup,"cos-checkbox":cosmic.Checkbox,"cos-input":cosmic.Input,"cos-radio-group":cosmic.RadioGroup,"cos-radio":cosmic.Radio,"cos-textarea":cosmic.Textarea,"cos-button":cosmic.Button},computed:{judgeDisabled:function(){var e,t,n=this.data.get("formData"),i=this.data.get("requiredMap");try{for(var o=__values(i),a=o.next();!a.done;a=o.next()){var r=__read(a.value,2),s=r[0];if(r[1]){if(Array.isArray(n[s])&&0===n[s].length)return!0;if(!n[s])return!0}}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return!1},showResetBool:function(){var e=this.data.get("showReset");return!!e&&("boolean"==typeof e?e:"false"!==e)}},initData:function(){var e=getRoot(this),t=null==e?void 0:e.data.get("_logger"),n=null==e?void 0:e.data.get("_platform");return{disabled:!!(null==e?void 0:e.data.get("_history")),flex:1,title:"",initialValues:{},alignSelf:"center",submitText:"",formItems:[],formData:{},processedItems:[],requiredMap:new Map,showReset:!0,_logger:t,_isPcComp:"pc"===n}},attached:function(){var e=this,t=function(){var t=e.data.get("formItems"),n={},i=new Map,o=[];if("string"==typeof t)try{o=JSON.parse(t)}catch(t){return void e.data.set("processedItems",[])}else{if(!Array.isArray(t))return void e.data.set("processedItems",[]);o=t}o=o.map((function(e){var t,o=e.name,a=e.required,r=e.type,s=e.value,c=e.options,l=_assign({},e);i.set(o,void 0===a||a);var d="";switch("input"!==r&&"textarea"!==r&&(d=Array.isArray(c)&&isObject$1(c[0])?(null===(t=c[0])||void 0===t?void 0:t.value)||"":c[0]||""),r){case"radio":n[o]=s||d||"";break;case"checkboxGroup":n[o]=s&&[s]||d&&[d]||"";break;case"input":case"textarea":n[o]=s||""}return"checkboxGroup"!==r&&"radio"!==r||(l.options=c.map((function(e){if(isObject$1(e)){var t=e.value||e.label||"";return{label:e.label||e.value||"",value:t,disabled:!!e.disabled}}return"string"==typeof e?{label:e,value:e,disabled:!1}:{label:"",value:"",disabled:!1}}))),l})),e.data.set("formData",n),e.data.set("processedItems",o),e.data.set("requiredMap",i)};t(),this.watch("formItems",(function(){t()}))},updated:function(){var e,t;null===(e=getRoot(this))||void 0===e||e.data.get("_emitter").emit("agent-ui-log",{type:"form",data:{$event:this.data.get("formData"),$data:_assign({},null===(t=getRoot(this))||void 0===t?void 0:t.data.get())}})},handleSubmit:function(e){e.preventDefault(),this.fire("submit",this.data.get("formData"))},handleReset:function(e){var t,n;e.preventDefault();var i=this.data.get("processedItems");if(i.length){var o={};try{for(var a=__values(i),r=a.next();!r.done;r=a.next()){var s=r.value,c=s||{},l=c.name,d=void 0===l?"":l,p=c.value,h=c.type,u="input"===h||"textarea"===h;if(u){var m=s.value;o[d]=m||""}else"radio"===h?p&&(o[d]=p):"checkboxGroup"===h&&(null==p?void 0:p.length)&&(o[d]=p);if(!u&&!p||p&&0===p.length){var f=(null==s?void 0:s.options[0]).value;"checkboxGroup"===h?o[d]=f?[f]:[null==s?void 0:s.options[0]]:"radio"===h&&(o[d]=f||(null==s?void 0:s.options[0]))}}}catch(e){t={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}this.data.set("formData",o)}}}),css_248z$5=".agent-ui-base-clue-form .cos-input-clear .cos-icon{color:var(--cos-color-text)}@media (prefers-color-scheme:dark){.cos-android.cos-baiduapp .agent-ui-base-clue-form.cosd-clue-form .cosd-clue-form-list-item-value .cos-input,.cos-dark-android .agent-ui-base-clue-form.cosd-clue-form .cosd-clue-form-list-item-value .cos-input{border:1px solid #4d4d4d;color-scheme:dark}.cos-android.cos-baiduapp .agent-ui-base-clue-form.cosd-clue-form .cosd-clue-form-list-item-value .cos-radio,.cos-dark-android .agent-ui-base-clue-form.cosd-clue-form .cosd-clue-form-list-item-value .cos-radio{background-color:#191919;color:#666;color-scheme:dark}.cos-android.cos-baiduapp .agent-ui-base-clue-form.cosd-clue-form .cosd-clue-form-list-item-value .cos-radio-checked,.cos-dark-android .agent-ui-base-clue-form.cosd-clue-form .cosd-clue-form-list-item-value .cos-radio-checked{background-color:#191919;border:1.5px solid #37267d99;color:#ffffff80;color-scheme:dark}.cos-android.cos-baiduapp .agent-ui-base-clue-form.cosd-clue-form .cosd-clue-form-footer-reset,.cos-dark-android .agent-ui-base-clue-form.cosd-clue-form .cosd-clue-form-footer-reset{background-color:#191919;color:#666;color-scheme:dark}}";styleInject(css_248z$5);var AgentUIClueForm=san.defineComponent({template:'\n        <div\n            class="agent-ui-base-clue-form cos-dqa"\n            data-agent-ui-exposure\n            data-agent-ui-exposure-ext="{{exposureLog}}"\n        >\n            <cosd-clue-form\n                s-ref="clueForm"\n                caption="{{title}}"\n                channel="{{channel}}"\n                solutionId="{{solutionId}}"\n                header="{{headerTitle ? {...(header || {}), title: headerTitle} : header}}"\n                initPhone="{{_initPhone}}"\n                initPhoneSecure="{{_initPhoneSecure}}"\n                contactPlaceholder="{{contactPlaceholder}}"\n                openRFQ="{{openRFQ}}"\n                notice="{{notice}}"\n                agreement="{{agreement}}"\n                phone="{{phone}}"\n                from="{{from}}"\n                query="{{query}}"\n                on-agreement-name-click="handleAgreementNameClick"\n                on-agreement-accept-change="handleAgreementAcceptChange"\n                on-agreement-dialog-show="handleAgreementDialogShow"\n                on-agreement-dialog-ok="handleAgreementDialogOk"\n                on-agreement-dialog-cancel="handleAgreementDialogCancel"\n                on-agreement-dialog-close="handleAgreementDialogClose"\n                on-phone-verify-dialog-close="handlePhoneVerifyDialogClose"\n                on-phone-verify-dialog-show="handlePhoneVerifyDialogShow"\n                on-phone-verify-dialog-verification="handlePhoneVerificationClick"\n                on-phone-verify-dialog-confirm="handlePhoneConfirmClick"\n                on-phone-call-click="handlePhoneCallClick"\n                on-phone-verify-get-real-phone="handlePhoneGetRealPhoneClick"\n                on-make-phone-call="handleMakePhoneCall"\n                on-phone-verify-real-phone-dialog-close="handlePhoneVerifyRealPhoneDialogClose"\n                on-get-init-phone="handleGetInitPhone"\n                on-submit="handleSubmit"\n            />\n        </div>\n    ',components:{"cosd-clue-form":cosmic.ClueForm},computed:{exposureLog:function(){return JSON.stringify({type:"base-clue-form",cs_value:"clue-form"})}},initData:function(){var e=getRoot(this),t=null==e?void 0:e.data.get("_logger"),n=(null==e?void 0:e.data.get("_disposeAfterSubmitClueForm"))||!1;return{title:"",channel:{consumerCode:"",sceneCode:""},solutionId:0,headerTitle:"",notice:null,from:"yingxiaotong",phone:null,query:((null==e?void 0:e.data.get("_renderContext"))||{}).query||"",_logger:t,_disposeAfterSubmitClueForm:n,_initPhone:"",_initPhoneSecure:!0}},attached:function(){var e,t=this.data.get("solutionId"),n=this.data.get("phone"),i=[];(null==n?void 0:n.secretKey)&&i.push({function_name:"call"}),0!=+t&&i.push({function_name:"form"}),null===(e=this.data.get("_logger"))||void 0===e||e.show("base-clue-form",{value:"contact_box",cs_value:"clue-form",ext:{clue_info:i,component_name:"clue"}})},handleSubmit:function(e){var t,n=this;null===(t=this.data.get("_logger"))||void 0===t||t.click("base-clue-form",{value:"contact_info_confirm",cs_value:"clue_form_success"}),this.fire("submit",e),this.data.get("_disposeAfterSubmitClueForm")&&setTimeout((function(){n.dispose()}),0)},handleAgreementNameClick:function(){var e;null===(e=this.data.get("_logger"))||void 0===e||e.click("base-clue-form",{value:"contact_info_link"})},handleAgreementDialogShow:function(){var e;null===(e=this.data.get("_logger"))||void 0===e||e.show("base-clue-form",{value:"contact_privacy_box"}),this.fire("overlay",{open:!0})},handleAgreementAcceptChange:function(e){var t,n=e.checked;null===(t=this.data.get("_logger"))||void 0===t||t.click("base-clue-form",{value:"contact_info_accept",ext:{is_open:n?1:0}}),this.fire("overlay",{open:!1})},handleAgreementDialogOk:function(){var e;null===(e=this.data.get("_logger"))||void 0===e||e.click("base-clue-form",{value:"contact_privacy_confirm"}),this.fire("overlay",{open:!1})},handleAgreementDialogCancel:function(){var e;null===(e=this.data.get("_logger"))||void 0===e||e.click("base-clue-form",{value:"contact_privacy_cancel"}),this.fire("overlay",{open:!1})},handleAgreementDialogClose:function(){var e;null===(e=this.data.get("_logger"))||void 0===e||e.click("base-clue-form",{value:"contact_privacy_close"}),this.fire("overlay",{open:!1})},handlePhoneCallClick:function(){var e;null===(e=this.data.get("_logger"))||void 0===e||e.click("base-clue-form",{value:"component_call",ext:{component_name:"clue"}})},handleMakePhoneCall:function(e){var t,n=null===(t=getSDKApis())||void 0===t?void 0:t.makePhoneCall;null==n||n(e)},handlePhoneGetRealPhoneClick:function(e){var t,n,i=e.phone,o=e.verifyCode,a=e.dialDirectly,r=e.baiduId,s=e.cuid,c=e.url,l=e.agentProxyPath,d=null===(t=getSDKApis())||void 0===t?void 0:t.request,p=null===(n=this.data.get("phone"))||void 0===n?void 0:n.secretKey,h=this.ref("clueForm");if(d)d({url:c,agentProxyType:1,agentProxyPath:l,options:{headers:{"Content-Type":"application/json",cookie:"BAIDUID=".concat(r,";BAIDUCUID=").concat(s,";")},method:"POST",data:{leadPhone:p,phone:i,verifyCode:o},credentials:"include"}}).then((function(e){null==h||h.getRealPhoneComplete(a,e)})).catch((function(){null==h||h.handleRealPhoneFail()})).finally((function(){null==h||h.setIsSubmitting(!1)}));else{var u=getSDKApis().showToast;u&&u(""),null==h||h.setIsSubmitting(!1)}},handlePhoneVerifyDialogShow:function(){var e;null===(e=this.data.get("_logger"))||void 0===e||e.show("base-clue-form",{value:"phone_verify_box",ext:{component_name:"clue"}}),this.fire("overlay",{open:!0})},handlePhoneVerificationClick:function(){var e;null===(e=this.data.get("_logger"))||void 0===e||e.click("base-clue-form",{value:"phone_verify_code",ext:{component_name:"clue"}})},handlePhoneConfirmClick:function(){var e;null===(e=this.data.get("_logger"))||void 0===e||e.click("base-clue-form",{value:"phone_verify_confirm",ext:{component_name:"clue"}})},handlePhoneVerifyDialogClose:function(){var e;null===(e=this.data.get("_logger"))||void 0===e||e.click("base-clue-form",{value:"phone_verify_close",ext:{component_name:"clue"}}),this.fire("overlay",{open:!1})},handlePhoneVerifyRealPhoneDialogClose:function(){this.fire("overlay",{open:!1})},handleGetInitPhone:function(e){var t,n=e.baiduId,i=e.cuid,o=e.url,a=e.agentProxyPath;return __awaiter(this,void 0,void 0,(function(){var e,r,s;return __generator(this,(function(c){switch(c.label){case 0:if(!(e=null===(t=getSDKApis())||void 0===t?void 0:t.request))return[2];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,e({url:o,agentProxyType:1,agentProxyPath:a,options:{headers:{cookie:"BAIDUID=".concat(n,";BAIDUCUID=").concat(i,";")},method:"GET",credentials:"include"}})];case 2:return 0!==(null==(r=c.sent())?void 0:r.status)?[2]:(s=r.data.securemobil,this.data.set("_initPhone",s||""),[3,4]);case 3:return c.sent(),[3,4];case 4:return[2]}}))}))}}),css_248z$4=".agent-ui .agent-ui-upload{background-color:#f5f5f5;border-radius:6px;min-width:60px}.agent-ui .agent-ui-upload .upload-loading{padding:15px 0;width:100%}.agent-ui .agent-ui-upload .upload-loading .loading-title{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.agent-ui .agent-ui-upload .upload-loading .loading-title .loading-title-icon{background-size:cover;height:16px;width:16px}.agent-ui .agent-ui-upload .upload-loading .loading-title .loading-text{color:#848691;cursor:default;font-size:16px;letter-spacing:.27px;line-height:18px;margin-left:4px}.agent-ui .agent-ui-upload .upload-loading .loading-detail{color:#848691;cursor:default;font-size:12px;letter-spacing:0;line-height:14px;padding-top:8px;text-align:center}.agent-ui .agent-ui-upload .agent-ui-upload-button{cursor:pointer;padding:15px 0}.agent-ui .agent-ui-upload .agent-ui-upload-button input{display:none}.agent-ui .agent-ui-upload .agent-ui-upload-button .title{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.agent-ui .agent-ui-upload .agent-ui-upload-button .title .title-icon{background-image:url(https://gips2.baidu.com/it/u=2029043052,3613996987&fm=3028&app=3028&f=PNG&fmt=auto&q=100&size=f28_28);background-size:cover;height:16px;width:16px}.agent-ui .agent-ui-upload .agent-ui-upload-button .title .text{color:#5240ff;font-size:16px;letter-spacing:.27px;line-height:18px;margin-left:4px}.agent-ui .agent-ui-upload .agent-ui-upload-button .detail{color:#848691;font-size:12px;letter-spacing:0;line-height:14px;padding-top:8px;text-align:center}.agent-ui .agent-ui-upload .agent-ui-upload-button:hover{background:#ebe9ff;border-radius:6px;cursor:pointer}.agent-ui .agent-ui-upload .agent-ui-upload-button.disabled{background:#ebe9ff;opacity:40%;pointer-events:none}.agent-ui .agent-ui-upload .agent-ui-upload-progress{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:16px 0;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:start;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start}.agent-ui .agent-ui-upload .agent-ui-upload-progress .file-icon{background-size:cover;display:inline-block;height:16px;width:16px}.agent-ui .agent-ui-upload .agent-ui-upload-progress .file-info{cursor:pointer;margin-left:16px;width:80%}.agent-ui .agent-ui-upload .agent-ui-upload-progress .file-info .info{color:#1e1f24;font-size:14px;letter-spacing:0;line-height:18px;overflow:hidden;padding:0;text-align:justify;text-overflow:ellipsis;white-space:nowrap}.agent-ui .agent-ui-upload .agent-ui-upload-progress .file-info .progress{background:#ebe9ff;border-radius:5px;height:6px;margin-bottom:4px;margin-right:4px;margin-top:12px;padding-right:4px}.agent-ui .agent-ui-upload .agent-ui-upload-progress .file-info .progress .inner{background:#7365ff;border-radius:5px;height:6px;position:relative;-webkit-transition:all .4s cubic-bezier(.08,.82,.17,1) 0s;transition:all .4s cubic-bezier(.08,.82,.17,1) 0s;width:1px}.agent-ui-upload-pc{width:66.67%}";function uploadFile(e,t,n){return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(o){return i=new XMLHttpRequest,[2,new Promise((function(o,a){n.onProgress&&i.upload&&(i.upload.onprogress=function(e){n.onProgress&&n.onProgress(e)}),i.onerror=function(e){a(e)},i.onload=function(){200===i.status&&o(JSON.parse(i.responseText||i.response||"")),a(i.responseText||i.response||"")},i.open("post",e,!0),i.withCredentials=!0,i.send(t)}))]}))}))}function checkFileSize(e,t){return e.size/1024/1024<=t}styleInject(css_248z$4);var AgentUIUpload=san.defineComponent({template:'\n    <div class="agent-ui-upload {{_isPcComp ? \'agent-ui-upload-pc\' : \'\'}}">\n        <div s-if="loading" class="upload-loading">\n            <div class="loading-title">\n                <svg class="loading-title-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="Upload"><path d="M8.71,7.71,11,5.41V15a1,1,0,0,0,2,0V5.41l2.29,2.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42l-4-4a1,1,0,0,0-.33-.21,1,1,0,0,0-.76,0,1,1,0,0,0-.33.21l-4,4A1,1,0,1,0,8.71,7.71ZM21,12a1,1,0,0,0-1,1v6a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1V13a1,1,0,0,0-2,0v6a3,3,0,0,0,3,3H19a3,3,0,0,0,3-3V13A1,1,0,0,0,21,12Z" fill="#c8cece" class="color000000 svgShape"></path></svg>\n                <span class="loading-text"></span>\n            </div>\n            <div class="loading-detail">\n                <div>.pdf,.doc,.xls, 10MB</div>\n            </div>\n        </div>\n        <div s-else>\n            <div  s-if="uploadStatus !== \'uploading\'"\n                class="{{\n                    uploadStatus === \'unUpload\' ? \'agent-ui-upload-button\' : \'agent-ui-upload-button disabled\'\n                }}"\n                on-click="handleClick"\n                disabled="{{uploadStatus !== \'unUpload\'}}"\n                >\n                <div class="title">\n                    <span class="title-icon"></span>\n                    <span class="text">{{text}}</span>\n                </div>\n                <div class="detail">\n                    <span class="text">{{fileType}}, {{maxSize}}MB</span>\n                </div>\n                <input\n                    type="file"\n                    s-ref="fileInput"\n                    accept="{{fileType}}"\n                    on-change="handleUploadFile($event)"\n                    disabled="{{uploadStatus !== \'unUpload\'}}" />\n            </div>\n            <div s-else class="agent-ui-upload-progress">\n                <div class="file-icon"> </div>\n                <div class="file-info">\n                    <div class="info">\n                        <span s-if="uploadStatus !== \'uploadFail\'"> {{ percent }}% </span>\n                        <span s-else> \'\'</span>\n                        <span> {{ fileInfo.name || \'\' }} </span>\n                    </div>\n                    <div>\n                        <div class="progress">\n                            <div class="inner" style="{{percentStyle}}">\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>',components:{},initData:function(){var e;return{url:"",text:"",fileType:"",maxSize:1,fileField:"file",fileInfo:{},uploadStatus:"unUpload",percent:0,_isPcComp:"pc"===(null===(e=getRoot(this))||void 0===e?void 0:e.data.get("_platform"))}},computed:{loading:function(){return!this.data.get("url")||0===this.data.get("fileType").length},percentStyle:function(){return"uploadFail"===this.data.get("uploadStatus")?"width: ".concat(this.data.get("percent"),"%;background: #F73131;"):"width: ".concat(this.data.get("percent"),"%;background: #7365FF;")}},handleClick:function(e){e.stopPropagation();var t=this.ref("fileInput");null==t||t.click()},handleUploadFile:function(){var e;return __awaiter(this,void 0,void 0,(function(){var t,n,i,o,a,r,s,c,l,d=this;return __generator(this,(function(p){switch(p.label){case 0:return p.trys.push([0,2,,3]),t=this.ref("fileInput"),n=null===(e=null==t?void 0:t.files)||void 0===e?void 0:e[0],(i={}).name=(null==n?void 0:n.name)||"",i.size=(null==n?void 0:n.size)||0,i.type=(null==n?void 0:n.name.split(".").pop())||"",this.data.set("fileInfo",i),n?checkFileSize(n,this.data.get("maxSize"))?(o=this.data.get("fileField"),a=this.data.get("url"),(r=new FormData).append("".concat(o),n),this.data.set("uploadStatus","uploading"),[4,uploadFile(a,r,{onProgress:function(e){var t=Math.round(e.loaded/e.total*100);d.data.set("percent",t),t>=100&&d.data.set("uploadStatus","uploadSuccess")}})]):(console.error("agent-ui "),this.emitError(new Error("agent-ui ")),this.data.set("uploadStatus","uploadFail"),[2]):(this.data.set("uploadStatus","uploadFail"),console.error(""),[2]);case 1:return s=p.sent(),c=(null==s?void 0:s.data)||{},this.fire("upload",{fileInfo:_assign(_assign({},i),c)}),[3,3];case 2:return l=p.sent(),this.emitError(l),this.data.set("uploadStatus","uploadFail"),console.error("agent-ui ",l),[3,3];case 3:return[2]}}))}))},emitError:function(e){this.fire("upload-error",{error:e})}}),AgentUICounseling=san.defineComponent({template:'\n        <cosd-counseling\n            class="agent-ui-counseling"\n            s-bind="{{filterCounselingData}}"\n            on-show-payment-panel="handleShowPaymentPanel"\n            on-button-click="handleButtonClick"\n            on-card-click="handleCardClick"\n        />\n    ',components:{"cosd-counseling":cosmic.Counseling},computed:{filterCounselingData:function(){var e=this.data.get("goodsData")||{},t=e;try{"string"==typeof e&&(t=JSON.parse(e))}catch(n){t=e}var n=t,i=n.actionText,o=n.goodsId,a=n.pay,r=n.isOnline,s=n.tags,c=n.authTag,l=__rest(n,["actionText","goodsId","pay","isOnline","tags","authTag"]);return _assign({action:{text:i},pay:_assign(_assign({},a),{goodsId:o}),tags:__spreadArray(__spreadArray([],__read(c?[{color:"blue",text:c}]:[]),!1),__read(s||[]),!1),online:r},l)}},attached:function(){this.sendLog(LogType.SHOW,"ask_pay_card")},sendLog:function(e,t){var n,i;void 0===t&&(t="component"),null===(i=null===(n=getRoot(this))||void 0===n?void 0:n.data.get("_logger"))||void 0===i||i.sendLog(e,"counseling",{value:t})},handleCardClick:function(e){this.sendLog(LogType.CLICK,"ask_pay_card"),this.jumpLink(e)},handleButtonClick:function(e){this.sendLog(LogType.CLICK,"go_ask"),this.jumpLink(e)},jumpLink:function(e){var t=e.link;t&&getSDKApis().link(t)},handleShowPaymentPanel:function(){this.sendLog(LogType.SHOW,"pay_half_box")}}),css_248z$3=".agent-ui-weather.hide{display:none}.agent-ui-weather .cos-swiper{height:auto;min-height:106px}.agent-ui-weather .cos-swiper .cos-swiper-content{height:100%}.agent-ui-weather-pc .cosd-weather{max-width:456px;width:100%}",WeatherTypeCnEnum,AirQualityLevel;styleInject(css_248z$3),function(e){e.HeavyFog="",e.LightFog="",e.LightToModerateRain="",e.Snowstorm="",e.VerticalSnowfall="",e.FloatingDust="",e.Thunderstorm="",e.LightToModerateSnow="",e.ExtraThickFog="",e.HeavySnow="",e.BlowingSnow="",e.ModerateRain="",e.Tornado="",e.DenseFog="",e.Haze="",e.HeavyRainToTorrentialRain="",e.Overcast="",e.ExtremelyHeavyRain="",e.ModerateSnow="",e.ThunderstormWithHail="",e.SunnyNight="",e.TorrentialRainToExtremelyHeavyRain="",e.Rainstorm="",e.Cloudy="",e.Blizzard="",e.DenseFogWithVeryLowVisibility="",e.CloudyNight="",e.MixedRainSnow="",e.Fog="",e.SevereRainToHeavyRain="",e.ModerateToHeavyRain="",e.SnowShower="",e.Dust="",e.Rain="",e.FreezingRain="",e.StrongSandstorm="",e.Sunny="",e.ModerateHaze="",e.HeavyRain="",e.SnowShowerNight="",e.Sandstorm="",e.RainShowerNight="",e.TorrentialRain="",e.Snow="",e.LightSnow="",e.ModerateToHeavySnow="",e.RainShower="",e.SevereHaze="",e.oderateHazeTwo="",e.LightRain=""}(WeatherTypeCnEnum||(WeatherTypeCnEnum={})),function(e){e.Excellent="",e.Good="",e.Mild="",e.Moderate="",e.Severe="",e.Critical="",e.None=""}(AirQualityLevel||(AirQualityLevel={}));var formateDate=function(e){if(!e)return{month:"",day:"",hour:"",minute:""};if(e.indexOf("-")>-1&&(e=e.replace(/-/g,"/")),2===e.split("/").length){var t=new Date(Date.now()).getFullYear().toString();e=e.includes(t)?e:"".concat(t,"/").concat(e)}var n=new Date(e);if(!n)return{month:"",day:"",hour:"",minute:""};var i=n.getMonth()+1,o=n.getDate(),a=n.getHours(),r=n.getMinutes(),s=i.toString(),c=o.toString(),l=a.toString(),d=r.toString();return i<10&&(s="0".concat(i)),o<10&&(c="0".concat(o)),a<10&&(l="0".concat(a)),r<10&&(d="0".concat(r)),{month:s,day:c,hour:l,minute:d}},AgentUIWeather=san.defineComponent({template:"\n        <div class=\"agent-ui-weather {{weatherData ? '': 'hide'}}{{\n            _isPC ? ' agent-ui-weather-pc' : ''\n        }}\">\n            <cosd-weather\n                s-bind=\"{{filterWeatherData}}\"\n            />\n        </div>\n    ",initData:function(){return{_isPC:!!isPC()}},components:{"cosd-weather":cosmic.Weather},computed:{filterWeatherData:function(){var e,t,n,i,o=this.data.get("weatherData")||{address:"",updateTime:"",condition:"",temperature:{},airQuality:{},wind:{},forecastDay:[]},a=_assign({},o);if(null==a?void 0:a.updateTime){var r=formateDate(null==a?void 0:a.updateTime),s=r.hour,c=r.minute;s&&c&&(a.updateTime="".concat(s,":").concat(c))}return(null===(e=null==a?void 0:a.forecastDay)||void 0===e?void 0:e.length)>7&&(a.forecastDay=null===(t=null==a?void 0:a.forecastDay)||void 0===t?void 0:t.splice(0,7)),(null===(n=null==a?void 0:a.forecastDay)||void 0===n?void 0:n.length)>0&&(a.forecastDay=null===(i=null==a?void 0:a.forecastDay)||void 0===i?void 0:i.map((function(e){var t=formateDate(e.date),n=t.month,i=t.day;return n&&i&&(e.date="".concat(n,"/").concat(i)),e}))),{address:a.address,updateTime:a.updateTime,condition:a.condition,temperature:a.temperature,airQuality:a.airQuality,wind:a.wind,forecasts:a.forecastDay}}}}),AgentUIInteractableImages=san.defineComponent({template:'\n        <div s-if="images.length > 0" class="agent-ui-interactable-images">\n            <cosd-interactable-images\n                images="{{images}}"\n                interactions="{{interactions}}"\n                preview="{{preview}}"\n                on-button-click="handleBtnClick"\n                on-download-click="handleDownloadImage"\n                on-preview-click="handlePreviewImage"\n            ></cosd-interactable-images>\n        </div>\n    ',components:{"cosd-interactable-images":cosmic.InteractableImages},initData:function(){return{images:[],interactions:[],preview:!0,_isPC:!!isPC()}},attached:function(){var e,t=this;(null===(e=this.data.get("images"))||void 0===e?void 0:e.length)>0?this.sendLog(LogType.SHOW,"component"):this.watch("images",(function(e){e.length>0&&t.sendLog(LogType.SHOW,"component")}))},sendLog:function(e,t,n){var i,o,a={ext:_assign({component_name:"image",pic_total_num:Array.isArray(this.data.get("images"))?this.data.get("images").length:0},n)};t&&(a=Object.assign({},a,{value:t})),null===(o=null===(i=getRoot(this))||void 0===i?void 0:i.data.get("_logger"))||void 0===o||o.sendLog(e,"interactable-images",a)},handlePreviewImage:function(e){var t=e.currentIndex,n=e.images,i=e.interactions;this.sendLog(LogType.CLICK,"component"),"number"==typeof t&&Array.isArray(n)&&Array.isArray(i)&&this.fire("preview-image",{currentIndex:t,images:n,interactions:i})},handleBtnClick:function(e){var t=e.linkInfo;this.sendLog(LogType.CLICK,"component_tool"),getSDKApis().link(t)},handleDownloadImage:function(e){var t=e.src;if(this.sendLog(LogType.CLICK,"component_download"),this.data.get("_isPC")){var n=document.createElement("a");n.target="_blank",n.style.display="none",fetch(t).then((function(e){return e.blob()})).then((function(e){n.href=URL.createObjectURL(e),n.download=t,document.body.appendChild(n),n.click(),n.remove()}))}else getSDKApis().link({url:t})}}),css_248z$2=".agent-ui-list-layout-scroll .cos-swiper-list{padding-left:var(--cos-space-none);padding-right:var(--cos-space-none)}.agent-ui-list-layout-scroll .cos-more-link{margin-right:var(--cos-space-xs);text-decoration:none;-webkit-tap-highlight-color:transparent}.agent-ui-list-layout-scroll .cos-more-link-text{width:1em}.agent-ui-list-layout-scroll .cos-more-link-icon{-webkit-box-flex:0;-webkit-flex:none;-ms-flex:none;flex:none}.agent-ui-list-layout-pagination .cos-more-link,.agent-ui-list-layout-vertical .cos-more-link{margin-top:var(--cos-space-md);text-decoration:none;-webkit-tap-highlight-color:transparent}.agent-ui-list-layout .agent-ui-list-item>div:first-child .cosd-location-card{padding-top:var(--cos-space-none)}.agent-ui-list-layout .agent-ui-list-item>div:last-child .cosd-location-card{padding-bottom:var(--cos-space-none)}.agent-ui-list-layout .alone-item .cos-swiper-list{padding-left:var(--cos-space-none);padding-right:var(--cos-space-none)}";styleInject(css_248z$2);var AgentUIListLayout=san.defineComponent({template:'\n        <div class="agent-ui-list-layout {{layoutClass}}">\n            \x3c!--  --\x3e\n            <cos-swiper\n                s-if="appearance === \'pagination\'"\n                s-ref="list-layout"\n                class="agent-ui-list-layout-pagination{{\n                    items.length <= 1 ? \' alone-item\' : \'\'\n                }}"\n                indicator="{{pages.length > 1 ? \'outer\' : \'\'}}"\n                snap-align="start"\n                snap-stop="always"\n                on-change="paginationChange"\n                on-scrollend="paginationScrollEnd"\n            >\n                <fragment s-for="page, pageIndex in pages">\n                    <cos-swiper-item\n                        width="100%"\n                        class="agent-ui-list-item"\n                        attr-page-index="{{pageIndex}}"\n                        attr-page-length="{{page.length}}"\n                    >\n                        <slot var-__page="page" var-__page_index="pageIndex"></slot>\n                    </cos-swiper-item>\n                </fragment>\n            </cos-swiper>\n\n            \x3c!--  --\x3e\n            <cos-swiper\n                s-else-if="appearance === \'scroll\'"\n                s-ref="list-layout"\n                space-between="{{8}}"\n                class="agent-ui-list-layout-scroll"\n                on-change="swiperChange"\n            >\n                <slot></slot>\n                \x3c!--  more-link  node  --\x3e\n                <cos-swiper-item s-if="showMoreLink" class="cos-flex cos-items-center">\n                    <div\n                        class="cos-space-pl-xs"\n                        data-agent-ui-exposure\n                        data-agent-ui-exposure-ext="{{moreLinkExposureLog}}"\n                    >\n                        <cos-more-link on-click="native:handleClick" />\n                    </div>\n                </cos-swiper-item>\n            </cos-swiper>\n\n            \x3c!--  --\x3e\n            <div\n                s-else\n                s-ref="list-layout"\n                class="agent-ui-list-layout-vertical"\n            >\n                <slot></slot>\n                \x3c!--  more-link  node  --\x3e\n                <div\n                    s-if="showMoreLink"\n                    class="cos-space-pl-xs"\n                    data-agent-ui-exposure\n                    data-agent-ui-exposure-ext="{{moreLinkExposureLog}}"\n                >\n                    <cos-more-link on-click="native:handleClick" />\n                </div>\n            </div>\n        </div>\n    ',components:{"cos-swiper":cosmic.Swiper,"cos-swiper-item":cosmic.SwiperItem,"cos-more-link":cosmic.MoreLink},computed:{pages:function(){var e=this.data.get("items"),t=[],n=[];return e.forEach((function(i,o){n.push(i),(o+1)%3!=0&&o!==e.length-1||(t.push(n),n=[])})),t},moreLinkLogExt:function(){var e=this.data.get("overscrollLink"),t="_drawer"===(null==e?void 0:e.target),n="scroll"===this.data.get("appearance");return{cs_component_name:"more_cpt",cs_action_type:t?"drawer":"link",component_content:{component_name:"more_cpt"},direction:n?"1":"0",with_component:this.data.get("type"),component_name:"check",action_type:t?2:1,check_more_type:n?2:1}},moreLinkExposureLog:function(){var e=this.data.get("moreLinkLogExt");return JSON.stringify({type:"more-link",cs_value:"more_cpt",ext:e})}},initData:function(){var e,t="pc"===PLATFORM;return{appearance:"",type:"",items:[],layoutClass:"",showMoreLink:!1,overscrollLink:{},_logger:null===(e=getRoot(this))||void 0===e?void 0:e.data.get("_logger"),_isPC:t}},attached:function(){this.data.get("showMoreLink")&&this.sendMoreLinkLog(LogType.SHOW)},sendMoreLinkLog:function(e){var t,n=this.data.get("moreLinkLogExt");null===(t=this.data.get("_logger"))||void 0===t||t.sendLog(e,"more-link",{value:"component",cs_value:"more_cpt",ext:_assign({valueInfo:[{component_name:"more_cpt"}]},n)})},swiperChange:function(){var e=this.data.get("_logger");"note-item"===this.data.get("type")&&(null==e||e.slide("note-list",{ext:{component_name:"note"}}))},paginationChange:function(){var e=this.data.get("_logger");"location-item"===this.data.get("type")&&(null==e||e.slide("location-list",{ext:{component_name:"poi"}}))},handleClick:function(){this.sendMoreLinkLog(LogType.CLICK);var e=this.data.get("overscrollLink");getLinkApis(this,this.data.get("type"),e)}}),AgentUIMoreLink=san.defineComponent({template:'\n        <div\n            s-if="link"\n            data-agent-ui-exposure\n            data-agent-ui-exposure-ext="{{exposureLog}}"\n        >\n            <cos-more-link\n                s-if="text"\n                on-click="native:handleClick">\n                {{text}}\n            </cos-more-link>\n            <cos-more-link s-else on-click="native:handleClick" />\n        </div>\n    ',components:{"cos-more-link":cosmic.MoreLink},computed:{praseLink:function(){var e=this.data.get("link");if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(t){return e}},logExt:function(){var e=this.data.get("praseLink");return{cs_component_name:"more_cpt",cs_action_type:"_drawer"===(null==e?void 0:e.target)?"drawer":"link",component_content:{component_name:"more_cpt"},direction:"0",component_name:"check",check_more_type:1,action_type:"_drawer"===(null==e?void 0:e.target)?2:1}},exposureLog:function(){var e=this.data.get("logExt");return JSON.stringify({type:"more-link",cs_value:"more_cpt",ext:e})}},sendLog:function(e){var t,n,i=this.data.get("logExt");null===(n=null===(t=getRoot(this))||void 0===t?void 0:t.data.get("_logger"))||void 0===n||n.sendLog(e,"more-link",{value:"component",cs_value:"more_cpt",ext:_assign({valueInfo:[{component_name:"more_cpt"}]},i)})},handleClick:function(){this.sendLog(LogType.CLICK);var e=this.data.get("praseLink");return getLinkApis(this,"more-link",e)},attached:function(){var e=this,t=!1;this.data.get("link")?(t=!0,this.sendLog(LogType.SHOW)):this.watch("link",(function(n){!t&&n&&(t=!0,e.sendLog(LogType.SHOW))}))}}),AgentUILocationItem=san.defineComponent({template:'\n        <cosd-location-card\n            thumbnail="{{coverImage}}"\n            title="{{title}}"\n            score="{{score}}"\n            address="{{address}}"\n            category="{{category}}"\n            averageCost="{{cost}}"\n            likeCount="{{favorNum}}"\n            openingHours="{{openingHours}}"\n            tags="{{parseTags}}"\n            on-click="native:handleClick"\n        />\n    ',components:{"cosd-location-card":cosmic.LocationCard},computed:{parseTags:function(){var e=this.data.get("rankTag"),t=(this.data.get("tags")||[]).map((function(e){return{color:"",text:e}}));return(e?[{color:"blue",text:e}]:[]).concat(t)},parsedLink:function(){var e=this.data.get("link");if(e){if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(t){return e}}}},initData:function(){var e;return{coverImage:"",title:"",score:void 0,address:"",category:"",cost:"",openingHours:"",rankTag:"",tags:void 0,link:{},_logger:null===(e=getRoot(this))||void 0===e?void 0:e.data.get("_logger")}},attached:function(){this.sendLog(LogType.SHOW)},handleClick:function(e){var t;e.preventDefault(),this.sendLog(LogType.CLICK,{result_url:(null===(t=this.data.get("parsedLink"))||void 0===t?void 0:t.url)||""});var n=this.data.get("parsedLink");n&&getLinkApis(this,"location-list",n)},sendLog:function(e,t){var n,i=this.data.get("__agentUIListItemIndex")||0;null===(n=this.data.get("_logger"))||void 0===n||n.sendLog(e,"location-list",{ext:_assign({result_pos:"".concat(i+1),component_name:"poi"},t)})}}),AgentUINoteItem=san.defineComponent({template:'\n        <cosd-note-card\n            thumbnail="{{coverImage}}"\n            likeCount="{{favorNum}}"\n            title="{{title}}"\n            isVideo="{{isVideo}}"\n            videoDuration="{{videoDuration}}"\n            author="{{parsedAuthorInfo}}"\n            tags="{{tags}}"\n            on-click="native:handleClick"\n        />\n    ',components:{"cosd-note-card":cosmic.NoteCard},initData:function(){var e;return{coverImage:"",favorNum:"",title:"",isVideo:!1,videoDuration:"",authorInfo:{avatar:"",name:""},link:{},tags:{},_logger:null===(e=getRoot(this))||void 0===e?void 0:e.data.get("_logger")}},computed:{parsedAuthorInfo:function(){var e=this.data.get("authorInfo");if(e){if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(t){return e}}},parsedLink:function(){var e=this.data.get("link");if(e){if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(t){return e}}}},attached:function(){this.sendLog(LogType.SHOW)},handleClick:function(e){var t;e.preventDefault(),this.sendLog(LogType.CLICK,{result_url:(null===(t=this.data.get("parsedLink"))||void 0===t?void 0:t.url)||"",resource_type:this.data.get("isVideo")?"":""});var n=this.data.get("parsedLink");n&&getLinkApis(this,"note-list",n)},sendLog:function(e,t){var n,i=this.data.get("__agentUIListItemIndex")||0;null===(n=this.data.get("_logger"))||void 0===n||n.sendLog(e,"note-list",{ext:_assign({result_pos:"".concat(i+1),component_name:"note"},t)})}}),css_248z$1=".agent-ui-site-vcard-pc{-webkit-box-sizing:border-box;box-sizing:border-box;width:66.67%}.agent-ui .agent-ui-list-layout-scroll .agent-ui-site-vcard-pc{width:100%}";styleInject(css_248z$1);var AgentUISiteVCard=san.defineComponent({template:'\n        <div\n            s-if="isShow"\n            class="agent-ui-site-vcard{{\n                _isPcComp ? \' agent-ui-site-vcard-pc\' : \'\'}}"\n            data-module="mlink"\n            data-agent-ui-exposure\n            data-agent-ui-exposure-ext="{{exposureLog}}"\n        >\n            <cosd-site-vcard\n                actionText="{{actionText}}"\n                title="{{title}}"\n                caption="{{caption}}"\n                logo="{{logo}}"\n                appearance="{{appearance}}"\n                on-click="native:handleLink"\n                on-button-click="handleBtnClick"\n            ></cosd-site-vcard>\n        </div>\n    ',components:{"cosd-site-vcard":cosmic.SiteVcard},computed:{isShow:function(){return this.data.get("title")||this.data.get("caption")||this.data.get("link")},parsedLink:function(){var e=this.data.get("link");if(e){if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(t){return e}}},logExt:function(){var e,t=this.data.get("title"),n="_drawer"===(null===(e=this.data.get("parsedLink"))||void 0===e?void 0:e.target)?2:1,i=this.data.get("logo")?"bar"===this.data.get("appearance")?1:2:0,o=this.data.get("actionText")?"1":"0",a=this.data.get("__agentUIList");return{component_name:"link",action_type:n,image_type:i,cs_component_name:"site-vcard",pic_type:i,is_button:o,component_content:{component_name:"site-vcard",component_content:t},card_num:"".concat((null==a?void 0:a.length)||1)}},exposureLog:function(){var e=this.data.get("logExt");return JSON.stringify({type:"site-vcard",cs_value:"mlink",ext:e})}},initData:function(){var e=getRoot(this);return{_logger:null==e?void 0:e.data.get("_logger"),_isPcComp:"pc"===(null==e?void 0:e.data.get("_platform"))}},handleLink:function(e){e.preventDefault(),this.sendLog(LogType.CLICK,"component",{target:e.target}),getLinkApis(this,"site-vcard",this.data.get("parsedLink"))},handleBtnClick:function(e){var t=e.event;this.sendLog(LogType.CLICK,"link_open"),this.data.get("__dyactionclick")&&(t.stopPropagation(),this.fire("click"))},sendLog:function(e,t,n){var i;void 0===t&&(t="component");var o=this.data.get("logExt");null===(i=this.data.get("_logger"))||void 0===i||i.sendLog(e,"site-vcard",_assign({value:t,cs_value:"mlink",ext:o},n?{data:n}:{}))},attached:function(){var e=this,t=!1;this.data.get("isShow")?(t=!0,this.sendLog(LogType.SHOW)):this.watch("isShow",(function(n){!t&&n&&(t=!0,e.sendLog(LogType.SHOW))}))}}),GoodsMountType;function transformToNewGoodsData(e){return e.coverImage&&(e.thumbnail=e.coverImage||"",e.coverImage=void 0),e.button&&(e.actionText=e.button.text||"",e.button=void 0),e.actionText&&(e.action={text:e.actionText},e.actionText=void 0),_assign({},e)}!function(e){e.Manual="1",e.Auto="2"}(GoodsMountType||(GoodsMountType={}));var AgentUIGoodsCard=san.defineComponent({template:'\n        <div\n            s-if="isShow"\n            class="agent-ui-goods-card"\n            data-agent-ui-exposure\n            data-agent-ui-exposure-ext="{{exposureLog}}"\n        >\n            <cosd-goods-card\n                linkInfo="{{linkInfo}}"\n                title="{{title}}"\n                thumbnail="{{thumbnail}}"\n                thumbnailRatio="{{thumbnailRatio}}"\n                price="{{price}}"\n                originPrice="{{originPrice}}"\n                sign="{{sign}}"\n                unit="{{unit}}"\n                tags="{{tags}}"\n                caption="{{caption}}"\n                action="{{parsedAction}}"\n                shop="{{parsedShop}}"\n                isVideo="{{isVideo}}"\n                appearance="{{appearance}}"\n                on-click="native:handleCardClick"\n                on-button-click="handleBtnClick"\n                on-shop-click="handleShopClick"\n            />\n        </div>\n    ',initData:function(){var e;return{_logger:null===(e=getRoot(this))||void 0===e?void 0:e.data.get("_logger")}},components:{"cosd-goods-card":cosmic.GoodsCard},computed:{isShow:function(){return this.data.get("title")||this.data.get("thumbnail")||this.data.get("link")},parsedGoodsData:function(){var e=this.data.get("goodsData")||this.data.get("goodData");if(e){if("string"!=typeof e)return transformToNewGoodsData(e);try{var t=JSON.parse(e);return t.tags&&"string"==typeof t.tags&&(t.tags=t.tags.split(",")),transformToNewGoodsData(t)}catch(t){return e}}},parsedShop:function(){var e=this.data.get("shop");if(e&&e.name){if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(t){return e}}},parsedAction:function(){var e=this.data.get("action");if(e&&e.text){if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(t){return e}}},exposureLog:function(){var e=this.data.get("goodsId")||"",t=this.data.get("__agentUIListItemIndex")||0,n=this.data.get("mountType");return JSON.stringify({type:"goods-card",cs_value:"product_card",ext:{cs_component_name:"goods-card",component_content:{component_name:"goods-card",product_id:e,product_pos:"".concat(t+1)},component_name:"product",comp_product_pos:"".concat(t+1),comp_product_id:e,comp_mount_type:n}})}},inited:function(){var e=this,t=this.data.get("parsedGoodsData");t&&this.data.assign(_assign({},t)),this.watch("parsedGoodsData",(function(t){e.data.assign(_assign({},t))}))},attached:function(){var e=this,t=!1;this.data.get("isShow")?(t=!0,this.sendLog(LogType.RECALL),this.sendLog(LogType.SHOW)):this.watch("isShow",(function(n){!t&&n&&(t=!0,e.sendLog(LogType.RECALL),e.sendLog(LogType.SHOW))}))},handleCardClick:function(){this.sendLog(LogType.CLICK),this.jumpToLink()},jumpToLink:function(){var e=this.data.get("link");if(e&&"string"!=typeof e)return getLinkApis(this,"goods-card",e);this.fire("click")},handleBtnClick:function(){if(this.sendLog(LogType.CLICK,"component_purchase"),this.data.get("__dyactionbuttonClick"))this.fire("button-click");else{var e=this.data.get("parsedAction.link");if(e)return getLinkApis(this,"goods-card",e);this.jumpToLink()}},handleShopClick:function(){this.sendLog(LogType.CLICK);var e=this.data.get("parsedShop.link");return getLinkApis(this,"goods-card",e)},sendLog:function(e,t){var n;void 0===t&&(t="component");var i=this.data.get("goodsId")||"",o=this.data.get("__agentUIListItemIndex")||0,a=this.data.get("mountType");null===(n=this.data.get("_logger"))||void 0===n||n.sendLog(e,"goods-card",{value:t,cs_value:"product_card",ext:{cs_component_name:"goods-card",product_id:i,product_pos:"".concat(o+1),component_name:"product",comp_product_id:i,comp_product_pos:"".concat(o+1),comp_mount_type:a}})}}),css_248z=".agent-ui-route-planner .cos-image-fit-cover .cos-image-body,.agent-ui-route-planner .cos-image-position-center .cos-image-body{display:block}";function transformToNewLocationItem(e){return e.coverImage&&(e.thumbnail=e.coverImage||"",e.coverImage=void 0),e.cost&&(e.averageCost=e.cost||"",e.cost=void 0),e.link&&(e.linkInfo=e.link||"",e.link=void 0),e.rankTag&&(e.tags=e.rankTag?__spreadArray([{text:e.rankTag,color:"blue"}],__read(e.tags||[]),!1):e.tags,e.rankTag=void 0),_assign({},e)}styleInject(css_248z);var AgentUIRoutePlanner=san.defineComponent({template:'\n        <cosd-route-planner\n            class="agent-ui-route-planner"\n            folded="{{folded}}"\n            location-list="{{parsedLocationList}}"\n            routeList="{{routeList}}"\n            on-location-click="handleLocationClick"\n            on-route-click="handleRouteClick"\n        />\n    ',initData:function(){return{folded:!0,locationList:[],routeList:[]}},components:{"cosd-route-planner":cosmic.RoutePlanner},computed:{parsedLocationList:function(){var e=this.data.get("locationList");return e&&Array.isArray(e)?e.map((function(e){return transformToNewLocationItem(e)})):e}},handleLocationClick:function(e){var t=e.item;getLinkApis(this,"route-planner",t.linkInfo)},handleRouteClick:function(e){var t=e.item;getLinkApis(this,"route-planner",t.linkInfo)}}),uniqueInstance=null,bd=null,touchStartTime=0,touchEndTime=0,pressTime=0,touchX=0,touchY=0,isStartScroll=!1,scrollLastY=0,scrollStartTime=0,scrollLastTime=0,scrollTotalTime=0,scrollDirection="none",scrollNum=0,scrollTotalChange=0,validDirection="none",scrollBoundary=10,clickTime=0,clickX=0,clickY=0,diffclickTimeAndTouchEndTime=0,cardSelector="",cardWidth=0,cardHeight=0;function collectionHas(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return!0;return!1}function findParentBySelector(e,t){for(var n=document.querySelectorAll(t),i=(null==e?void 0:e.parentNode)||null;i&&!collectionHas(n,i);)i=i.parentNode;return i}function setCardWidthAndHeight(e){var t=findParentBySelector(null==e?void 0:e.target,cardSelector);t&&(cardWidth=null==t?void 0:t.offsetWidth,cardHeight=null==t?void 0:t.offsetHeight)}function scrollCount(){scrollNum++,scrollTotalTime+=Math.round(scrollLastTime-scrollStartTime),validDirection="none"}function countScrollOnTouchStart(){isStartScroll&&"none"!==validDirection&&(scrollCount(),scrollTotalChange=0,isStartScroll=!1,scrollDirection="none")}function isValidScroll(e,t){return"none"===scrollDirection&&(scrollDirection=t),t!==scrollDirection?(scrollDirection=t,scrollTotalChange=0):scrollTotalChange+=e,scrollTotalChange>scrollBoundary}function getScrollDirection(e,t){return t>e?"up":t<e&&"down"}function getEventTime(e){return 0!==e.timeStamp?e.timeStamp:(new Date).getTime()}function onScrollEvent(e){isStartScroll||(isStartScroll=!0);var t=window.scrollY,n=Math.abs(t-scrollLastY),i=getScrollDirection(scrollLastY,t)||scrollDirection,o=getEventTime(e);isValidScroll(n,i)&&(o>scrollLastTime&&(scrollLastTime=o),"none"===validDirection&&(validDirection=scrollDirection,scrollStartTime=o),validDirection!==scrollDirection&&(scrollCount(),scrollStartTime=o,validDirection=scrollDirection)),scrollLastY=t}function onTouchStart(e){var t,n=null===(t=e.touches)||void 0===t?void 0:t.item(0);touchX=parseInt("".concat(null==n?void 0:n.pageX),10),touchY=parseInt("".concat(null==n?void 0:n.pageY),10),countScrollOnTouchStart(),touchStartTime=getEventTime(e),setCardWidthAndHeight(e)}function onTouchMove(e){onScrollEvent(e)}function onTouchEnd(e){touchEndTime=getEventTime(e),pressTime=touchEndTime>touchStartTime?Math.round(touchEndTime-touchStartTime):0,setCardWidthAndHeight(e)}function onClickEvent(e){clickTime=getEventTime(e),clickX=e.pageX,clickY=e.pageY,setCardWidthAndHeight(e)}function getCheckCode(e,t,n,i){var o=/link\?url\=([^\&]+)/,a=0,r=o.exec(e)||/\?url\=([^\.]+)\./.exec(e);if(r){var s=n*t%99+9,c=r[1]||"",l=null==c?void 0:c.length;o.exec(e)&&(l=c.length<20?null==c?void 0:c.length:20);for(var d=0;d<s;++d)a+=c.charCodeAt(i*d%l);return a}return!1}function getCkValue(e,t,n){if("string"!=typeof e)return!1;if(-1===e.indexOf("baidu.php?url=")&&-1===e.indexOf("link?url="))return!1;if(1===n)return"0.0.0.0.0.0.0.0.0.0.0";var i=getCheckCode(e,t,pressTime,touchX);return!1!==i&&(diffclickTimeAndTouchEndTime=0,clickTime>0&&clickTime>touchEndTime&&(diffclickTimeAndTouchEndTime=Math.round(clickTime-touchEndTime)),[i,pressTime,touchX,touchY,cardWidth,cardHeight,scrollNum,scrollTotalTime,diffclickTimeAndTouchEndTime,clickX,clickY].join("."))}function addCkOnUrl(e,t,n){var i=getCkValue(e,t,n);return!1===i||(-1===e.indexOf("&ck=")?e+="&ck="+i:e=e.replace(/&ck=[\w.]*/,"&ck="+i)),e}function clearCount(){scrollNum=0,scrollTotalTime=0}function addCkToADom(e,t,n){e.href=addCkOnUrl(e.href,t,n)}function getCkUrlWhenTouch(e,t,n){return clickTime=0,clickX=0,clickY=0,addCkOnUrl(e,t,n)}function getCkUrlWhenClick(e,t,n){var i=addCkOnUrl(e,t,n);return clearCount(),i}function addAdsCk(e,t){for(var n,i=[],o=e.length-1;o>=0;o--)for(var a=function(e){var n=i[e];"A"===(null==n?void 0:n.tagName)&&""!==n.href&&-1!==n.href.indexOf("baidu")&&(addCkToADom(n,t,1),n.addEventListener("touchend",(function(){clickTime=0,clickX=0,clickY=0,addCkToADom(n,t)}),!0),n.addEventListener("click",(function(){addCkToADom(n,t),clearCount()}),!0))},r=(i=(null===(n=e[o])||void 0===n?void 0:n.querySelectorAll("a"))||[]).length-1;r>=0;r--)a(r)}function removeListener(){null==bd||bd.removeEventListener("touchstart",onTouchStart,!0),null==bd||bd.removeEventListener("touchend",onTouchEnd,!0),null==bd||bd.removeEventListener("touchmove",onTouchMove,!0),null==bd||bd.removeEventListener("click",onClickEvent,!0),window.removeEventListener("scroll",onScrollEvent,!0)}function addListener(){var e;removeListener(),null==bd||bd.addEventListener("touchstart",onTouchStart,!0),null==bd||bd.addEventListener("touchend",onTouchEnd,!0),null==bd||bd.addEventListener("touchmove",onTouchMove,!0),null==bd||bd.addEventListener("click",onClickEvent,!0),window.addEventListener("scroll",onScrollEvent,!0),(null===(e=window.B)||void 0===e?void 0:e.one)&&window.one("destory",(function(){removeListener()}))}function constructor(e){return bd=document.body,touchStartTime=0,touchEndTime=0,pressTime=0,touchX=0,touchY=0,scrollLastY=0,scrollStartTime=0,scrollLastTime=0,scrollTotalTime=0,scrollDirection="none",scrollNum=0,scrollTotalChange=0,validDirection="none",clickTime=0,clickX=0,clickY=0,diffclickTimeAndTouchEndTime=0,cardWidth=0,cardHeight=0,cardSelector=e,addListener(),{addCkOnUrl:addCkOnUrl,getCkUrlWhenTouch:getCkUrlWhenTouch,getCkUrlWhenClick:getCkUrlWhenClick,clearCount:clearCount,addAdsCk:addAdsCk,removeListener:removeListener}}var ck={getInstance:function(e){return uniqueInstance||(uniqueInstance=constructor(e)),uniqueInstance}},AgentUIShopCard$1=san.defineComponent({template:'\n        <div\n            s-if="isShow"\n            s-ref="promoCardWrapRef"\n            data-agent-ui-fc-promo-exposure\n            data-agent-ui-fc-promo-exposure-url="{{exposureUrl}}"\n            data-ck\n        >\n            <cos-promo-card\n                thumbnail="{{thumbnail}}"\n                title="{{title}}"\n                caption="{{caption}}"\n                name="{{name}}"\n                appearance="{{appearance}}"\n                on-touchend="native:handleTouchEnd"\n                on-click="native:handleClick"\n            >\n            </cos-promo-card>\n        </div>\n    ',components:{"cos-promo-card":cosmic.PromoCard},initData:function(){return{link:null,thumbnail:"",title:"",caption:"",name:"",appearance:"",exposureUrl:"",imTimeSign:0,_ckInstance:ck.getInstance("[data-ck]"),_hasCkLink:"",__agentUIListItemIndex:0,__agentUIList:[]}},computed:{isShow:function(){return this.data.get("title")||this.data.get("thumbnail")||this.data.get("caption")},logExt:function(){var e=this.data.get("__agentUIListItemIndex")||0;return{component_name:"promo",comp_promo_pos:"".concat(e+1),promo_name:this.data.get("title")}},exposureLog:function(){var e=this.data.get("logExt");return JSON.stringify({type:"promo-card",ext:e})}},attached:function(){var e=this;this.initCkLink();var t=!1;this.data.get("isShow")?(t=!0,this.sendLog(LogType.SHOW)):this.watch("isShow",(function(n){!t&&n&&(t=!0,e.sendLog(LogType.SHOW))}))},sendLog:function(e,t,n){var i,o;void 0===t&&(t="component");var a=this.data.get("logExt");null===(o=null===(i=getRoot(this))||void 0===i?void 0:i.data.get("_logger"))||void 0===o||o.sendLog(e,"promo-card",{value:t,ext:_assign(_assign({},a),n)})},handleClick:function(){this.sendLog(LogType.CLICK);var e=this.data.get("link");if(e){var t=this.data.get("_ckInstance"),n=this.data.get("imTimeSign"),i=this.data.get("_hasCkLink"),o=(null==t?void 0:t.getCkUrlWhenClick(i,n))||e.url;return this.data.set("_hasCkLink",o),getLinkApis(this,"promo-card",_assign(_assign({},e),{url:o}))}},initCkLink:function(){var e=this.data.get("link"),t=(null==e?void 0:e.url)||"";if(t){var n=this.data.get("_ckInstance"),i=this.data.get("imTimeSign");t=(null==n?void 0:n.addCkOnUrl(t,i,1))||t}this.data.set("_hasCkLink",t)}}),AgentUIShopCard=san.defineComponent({template:'\n        <div\n            s-if="isShow"\n            data-agent-ui-exposure\n            data-agent-ui-exposure-ext="{{exposureLog}}"\n        >\n            <div s-if="{{__agentUIListItemIndex && __agentUIListItemIndex !== 0}}"\n                    class="cos-divider cos-space-mt-sm cos-space-mb-md"></div>\n            <cos-shop-card\n                title="{{title}}"\n                thumbnail="{{thumbnail}}"\n                score="{{score}}"\n                likeCount="{{likeCount}}"\n                address="{{address}}"\n                caption="{{caption}}"\n                action="{{action}}"\n                goods="{{goods}}"\n                appearance="{{appearance}}"\n                on-click="native:handleClick"\n                on-button-click="buttonClick"\n                on-goods-click="goodsClick">\n            </cos-shop-card>\n        </div>\n    ',components:{"cos-shop-card":cosmic.ShopCard},computed:{isShow:function(){return this.data.get("title")||this.data.get("thumbnail")||this.data.get("link")},logExt:function(){var e=this.data.get("__agentUIListItemIndex")||0,t=this.data.get("__agentUIList");return{cs_component_name:"shop_cpt",component_content:{component_name:"shop_cpt"},card_num:"".concat((null==t?void 0:t.length)||1),component_name:"shop",comp_product_pos:"".concat(e+1),shop_name:this.data.get("title")}},exposureLog:function(){var e=this.data.get("logExt");return JSON.stringify({type:"shop-card",cs_value:"shop_cpt",ext:e})}},attached:function(){var e=this,t=!1;this.data.get("isShow")?(t=!0,this.sendLog(LogType.SHOW)):this.watch("isShow",(function(n){!t&&n&&(t=!0,e.sendLog(LogType.SHOW))}))},sendLog:function(e,t,n){var i,o;void 0===t&&(t="component");var a=this.data.get("logExt");null===(o=null===(i=getRoot(this))||void 0===i?void 0:i.data.get("_logger"))||void 0===o||o.sendLog(e,"shop-card",{value:t,cs_value:"shop_cpt",ext:_assign(_assign({valueInfo:[{component_name:"shop_cpt"}]},a),n)})},handleClick:function(){this.sendLog(LogType.CLICK);var e=this.data.get("link");return getLinkApis(this,"shop-card",e)},buttonClick:function(){this.sendLog(LogType.CLICK,"component_ask");var e=this.data.get("action.link");return getLinkApis(this,"shop-card",e)},goodsClick:function(){this.sendLog(LogType.CLICK);var e=this.data.get("goods.link");return getLinkApis(this,"shop-card",e)}}),AgentUIStockPanel=san.defineComponent({template:'\n        <cos-stock-panel\n            content="{{content}}"\n            on-click="native:hanldeClick"\n        >\n        </cos-stock-panel>\n    ',components:{"cos-stock-panel":cosmic.StockPanelPc},initData:function(){return{content:{}}},hanldeClick:function(){}}),AgentUIStockFollowButton=san.defineComponent({template:'\n        <cos-stock-follow-button\n            code="{{code}}"\n            market="{{market}}"\n            type="{{type}}"\n            linkInfo="{{linkInfo}}"\n            on-click="onClick"\n        >\n        </cos-stock-follow-button>\n    ',components:{"cos-stock-follow-button":cosmic.StockFollowButton},initData:function(){return{code:"",market:"",type:"",linkInfo:{}}},onClick:function(e){if(null==e?void 0:e.linkInfo)return getLinkApis(this,"stock-follow-button",e.linkInfo)}}),AgentUIAccountList=san.defineComponent({template:'\n        <cos-account-list\n            stockBrokers="{{stockBrokers}}"\n            on-click="handleListClick"\n        >\n        </cos-account-list>\n    ',components:{"cos-account-list":cosmic.AccountList},initData:function(){return{stockBrokers:[]}},handleListClick:function(e){var t,n=e.index,i=this.data.get("stockBrokers"),o=null===(t=null==i?void 0:i[n])||void 0===t?void 0:t.link;o&&getLinkApis(this,"account-list",o)}}),AgentUITabbedStocks=san.defineComponent({template:'\n        <cos-tabbed-stocks\n            show-type="{{showType}}"\n            market-tabs="{{marketTabs}}"\n            chart-tabs="{{chartTabs}}"\n            market-tab-index="{{marketTabIndex}}"\n            multy-entity-tab-index="{{multyEntityTabIndex}}"\n            default-tab-index="{{defaultTabIndex}}"\n            multi-entity-tabs="{{multiEntityTabs}}"\n            chart-type-tabs="{{chartTypeTabs}}"\n            trading-counters="{{tradingCounters}}"\n            chart-type="{{chartType}}"\n            finance-type="{{financeType}}"\n            market="{{market}}"\n            code="{{code}}"\n            market-data="{{marketData}}"\n            pankou-info="{{pankouInfo}}"\n            is-kc="{{isKc}}"\n            up-down-status="{{upDownStatus}}"\n            update="{{update}}"\n            on-jump="onClick"\n            class="cos-dqa"\n        >\n        </cos-tabbed-stocks>\n    ',components:{"cos-tabbed-stocks":cosmic.TabbedStocks},initData:function(){return{showType:0,chartTabs:[],pankouInfo:{},multiEntityTabs:[],marketTabs:[],tradingCounters:[],chartTypeTabs:[],multyEntityTabIndex:0,marketTabIndex:0,chartType:"",financeType:"",market:"",code:"",marketData:{},update:{},upDownStatus:"",isKc:!1,defaultTabIndex:0}},onClick:function(e){if(null==e?void 0:e.pankouInfo){var t=e.pankouInfo,n=t.code,i=t.name,o=t.market,a=t.type,r={swan:{query:"type=".concat(a,"&code=").concat(n,"&name=").concat(i,"&market=").concat(o),path:"/pages/quote/quote",from:"1081000900000000",appKey:"EbYDmUrYmMYe0O11Nt95wCFRbFUv6IGw"},url:"https://pqa9p2.smartapps.baidu.com/pages/quote/quote?type=".concat(a,"&code=").concat(n,"&name=").concat(i,"&market=").concat(o),pcUrl:"https://gushitong.baidu.com/stock/".concat(o,"-").concat(n)};return getLinkApis(this,"tabbed-stocks",r)}}}),logExt={component_name:"reward",action_type:2},AgentUIRewardCard=san.defineComponent({template:'\n    <div \n        s-if="isShow"\n        class="agent-ui-reward-card"\n        data-agent-ui-exposure\n        data-agent-ui-exposure-ext="{{exposureLog}}"\n      >\n        <cosd-reward-card\n            action-text="{{actionText}}"\n            caption="{{caption}}"\n            title="{{title}}"\n            reward-data="{{rewardData}}"\n            on-click="native:handleCardClick"\n            on-btn-click="handleButtonClick"\n        />\n    </div>\n    ',components:{"cosd-reward-card":cosmic.RewardCard},computed:{isShow:function(){return this.data.get("title")},exposureLog:function(){return JSON.stringify({type:"reward-card",value:"component",ext:logExt})}},sendLog:function(e,t){var n,i;void 0===t&&(t="component"),null===(i=null===(n=getRoot(this))||void 0===n?void 0:n.data.get("_logger"))||void 0===i||i.sendLog(e,"reward-card",{value:t,ext:logExt})},handleCardClick:function(){this.sendLog(LogType.CLICK),this.fire("reward",this.data.get("rewardData"))},handleButtonClick:function(){this.sendLog(LogType.CLICK,"component_btn"),this.fire("reward",this.data.get("rewardData"))},attached:function(){var e=this;this.data.get("isShow")?this.sendLog(LogType.SHOW):this.watch("isShow",(function(t){t&&e.sendLog(LogType.SHOW)}))}}),AgentUIPieChart$2=san.defineComponent({template:'\n        <cosd-pie-chart\n            chart-data="{{chartData}}"\n            chart-options="{{chartOptions}}"\n            title="{{title}}"\n            sub-title="{{subTitle}}"\n            top-tip="{{topTip}}"\n            on-click="onClick"\n        />\n    ',components:{"cosd-pie-chart":cosmic.LineChart},initData:function(){return{title:"",subTitle:"",topTip:"",chartData:{},chartOptions:{},link:{}}},onClick:function(){var e=this.data.get("link");e&&getLinkApis(this,"pie-chart",e)}}),AgentUIPieChart$1=san.defineComponent({template:'\n        <cosd-bar-chart\n            title="{{title}}"\n            chart-tabs="{{chartTabs}}"\n            chart-tab-index="{{chartTabIndex}}"\n            chart-data="{{chartData}}"\n            chart-options="{{chartOptions}}"\n            legend="{{legend}}"\n            chart-tab-style="{{chartTabStyle}}"\n            class="cos-dqa"\n        />\n    ',components:{"cosd-bar-chart":cosmic.BarChart},initData:function(){return{title:"",chartTabs:[],chartTabIndex:0,chartData:{},chartOptions:{},legend:[],chartTabStyle:"tab"}}}),AgentUIFinancialList=san.defineComponent({template:'\n        <cosd-financial-list\n            tab-list="{{tabList}}"\n            tab-index="{{tabIndex}}"\n            headers="{{headers}}"\n            list="{{list}}"\n            list-type="{{listType}}"\n            fixed-first-column="{{fixedFirstColumn}}"\n            on-click="onClick"        \n        />\n    ',components:{"cosd-financial-list":cosmic.FinancialList},initData:function(){return{tabList:[],tabIndex:0,headers:[],list:[],listType:"",fixedFirstColumn:!0}},handleListClick:function(e){var t,n=e.index,i=this.data.get("list"),o=null===(t=null==i?void 0:i[n])||void 0===t?void 0:t.link;o&&getLinkApis(this,"financial-list",o)}}),AgentUIPieChart=san.defineComponent({template:'\n        <cosd-tabbed-financial-revenue\n            market-tabs="{{marketTabs}}"\n            market-tab-index="{{marketTabIndex}}"\n            tip="{{tip}}"\n            latest-list="{{latestList}}"\n            chart-tabs="{{chartTabs}}"\n            chart-tab-index="{{chartTabIndex}}"\n            chart-options="{{chartOptions}}"\n            description="{{description}}"\n            class="cos-dqa"\n        />\n    ',components:{"cosd-tabbed-financial-revenue":cosmic.TabbedFinancialRevenue},initData:function(){return{marketTabs:[],marketTabIndex:0,tip:"",latestList:[],chartOptions:{},chartTabs:[],chartTabIndex:0,description:""}}}),AgentUIStockIndexMap=san.defineComponent({template:'\n        <cos-stock-index-map\n            stocks="{{stocks}}"\n            on-item-click="handleClickItem"\n        >\n        </cos-stock-index-map>\n    ',components:{"cos-stock-index-map":cosmic.StockIndexMap},initData:function(){return{stocks:[]}},handleClickItem:function(e){var t,n,i,o,a,r,s,c,l,d,p=e.evt,h=e.item;if(p.preventDefault(),null==h?void 0:h.link){var u={url:null===(t=null==h?void 0:h.link)||void 0===t?void 0:t.url,pcUrl:null===(n=null==h?void 0:h.link)||void 0===n?void 0:n.pcUrl,swan:{appKey:null===(o=null===(i=null==h?void 0:h.link)||void 0===i?void 0:i.swan)||void 0===o?void 0:o.appKey,path:null===(r=null===(a=null==h?void 0:h.link)||void 0===a?void 0:a.swan)||void 0===r?void 0:r.path,query:null===(c=null===(s=null==h?void 0:h.link)||void 0===s?void 0:s.swan)||void 0===c?void 0:c.query,from:null===(d=null===(l=null==h?void 0:h.link)||void 0===l?void 0:l.swan)||void 0===d?void 0:d.from}};return getLinkApis(this,"stock-index-map",u)}}}),AgentUIStockMarketIndex=san.defineComponent({template:'\n        <cos-stock-market-index\n            indices="{{indices}}"\n            on-item-click="handleClickItem"\n            class="cos-dqa"\n        >\n        </cos-stock-market-index>\n    ',components:{"cos-stock-market-index":cosmic.StockMarketIndexPc},initData:function(){return{indices:[]}},handleClickItem:function(e){var t,n,i,o,a,r,s,c,l,d,p=e.evt,h=e.item;if(p.preventDefault(),null==h?void 0:h.link){var u={url:null===(t=null==h?void 0:h.link)||void 0===t?void 0:t.url,pcUrl:null===(n=null==h?void 0:h.link)||void 0===n?void 0:n.pcUrl,swan:{appKey:null===(o=null===(i=null==h?void 0:h.link)||void 0===i?void 0:i.swan)||void 0===o?void 0:o.appKey,path:null===(r=null===(a=null==h?void 0:h.link)||void 0===a?void 0:a.swan)||void 0===r?void 0:r.path,query:null===(c=null===(s=null==h?void 0:h.link)||void 0===s?void 0:s.swan)||void 0===c?void 0:c.query,from:null===(d=null===(l=null==h?void 0:h.link)||void 0===l?void 0:l.swan)||void 0===d?void 0:d.from}};return getLinkApis(this,"stock-market-index",u)}}}),components={text:AgentUIText,button:AgentUIButton,markdown:AgentUIMarkdown,image:AgentUIImage,audio:AgentUIAudio,video:AgentUIVideo$1,"rich-video-player":AgentUIVideo,echarts:AgentUIECharts,comparison:AgentUIComparison,"doctor-card":AgentUIDoctorCard,"car-price":cosmic.CarPrice,"image-with-callouts":cosmic.ImageWithCallouts,"installment-calculator":cosmic.InstallmentCalculator,quotation:cosmic.Quotation,"tabbed-images":cosmic.TabbedImagesPc,form:AgentUIForm,"base-clue-form":AgentUIClueForm,upload:AgentUIUpload,counseling:AgentUICounseling,"reward-card":AgentUIRewardCard,weather:AgentUIWeather,"market-chart":cosmic.MarketChart,"tabbed-stocks":AgentUITabbedStocks,"interactable-images":AgentUIInteractableImages,"list-layout":AgentUIListLayout,swiper:cosmic.Swiper,"swiper-item":cosmic.SwiperItem,"more-link":AgentUIMoreLink,"tab-pane":cosmic.TabPane,tab:cosmic.Tab,tabs:cosmic.Tabs,"location-item":AgentUILocationItem,"note-item":AgentUINoteItem,"site-vcard":AgentUISiteVCard,"goods-card":AgentUIGoodsCard,"route-planner":AgentUIRoutePlanner,"promo-card":AgentUIShopCard$1,"shop-card":AgentUIShopCard,"stock-panel":AgentUIStockPanel,"stock-follow-button":AgentUIStockFollowButton,"account-list":AgentUIAccountList,"stock-market-index":AgentUIStockMarketIndex,"stock-index-map":AgentUIStockIndexMap,"stock-bar":cosmic.StockBar,"financial-revenue":cosmic.FinancialRevenue,"tabbed-financial-revenue":AgentUIPieChart,"financial-rank":cosmic.FinancialRank,"pie-chart":AgentUIPieChart$2,"radar-chart":cosmic.RadarChart,"bar-chart":AgentUIPieChart$1,"financial-list":AgentUIFinancialList},sdk=new AgentUISDK({env:{type:"chat-view"}},components);exports.sdk=sdk})),require(["js/cosmic-agent-ui.pc.D3zcnH4y"]);
